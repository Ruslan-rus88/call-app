var _0=Object.create;var Yo=Object.defineProperty,R0=Object.defineProperties,N0=Object.getOwnPropertyDescriptor,M0=Object.getOwnPropertyDescriptors,A0=Object.getOwnPropertyNames,Jo=Object.getOwnPropertySymbols,x0=Object.getPrototypeOf,Hl=Object.prototype.hasOwnProperty,jv=Object.prototype.propertyIsEnumerable;var $r=(e,t)=>(t=Symbol[e])?t:Symbol.for("Symbol."+e),k0=e=>{throw TypeError(e)};var Fv=(e,t,n)=>t in e?Yo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,E=(e,t)=>{for(var n in t||={})Hl.call(t,n)&&Fv(e,n,t[n]);if(Jo)for(var n of Jo(t))jv.call(t,n)&&Fv(e,n,t[n]);return e},R=(e,t)=>R0(e,M0(t));var Uv=e=>typeof e=="symbol"?e:e+"",_n=(e,t)=>{var n={};for(var r in e)Hl.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&Jo)for(var r of Jo(e))t.indexOf(r)<0&&jv.call(e,r)&&(n[r]=e[r]);return n};var rr=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),ns=(e,t)=>{for(var n in t)Yo(e,n,{get:t[n],enumerable:!0})},O0=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of A0(t))!Hl.call(e,i)&&i!==n&&Yo(e,i,{get:()=>t[i],enumerable:!(r=N0(t,i))||r.enumerable});return e};var rs=(e,t,n)=>(n=e!=null?_0(x0(e)):{},O0(t||!e||!e.__esModule?Yo(n,"default",{value:e,enumerable:!0}):n,e));var g=(e,t,n)=>new Promise((r,i)=>{var s=c=>{try{a(n.next(c))}catch(u){i(u)}},o=c=>{try{a(n.throw(c))}catch(u){i(u)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(s,o);a((n=n.apply(e,t)).next())}),ir=function(e,t){this[0]=e,this[1]=t},zl=(e,t,n)=>{var r=(o,a,c,u)=>{try{var l=n[o](a),d=(a=l.value)instanceof ir,f=l.done;Promise.resolve(d?a[0]:a).then(h=>d?r(o==="return"?o:"next",a[1]?{done:h.done,value:h.value}:h,c,u):c({value:h,done:f})).catch(h=>r("throw",h,c,u))}catch(h){u(h)}},i=o=>s[o]=a=>new Promise((c,u)=>r(o,a,c,u)),s={};return n=n.apply(e,t),s[$r("asyncIterator")]=()=>s,i("next"),i("throw"),i("return"),s},ql=e=>{var t=e[$r("asyncIterator")],n=!1,r,i={};return t==null?(t=e[$r("iterator")](),r=s=>i[s]=o=>t[s](o)):(t=t.call(e),r=s=>i[s]=o=>{if(n){if(n=!1,s==="throw")throw o;return o}return n=!0,{done:!1,value:new ir(new Promise(a=>{var c=t[s](o);c instanceof Object||k0("Object expected"),a(c)}),1)}}),i[$r("iterator")]=()=>i,r("next"),"throw"in t?r("throw"):i.throw=s=>{throw s},"return"in t&&r("return"),i},Vv=(e,t,n)=>(t=e[$r("asyncIterator")])?t.call(e):(e=e[$r("iterator")](),t={},n=(r,i)=>(i=e[r])&&(t[r]=s=>new Promise((o,a,c)=>(s=i.call(e,s),c=s.done,Promise.resolve(s.value).then(u=>o({value:u,done:c}),a)))),n("next"),n("return"),t);var dm=rr((xq,lm)=>{"use strict";var w={};w.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)};w.localCName=w.generateIdentifier();w.splitLines=function(e){return e.trim().split(`
`).map(t=>t.trim())};w.splitSections=function(e){return e.split(`
m=`).map((n,r)=>(r>0?"m="+n:n).trim()+`\r
`)};w.getDescription=function(e){let t=w.splitSections(e);return t&&t[0]};w.getMediaSections=function(e){let t=w.splitSections(e);return t.shift(),t};w.matchPrefix=function(e,t){return w.splitLines(e).filter(n=>n.indexOf(t)===0)};w.parseCandidate=function(e){let t;e.indexOf("a=candidate:")===0?t=e.substring(12).split(" "):t=e.substring(10).split(" ");let n={foundation:t[0],component:{1:"rtp",2:"rtcp"}[t[1]]||t[1],protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]};for(let r=8;r<t.length;r+=2)switch(t[r]){case"raddr":n.relatedAddress=t[r+1];break;case"rport":n.relatedPort=parseInt(t[r+1],10);break;case"tcptype":n.tcpType=t[r+1];break;case"ufrag":n.ufrag=t[r+1],n.usernameFragment=t[r+1];break;default:n[t[r]]===void 0&&(n[t[r]]=t[r+1]);break}return n};w.writeCandidate=function(e){let t=[];t.push(e.foundation);let n=e.component;n==="rtp"?t.push(1):n==="rtcp"?t.push(2):t.push(n),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port);let r=e.type;return t.push("typ"),t.push(r),r!=="host"&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&e.protocol.toLowerCase()==="tcp"&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")};w.parseIceOptions=function(e){return e.substring(14).split(" ")};w.parseRtpMap=function(e){let t=e.substring(9).split(" "),n={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),n.name=t[0],n.clockRate=parseInt(t[1],10),n.channels=t.length===3?parseInt(t[2],10):1,n.numChannels=n.channels,n};w.writeRtpMap=function(e){let t=e.payloadType;e.preferredPayloadType!==void 0&&(t=e.preferredPayloadType);let n=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(n!==1?"/"+n:"")+`\r
`};w.parseExtmap=function(e){let t=e.substring(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1],attributes:t.slice(2).join(" ")}};w.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&e.direction!=="sendrecv"?"/"+e.direction:"")+" "+e.uri+(e.attributes?" "+e.attributes:"")+`\r
`};w.parseFmtp=function(e){let t={},n,r=e.substring(e.indexOf(" ")+1).split(";");for(let i=0;i<r.length;i++)n=r[i].trim().split("="),t[n[0].trim()]=n[1];return t};w.writeFmtp=function(e){let t="",n=e.payloadType;if(e.preferredPayloadType!==void 0&&(n=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){let r=[];Object.keys(e.parameters).forEach(i=>{e.parameters[i]!==void 0?r.push(i+"="+e.parameters[i]):r.push(i)}),t+="a=fmtp:"+n+" "+r.join(";")+`\r
`}return t};w.parseRtcpFb=function(e){let t=e.substring(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}};w.writeRtcpFb=function(e){let t="",n=e.payloadType;return e.preferredPayloadType!==void 0&&(n=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach(r=>{t+="a=rtcp-fb:"+n+" "+r.type+(r.parameter&&r.parameter.length?" "+r.parameter:"")+`\r
`}),t};w.parseSsrcMedia=function(e){let t=e.indexOf(" "),n={ssrc:parseInt(e.substring(7,t),10)},r=e.indexOf(":",t);return r>-1?(n.attribute=e.substring(t+1,r),n.value=e.substring(r+1)):n.attribute=e.substring(t+1),n};w.parseSsrcGroup=function(e){let t=e.substring(13).split(" ");return{semantics:t.shift(),ssrcs:t.map(n=>parseInt(n,10))}};w.getMid=function(e){let t=w.matchPrefix(e,"a=mid:")[0];if(t)return t.substring(6)};w.parseFingerprint=function(e){let t=e.substring(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1].toUpperCase()}};w.getDtlsParameters=function(e,t){return{role:"auto",fingerprints:w.matchPrefix(e+t,"a=fingerprint:").map(w.parseFingerprint)}};w.writeDtlsParameters=function(e,t){let n="a=setup:"+t+`\r
`;return e.fingerprints.forEach(r=>{n+="a=fingerprint:"+r.algorithm+" "+r.value+`\r
`}),n};w.parseCryptoLine=function(e){let t=e.substring(9).split(" ");return{tag:parseInt(t[0],10),cryptoSuite:t[1],keyParams:t[2],sessionParams:t.slice(3)}};w.writeCryptoLine=function(e){return"a=crypto:"+e.tag+" "+e.cryptoSuite+" "+(typeof e.keyParams=="object"?w.writeCryptoKeyParams(e.keyParams):e.keyParams)+(e.sessionParams?" "+e.sessionParams.join(" "):"")+`\r
`};w.parseCryptoKeyParams=function(e){if(e.indexOf("inline:")!==0)return null;let t=e.substring(7).split("|");return{keyMethod:"inline",keySalt:t[0],lifeTime:t[1],mkiValue:t[2]?t[2].split(":")[0]:void 0,mkiLength:t[2]?t[2].split(":")[1]:void 0}};w.writeCryptoKeyParams=function(e){return e.keyMethod+":"+e.keySalt+(e.lifeTime?"|"+e.lifeTime:"")+(e.mkiValue&&e.mkiLength?"|"+e.mkiValue+":"+e.mkiLength:"")};w.getCryptoParameters=function(e,t){return w.matchPrefix(e+t,"a=crypto:").map(w.parseCryptoLine)};w.getIceParameters=function(e,t){let n=w.matchPrefix(e+t,"a=ice-ufrag:")[0],r=w.matchPrefix(e+t,"a=ice-pwd:")[0];return n&&r?{usernameFragment:n.substring(12),password:r.substring(10)}:null};w.writeIceParameters=function(e){let t="a=ice-ufrag:"+e.usernameFragment+`\r
a=ice-pwd:`+e.password+`\r
`;return e.iceLite&&(t+=`a=ice-lite\r
`),t};w.parseRtpParameters=function(e){let t={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},r=w.splitLines(e)[0].split(" ");t.profile=r[2];for(let s=3;s<r.length;s++){let o=r[s],a=w.matchPrefix(e,"a=rtpmap:"+o+" ")[0];if(a){let c=w.parseRtpMap(a),u=w.matchPrefix(e,"a=fmtp:"+o+" ");switch(c.parameters=u.length?w.parseFmtp(u[0]):{},c.rtcpFeedback=w.matchPrefix(e,"a=rtcp-fb:"+o+" ").map(w.parseRtcpFb),t.codecs.push(c),c.name.toUpperCase()){case"RED":case"ULPFEC":t.fecMechanisms.push(c.name.toUpperCase());break;default:break}}}w.matchPrefix(e,"a=extmap:").forEach(s=>{t.headerExtensions.push(w.parseExtmap(s))});let i=w.matchPrefix(e,"a=rtcp-fb:* ").map(w.parseRtcpFb);return t.codecs.forEach(s=>{i.forEach(o=>{s.rtcpFeedback.find(c=>c.type===o.type&&c.parameter===o.parameter)||s.rtcpFeedback.push(o)})}),t};w.writeRtpDescription=function(e,t){let n="";n+="m="+e+" ",n+=t.codecs.length>0?"9":"0",n+=" "+(t.profile||"UDP/TLS/RTP/SAVPF")+" ",n+=t.codecs.map(i=>i.preferredPayloadType!==void 0?i.preferredPayloadType:i.payloadType).join(" ")+`\r
`,n+=`c=IN IP4 0.0.0.0\r
`,n+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,t.codecs.forEach(i=>{n+=w.writeRtpMap(i),n+=w.writeFmtp(i),n+=w.writeRtcpFb(i)});let r=0;return t.codecs.forEach(i=>{i.maxptime>r&&(r=i.maxptime)}),r>0&&(n+="a=maxptime:"+r+`\r
`),t.headerExtensions&&t.headerExtensions.forEach(i=>{n+=w.writeExtmap(i)}),n};w.parseRtpEncodingParameters=function(e){let t=[],n=w.parseRtpParameters(e),r=n.fecMechanisms.indexOf("RED")!==-1,i=n.fecMechanisms.indexOf("ULPFEC")!==-1,s=w.matchPrefix(e,"a=ssrc:").map(l=>w.parseSsrcMedia(l)).filter(l=>l.attribute==="cname"),o=s.length>0&&s[0].ssrc,a,c=w.matchPrefix(e,"a=ssrc-group:FID").map(l=>l.substring(17).split(" ").map(f=>parseInt(f,10)));c.length>0&&c[0].length>1&&c[0][0]===o&&(a=c[0][1]),n.codecs.forEach(l=>{if(l.name.toUpperCase()==="RTX"&&l.parameters.apt){let d={ssrc:o,codecPayloadType:parseInt(l.parameters.apt,10)};o&&a&&(d.rtx={ssrc:a}),t.push(d),r&&(d=JSON.parse(JSON.stringify(d)),d.fec={ssrc:o,mechanism:i?"red+ulpfec":"red"},t.push(d))}}),t.length===0&&o&&t.push({ssrc:o});let u=w.matchPrefix(e,"b=");return u.length&&(u[0].indexOf("b=TIAS:")===0?u=parseInt(u[0].substring(7),10):u[0].indexOf("b=AS:")===0?u=parseInt(u[0].substring(5),10)*1e3*.95-50*40*8:u=void 0,t.forEach(l=>{l.maxBitrate=u})),t};w.parseRtcpParameters=function(e){let t={},n=w.matchPrefix(e,"a=ssrc:").map(s=>w.parseSsrcMedia(s)).filter(s=>s.attribute==="cname")[0];n&&(t.cname=n.value,t.ssrc=n.ssrc);let r=w.matchPrefix(e,"a=rtcp-rsize");t.reducedSize=r.length>0,t.compound=r.length===0;let i=w.matchPrefix(e,"a=rtcp-mux");return t.mux=i.length>0,t};w.writeRtcpParameters=function(e){let t="";return e.reducedSize&&(t+=`a=rtcp-rsize\r
`),e.mux&&(t+=`a=rtcp-mux\r
`),e.ssrc!==void 0&&e.cname&&(t+="a=ssrc:"+e.ssrc+" cname:"+e.cname+`\r
`),t};w.parseMsid=function(e){let t,n=w.matchPrefix(e,"a=msid:");if(n.length===1)return t=n[0].substring(7).split(" "),{stream:t[0],track:t[1]};let r=w.matchPrefix(e,"a=ssrc:").map(i=>w.parseSsrcMedia(i)).filter(i=>i.attribute==="msid");if(r.length>0)return t=r[0].value.split(" "),{stream:t[0],track:t[1]}};w.parseSctpDescription=function(e){let t=w.parseMLine(e),n=w.matchPrefix(e,"a=max-message-size:"),r;n.length>0&&(r=parseInt(n[0].substring(19),10)),isNaN(r)&&(r=65536);let i=w.matchPrefix(e,"a=sctp-port:");if(i.length>0)return{port:parseInt(i[0].substring(12),10),protocol:t.fmt,maxMessageSize:r};let s=w.matchPrefix(e,"a=sctpmap:");if(s.length>0){let o=s[0].substring(10).split(" ");return{port:parseInt(o[0],10),protocol:o[1],maxMessageSize:r}}};w.writeSctpDescription=function(e,t){let n=[];return e.protocol!=="DTLS/SCTP"?n=["m="+e.kind+" 9 "+e.protocol+" "+t.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+t.port+`\r
`]:n=["m="+e.kind+" 9 "+e.protocol+" "+t.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+t.port+" "+t.protocol+` 65535\r
`],t.maxMessageSize!==void 0&&n.push("a=max-message-size:"+t.maxMessageSize+`\r
`),n.join("")};w.generateSessionId=function(){return Math.random().toString().substr(2,22)};w.writeSessionBoilerplate=function(e,t,n){let r,i=t!==void 0?t:2;return e?r=e:r=w.generateSessionId(),`v=0\r
o=`+(n||"thisisadapterortc")+" "+r+" "+i+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`};w.getDirection=function(e,t){let n=w.splitLines(e);for(let r=0;r<n.length;r++)switch(n[r]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return n[r].substring(2);default:}return t?w.getDirection(t):"sendrecv"};w.getKind=function(e){return w.splitLines(e)[0].split(" ")[0].substring(2)};w.isRejected=function(e){return e.split(" ",2)[1]==="0"};w.parseMLine=function(e){let n=w.splitLines(e)[0].substring(2).split(" ");return{kind:n[0],port:parseInt(n[1],10),protocol:n[2],fmt:n.slice(3).join(" ")}};w.parseOLine=function(e){let n=w.matchPrefix(e,"o=")[0].substring(2).split(" ");return{username:n[0],sessionId:n[1],sessionVersion:parseInt(n[2],10),netType:n[3],addressType:n[4],address:n[5]}};w.isValidSDP=function(e){if(typeof e!="string"||e.length===0)return!1;let t=w.splitLines(e);for(let n=0;n<t.length;n++)if(t[n].length<2||t[n].charAt(1)!=="=")return!1;return!0};typeof lm=="object"&&(lm.exports=w)});var yT=rr((Ro,ll)=>{"use strict";(function(e,t){"use strict";var n="1.0.39",r="",i="?",s="function",o="undefined",a="object",c="string",u="major",l="model",d="name",f="type",h="vendor",p="version",m="architecture",y="console",v="mobile",S="tablet",_="smarttv",N="wearable",B="embedded",L=500,ae="Amazon",he="Apple",Bt="ASUS",Qi="BlackBerry",nr="Browser",$o="Chrome",w0="Edge",Ho="Firefox",zo="Google",Tv="Huawei",Fl="LG",jl="Microsoft",_v="Motorola",Xi="Opera",es="Samsung",Rv="Sharp",qo="Sony",Ul="Xiaomi",Vl="Zebra",Nv="Facebook",Mv="Chromium OS",Av="Mac OS",xv=" Browser",D0=function(Z,ne){var G={};for(var de in Z)ne[de]&&ne[de].length%2===0?G[de]=ne[de].concat(Z[de]):G[de]=Z[de];return G},Go=function(Z){for(var ne={},G=0;G<Z.length;G++)ne[Z[G].toUpperCase()]=Z[G];return ne},kv=function(Z,ne){return typeof Z===c?Vr(ne).indexOf(Vr(Z))!==-1:!1},Vr=function(Z){return Z.toLowerCase()},I0=function(Z){return typeof Z===c?Z.replace(/[^\d\.]/g,r).split(".")[0]:t},Bl=function(Z,ne){if(typeof Z===c)return Z=Z.replace(/^\s\s*/,r),typeof ne===o?Z:Z.substring(0,L)},ts=function(Z,ne){for(var G=0,de,an,$t,ie,z,Ht;G<ne.length&&!z;){var $l=ne[G],Lv=ne[G+1];for(de=an=0;de<$l.length&&!z&&$l[de];)if(z=$l[de++].exec(Z),z)for($t=0;$t<Lv.length;$t++)Ht=z[++an],ie=Lv[$t],typeof ie===a&&ie.length>0?ie.length===2?typeof ie[1]==s?this[ie[0]]=ie[1].call(this,Ht):this[ie[0]]=ie[1]:ie.length===3?typeof ie[1]===s&&!(ie[1].exec&&ie[1].test)?this[ie[0]]=Ht?ie[1].call(this,Ht,ie[2]):t:this[ie[0]]=Ht?Ht.replace(ie[1],ie[2]):t:ie.length===4&&(this[ie[0]]=Ht?ie[3].call(this,Ht.replace(ie[1],ie[2])):t):this[ie]=Ht||t;G+=2}},Wo=function(Z,ne){for(var G in ne)if(typeof ne[G]===a&&ne[G].length>0){for(var de=0;de<ne[G].length;de++)if(kv(ne[G][de],Z))return G===i?t:G}else if(kv(ne[G],Z))return G===i?t:G;return ne.hasOwnProperty("*")?ne["*"]:Z},T0={"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},Ov={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},Pv={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[p,[d,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[p,[d,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[d,p],[/opios[\/ ]+([\w\.]+)/i],[p,[d,Xi+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[p,[d,Xi+" GX"]],[/\bopr\/([\w\.]+)/i],[p,[d,Xi]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[p,[d,"Baidu"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer|sleipnir)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|duckduckgo|klar|helio)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[d,p],[/quark(?:pc)?\/([-\w\.]+)/i],[p,[d,"Quark"]],[/\bddg\/([\w\.]+)/i],[p,[d,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[p,[d,"UC"+nr]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[p,[d,"WeChat"]],[/konqueror\/([\w\.]+)/i],[p,[d,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[p,[d,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[p,[d,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[p,[d,"Smart Lenovo "+nr]],[/(avast|avg)\/([\w\.]+)/i],[[d,/(.+)/,"$1 Secure "+nr],p],[/\bfocus\/([\w\.]+)/i],[p,[d,Ho+" Focus"]],[/\bopt\/([\w\.]+)/i],[p,[d,Xi+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[p,[d,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[p,[d,"Dolphin"]],[/coast\/([\w\.]+)/i],[p,[d,Xi+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[p,[d,"MIUI "+nr]],[/fxios\/([-\w\.]+)/i],[p,[d,Ho]],[/\bqihu|(qi?ho?o?|360)browser/i],[[d,"360"+xv]],[/\b(qq)\/([\w\.]+)/i],[[d,/(.+)/,"$1Browser"],p],[/(oculus|sailfish|huawei|vivo|pico)browser\/([\w\.]+)/i],[[d,/(.+)/,"$1"+xv],p],[/samsungbrowser\/([\w\.]+)/i],[p,[d,es+" Internet"]],[/(comodo_dragon)\/([\w\.]+)/i],[[d,/_/g," "],p],[/metasr[\/ ]?([\d\.]+)/i],[p,[d,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[d,"Sogou Mobile"],p],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i],[d,p],[/(lbbrowser|rekonq)/i,/\[(linkedin)app\]/i],[d],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[d,Nv],p],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[d,p],[/\bgsa\/([\w\.]+) .*safari\//i],[p,[d,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[p,[d,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[p,[d,$o+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[d,$o+" WebView"],p],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[p,[d,"Android "+nr]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[d,p],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[p,[d,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[p,d],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[d,[p,Wo,T0]],[/(webkit|khtml)\/([\w\.]+)/i],[d,p],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[d,"Netscape"],p],[/(wolvic)\/([\w\.]+)/i],[d,p],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[p,[d,Ho+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[d,[p,/_/g,"."]],[/(cobalt)\/([\w\.]+)/i],[d,[p,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[m,"amd64"]],[/(ia32(?=;))/i],[[m,Vr]],[/((?:i[346]|x)86)[;\)]/i],[[m,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[m,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[m,"armhf"]],[/windows (ce|mobile); ppc;/i],[[m,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[m,/ower/,r,Vr]],[/(sun4\w)[;\)]/i],[[m,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[m,Vr]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[l,[h,es],[f,S]],[/\b((?:s[cgp]h|gt|sm)-(?![lr])\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]((?!sm-[lr])[-\w]+)/i,/sec-(sgh\w+)/i],[l,[h,es],[f,v]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[l,[h,he],[f,v]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[l,[h,he],[f,S]],[/(macintosh);/i],[l,[h,he]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[l,[h,Rv],[f,v]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[l,[h,Tv],[f,S]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[l,[h,Tv],[f,v]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite|pro)?)(?: bui|\))/i],[[l,/_/g," "],[h,Ul],[f,v]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[l,/_/g," "],[h,Ul],[f,S]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[l,[h,"OPPO"],[f,v]],[/\b(opd2\d{3}a?) bui/i],[l,[h,"OPPO"],[f,S]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[l,[h,"Vivo"],[f,v]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[l,[h,"Realme"],[f,v]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[l,[h,_v],[f,v]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[l,[h,_v],[f,S]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[l,[h,Fl],[f,S]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[l,[h,Fl],[f,v]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[l,[h,"Lenovo"],[f,S]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[l,/_/g," "],[h,"Nokia"],[f,v]],[/(pixel c)\b/i],[l,[h,zo],[f,S]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[l,[h,zo],[f,v]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[l,[h,qo],[f,v]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[l,"Xperia Tablet"],[h,qo],[f,S]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[l,[h,"OnePlus"],[f,v]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo(?!bc)\w\w)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[l,[h,ae],[f,S]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[l,/(.+)/g,"Fire Phone $1"],[h,ae],[f,v]],[/(playbook);[-\w\),; ]+(rim)/i],[l,h,[f,S]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[l,[h,Qi],[f,v]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[l,[h,Bt],[f,S]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[l,[h,Bt],[f,v]],[/(nexus 9)/i],[l,[h,"HTC"],[f,S]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[h,[l,/_/g," "],[f,v]],[/droid [\w\.]+; ((?:8[14]9[16]|9(?:0(?:48|60|8[01])|1(?:3[27]|66)|2(?:6[69]|9[56])|466))[gqswx])\w*(\)| bui)/i],[l,[h,"TCL"],[f,S]],[/(itel) ((\w+))/i],[[h,Vr],l,[f,Wo,{tablet:["p10001l","w7001"],"*":"mobile"}]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[l,[h,"Acer"],[f,S]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[l,[h,"Meizu"],[f,v]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[l,[h,"Ulefone"],[f,v]],[/droid.+; (a(?:015|06[35]|142p?))/i],[l,[h,"Nothing"],[f,v]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[h,l,[f,v]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[h,l,[f,S]],[/(surface duo)/i],[l,[h,jl],[f,S]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[l,[h,"Fairphone"],[f,v]],[/(u304aa)/i],[l,[h,"AT&T"],[f,v]],[/\bsie-(\w*)/i],[l,[h,"Siemens"],[f,v]],[/\b(rct\w+) b/i],[l,[h,"RCA"],[f,S]],[/\b(venue[\d ]{2,7}) b/i],[l,[h,"Dell"],[f,S]],[/\b(q(?:mv|ta)\w+) b/i],[l,[h,"Verizon"],[f,S]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[l,[h,"Barnes & Noble"],[f,S]],[/\b(tm\d{3}\w+) b/i],[l,[h,"NuVision"],[f,S]],[/\b(k88) b/i],[l,[h,"ZTE"],[f,S]],[/\b(nx\d{3}j) b/i],[l,[h,"ZTE"],[f,v]],[/\b(gen\d{3}) b.+49h/i],[l,[h,"Swiss"],[f,v]],[/\b(zur\d{3}) b/i],[l,[h,"Swiss"],[f,S]],[/\b((zeki)?tb.*\b) b/i],[l,[h,"Zeki"],[f,S]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[h,"Dragon Touch"],l,[f,S]],[/\b(ns-?\w{0,9}) b/i],[l,[h,"Insignia"],[f,S]],[/\b((nxa|next)-?\w{0,9}) b/i],[l,[h,"NextBook"],[f,S]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[h,"Voice"],l,[f,v]],[/\b(lvtel\-)?(v1[12]) b/i],[[h,"LvTel"],l,[f,v]],[/\b(ph-1) /i],[l,[h,"Essential"],[f,v]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[l,[h,"Envizen"],[f,S]],[/\b(trio[-\w\. ]+) b/i],[l,[h,"MachSpeed"],[f,S]],[/\btu_(1491) b/i],[l,[h,"Rotor"],[f,S]],[/(shield[\w ]+) b/i],[l,[h,"Nvidia"],[f,S]],[/(sprint) (\w+)/i],[h,l,[f,v]],[/(kin\.[onetw]{3})/i],[[l,/\./g," "],[h,jl],[f,v]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[l,[h,Vl],[f,S]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[l,[h,Vl],[f,v]],[/smart-tv.+(samsung)/i],[h,[f,_]],[/hbbtv.+maple;(\d+)/i],[[l,/^/,"SmartTV"],[h,es],[f,_]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[h,Fl],[f,_]],[/(apple) ?tv/i],[h,[l,he+" TV"],[f,_]],[/crkey/i],[[l,$o+"cast"],[h,zo],[f,_]],[/droid.+aft(\w+)( bui|\))/i],[l,[h,ae],[f,_]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[l,[h,Rv],[f,_]],[/(bravia[\w ]+)( bui|\))/i],[l,[h,qo],[f,_]],[/(mitv-\w{5}) bui/i],[l,[h,Ul],[f,_]],[/Hbbtv.*(technisat) (.*);/i],[h,l,[f,_]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[h,Bl],[l,Bl],[f,_]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[f,_]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[h,l,[f,y]],[/droid.+; (shield) bui/i],[l,[h,"Nvidia"],[f,y]],[/(playstation [345portablevi]+)/i],[l,[h,qo],[f,y]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[l,[h,jl],[f,y]],[/\b(sm-[lr]\d\d[05][fnuw]?s?)\b/i],[l,[h,es],[f,N]],[/((pebble))app/i],[h,l,[f,N]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[l,[h,he],[f,N]],[/droid.+; (glass) \d/i],[l,[h,zo],[f,N]],[/droid.+; (wt63?0{2,3})\)/i],[l,[h,Vl],[f,N]],[/(quest( \d| pro)?)/i],[l,[h,Nv],[f,N]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[h,[f,B]],[/(aeobc)\b/i],[l,[h,ae],[f,B]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[l,[f,v]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[l,[f,S]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[f,S]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[f,v]],[/(android[-\w\. ]{0,9});.+buil/i],[l,[h,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[p,[d,w0+"HTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[p,[d,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[d,p],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[p,d]],os:[[/microsoft (windows) (vista|xp)/i],[d,p],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[d,[p,Wo,Ov]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[p,Wo,Ov],[d,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[p,/_/g,"."],[d,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[d,Av],[p,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[p,d],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[d,p],[/\(bb(10);/i],[p,[d,Qi]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[p,[d,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[p,[d,Ho+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[p,[d,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[p,[d,"watchOS"]],[/crkey\/([\d\.]+)/i],[p,[d,$o+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[d,Mv],p],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[d,p],[/(sunos) ?([\w\.\d]*)/i],[[d,"Solaris"],p],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[d,p]]},Qe=function(Z,ne){if(typeof Z===a&&(ne=Z,Z=t),!(this instanceof Qe))return new Qe(Z,ne).getResult();var G=typeof e!==o&&e.navigator?e.navigator:t,de=Z||(G&&G.userAgent?G.userAgent:r),an=G&&G.userAgentData?G.userAgentData:t,$t=ne?D0(Pv,ne):Pv,ie=G&&G.userAgent==de;return this.getBrowser=function(){var z={};return z[d]=t,z[p]=t,ts.call(z,de,$t.browser),z[u]=I0(z[p]),ie&&G&&G.brave&&typeof G.brave.isBrave==s&&(z[d]="Brave"),z},this.getCPU=function(){var z={};return z[m]=t,ts.call(z,de,$t.cpu),z},this.getDevice=function(){var z={};return z[h]=t,z[l]=t,z[f]=t,ts.call(z,de,$t.device),ie&&!z[f]&&an&&an.mobile&&(z[f]=v),ie&&z[l]=="Macintosh"&&G&&typeof G.standalone!==o&&G.maxTouchPoints&&G.maxTouchPoints>2&&(z[l]="iPad",z[f]=S),z},this.getEngine=function(){var z={};return z[d]=t,z[p]=t,ts.call(z,de,$t.engine),z},this.getOS=function(){var z={};return z[d]=t,z[p]=t,ts.call(z,de,$t.os),ie&&!z[d]&&an&&an.platform&&an.platform!="Unknown"&&(z[d]=an.platform.replace(/chrome os/i,Mv).replace(/macos/i,Av)),z},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return de},this.setUA=function(z){return de=typeof z===c&&z.length>L?Bl(z,L):z,this},this.setUA(de),this};Qe.VERSION=n,Qe.BROWSER=Go([d,p,u]),Qe.CPU=Go([m]),Qe.DEVICE=Go([l,h,f,y,v,_,S,N,B]),Qe.ENGINE=Qe.OS=Go([d,p]),typeof Ro!==o?(typeof ll!==o&&ll.exports&&(Ro=ll.exports=Qe),Ro.UAParser=Qe):typeof define===s&&define.amd?define(function(){return Qe}):typeof e!==o&&(e.UAParser=Qe);var Br=typeof e!==o&&(e.jQuery||e.Zepto);if(Br&&!Br.ua){var Ko=new Qe;Br.ua=Ko.getResult(),Br.ua.get=function(){return Ko.getUA()},Br.ua.set=function(Z){Ko.setUA(Z);var ne=Ko.getResult();for(var G in ne)Br.ua[G]=ne[G]}}})(typeof window=="object"?window:Ro)});var Jm=rr((p7,bT)=>{"use strict";var vT=bT.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(e){return e.encoding?"rtpmap:%d %s/%s/%s":e.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(e){return e.address!=null?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(e){return e.subtype!=null?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(e){return"extmap:%d"+(e.direction?"/%s":"%v")+(e["encrypt-uri"]?" %s":"%v")+" %s"+(e.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(e){return e.sessionConfig!=null?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(e){var t="candidate:%s %d %s %d %s %d typ %s";return t+=e.raddr!=null?" raddr %s rport %d":"%v%v",t+=e.tcptype!=null?" tcptype %s":"%v",e.generation!=null&&(t+=" generation %d"),t+=e["network-id"]!=null?" network-id %d":"%v",t+=e["network-cost"]!=null?" network-cost %d":"%v",t}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(e){var t="ssrc:%d";return e.attribute!=null&&(t+=" %s",e.value!=null&&(t+=":%s")),t}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(e){return e.maxMessageSize!=null?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(e){return e.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(e){return"imageattr:%s %s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(e){return"simulcast:%s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(e){return"ts-refclk:%s"+(e.clksrcExt!=null?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(e){var t="mediaclk:";return t+=e.id!=null?"id=%s %s":"%v%s",t+=e.mediaClockValue!=null?"=%s":"",t+=e.rateNumerator!=null?" rate=%s":"",t+=e.rateDenominator!=null?"/%s":"",t}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};Object.keys(vT).forEach(function(e){var t=vT[e];t.forEach(function(n){n.reg||(n.reg=/(.*)/),n.format||(n.format="%s")})})});var ST=rr(Dn=>{"use strict";var $i=function(e){return String(Number(e))===e?Number(e):e},J1=function(e,t,n,r){if(r&&!n)t[r]=$i(e[1]);else for(var i=0;i<n.length;i+=1)e[i+1]!=null&&(t[n[i]]=$i(e[i+1]))},Y1=function(e,t,n){var r=e.name&&e.names;e.push&&!t[e.push]?t[e.push]=[]:r&&!t[e.name]&&(t[e.name]={});var i=e.push?{}:r?t[e.name]:t;J1(n.match(e.reg),i,e.names,e.name),e.push&&t[e.push].push(i)},ET=Jm(),Z1=RegExp.prototype.test.bind(/^([a-z])=(.*)/);Dn.parse=function(e){var t={},n=[],r=t;return e.split(/(\r\n|\r|\n)/).filter(Z1).forEach(function(i){var s=i[0],o=i.slice(2);s==="m"&&(n.push({rtp:[],fmtp:[]}),r=n[n.length-1]);for(var a=0;a<(ET[s]||[]).length;a+=1){var c=ET[s][a];if(c.reg.test(o))return Y1(c,r,o)}}),t.media=n,t};var CT=function(e,t){var n=t.split(/=(.+)/,2);return n.length===2?e[n[0]]=$i(n[1]):n.length===1&&t.length>1&&(e[n[0]]=void 0),e};Dn.parseParams=function(e){return e.split(/;\s?/).reduce(CT,{})};Dn.parseFmtpConfig=Dn.parseParams;Dn.parsePayloads=function(e){return e.toString().split(" ").map(Number)};Dn.parseRemoteCandidates=function(e){for(var t=[],n=e.split(" ").map($i),r=0;r<n.length;r+=3)t.push({component:n[r],ip:n[r+1],port:n[r+2]});return t};Dn.parseImageAttributes=function(e){return e.split(" ").map(function(t){return t.substring(1,t.length-1).split(",").reduce(CT,{})})};Dn.parseSimulcastStreamList=function(e){return e.split(";").map(function(t){return t.split(",").map(function(n){var r,i=!1;return n[0]!=="~"?r=$i(n):(r=$i(n.substring(1,n.length)),i=!0),{scid:r,paused:i}})})}});var DT=rr((g7,wT)=>{"use strict";var Ym=Jm(),Q1=/%[sdv%]/g,X1=function(e){var t=1,n=arguments,r=n.length;return e.replace(Q1,function(i){if(t>=r)return i;var s=n[t];switch(t+=1,i){case"%%":return"%";case"%s":return String(s);case"%d":return Number(s);case"%v":return""}})},No=function(e,t,n){var r=t.format instanceof Function?t.format(t.push?n:n[t.name]):t.format,i=[e+"="+r];if(t.names)for(var s=0;s<t.names.length;s+=1){var o=t.names[s];t.name?i.push(n[t.name][o]):i.push(n[t.names[s]])}else i.push(n[t.name]);return X1.apply(null,i)},eF=["v","o","s","i","u","e","p","c","b","t","r","z","a"],tF=["i","c","b","a"];wT.exports=function(e,t){t=t||{},e.version==null&&(e.version=0),e.name==null&&(e.name=" "),e.media.forEach(function(s){s.payloads==null&&(s.payloads="")});var n=t.outerOrder||eF,r=t.innerOrder||tF,i=[];return n.forEach(function(s){Ym[s].forEach(function(o){o.name in e&&e[o.name]!=null?i.push(No(s,o,e)):o.push in e&&e[o.push]!=null&&e[o.push].forEach(function(a){i.push(No(s,o,a))})})}),e.media.forEach(function(s){i.push(No("m",Ym.m[0],s)),r.forEach(function(o){Ym[o].forEach(function(a){a.name in s&&s[a.name]!=null?i.push(No(o,a,s)):a.push in s&&s[a.push]!=null&&s[a.push].forEach(function(c){i.push(No(o,a,c))})})})}),i.join(`\r
`)+`\r
`}});var IT=rr(In=>{"use strict";var Or=ST(),nF=DT();In.write=nF;In.parse=Or.parse;In.parseParams=Or.parseParams;In.parseFmtpConfig=Or.parseFmtpConfig;In.parsePayloads=Or.parsePayloads;In.parseRemoteCandidates=Or.parseRemoteCandidates;In.parseImageAttributes=Or.parseImageAttributes;In.parseSimulcastStreamList=Or.parseSimulcastStreamList});var NT=rr(dl=>{"use strict";dl.byteLength=iF;dl.toByteArray=oF;dl.fromByteArray=uF;var rn=[],Tt=[],rF=typeof Uint8Array<"u"?Uint8Array:Array,Zm="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(Pr=0,_T=Zm.length;Pr<_T;++Pr)rn[Pr]=Zm[Pr],Tt[Zm.charCodeAt(Pr)]=Pr;var Pr,_T;Tt[45]=62;Tt[95]=63;function RT(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");n===-1&&(n=t);var r=n===t?0:4-n%4;return[n,r]}function iF(e){var t=RT(e),n=t[0],r=t[1];return(n+r)*3/4-r}function sF(e,t,n){return(t+n)*3/4-n}function oF(e){var t,n=RT(e),r=n[0],i=n[1],s=new rF(sF(e,r,i)),o=0,a=i>0?r-4:r,c;for(c=0;c<a;c+=4)t=Tt[e.charCodeAt(c)]<<18|Tt[e.charCodeAt(c+1)]<<12|Tt[e.charCodeAt(c+2)]<<6|Tt[e.charCodeAt(c+3)],s[o++]=t>>16&255,s[o++]=t>>8&255,s[o++]=t&255;return i===2&&(t=Tt[e.charCodeAt(c)]<<2|Tt[e.charCodeAt(c+1)]>>4,s[o++]=t&255),i===1&&(t=Tt[e.charCodeAt(c)]<<10|Tt[e.charCodeAt(c+1)]<<4|Tt[e.charCodeAt(c+2)]>>2,s[o++]=t>>8&255,s[o++]=t&255),s}function aF(e){return rn[e>>18&63]+rn[e>>12&63]+rn[e>>6&63]+rn[e&63]}function cF(e,t,n){for(var r,i=[],s=t;s<n;s+=3)r=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(e[s+2]&255),i.push(aF(r));return i.join("")}function uF(e){for(var t,n=e.length,r=n%3,i=[],s=16383,o=0,a=n-r;o<a;o+=s)i.push(cF(e,o,o+s>a?a:o+s));return r===1?(t=e[n-1],i.push(rn[t>>2]+rn[t<<4&63]+"==")):r===2&&(t=(e[n-2]<<8)+e[n-1],i.push(rn[t>>10]+rn[t>>4&63]+rn[t<<2&63]+"=")),i.join("")}});function Jl(e,t){return Object.is(e,t)}var Re=null,Zo=!1,Yl=1,mt=Symbol("SIGNAL");function re(e){let t=Re;return Re=e,t}function Bv(){return Re}var ss={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Xo(e){if(Zo)throw new Error("");if(Re===null)return;Re.consumerOnSignalRead(e);let t=Re.nextProducerIndex++;if(na(Re),t<Re.producerNode.length&&Re.producerNode[t]!==e&&is(Re)){let n=Re.producerNode[t];ta(n,Re.producerIndexOfThis[t])}Re.producerNode[t]!==e&&(Re.producerNode[t]=e,Re.producerIndexOfThis[t]=is(Re)?zv(e,Re,t):0),Re.producerLastReadVersion[t]=e.version}function P0(){Yl++}function Zl(e){if(!(is(e)&&!e.dirty)&&!(!e.dirty&&e.lastCleanEpoch===Yl)){if(!e.producerMustRecompute(e)&&!Xl(e)){Kl(e);return}e.producerRecomputeValue(e),Kl(e)}}function $v(e){if(e.liveConsumerNode===void 0)return;let t=Zo;Zo=!0;try{for(let n of e.liveConsumerNode)n.dirty||L0(n)}finally{Zo=t}}function Hv(){return Re?.consumerAllowSignalWrites!==!1}function L0(e){e.dirty=!0,$v(e),e.consumerMarkedDirty?.(e)}function Kl(e){e.dirty=!1,e.lastCleanEpoch=Yl}function ea(e){return e&&(e.nextProducerIndex=0),re(e)}function Ql(e,t){if(re(t),!(!e||e.producerNode===void 0||e.producerIndexOfThis===void 0||e.producerLastReadVersion===void 0)){if(is(e))for(let n=e.nextProducerIndex;n<e.producerNode.length;n++)ta(e.producerNode[n],e.producerIndexOfThis[n]);for(;e.producerNode.length>e.nextProducerIndex;)e.producerNode.pop(),e.producerLastReadVersion.pop(),e.producerIndexOfThis.pop()}}function Xl(e){na(e);for(let t=0;t<e.producerNode.length;t++){let n=e.producerNode[t],r=e.producerLastReadVersion[t];if(r!==n.version||(Zl(n),r!==n.version))return!0}return!1}function ed(e){if(na(e),is(e))for(let t=0;t<e.producerNode.length;t++)ta(e.producerNode[t],e.producerIndexOfThis[t]);e.producerNode.length=e.producerLastReadVersion.length=e.producerIndexOfThis.length=0,e.liveConsumerNode&&(e.liveConsumerNode.length=e.liveConsumerIndexOfThis.length=0)}function zv(e,t,n){if(qv(e),e.liveConsumerNode.length===0&&Gv(e))for(let r=0;r<e.producerNode.length;r++)e.producerIndexOfThis[r]=zv(e.producerNode[r],e,r);return e.liveConsumerIndexOfThis.push(n),e.liveConsumerNode.push(t)-1}function ta(e,t){if(qv(e),e.liveConsumerNode.length===1&&Gv(e))for(let r=0;r<e.producerNode.length;r++)ta(e.producerNode[r],e.producerIndexOfThis[r]);let n=e.liveConsumerNode.length-1;if(e.liveConsumerNode[t]=e.liveConsumerNode[n],e.liveConsumerIndexOfThis[t]=e.liveConsumerIndexOfThis[n],e.liveConsumerNode.length--,e.liveConsumerIndexOfThis.length--,t<e.liveConsumerNode.length){let r=e.liveConsumerIndexOfThis[t],i=e.liveConsumerNode[t];na(i),i.producerIndexOfThis[r]=t}}function is(e){return e.consumerIsAlwaysLive||(e?.liveConsumerNode?.length??0)>0}function na(e){e.producerNode??=[],e.producerIndexOfThis??=[],e.producerLastReadVersion??=[]}function qv(e){e.liveConsumerNode??=[],e.liveConsumerIndexOfThis??=[]}function Gv(e){return e.producerNode!==void 0}function Wv(e){let t=Object.create(F0);t.computation=e;let n=()=>{if(Zl(t),Xo(t),t.value===Qo)throw t.error;return t.value};return n[mt]=t,n}var Gl=Symbol("UNSET"),Wl=Symbol("COMPUTING"),Qo=Symbol("ERRORED"),F0=R(E({},ss),{value:Gl,dirty:!0,error:null,equal:Jl,producerMustRecompute(e){return e.value===Gl||e.value===Wl},producerRecomputeValue(e){if(e.value===Wl)throw new Error("Detected cycle in computations.");let t=e.value;e.value=Wl;let n=ea(e),r;try{r=e.computation()}catch(i){r=Qo,e.error=i}finally{Ql(e,n)}if(t!==Gl&&t!==Qo&&r!==Qo&&e.equal(t,r)){e.value=t;return}e.value=r,e.version++}});function j0(){throw new Error}var Kv=j0;function Jv(){Kv()}function Yv(e){Kv=e}var U0=null;function Zv(e){let t=Object.create(td);t.value=e;let n=()=>(Xo(t),t.value);return n[mt]=t,n}function ra(e,t){Hv()||Jv(),e.equal(e.value,t)||(e.value=t,V0(e))}function Qv(e,t){Hv()||Jv(),ra(e,t(e.value))}var td=R(E({},ss),{equal:Jl,value:void 0});function V0(e){e.version++,P0(),$v(e),U0?.()}function x(e){return typeof e=="function"}function Hr(e){let n=e(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var ia=Hr(e=>function(n){e(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function sr(e,t){if(e){let n=e.indexOf(t);0<=n&&e.splice(n,1)}}var ve=class e{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let s of n)s.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(x(r))try{r()}catch(s){t=s instanceof ia?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{Xv(s)}catch(o){t=t??[],o instanceof ia?t=[...t,...o.errors]:t.push(o)}}if(t)throw new ia(t)}}add(t){var n;if(t&&t!==this)if(this.closed)Xv(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(t)}}_hasParent(t){let{_parentage:n}=this;return n===t||Array.isArray(n)&&n.includes(t)}_addParent(t){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t}_removeParent(t){let{_parentage:n}=this;n===t?this._parentage=null:Array.isArray(n)&&sr(n,t)}remove(t){let{_finalizers:n}=this;n&&sr(n,t),t instanceof e&&t._removeParent(this)}};ve.EMPTY=(()=>{let e=new ve;return e.closed=!0,e})();var nd=ve.EMPTY;function sa(e){return e instanceof ve||e&&"closed"in e&&x(e.remove)&&x(e.add)&&x(e.unsubscribe)}function Xv(e){x(e)?e():e.unsubscribe()}var _t={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var zr={setTimeout(e,t,...n){let{delegate:r}=zr;return r?.setTimeout?r.setTimeout(e,t,...n):setTimeout(e,t,...n)},clearTimeout(e){let{delegate:t}=zr;return(t?.clearTimeout||clearTimeout)(e)},delegate:void 0};function oa(e){zr.setTimeout(()=>{let{onUnhandledError:t}=_t;if(t)t(e);else throw e})}function os(){}var eb=rd("C",void 0,void 0);function tb(e){return rd("E",void 0,e)}function nb(e){return rd("N",e,void 0)}function rd(e,t,n){return{kind:e,value:t,error:n}}var or=null;function qr(e){if(_t.useDeprecatedSynchronousErrorHandling){let t=!or;if(t&&(or={errorThrown:!1,error:null}),e(),t){let{errorThrown:n,error:r}=or;if(or=null,n)throw r}}else e()}function rb(e){_t.useDeprecatedSynchronousErrorHandling&&or&&(or.errorThrown=!0,or.error=e)}var ar=class extends ve{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,sa(t)&&t.add(this)):this.destination=H0}static create(t,n,r){return new cn(t,n,r)}next(t){this.isStopped?sd(nb(t),this):this._next(t)}error(t){this.isStopped?sd(tb(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?sd(eb,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},B0=Function.prototype.bind;function id(e,t){return B0.call(e,t)}var od=class{constructor(t){this.partialObserver=t}next(t){let{partialObserver:n}=this;if(n.next)try{n.next(t)}catch(r){aa(r)}}error(t){let{partialObserver:n}=this;if(n.error)try{n.error(t)}catch(r){aa(r)}else aa(t)}complete(){let{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(n){aa(n)}}},cn=class extends ar{constructor(t,n,r){super();let i;if(x(t)||!t)i={next:t??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&_t.useDeprecatedNextContext?(s=Object.create(t),s.unsubscribe=()=>this.unsubscribe(),i={next:t.next&&id(t.next,s),error:t.error&&id(t.error,s),complete:t.complete&&id(t.complete,s)}):i=t}this.destination=new od(i)}};function aa(e){_t.useDeprecatedSynchronousErrorHandling?rb(e):oa(e)}function $0(e){throw e}function sd(e,t){let{onStoppedNotification:n}=_t;n&&zr.setTimeout(()=>n(e,t))}var H0={closed:!0,next:os,error:$0,complete:os};var Gr=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Be(e){return e}function ad(...e){return cd(e)}function cd(e){return e.length===0?Be:e.length===1?e[0]:function(n){return e.reduce((r,i)=>i(r),n)}}var te=(()=>{class e{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new e;return r.source=this,r.operator=n,r}subscribe(n,r,i){let s=q0(n)?n:new cn(n,r,i);return qr(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=ib(r),new r((i,s)=>{let o=new cn({next:a=>{try{n(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[Gr](){return this}pipe(...n){return cd(n)(this)}toPromise(n){return n=ib(n),new n((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return e.create=t=>new e(t),e})();function ib(e){var t;return(t=e??_t.Promise)!==null&&t!==void 0?t:Promise}function z0(e){return e&&x(e.next)&&x(e.error)&&x(e.complete)}function q0(e){return e&&e instanceof ar||z0(e)&&sa(e)}function ud(e){return x(e?.lift)}function q(e){return t=>{if(ud(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function W(e,t,n,r,i){return new ld(e,t,n,r,i)}var ld=class extends ar{constructor(t,n,r,i,s,o){super(t),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(c){t.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){t.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((t=this.onFinalize)===null||t===void 0||t.call(this))}}};function Wr(){return q((e,t)=>{let n=null;e._refCount++;let r=W(t,void 0,void 0,void 0,()=>{if(!e||e._refCount<=0||0<--e._refCount){n=null;return}let i=e._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),t.unsubscribe()});e.subscribe(r),r.closed||(n=e.connect())})}var Kr=class extends te{constructor(t,n){super(),this.source=t,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,ud(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){let t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new ve;let n=this.getSubject();t.add(this.source.subscribe(W(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),t.closed&&(this._connection=null,t=ve.EMPTY)}return t}refCount(){return Wr()(this)}};var sb=Hr(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var be=(()=>{class e extends te{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new ca(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new sb}next(n){qr(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){qr(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){qr(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:s}=this;return r||i?nd:(this.currentObservers=null,s.push(n),new ve(()=>{this.currentObservers=null,sr(s,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){let n=new te;return n.source=this,n}}return e.create=(t,n)=>new ca(t,n),e})(),ca=class extends be{constructor(t,n){super(),this.destination=t,this.source=n}next(t){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,t)}error(t){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,t)}complete(){var t,n;(n=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||n===void 0||n.call(t)}_subscribe(t){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(t))!==null&&r!==void 0?r:nd}};var M=class extends be{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){let n=super._subscribe(t);return!n.closed&&t.next(this._value),n}getValue(){let{hasError:t,thrownError:n,_value:r}=this;if(t)throw n;return this._throwIfClosed(),r}next(t){super.next(this._value=t)}};var as={now(){return(as.delegate||Date).now()},delegate:void 0};var Rn=class extends be{constructor(t=1/0,n=1/0,r=as){super(),this._bufferSize=t,this._windowTime=n,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,t),this._windowTime=Math.max(1,n)}next(t){let{isStopped:n,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:o}=this;n||(r.push(t),!i&&r.push(s.now()+o)),this._trimBuffer(),super.next(t)}_subscribe(t){this._throwIfClosed(),this._trimBuffer();let n=this._innerSubscribe(t),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let o=0;o<s.length&&!t.closed;o+=r?1:2)t.next(s[o]);return this._checkFinalizedStatuses(t),n}_trimBuffer(){let{_bufferSize:t,_timestampProvider:n,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*t;if(t<1/0&&s<r.length&&r.splice(0,r.length-s),!i){let o=n.now(),a=0;for(let c=1;c<r.length&&r[c]<=o;c+=2)a=c;a&&r.splice(0,a+1)}}};var ua=class extends ve{constructor(t,n){super()}schedule(t,n=0){return this}};var cs={setInterval(e,t,...n){let{delegate:r}=cs;return r?.setInterval?r.setInterval(e,t,...n):setInterval(e,t,...n)},clearInterval(e){let{delegate:t}=cs;return(t?.clearInterval||clearInterval)(e)},delegate:void 0};var la=class extends ua{constructor(t,n){super(t,n),this.scheduler=t,this.work=n,this.pending=!1}schedule(t,n=0){var r;if(this.closed)return this;this.state=t;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,n),this}requestAsyncId(t,n,r=0){return cs.setInterval(t.flush.bind(t,this),r)}recycleAsyncId(t,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&cs.clearInterval(n)}execute(t,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(t,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,n){let r=!1,i;try{this.work(t)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:t,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,sr(r,this),t!=null&&(this.id=this.recycleAsyncId(n,t,null)),this.delay=null,super.unsubscribe()}}};var Jr=class e{constructor(t,n=e.now){this.schedulerActionCtor=t,this.now=n}schedule(t,n=0,r){return new this.schedulerActionCtor(this,t).schedule(r,n)}};Jr.now=as.now;var da=class extends Jr{constructor(t,n=Jr.now){super(t,n),this.actions=[],this._active=!1}flush(t){let{actions:n}=this;if(this._active){n.push(t);return}let r;this._active=!0;do if(r=t.execute(t.state,t.delay))break;while(t=n.shift());if(this._active=!1,r){for(;t=n.shift();)t.unsubscribe();throw r}}};var ob=new da(la);var $e=new te(e=>e.complete());function ab(e){return e&&x(e.schedule)}function dd(e){return e[e.length-1]}function cb(e){return x(dd(e))?e.pop():void 0}function zt(e){return ab(dd(e))?e.pop():void 0}function ub(e,t){return typeof dd(e)=="number"?e.pop():t}function db(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(l){try{u(r.next(l))}catch(d){o(d)}}function c(l){try{u(r.throw(l))}catch(d){o(d)}}function u(l){l.done?s(l.value):i(l.value).then(a,c)}u((r=r.apply(e,t||[])).next())})}function lb(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function cr(e){return this instanceof cr?(this.v=e,this):new cr(e)}function fb(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(h){return function(p){return Promise.resolve(p).then(h,d)}}function a(h,p){r[h]&&(i[h]=function(m){return new Promise(function(y,v){s.push([h,m,y,v])>1||c(h,m)})},p&&(i[h]=p(i[h])))}function c(h,p){try{u(r[h](p))}catch(m){f(s[0][3],m)}}function u(h){h.value instanceof cr?Promise.resolve(h.value.v).then(l,d):f(s[0][2],h)}function l(h){c("next",h)}function d(h){c("throw",h)}function f(h,p){h(p),s.shift(),s.length&&c(s[0][0],s[0][1])}}function hb(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof lb=="function"?lb(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=e[s]&&function(o){return new Promise(function(a,c){o=e[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(u){s({value:u,done:a})},o)}}var Yr=e=>e&&typeof e.length=="number"&&typeof e!="function";function fa(e){return x(e?.then)}function ha(e){return x(e[Gr])}function pa(e){return Symbol.asyncIterator&&x(e?.[Symbol.asyncIterator])}function ma(e){return new TypeError(`You provided ${e!==null&&typeof e=="object"?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function G0(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var ga=G0();function ya(e){return x(e?.[ga])}function va(e){return fb(this,arguments,function*(){let n=e.getReader();try{for(;;){let{value:r,done:i}=yield cr(n.read());if(i)return yield cr(void 0);yield yield cr(r)}}finally{n.releaseLock()}})}function ba(e){return x(e?.getReader)}function pe(e){if(e instanceof te)return e;if(e!=null){if(ha(e))return W0(e);if(Yr(e))return K0(e);if(fa(e))return J0(e);if(pa(e))return pb(e);if(ya(e))return Y0(e);if(ba(e))return Z0(e)}throw ma(e)}function W0(e){return new te(t=>{let n=e[Gr]();if(x(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function K0(e){return new te(t=>{for(let n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}function J0(e){return new te(t=>{e.then(n=>{t.closed||(t.next(n),t.complete())},n=>t.error(n)).then(null,oa)})}function Y0(e){return new te(t=>{for(let n of e)if(t.next(n),t.closed)return;t.complete()})}function pb(e){return new te(t=>{Q0(e,t).catch(n=>t.error(n))})}function Z0(e){return pb(va(e))}function Q0(e,t){var n,r,i,s;return db(this,void 0,void 0,function*(){try{for(n=hb(e);r=yield n.next(),!r.done;){let o=r.value;if(t.next(o),t.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}t.complete()})}function ze(e,t,n,r=0,i=!1){let s=t.schedule(function(){n(),i?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(s),!i)return s}function Ea(e,t=0){return q((n,r)=>{n.subscribe(W(r,i=>ze(r,e,()=>r.next(i),t),()=>ze(r,e,()=>r.complete(),t),i=>ze(r,e,()=>r.error(i),t)))})}function Ca(e,t=0){return q((n,r)=>{r.add(e.schedule(()=>n.subscribe(r),t))})}function mb(e,t){return pe(e).pipe(Ca(t),Ea(t))}function gb(e,t){return pe(e).pipe(Ca(t),Ea(t))}function yb(e,t){return new te(n=>{let r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}function vb(e,t){return new te(n=>{let r;return ze(n,t,()=>{r=e[ga](),ze(n,t,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){n.error(o);return}s?n.complete():n.next(i)},0,!0)}),()=>x(r?.return)&&r.return()})}function Sa(e,t){if(!e)throw new Error("Iterable cannot be null");return new te(n=>{ze(n,t,()=>{let r=e[Symbol.asyncIterator]();ze(n,t,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function bb(e,t){return Sa(va(e),t)}function Eb(e,t){if(e!=null){if(ha(e))return mb(e,t);if(Yr(e))return yb(e,t);if(fa(e))return gb(e,t);if(pa(e))return Sa(e,t);if(ya(e))return vb(e,t);if(ba(e))return bb(e,t)}throw ma(e)}function me(e,t){return t?Eb(e,t):pe(e)}function $(...e){let t=zt(e);return me(e,t)}function Zr(e,t){let n=x(e)?e:()=>e,r=i=>i.error(n());return new te(t?i=>t.schedule(r,0,i):r)}function fd(e){return!!e&&(e instanceof te||x(e.lift)&&x(e.subscribe))}var un=Hr(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"});function P(e,t){return q((n,r)=>{let i=0;n.subscribe(W(r,s=>{r.next(e.call(t,s,i++))}))})}var{isArray:X0}=Array;function e_(e,t){return X0(t)?e(...t):e(t)}function Qr(e){return P(t=>e_(e,t))}var{isArray:t_}=Array,{getPrototypeOf:n_,prototype:r_,keys:i_}=Object;function Cb(e){if(e.length===1){let t=e[0];if(t_(t))return{args:t,keys:null};if(s_(t)){let n=i_(t);return{args:n.map(r=>t[r]),keys:n}}}return{args:e,keys:null}}function s_(e){return e&&typeof e=="object"&&n_(e)===r_}function Sb(e,t){return e.reduce((n,r,i)=>(n[r]=t[i],n),{})}function gt(...e){let t=zt(e),n=cb(e),{args:r,keys:i}=Cb(e);if(r.length===0)return me([],t);let s=new te(o_(r,t,i?o=>Sb(i,o):Be));return n?s.pipe(Qr(n)):s}function o_(e,t,n=Be){return r=>{wb(t,()=>{let{length:i}=e,s=new Array(i),o=i,a=i;for(let c=0;c<i;c++)wb(t,()=>{let u=me(e[c],t),l=!1;u.subscribe(W(r,d=>{s[c]=d,l||(l=!0,a--),a||r.next(n(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function wb(e,t,n){e?ze(n,e,t):t()}function Db(e,t,n,r,i,s,o,a){let c=[],u=0,l=0,d=!1,f=()=>{d&&!c.length&&!u&&t.complete()},h=m=>u<r?p(m):c.push(m),p=m=>{s&&t.next(m),u++;let y=!1;pe(n(m,l++)).subscribe(W(t,v=>{i?.(v),s?h(v):t.next(v)},()=>{y=!0},void 0,()=>{if(y)try{for(u--;c.length&&u<r;){let v=c.shift();o?ze(t,o,()=>p(v)):p(v)}f()}catch(v){t.error(v)}}))};return e.subscribe(W(t,h,()=>{d=!0,f()})),()=>{a?.()}}function Ee(e,t,n=1/0){return x(t)?Ee((r,i)=>P((s,o)=>t(r,s,i,o))(pe(e(r,i))),n):(typeof t=="number"&&(n=t),q((r,i)=>Db(r,i,e,n)))}function us(e=1/0){return Ee(Be,e)}function Ib(){return us(1)}function Xr(...e){return Ib()(me(e,zt(e)))}function wa(e){return new te(t=>{pe(e()).subscribe(t)})}var a_=["addListener","removeListener"],c_=["addEventListener","removeEventListener"],u_=["on","off"];function ls(e,t,n,r){if(x(n)&&(r=n,n=void 0),r)return ls(e,t,n).pipe(Qr(r));let[i,s]=f_(e)?c_.map(o=>a=>e[o](t,a,n)):l_(e)?a_.map(Tb(e,t)):d_(e)?u_.map(Tb(e,t)):[];if(!i&&Yr(e))return Ee(o=>ls(o,t,n))(pe(e));if(!i)throw new TypeError("Invalid event target");return new te(o=>{let a=(...c)=>o.next(1<c.length?c:c[0]);return i(a),()=>s(a)})}function Tb(e,t){return n=>r=>e[n](t,r)}function l_(e){return x(e.addListener)&&x(e.removeListener)}function d_(e){return x(e.on)&&x(e.off)}function f_(e){return x(e.addEventListener)&&x(e.removeEventListener)}function Da(e,t,n){return n?Da(e,t).pipe(Qr(n)):new te(r=>{let i=(...o)=>r.next(o.length===1?o[0]:o),s=e(i);return x(t)?()=>t(i,s):void 0})}function ds(...e){let t=zt(e),n=ub(e,1/0),r=e;return r.length?r.length===1?pe(r[0]):us(n)(me(r,t)):$e}function yt(e,t){return q((n,r)=>{let i=0;n.subscribe(W(r,s=>e.call(t,s,i++)&&r.next(s)))})}function Nn(e){return q((t,n)=>{let r=null,i=!1,s;r=t.subscribe(W(n,void 0,void 0,o=>{s=pe(e(o,Nn(e)(t))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function _b(e,t,n,r,i){return(s,o)=>{let a=n,c=t,u=0;s.subscribe(W(o,l=>{let d=u++;c=a?e(c,l,d):(a=!0,l),r&&o.next(c)},i&&(()=>{a&&o.next(c),o.complete()})))}}function Xe(e,t){return x(t)?Ee(e,t,1):Ee(e,1)}function hd(e,t=ob){return q((n,r)=>{let i=null,s=null,o=null,a=()=>{if(i){i.unsubscribe(),i=null;let u=s;s=null,r.next(u)}};function c(){let u=o+e,l=t.now();if(l<u){i=this.schedule(void 0,u-l),r.add(i);return}a()}n.subscribe(W(r,u=>{s=u,o=t.now(),i||(i=t.schedule(c,e),r.add(i))},()=>{a(),r.complete()},void 0,()=>{s=i=null}))})}function Mn(e){return q((t,n)=>{let r=!1;t.subscribe(W(n,i=>{r=!0,n.next(i)},()=>{r||n.next(e),n.complete()}))})}function ln(e){return e<=0?()=>$e:q((t,n)=>{let r=0;t.subscribe(W(n,i=>{++r<=e&&(n.next(i),e<=r&&n.complete())}))})}function pd(e){return P(()=>e)}function Ae(e,t=Be){return e=e??h_,q((n,r)=>{let i,s=!0;n.subscribe(W(r,o=>{let a=t(o);(s||!e(i,a))&&(s=!1,i=a,r.next(o))}))})}function h_(e,t){return e===t}function ei(e,t){return Ae((n,r)=>t?t(n[e],r[e]):n[e]===r[e])}function Ia(e=p_){return q((t,n)=>{let r=!1;t.subscribe(W(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(e())))})}function p_(){return new un}function ti(e){return q((t,n)=>{try{t.subscribe(n)}finally{n.add(e)}})}function Rt(e,t){let n=arguments.length>=2;return r=>r.pipe(e?yt((i,s)=>e(i,s,r)):Be,ln(1),n?Mn(t):Ia(()=>new un))}function ni(e){return e<=0?()=>$e:q((t,n)=>{let r=[];t.subscribe(W(n,i=>{r.push(i),e<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function md(e,t){let n=arguments.length>=2;return r=>r.pipe(e?yt((i,s)=>e(i,s,r)):Be,ni(1),n?Mn(t):Ia(()=>new un))}function gd(){return q((e,t)=>{let n,r=!1;e.subscribe(W(t,i=>{let s=n;n=i,r&&t.next([s,i]),r=!0}))})}function yd(e,t){return q(_b(e,t,arguments.length>=2,!0))}function Rb(e={}){let{connector:t=()=>new be,resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=e;return s=>{let o,a,c,u=0,l=!1,d=!1,f=()=>{a?.unsubscribe(),a=void 0},h=()=>{f(),o=c=void 0,l=d=!1},p=()=>{let m=o;h(),m?.unsubscribe()};return q((m,y)=>{u++,!d&&!l&&f();let v=c=c??t();y.add(()=>{u--,u===0&&!d&&!l&&(a=vd(p,i))}),v.subscribe(y),!o&&u>0&&(o=new cn({next:S=>v.next(S),error:S=>{d=!0,f(),a=vd(h,n,S),v.error(S)},complete:()=>{l=!0,f(),a=vd(h,r),v.complete()}}),pe(m).subscribe(o))})(s)}}function vd(e,t,...n){if(t===!0){e();return}if(t===!1)return;let r=new cn({next:()=>{r.unsubscribe(),e()}});return pe(t(...n)).subscribe(r)}function Ue(e,t,n){let r,i=!1;return e&&typeof e=="object"?{bufferSize:r=1/0,windowTime:t=1/0,refCount:i=!1,scheduler:n}=e:r=e??1/0,Rb({connector:()=>new Rn(r,t,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function dn(...e){let t=zt(e);return q((n,r)=>{(t?Xr(e,n,t):Xr(e,n)).subscribe(r)})}function vt(e,t){return q((n,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();n.subscribe(W(r,c=>{i?.unsubscribe();let u=0,l=s++;pe(e(c,l)).subscribe(i=W(r,d=>r.next(t?t(c,d,l,u++):d),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function bd(e){return q((t,n)=>{pe(e).subscribe(W(n,()=>n.complete(),os)),!n.closed&&t.subscribe(n)})}function fs(e,t=!1){return q((n,r)=>{let i=0;n.subscribe(W(r,s=>{let o=e(s,i++);(o||t)&&r.next(s),!o&&r.complete()}))})}function Ne(e,t,n){let r=x(e)||t||n?{next:e,error:t,complete:n}:e;return r?q((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(W(s,c=>{var u;(u=r.next)===null||u===void 0||u.call(r,c),s.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),s.complete()},c=>{var u;a=!1,(u=r.error)===null||u===void 0||u.call(r,c),s.error(c)},()=>{var c,u;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(u=r.finalize)===null||u===void 0||u.call(r)}))}):Be}var Dd={JSACTION:"jsaction"},Id={JSACTION:"__jsaction",OWNER:"__owner"},xb={};function m_(e){return e[Id.JSACTION]}function Nb(e,t){e[Id.JSACTION]=t}function g_(e){return xb[e]}function y_(e,t){xb[e]=t}var k={AUXCLICK:"auxclick",CHANGE:"change",CLICK:"click",CLICKMOD:"clickmod",CLICKONLY:"clickonly",DBLCLICK:"dblclick",FOCUS:"focus",FOCUSIN:"focusin",BLUR:"blur",FOCUSOUT:"focusout",SUBMIT:"submit",KEYDOWN:"keydown",KEYPRESS:"keypress",KEYUP:"keyup",MOUSEUP:"mouseup",MOUSEDOWN:"mousedown",MOUSEOVER:"mouseover",MOUSEOUT:"mouseout",MOUSEENTER:"mouseenter",MOUSELEAVE:"mouseleave",MOUSEMOVE:"mousemove",POINTERUP:"pointerup",POINTERDOWN:"pointerdown",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERMOVE:"pointermove",POINTERCANCEL:"pointercancel",GOTPOINTERCAPTURE:"gotpointercapture",LOSTPOINTERCAPTURE:"lostpointercapture",ERROR:"error",LOAD:"load",UNLOAD:"unload",TOUCHSTART:"touchstart",TOUCHEND:"touchend",TOUCHMOVE:"touchmove",INPUT:"input",SCROLL:"scroll",TOGGLE:"toggle",CUSTOM:"_custom"},v_=[k.MOUSEENTER,k.MOUSELEAVE,"pointerenter","pointerleave"],Z4=[k.CLICK,k.DBLCLICK,k.FOCUSIN,k.FOCUSOUT,k.KEYDOWN,k.KEYUP,k.KEYPRESS,k.MOUSEOVER,k.MOUSEOUT,k.SUBMIT,k.TOUCHSTART,k.TOUCHEND,k.TOUCHMOVE,"touchcancel","auxclick","change","compositionstart","compositionupdate","compositionend","beforeinput","input","select","copy","cut","paste","mousedown","mouseup","wheel","contextmenu","dragover","dragenter","dragleave","drop","dragstart","dragend","pointerdown","pointermove","pointerup","pointercancel","pointerover","pointerout","gotpointercapture","lostpointercapture","ended","loadedmetadata","pagehide","pageshow","visibilitychange","beforematch"],b_=[k.FOCUS,k.BLUR,k.ERROR,k.LOAD,k.TOGGLE],Td=e=>b_.indexOf(e)>=0;var E_=3,C_=13,S_=32,et={MAC_ENTER:E_,ENTER:C_,SPACE:S_};function w_(e){return e===k.MOUSEENTER?k.MOUSEOVER:e===k.MOUSELEAVE?k.MOUSEOUT:e===k.POINTERENTER?k.POINTEROVER:e===k.POINTERLEAVE?k.POINTEROUT:e}function D_(e,t,n,r){let i=!1;Td(t)&&(i=!0);let s=typeof r=="boolean"?{capture:i,passive:r}:i;return e.addEventListener(t,n,s),{eventType:t,handler:n,capture:i,passive:r}}function I_(e,t){if(e.removeEventListener){let n=typeof t.passive=="boolean"?{capture:t.capture}:t.capture;e.removeEventListener(t.eventType,t.handler,n)}else e.detachEvent&&e.detachEvent(`on${t.eventType}`,t.handler)}function T_(e){e.preventDefault?e.preventDefault():e.returnValue=!1}var Mb=typeof navigator<"u"&&/Macintosh/.test(navigator.userAgent);function __(e){return e.which===2||e.which==null&&e.button===4}function R_(e){return Mb&&e.metaKey||!Mb&&e.ctrlKey||__(e)||e.shiftKey}var Q4=typeof navigator<"u"&&!/Opera/.test(navigator.userAgent)&&/WebKit/.test(navigator.userAgent),X4=typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident/.test(navigator.userAgent)),e8=typeof navigator<"u"&&!/Opera|WebKit/.test(navigator.userAgent)&&/Gecko/.test(navigator.product);function N_(e,t,n){let r=e.relatedTarget;return(e.type===k.MOUSEOVER&&t===k.MOUSEENTER||e.type===k.MOUSEOUT&&t===k.MOUSELEAVE||e.type===k.POINTEROVER&&t===k.POINTERENTER||e.type===k.POINTEROUT&&t===k.POINTERLEAVE)&&(!r||r!==n&&!n.contains(r))}function M_(e,t){let n={};for(let r in e){if(r==="srcElement"||r==="target")continue;let i=r,s=e[i];typeof s!="function"&&(n[i]=s)}return e.type===k.MOUSEOVER?n.type=k.MOUSEENTER:e.type===k.MOUSEOUT?n.type=k.MOUSELEAVE:e.type===k.POINTEROVER?n.type=k.POINTERENTER:n.type=k.POINTERLEAVE,n.target=n.srcElement=t,n.bubbles=!1,n}var t8={Enter:et.ENTER," ":et.SPACE},n8={A:et.ENTER,BUTTON:0,CHECKBOX:et.SPACE,COMBOBOX:et.ENTER,FILE:0,GRIDCELL:et.ENTER,LINK:et.ENTER,LISTBOX:et.ENTER,MENU:0,MENUBAR:0,MENUITEM:0,MENUITEMCHECKBOX:0,MENUITEMRADIO:0,OPTION:0,RADIO:et.SPACE,RADIOGROUP:et.SPACE,RESET:0,SUBMIT:0,SWITCH:et.SPACE,TAB:0,TREE:et.ENTER,TREEITEM:et.ENTER};var A_=typeof navigator<"u"&&/iPhone|iPad|iPod/.test(navigator.userAgent),Na=class{element;handlerInfos=[];constructor(t){this.element=t}addEventListener(t,n,r){A_&&(this.element.style.cursor="pointer"),this.handlerInfos.push(D_(this.element,t,n(this.element),r))}cleanUp(){for(let t=0;t<this.handlerInfos.length;t++)I_(this.element,this.handlerInfos[t]);this.handlerInfos=[]}},x_={NAMESPACE_ACTION_SEPARATOR:".",EVENT_ACTION_SEPARATOR:":"};function An(e){return e.eventType}function _d(e,t){e.eventType=t}function _a(e){return e.event}function kb(e,t){e.event=t}function Ob(e){return e.targetElement}function Pb(e,t){e.targetElement=t}function Lb(e){return e.eic}function k_(e,t){e.eic=t}function O_(e){return e.timeStamp}function P_(e,t){e.timeStamp=t}function Ra(e){return e.eia}function Fb(e,t,n){e.eia=[t,n]}function Ed(e){e.eia=void 0}function Ta(e){return e[1]}function L_(e){return e.eirp}function jb(e,t){e.eirp=t}function Ub(e){return e.eir}function Vb(e,t){e.eir=t}function Bb(e){return{eventType:e.eventType,event:e.event,targetElement:e.targetElement,eic:e.eic,eia:e.eia,timeStamp:e.timeStamp,eirp:e.eirp,eiack:e.eiack,eir:e.eir}}function F_(e,t,n,r,i,s,o,a){return{eventType:e,event:t,targetElement:n,eic:r,timeStamp:i,eia:s,eirp:o,eiack:a}}var Cd=class e{eventInfo;constructor(t){this.eventInfo=t}getEventType(){return An(this.eventInfo)}setEventType(t){_d(this.eventInfo,t)}getEvent(){return _a(this.eventInfo)}setEvent(t){kb(this.eventInfo,t)}getTargetElement(){return Ob(this.eventInfo)}setTargetElement(t){Pb(this.eventInfo,t)}getContainer(){return Lb(this.eventInfo)}setContainer(t){k_(this.eventInfo,t)}getTimestamp(){return O_(this.eventInfo)}setTimestamp(t){P_(this.eventInfo,t)}getAction(){let t=Ra(this.eventInfo);if(t)return{name:t[0],element:t[1]}}setAction(t){if(!t){Ed(this.eventInfo);return}Fb(this.eventInfo,t.name,t.element)}getIsReplay(){return L_(this.eventInfo)}setIsReplay(t){jb(this.eventInfo,t)}getResolved(){return Ub(this.eventInfo)}setResolved(t){Vb(this.eventInfo,t)}clone(){return new e(Bb(this.eventInfo))}},j_={},U_=/\s*;\s*/,V_=k.CLICK,Sd=class{a11yClickSupport=!1;clickModSupport=!0;syntheticMouseEventSupport;updateEventInfoForA11yClick=void 0;preventDefaultForA11yClick=void 0;populateClickOnlyAction=void 0;constructor({syntheticMouseEventSupport:t=!1,clickModSupport:n=!0}={}){this.syntheticMouseEventSupport=t,this.clickModSupport=n}resolveEventType(t){this.clickModSupport&&An(t)===k.CLICK&&R_(_a(t))?_d(t,k.CLICKMOD):this.a11yClickSupport&&this.updateEventInfoForA11yClick(t)}resolveAction(t){Ub(t)||(this.populateAction(t,Ob(t)),Vb(t,!0))}resolveParentAction(t){let n=Ra(t),r=n&&Ta(n);Ed(t);let i=r&&this.getParentNode(r);i&&this.populateAction(t,i)}populateAction(t,n){let r=n;for(;r&&r!==Lb(t)&&(r.nodeType===Node.ELEMENT_NODE&&this.populateActionOnElement(r,t),!Ra(t));)r=this.getParentNode(r);let i=Ra(t);if(i&&(this.a11yClickSupport&&this.preventDefaultForA11yClick(t),this.syntheticMouseEventSupport&&(An(t)===k.MOUSEENTER||An(t)===k.MOUSELEAVE||An(t)===k.POINTERENTER||An(t)===k.POINTERLEAVE)))if(N_(_a(t),An(t),Ta(i))){let s=M_(_a(t),Ta(i));kb(t,s),Pb(t,Ta(i))}else Ed(t)}getParentNode(t){let n=t[Id.OWNER];if(n)return n;let r=t.parentNode;return r?.nodeName==="#document-fragment"?r?.host??null:r}populateActionOnElement(t,n){let r=this.parseActions(t),i=r[An(n)];i!==void 0&&Fb(n,i,t),this.a11yClickSupport&&this.populateClickOnlyAction(t,n,r)}parseActions(t){let n=m_(t);if(!n){let r=t.getAttribute(Dd.JSACTION);if(!r)n=j_,Nb(t,n);else{if(n=g_(r),!n){n={};let i=r.split(U_);for(let s=0;s<i.length;s++){let o=i[s];if(!o)continue;let a=o.indexOf(x_.EVENT_ACTION_SEPARATOR),c=a!==-1,u=c?o.substr(0,a).trim():V_,l=c?o.substr(a+1).trim():o;n[u]=l}y_(r,n)}Nb(t,n)}}return n}addA11yClickSupport(t,n,r){this.a11yClickSupport=!0,this.updateEventInfoForA11yClick=t,this.preventDefaultForA11yClick=n,this.populateClickOnlyAction=r}},$b=function(e){return e[e.I_AM_THE_JSACTION_FRAMEWORK=0]="I_AM_THE_JSACTION_FRAMEWORK",e}($b||{}),wd=class{dispatchDelegate;actionResolver;eventReplayer;eventReplayScheduled=!1;replayEventInfoWrappers=[];constructor(t,{actionResolver:n,eventReplayer:r}={}){this.dispatchDelegate=t,this.actionResolver=n,this.eventReplayer=r}dispatch(t){let n=new Cd(t);this.actionResolver?.resolveEventType(t),this.actionResolver?.resolveAction(t);let r=n.getAction();if(r&&B_(r.element,n)&&T_(n.getEvent()),this.eventReplayer&&n.getIsReplay()){this.scheduleEventInfoWrapperReplay(n);return}this.dispatchDelegate(n)}scheduleEventInfoWrapperReplay(t){this.replayEventInfoWrappers.push(t),!this.eventReplayScheduled&&(this.eventReplayScheduled=!0,Promise.resolve().then(()=>{this.eventReplayScheduled=!1,this.eventReplayer(this.replayEventInfoWrappers)}))}};function B_(e,t){return e.tagName==="A"&&(t.getEventType()===k.CLICK||t.getEventType()===k.CLICKMOD)}var Hb=Symbol.for("propagationStopped"),Rd={REPLAY:101};var $_="`preventDefault` called during event replay.";var H_="`composedPath` called during event replay.",Ma=class{dispatchDelegate;clickModSupport;actionResolver;dispatcher;constructor(t,n=!0){this.dispatchDelegate=t,this.clickModSupport=n,this.actionResolver=new Sd({clickModSupport:n}),this.dispatcher=new wd(r=>{this.dispatchToDelegate(r)},{actionResolver:this.actionResolver})}dispatch(t){this.dispatcher.dispatch(t)}dispatchToDelegate(t){for(t.getIsReplay()&&G_(t),z_(t);t.getAction();){if(W_(t),Td(t.getEventType())&&t.getAction().element!==t.getTargetElement()||(this.dispatchDelegate(t.getEvent(),t.getAction().name),q_(t)))return;this.actionResolver.resolveParentAction(t.eventInfo)}}};function z_(e){let t=e.getEvent(),n=e.getEvent().stopPropagation.bind(t),r=()=>{t[Hb]=!0,n()};ur(t,"stopPropagation",r),ur(t,"stopImmediatePropagation",r)}function q_(e){return!!e.getEvent()[Hb]}function G_(e){let t=e.getEvent(),n=e.getTargetElement(),r=t.preventDefault.bind(t);ur(t,"target",n),ur(t,"eventPhase",Rd.REPLAY),ur(t,"preventDefault",()=>{throw r(),new Error($_+"")}),ur(t,"composedPath",()=>{throw new Error(H_+"")})}function W_(e){let t=e.getEvent(),n=e.getAction()?.element;n&&ur(t,"currentTarget",n,{configurable:!0})}function ur(e,t,n,{configurable:r=!1}={}){Object.defineProperty(e,t,{value:n,configurable:r})}function zb(e,t){e.ecrd(n=>{t.dispatch(n)},$b.I_AM_THE_JSACTION_FRAMEWORK)}function K_(e){return e?.q??[]}function J_(e){e&&(Ab(e.c,e.et,e.h),Ab(e.c,e.etc,e.h,!0))}function Ab(e,t,n,r){for(let i=0;i<t.length;i++)e.removeEventListener(t[i],n,r)}var Y_=!1,qb=(()=>{class e{static MOUSE_SPECIAL_SUPPORT=Y_;containerManager;eventHandlers={};browserEventTypeToExtraEventTypes={};dispatcher=null;queuedEventInfos=[];constructor(n){this.containerManager=n}handleEvent(n,r,i){let s=F_(n,r,r.target,i,Date.now());this.handleEventInfo(s)}handleEventInfo(n){if(!this.dispatcher){jb(n,!0),this.queuedEventInfos?.push(n);return}this.dispatcher(n)}addEvent(n,r,i){if(n in this.eventHandlers||!this.containerManager||!e.MOUSE_SPECIAL_SUPPORT&&v_.indexOf(n)>=0)return;let s=(a,c,u)=>{this.handleEvent(a,c,u)};this.eventHandlers[n]=s;let o=w_(r||n);if(o!==n){let a=this.browserEventTypeToExtraEventTypes[o]||[];a.push(n),this.browserEventTypeToExtraEventTypes[o]=a}this.containerManager.addEventListener(o,a=>c=>{s(n,c,a)},i)}replayEarlyEvents(n=window._ejsa){n&&(this.replayEarlyEventInfos(n.q),J_(n),delete window._ejsa)}replayEarlyEventInfos(n){for(let r=0;r<n.length;r++){let i=n[r],s=this.getEventTypesForBrowserEventType(i.eventType);for(let o=0;o<s.length;o++){let a=Bb(i);_d(a,s[o]),this.handleEventInfo(a)}}}getEventTypesForBrowserEventType(n){let r=[];return this.eventHandlers[n]&&r.push(n),this.browserEventTypeToExtraEventTypes[n]&&r.push(...this.browserEventTypeToExtraEventTypes[n]),r}handler(n){return this.eventHandlers[n]}cleanUp(){this.containerManager?.cleanUp(),this.containerManager=null,this.eventHandlers={},this.browserEventTypeToExtraEventTypes={},this.dispatcher=null,this.queuedEventInfos=[]}registerDispatcher(n,r){this.ecrd(n,r)}ecrd(n,r){if(this.dispatcher=n,this.queuedEventInfos?.length){for(let i=0;i<this.queuedEventInfos.length;i++)this.handleEventInfo(this.queuedEventInfos[i]);this.queuedEventInfos=null}}}return e})();function Gb(e,t=window){return K_(t._ejsas?.[e])}function Wb(e,t=window){t._ejsas&&(t._ejsas[e]=void 0)}var A=class extends Error{code;constructor(t,n){super(mc(t,n)),this.code=t}};function mc(e,t){return`${`NG0${Math.abs(e)}`}${t?": "+t:""}`}var VE=Symbol("InputSignalNode#UNSET"),Z_=R(E({},td),{transformFn:void 0,applyValueToInputSignal(e,t){ra(e,t)}});function BE(e,t){let n=Object.create(Z_);n.value=e,n.transformFn=t?.transform;function r(){if(Xo(n),n.value===VE)throw new A(-950,!1);return n.value}return r[mt]=n,r}function ws(e){return{toString:e}.toString()}var Aa="__parameters__";function Q_(e){return function(...n){if(e){let r=e(...n);for(let i in r)this[i]=r[i]}}}function $E(e,t,n){return ws(()=>{let r=Q_(t);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(c,u,l){let d=c.hasOwnProperty(Aa)?c[Aa]:Object.defineProperty(c,Aa,{value:[]})[Aa];for(;d.length<=l;)d.push(null);return(d[l]=d[l]||[]).push(o),c}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=e,i.annotationCls=i,i})}function ce(e){for(let t in e)if(e[t]===ce)return t;throw Error("Could not find renamed property on target object.")}function qe(e){if(typeof e=="string")return e;if(Array.isArray(e))return"["+e.map(qe).join(", ")+"]";if(e==null)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;let t=e.toString();if(t==null)return""+t;let n=t.indexOf(`
`);return n===-1?t:t.substring(0,n)}function Kb(e,t){return e==null||e===""?t===null?"":t:t==null||t===""?e:e+" "+t}var X_=ce({__forward_ref__:ce});function HE(e){return e.__forward_ref__=HE,e.toString=function(){return qe(this())},e}function Et(e){return zE(e)?e():e}function zE(e){return typeof e=="function"&&e.hasOwnProperty(X_)&&e.__forward_ref__===HE}function j(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function gc(e){return{providers:e.providers||[],imports:e.imports||[]}}function yc(e){return Jb(e,GE)||Jb(e,WE)}function qE(e){return yc(e)!==null}function Jb(e,t){return e.hasOwnProperty(t)?e[t]:null}function eR(e){let t=e&&(e[GE]||e[WE]);return t||null}function Yb(e){return e&&(e.hasOwnProperty(Zb)||e.hasOwnProperty(tR))?e[Zb]:null}var GE=ce({\u0275prov:ce}),Zb=ce({\u0275inj:ce}),WE=ce({ngInjectableDef:ce}),tR=ce({ngInjectorDef:ce}),O=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(t,n){this._desc=t,this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=j({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function KE(e){return e&&!!e.\u0275providers}var nR=ce({\u0275cmp:ce}),rR=ce({\u0275dir:ce}),iR=ce({\u0275pipe:ce}),sR=ce({\u0275mod:ce}),za=ce({\u0275fac:ce}),ms=ce({__NG_ELEMENT_ID__:ce}),Qb=ce({__NG_ENV_ID__:ce});function kf(e){return typeof e=="string"?e:e==null?"":String(e)}function oR(e){return typeof e=="function"?e.name||e.toString():typeof e=="object"&&e!=null&&typeof e.type=="function"?e.type.name||e.type.toString():kf(e)}function aR(e,t){let n=t?`. Dependency path: ${t.join(" > ")} > ${e}`:"";throw new A(-200,e)}function Of(e,t){throw new A(-201,!1)}var J=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}(J||{}),Ud;function JE(){return Ud}function bt(e){let t=Ud;return Ud=e,t}function YE(e,t,n){let r=yc(e);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&J.Optional)return null;if(t!==void 0)return t;Of(e,"Injector")}var cR={},gs=cR,Vd="__NG_DI_FLAG__",qa="ngTempTokenPath",uR="ngTokenPath",lR=/\n/gm,dR="\u0275",Xb="__source",ci;function fR(){return ci}function xn(e){let t=ci;return ci=e,t}function hR(e,t=J.Default){if(ci===void 0)throw new A(-203,!1);return ci===null?YE(e,void 0,t):ci.get(e,t&J.Optional?null:void 0,t)}function Q(e,t=J.Default){return(JE()||hR)(Et(e),t)}function D(e,t=J.Default){return Q(e,vc(t))}function vc(e){return typeof e>"u"||typeof e=="number"?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function Bd(e){let t=[];for(let n=0;n<e.length;n++){let r=Et(e[n]);if(Array.isArray(r)){if(r.length===0)throw new A(900,!1);let i,s=J.Default;for(let o=0;o<r.length;o++){let a=r[o],c=pR(a);typeof c=="number"?c===-1?i=a.token:s|=c:i=a}t.push(Q(i,s))}else t.push(Q(r))}return t}function ZE(e,t){return e[Vd]=t,e.prototype[Vd]=t,e}function pR(e){return e[Vd]}function mR(e,t,n,r){let i=e[qa];throw t[Xb]&&i.unshift(t[Xb]),e.message=gR(`
`+e.message,i,n,r),e[uR]=i,e[qa]=null,e}function gR(e,t,n,r=null){e=e&&e.charAt(0)===`
`&&e.charAt(1)==dR?e.slice(2):e;let i=qe(t);if(Array.isArray(t))i=t.map(qe).join(" -> ");else if(typeof t=="object"){let s=[];for(let o in t)if(t.hasOwnProperty(o)){let a=t[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):qe(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${e.replace(lR,`
  `)}`}var Pf=ZE($E("Optional"),8);var QE=ZE($E("SkipSelf"),4);function di(e,t){let n=e.hasOwnProperty(za);return n?e[za]:null}function yR(e,t,n){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],s=t[r];if(n&&(i=n(i),s=n(s)),s!==i)return!1}return!0}function vR(e){return e.flat(Number.POSITIVE_INFINITY)}function Lf(e,t){e.forEach(n=>Array.isArray(n)?Lf(n,t):t(n))}function XE(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function Ga(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}var ys={},qt=[],On=new O(""),eC=new O("",-1),tC=new O(""),Wa=class{get(t,n=gs){if(n===gs){let r=new Error(`NullInjectorError: No provider for ${qe(t)}!`);throw r.name="NullInjectorError",r}return n}};function nC(e,t){let n=e[sR]||null;if(!n&&t===!0)throw new Error(`Type ${qe(e)} does not have '\u0275mod' property.`);return n}function Pn(e){return e[nR]||null}function Ff(e){return e[rR]||null}function jf(e){return e[iR]||null}function rC(e){let t=Pn(e)||Ff(e)||jf(e);return t!==null?t.standalone:!1}function gr(e){return{\u0275providers:e}}function bR(...e){return{\u0275providers:Uf(!0,e),\u0275fromNgModule:!0}}function Uf(e,...t){let n=[],r=new Set,i,s=o=>{n.push(o)};return Lf(t,o=>{let a=o;$d(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&iC(i,s),n}function iC(e,t){for(let n=0;n<e.length;n++){let{ngModule:r,providers:i}=e[n];Vf(i,s=>{t(s,r)})}}function $d(e,t,n,r){if(e=Et(e),!e)return!1;let i=null,s=Yb(e),o=!s&&Pn(e);if(!s&&!o){let c=e.ngModule;if(s=Yb(c),s)i=c;else return!1}else{if(o&&!o.standalone)return!1;i=e}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let c=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let u of c)$d(u,t,n,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let u;try{Lf(s.imports,l=>{$d(l,t,n,r)&&(u||=[],u.push(l))})}finally{}u!==void 0&&iC(u,t)}if(!a){let u=di(i)||(()=>new i);t({provide:i,useFactory:u,deps:qt},i),t({provide:tC,useValue:i,multi:!0},i),t({provide:On,useValue:()=>Q(i),multi:!0},i)}let c=s.providers;if(c!=null&&!a){let u=e;Vf(c,l=>{t(l,u)})}}else return!1;return i!==e&&e.providers!==void 0}function Vf(e,t){for(let n of e)KE(n)&&(n=n.\u0275providers),Array.isArray(n)?Vf(n,t):t(n)}var ER=ce({provide:String,useValue:ce});function sC(e){return e!==null&&typeof e=="object"&&ER in e}function CR(e){return!!(e&&e.useExisting)}function SR(e){return!!(e&&e.useFactory)}function Hd(e){return typeof e=="function"}var bc=new O(""),La={},wR={},Nd;function Bf(){return Nd===void 0&&(Nd=new Wa),Nd}var it=class{},vs=class extends it{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(t,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,qd(t,o=>this.processProvider(o)),this.records.set(eC,ri(void 0,this)),i.has("environment")&&this.records.set(it,ri(void 0,this));let s=this.records.get(bc);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(tC,qt,J.Self))}destroy(){hs(this),this._destroyed=!0;let t=re(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),re(t)}}onDestroy(t){return hs(this),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){hs(this);let n=xn(this),r=bt(void 0),i;try{return t()}finally{xn(n),bt(r)}}get(t,n=gs,r=J.Default){if(hs(this),t.hasOwnProperty(Qb))return t[Qb](this);r=vc(r);let i,s=xn(this),o=bt(void 0);try{if(!(r&J.SkipSelf)){let c=this.records.get(t);if(c===void 0){let u=NR(t)&&yc(t);u&&this.injectableDefInScope(u)?c=ri(zd(t),La):c=null,this.records.set(t,c)}if(c!=null)return this.hydrate(t,c)}let a=r&J.Self?Bf():this.parent;return n=r&J.Optional&&n===gs?null:n,a.get(t,n)}catch(a){if(a.name==="NullInjectorError"){if((a[qa]=a[qa]||[]).unshift(qe(t)),s)throw a;return mR(a,t,"R3InjectorError",this.source)}else throw a}finally{bt(o),xn(s)}}resolveInjectorInitializers(){let t=re(null),n=xn(this),r=bt(void 0),i;try{let s=this.get(On,qt,J.Self);for(let o of s)o()}finally{xn(n),bt(r),re(t)}}toString(){let t=[],n=this.records;for(let r of n.keys())t.push(qe(r));return`R3Injector[${t.join(", ")}]`}processProvider(t){t=Et(t);let n=Hd(t)?t:Et(t&&t.provide),r=IR(t);if(!Hd(t)&&t.multi===!0){let i=this.records.get(n);i||(i=ri(void 0,La,!0),i.factory=()=>Bd(i.multi),this.records.set(n,i)),n=t,i.multi.push(t)}this.records.set(n,r)}hydrate(t,n){let r=re(null);try{return n.value===La&&(n.value=wR,n.value=n.factory()),typeof n.value=="object"&&n.value&&RR(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{re(r)}}injectableDefInScope(t){if(!t.providedIn)return!1;let n=Et(t.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(t){let n=this._onDestroyHooks.indexOf(t);n!==-1&&this._onDestroyHooks.splice(n,1)}};function zd(e){let t=yc(e),n=t!==null?t.factory:di(e);if(n!==null)return n;if(e instanceof O)throw new A(204,!1);if(e instanceof Function)return DR(e);throw new A(204,!1)}function DR(e){if(e.length>0)throw new A(204,!1);let n=eR(e);return n!==null?()=>n.factory(e):()=>new e}function IR(e){if(sC(e))return ri(void 0,e.useValue);{let t=TR(e);return ri(t,La)}}function TR(e,t,n){let r;if(Hd(e)){let i=Et(e);return di(i)||zd(i)}else if(sC(e))r=()=>Et(e.useValue);else if(SR(e))r=()=>e.useFactory(...Bd(e.deps||[]));else if(CR(e))r=()=>Q(Et(e.useExisting));else{let i=Et(e&&(e.useClass||e.provide));if(_R(e))r=()=>new i(...Bd(e.deps));else return di(i)||zd(i)}return r}function hs(e){if(e.destroyed)throw new A(205,!1)}function ri(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function _R(e){return!!e.deps}function RR(e){return e!==null&&typeof e=="object"&&typeof e.ngOnDestroy=="function"}function NR(e){return typeof e=="function"||typeof e=="object"&&e instanceof O}function qd(e,t){for(let n of e)Array.isArray(n)?qd(n,t):n&&KE(n)?qd(n.\u0275providers,t):t(n)}function St(e,t){e instanceof vs&&hs(e);let n,r=xn(e),i=bt(void 0);try{return t()}finally{xn(r),bt(i)}}function oC(){return JE()!==void 0||fR()!=null}function $f(e){if(!oC())throw new A(-203,!1)}function MR(e){return typeof e=="function"}var st=0,U=1,F=2,ke=3,Mt=4,kt=5,Jt=6,Ka=7,At=8,pn=9,Ln=10,Se=11,bs=12,eE=13,vi=14,Ct=15,dr=16,ii=17,mn=18,Ec=19,aC=20,kn=21,Md=22,Ja=23,rt=24,Oe=25,cC=1,hn=6,gn=7,Ya=8,fi=9,Ge=10,Za=function(e){return e[e.None=0]="None",e[e.HasTransplantedViews=2]="HasTransplantedViews",e}(Za||{});function Kt(e){return Array.isArray(e)&&typeof e[cC]=="object"}function Zt(e){return Array.isArray(e)&&e[cC]===!0}function Hf(e){return(e.flags&4)!==0}function Ds(e){return e.componentOffset>-1}function Cc(e){return(e.flags&1)===1}function Is(e){return!!e.template}function Qa(e){return(e[F]&512)!==0}function AR(e){return(e[F]&256)===256}var Gd=class{previousValue;currentValue;firstChange;constructor(t,n,r){this.previousValue=t,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function uC(e,t,n,r){t!==null?t.applyValueToInputSignal(t,r):e[n]=r}var zf=(()=>{let e=()=>lC;return e.ngInherit=!0,e})();function lC(e){return e.type.prototype.ngOnChanges&&(e.setInput=kR),xR}function xR(){let e=fC(this),t=e?.current;if(t){let n=e.previous;if(n===ys)e.previous=t;else for(let r in t)n[r]=t[r];e.current=null,this.ngOnChanges(t)}}function kR(e,t,n,r,i){let s=this.declaredInputs[r],o=fC(e)||OR(e,{previous:ys,current:null}),a=o.current||(o.current={}),c=o.previous,u=c[s];a[s]=new Gd(u&&u.currentValue,n,c===ys),uC(e,t,i,n)}var dC="__ngSimpleChanges__";function fC(e){return e[dC]||null}function OR(e,t){return e[dC]=t}var tE=null;var Gt=function(e,t,n){tE?.(e,t,n)},PR="svg",LR="math";function xt(e){for(;Array.isArray(e);)e=e[st];return e}function FR(e,t){return xt(t[e])}function at(e,t){return xt(t[e.index])}function Sc(e,t){return e.data[t]}function jR(e,t){return e[t]}function yr(e,t){let n=t[e];return Kt(n)?n:n[st]}function UR(e){return(e[F]&4)===4}function qf(e){return(e[F]&128)===128}function VR(e){return Zt(e[ke])}function hi(e,t){return t==null?null:e[t]}function hC(e){e[ii]=0}function Gf(e){e[F]&1024||(e[F]|=1024,qf(e)&&Dc(e))}function BR(e,t){for(;e>0;)t=t[vi],e--;return t}function wc(e){return!!(e[F]&9216||e[rt]?.dirty)}function Wd(e){e[Ln].changeDetectionScheduler?.notify(9),e[F]&64&&(e[F]|=1024),wc(e)&&Dc(e)}function Dc(e){e[Ln].changeDetectionScheduler?.notify(0);let t=fr(e);for(;t!==null&&!(t[F]&8192||(t[F]|=8192,!qf(t)));)t=fr(t)}function pC(e,t){if((e[F]&256)===256)throw new A(911,!1);e[kn]===null&&(e[kn]=[]),e[kn].push(t)}function $R(e,t){if(e[kn]===null)return;let n=e[kn].indexOf(t);n!==-1&&e[kn].splice(n,1)}function fr(e){let t=e[ke];return Zt(t)?t[ke]:t}var Y={lFrame:DC(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Kd=!1;function HR(){return Y.lFrame.elementDepthCount}function zR(){Y.lFrame.elementDepthCount++}function qR(){Y.lFrame.elementDepthCount--}function mC(){return Y.bindingsEnabled}function Ts(){return Y.skipHydrationRootTNode!==null}function GR(e){return Y.skipHydrationRootTNode===e}function WR(e){Y.skipHydrationRootTNode=e}function KR(){Y.skipHydrationRootTNode=null}function ge(){return Y.lFrame.lView}function ct(){return Y.lFrame.tView}function gC(e){return Y.lFrame.contextLView=e,e[At]}function yC(e){return Y.lFrame.contextLView=null,e}function wt(){let e=vC();for(;e!==null&&e.type===64;)e=e.parent;return e}function vC(){return Y.lFrame.currentTNode}function JR(){let e=Y.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}function vr(e,t){let n=Y.lFrame;n.currentTNode=e,n.isParent=t}function Wf(){return Y.lFrame.isParent}function bC(){Y.lFrame.isParent=!1}function YR(){return Y.lFrame.contextLView}function EC(){return Kd}function nE(e){let t=Kd;return Kd=e,t}function ZR(e){return Y.lFrame.bindingIndex=e}function Kf(){return Y.lFrame.bindingIndex++}function QR(){return Y.lFrame.inI18n}function XR(e,t){let n=Y.lFrame;n.bindingIndex=n.bindingRootIndex=e,Jd(t)}function eN(){return Y.lFrame.currentDirectiveIndex}function Jd(e){Y.lFrame.currentDirectiveIndex=e}function CC(){return Y.lFrame.currentQueryIndex}function Jf(e){Y.lFrame.currentQueryIndex=e}function tN(e){let t=e[U];return t.type===2?t.declTNode:t.type===1?e[kt]:null}function SC(e,t,n){if(n&J.SkipSelf){let i=t,s=e;for(;i=i.parent,i===null&&!(n&J.Host);)if(i=tN(s),i===null||(s=s[vi],i.type&10))break;if(i===null)return!1;t=i,e=s}let r=Y.lFrame=wC();return r.currentTNode=t,r.lView=e,!0}function Yf(e){let t=wC(),n=e[U];Y.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function wC(){let e=Y.lFrame,t=e===null?null:e.child;return t===null?DC(e):t}function DC(e){let t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return e!==null&&(e.child=t),t}function IC(){let e=Y.lFrame;return Y.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}var TC=IC;function Zf(){let e=IC();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function nN(e){return(Y.lFrame.contextLView=BR(e,Y.lFrame.contextLView))[At]}function Qf(){return Y.lFrame.selectedIndex}function hr(e){Y.lFrame.selectedIndex=e}function Xf(){let e=Y.lFrame;return Sc(e.tView,e.selectedIndex)}function _C(){return Y.lFrame.currentNamespace}var RC=!0;function Ic(){return RC}function Vn(e){RC=e}function rN(e,t,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=t.type.prototype;if(r){let o=lC(t);(n.preOrderHooks??=[]).push(e,o),(n.preOrderCheckHooks??=[]).push(e,o)}i&&(n.preOrderHooks??=[]).push(0-e,i),s&&((n.preOrderHooks??=[]).push(e,s),(n.preOrderCheckHooks??=[]).push(e,s))}function Tc(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){let s=e.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:u,ngOnDestroy:l}=s;o&&(e.contentHooks??=[]).push(-n,o),a&&((e.contentHooks??=[]).push(n,a),(e.contentCheckHooks??=[]).push(n,a)),c&&(e.viewHooks??=[]).push(-n,c),u&&((e.viewHooks??=[]).push(n,u),(e.viewCheckHooks??=[]).push(n,u)),l!=null&&(e.destroyHooks??=[]).push(n,l)}}function Fa(e,t,n){NC(e,t,3,n)}function ja(e,t,n,r){(e[F]&3)===n&&NC(e,t,n,r)}function Ad(e,t){let n=e[F];(n&3)===t&&(n&=16383,n+=1,e[F]=n)}function NC(e,t,n,r){let i=r!==void 0?e[ii]&65535:0,s=r??-1,o=t.length-1,a=0;for(let c=i;c<o;c++)if(typeof t[c+1]=="number"){if(a=t[c],r!=null&&a>=r)break}else t[c]<0&&(e[ii]+=65536),(a<s||s==-1)&&(iN(e,n,t,c),e[ii]=(e[ii]&4294901760)+c+2),c++}function rE(e,t){Gt(4,e,t);let n=re(null);try{t.call(e)}finally{re(n),Gt(5,e,t)}}function iN(e,t,n,r){let i=n[r]<0,s=n[r+1],o=i?-n[r]:n[r],a=e[o];i?e[F]>>14<e[ii]>>16&&(e[F]&3)===t&&(e[F]+=16384,rE(a,s)):rE(a,s)}var ui=-1,Es=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(t,n,r){this.factory=t,this.canSeeViewProviders=n,this.injectImpl=r}};function sN(e){return e instanceof Es}function oN(e){return(e.flags&8)!==0}function aN(e){return(e.flags&16)!==0}function Yd(e,t,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let s=n[r++],o=n[r++],a=n[r++];e.setAttribute(t,o,a,s)}else{let s=i,o=n[++r];uN(s)?e.setProperty(t,s,o):e.setAttribute(t,s,o),r++}}return r}function cN(e){return e===3||e===4||e===6}function uN(e){return e.charCodeAt(0)===64}function eh(e,t){if(!(t===null||t.length===0))if(e===null||e.length===0)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){let i=t[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?iE(e,n,i,null,t[++r]):iE(e,n,i,null,null))}}return e}function iE(e,t,n,r,i){let s=0,o=e.length;if(t===-1)o=-1;else for(;s<e.length;){let a=e[s++];if(typeof a=="number"){if(a===t){o=-1;break}else if(a>t){o=s-1;break}}}for(;s<e.length;){let a=e[s];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(e[s+1]=i);return}else if(r===e[s+1]){e[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(e.splice(o,0,t),s=o+1),e.splice(s++,0,n),r!==null&&e.splice(s++,0,r),i!==null&&e.splice(s++,0,i)}var xd={},li=class{injector;parentInjector;constructor(t,n){this.injector=t,this.parentInjector=n}get(t,n,r){r=vc(r);let i=this.injector.get(t,xd,r);return i!==xd||n===xd?i:this.parentInjector.get(t,n,r)}};function MC(e){return e!==ui}function Xa(e){return e&32767}function lN(e){return e>>16}function ec(e,t){let n=lN(e),r=t;for(;n>0;)r=r[vi],n--;return r}var Zd=!0;function sE(e){let t=Zd;return Zd=e,t}var dN=256,AC=dN-1,xC=5,fN=0,Wt={};function hN(e,t,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(ms)&&(r=n[ms]),r==null&&(r=n[ms]=fN++);let i=r&AC,s=1<<i;t.data[e+(i>>xC)]|=s}function kC(e,t){let n=OC(e,t);if(n!==-1)return n;let r=t[U];r.firstCreatePass&&(e.injectorIndex=t.length,kd(r.data,e),kd(t,null),kd(r.blueprint,null));let i=th(e,t),s=e.injectorIndex;if(MC(i)){let o=Xa(i),a=ec(i,t),c=a[U].data;for(let u=0;u<8;u++)t[s+u]=a[o+u]|c[o+u]}return t[s+8]=i,s}function kd(e,t){e.push(0,0,0,0,0,0,0,0,t)}function OC(e,t){return e.injectorIndex===-1||e.parent&&e.parent.injectorIndex===e.injectorIndex||t[e.injectorIndex+8]===null?-1:e.injectorIndex}function th(e,t){if(e.parent&&e.parent.injectorIndex!==-1)return e.parent.injectorIndex;let n=0,r=null,i=t;for(;i!==null;){if(r=UC(i),r===null)return ui;if(n++,i=i[vi],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return ui}function pN(e,t,n){hN(e,t,n)}function PC(e,t,n){if(n&J.Optional||e!==void 0)return e;Of(t,"NodeInjector")}function LC(e,t,n,r){if(n&J.Optional&&r===void 0&&(r=null),!(n&(J.Self|J.Host))){let i=e[pn],s=bt(void 0);try{return i?i.get(t,r,n&J.Optional):YE(t,r,n&J.Optional)}finally{bt(s)}}return PC(r,t,n)}function FC(e,t,n,r=J.Default,i){if(e!==null){if(t[F]&2048&&!(r&J.Self)){let o=vN(e,t,n,r,Wt);if(o!==Wt)return o}let s=jC(e,t,n,r,Wt);if(s!==Wt)return s}return LC(t,n,r,i)}function jC(e,t,n,r,i){let s=gN(n);if(typeof s=="function"){if(!SC(t,e,r))return r&J.Host?PC(i,n,r):LC(t,n,r,i);try{let o;if(o=s(r),o==null&&!(r&J.Optional))Of(n);else return o}finally{TC()}}else if(typeof s=="number"){let o=null,a=OC(e,t),c=ui,u=r&J.Host?t[Ct][kt]:null;for((a===-1||r&J.SkipSelf)&&(c=a===-1?th(e,t):t[a+8],c===ui||!aE(r,!1)?a=-1:(o=t[U],a=Xa(c),t=ec(c,t)));a!==-1;){let l=t[U];if(oE(s,a,l.data)){let d=mN(a,t,n,o,r,u);if(d!==Wt)return d}c=t[a+8],c!==ui&&aE(r,t[U].data[a+8]===u)&&oE(s,a,t)?(o=l,a=Xa(c),t=ec(c,t)):a=-1}}return i}function mN(e,t,n,r,i,s){let o=t[U],a=o.data[e+8],c=r==null?Ds(a)&&Zd:r!=o&&(a.type&3)!==0,u=i&J.Host&&s===a,l=Ua(a,o,n,c,u);return l!==null?pi(t,o,l,a):Wt}function Ua(e,t,n,r,i){let s=e.providerIndexes,o=t.data,a=s&1048575,c=e.directiveStart,u=e.directiveEnd,l=s>>20,d=r?a:a+l,f=i?a+l:u;for(let h=d;h<f;h++){let p=o[h];if(h<c&&n===p||h>=c&&p.type===n)return h}if(i){let h=o[c];if(h&&Is(h)&&h.type===n)return c}return null}function pi(e,t,n,r){let i=e[n],s=t.data;if(sN(i)){let o=i;o.resolving&&aR(oR(s[n]));let a=sE(o.canSeeViewProviders);o.resolving=!0;let c,u=o.injectImpl?bt(o.injectImpl):null,l=SC(e,r,J.Default);try{i=e[n]=o.factory(void 0,s,e,r),t.firstCreatePass&&n>=r.directiveStart&&rN(n,s[n],t)}finally{u!==null&&bt(u),sE(a),o.resolving=!1,TC()}}return i}function gN(e){if(typeof e=="string")return e.charCodeAt(0)||0;let t=e.hasOwnProperty(ms)?e[ms]:void 0;return typeof t=="number"?t>=0?t&AC:yN:t}function oE(e,t,n){let r=1<<e;return!!(n[t+(e>>xC)]&r)}function aE(e,t){return!(e&J.Self)&&!(e&J.Host&&t)}var lr=class{_tNode;_lView;constructor(t,n){this._tNode=t,this._lView=n}get(t,n,r){return FC(this._tNode,this._lView,t,vc(r),n)}};function yN(){return new lr(wt(),ge())}function nh(e){return ws(()=>{let t=e.prototype.constructor,n=t[za]||Qd(t),r=Object.prototype,i=Object.getPrototypeOf(e.prototype).constructor;for(;i&&i!==r;){let s=i[za]||Qd(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function Qd(e){return zE(e)?()=>{let t=Qd(Et(e));return t&&t()}:di(e)}function vN(e,t,n,r,i){let s=e,o=t;for(;s!==null&&o!==null&&o[F]&2048&&!(o[F]&512);){let a=jC(s,o,n,r|J.Self,Wt);if(a!==Wt)return a;let c=s.parent;if(!c){let u=o[aC];if(u){let l=u.get(n,Wt,r);if(l!==Wt)return l}c=UC(o),o=o[vi]}s=c}return i}function UC(e){let t=e[U],n=t.type;return n===2?t.declTNode:n===1?e[kt]:null}function cE(e,t=null,n=null,r){let i=VC(e,t,n,r);return i.resolveInjectorInitializers(),i}function VC(e,t=null,n=null,r,i=new Set){let s=[n||qt,bR(e)];return r=r||(typeof e=="object"?void 0:qe(e)),new vs(s,t||Bf(),r||null,i)}var ot=class e{static THROW_IF_NOT_FOUND=gs;static NULL=new Wa;static create(t,n){if(Array.isArray(t))return cE({name:""},n,t,"");{let r=t.name??"";return cE({name:r},t.parent,t.providers,r)}}static \u0275prov=j({token:e,providedIn:"any",factory:()=>Q(eC)});static __NG_ELEMENT_ID__=-1};var bN=new O("");bN.__NG_ELEMENT_ID__=e=>{let t=wt();if(t===null)throw new A(204,!1);if(t.type&2)return t.value;if(e&J.Optional)return null;throw new A(204,!1)};var BC=!1,bi=(()=>{class e{static __NG_ELEMENT_ID__=EN;static __NG_ENV_ID__=n=>n}return e})(),Xd=class extends bi{_lView;constructor(t){super(),this._lView=t}onDestroy(t){return pC(this._lView,t),()=>$R(this._lView,t)}};function EN(){return new Xd(ge())}var mi=class{},_c=new O("",{providedIn:"root",factory:()=>!1});var $C=new O(""),HC=new O(""),Bn=(()=>{class e{taskId=0;pendingTasks=new Set;get _hasPendingTasks(){return this.hasPendingTasks.value}hasPendingTasks=new M(!1);add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static \u0275prov=j({token:e,providedIn:"root",factory:()=>new e})}return e})();var ef=class extends be{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(t=!1){super(),this.__isAsync=t,oC()&&(this.destroyRef=D(bi,{optional:!0})??void 0,this.pendingTasks=D(Bn,{optional:!0})??void 0)}emit(t){let n=re(null);try{super.next(t)}finally{re(n)}}subscribe(t,n,r){let i=t,s=n||(()=>null),o=r;if(t&&typeof t=="object"){let c=t;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:i,error:s,complete:o});return t instanceof ve&&t.add(a),a}wrapInTimeout(t){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{t(n),r!==void 0&&this.pendingTasks?.remove(r)})}}},nt=ef;function tc(...e){}function zC(e){let t,n;function r(){e=tc;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),t!==void 0&&clearTimeout(t)}catch{}}return t=setTimeout(()=>{e(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{e(),r()})),()=>r()}function uE(e){return queueMicrotask(()=>e()),()=>{e=tc}}var rh="isAngularZone",nc=rh+"_ID",CN=0,Ce=class e{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new nt(!1);onMicrotaskEmpty=new nt(!1);onStable=new nt(!1);onError=new nt(!1);constructor(t){let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=BC}=t;if(typeof Zone>"u")throw new A(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&r,o.shouldCoalesceRunChangeDetection=i,o.callbackScheduled=!1,o.scheduleInRootZone=s,DN(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(rh)===!0}static assertInAngularZone(){if(!e.isInAngularZone())throw new A(909,!1)}static assertNotInAngularZone(){if(e.isInAngularZone())throw new A(909,!1)}run(t,n,r){return this._inner.run(t,n,r)}runTask(t,n,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,t,SN,tc,tc);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(t,n,r){return this._inner.runGuarded(t,n,r)}runOutsideAngular(t){return this._outer.run(t)}},SN={};function ih(e){if(e._nesting==0&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function wN(e){if(e.isCheckStableRunning||e.callbackScheduled)return;e.callbackScheduled=!0;function t(){zC(()=>{e.callbackScheduled=!1,tf(e),e.isCheckStableRunning=!0,ih(e),e.isCheckStableRunning=!1})}e.scheduleInRootZone?Zone.root.run(()=>{t()}):e._outer.run(()=>{t()}),tf(e)}function DN(e){let t=()=>{wN(e)},n=CN++;e._inner=e._inner.fork({name:"angular",properties:{[rh]:!0,[nc]:n,[nc+n]:!0},onInvokeTask:(r,i,s,o,a,c)=>{if(IN(c))return r.invokeTask(s,o,a,c);try{return lE(e),r.invokeTask(s,o,a,c)}finally{(e.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||e.shouldCoalesceRunChangeDetection)&&t(),dE(e)}},onInvoke:(r,i,s,o,a,c,u)=>{try{return lE(e),r.invoke(s,o,a,c,u)}finally{e.shouldCoalesceRunChangeDetection&&!e.callbackScheduled&&!TN(c)&&t(),dE(e)}},onHasTask:(r,i,s,o)=>{r.hasTask(s,o),i===s&&(o.change=="microTask"?(e._hasPendingMicrotasks=o.microTask,tf(e),ih(e)):o.change=="macroTask"&&(e.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,i,s,o)=>(r.handleError(s,o),e.runOutsideAngular(()=>e.onError.emit(o)),!1)})}function tf(e){e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&e.callbackScheduled===!0?e.hasPendingMicrotasks=!0:e.hasPendingMicrotasks=!1}function lE(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function dE(e){e._nesting--,ih(e)}var nf=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new nt;onMicrotaskEmpty=new nt;onStable=new nt;onError=new nt;run(t,n,r){return t.apply(n,r)}runGuarded(t,n,r){return t.apply(n,r)}runOutsideAngular(t){return t()}runTask(t,n,r,i){return t.apply(n,r)}};function IN(e){return qC(e,"__ignore_ng_zone__")}function TN(e){return qC(e,"__scheduler_tick__")}function qC(e,t){return!Array.isArray(e)||e.length!==1?!1:e[0]?.data?.[t]===!0}var yn=class{_console=console;handleError(t){this._console.error("ERROR",t)}},_N=new O("",{providedIn:"root",factory:()=>{let e=D(Ce),t=D(yn);return n=>e.runOutsideAngular(()=>t.handleError(n))}});function fE(e,t){return BE(e,t)}function RN(e){return BE(VE,e)}var GC=(fE.required=RN,fE);function NN(){return Ei(wt(),ge())}function Ei(e,t){return new br(at(e,t))}var br=(()=>{class e{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=NN}return e})();function MN(e){return e instanceof br?e.nativeElement:e}function AN(){return this._results[Symbol.iterator]()}var rf=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new be}constructor(t=!1){this._emitDistinctChangesOnly=t}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,n){return this._results.reduce(t,n)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,n){this.dirty=!1;let r=vR(t);(this._changesDetected=!yR(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(t){this._onDirty=t}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=AN},xN="ngSkipHydration",kN="ngskiphydration";function WC(e){let t=e.mergedAttrs;if(t===null)return!1;for(let n=0;n<t.length;n+=2){let r=t[n];if(typeof r=="number")return!1;if(typeof r=="string"&&r.toLowerCase()===kN)return!0}return!1}function KC(e){return e.hasAttribute(xN)}function rc(e){return(e.flags&128)===128}function ON(e){if(rc(e))return!0;let t=e.parent;for(;t;){if(rc(e)||WC(t))return!0;t=t.parent}return!1}var JC=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}(JC||{}),YC=new Map,PN=0;function LN(){return PN++}function FN(e){YC.set(e[Ec],e)}function sf(e){YC.delete(e[Ec])}var hE="__ngContext__";function Fn(e,t){Kt(t)?(e[hE]=t[Ec],FN(t)):e[hE]=t}function ZC(e){return XC(e[bs])}function QC(e){return XC(e[Mt])}function XC(e){for(;e!==null&&!Zt(e);)e=e[Mt];return e}var of;function eS(e){of=e}function Rc(){if(of!==void 0)return of;if(typeof document<"u")return document;throw new A(210,!1)}var Ci=new O("",{providedIn:"root",factory:()=>jN}),jN="ng",sh=new O(""),vn=new O("",{providedIn:"platform",factory:()=>"unknown"});var oh=new O("",{providedIn:"root",factory:()=>Rc().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function UN(){let e=new Er;return D(vn)==="browser"&&(e.store=VN(Rc(),D(Ci))),e}var Er=(()=>{class e{static \u0275prov=j({token:e,providedIn:"root",factory:UN});store={};onSerializeCallbacks={};get(n,r){return this.store[n]!==void 0?this.store[n]:r}set(n,r){this.store[n]=r}remove(n){delete this.store[n]}hasKey(n){return this.store.hasOwnProperty(n)}get isEmpty(){return Object.keys(this.store).length===0}onSerialize(n,r){this.onSerializeCallbacks[n]=r}toJson(){for(let n in this.onSerializeCallbacks)if(this.onSerializeCallbacks.hasOwnProperty(n))try{this.store[n]=this.onSerializeCallbacks[n]()}catch(r){console.warn("Exception in onSerialize callback: ",r)}return JSON.stringify(this.store).replace(/</g,"\\u003C")}}return e})();function VN(e,t){let n=e.getElementById(t+"-state");if(n?.textContent)try{return JSON.parse(n.textContent)}catch(r){console.warn("Exception while restoring TransferState for app "+t,r)}return{}}var tS="h",nS="b",af=function(e){return e.FirstChild="f",e.NextSibling="n",e}(af||{}),BN="e",$N="t",ah="c",rS="x",ic="r",HN="i",zN="n",iS="d";var qN="di",GN="s",WN="p";var xa=new O(""),sS=!1,oS=new O("",{providedIn:"root",factory:()=>sS});var aS=new O(""),KN=!1,JN=new O(""),pE=new O("",{providedIn:"root",factory:()=>new Map}),mE=new Set;function Qt(e){mE.has(e)||(mE.add(e),performance?.mark?.("mark_feature_usage",{detail:{feature:e}}))}var si=function(e){return e[e.EarlyRead=0]="EarlyRead",e[e.Write=1]="Write",e[e.MixedReadWrite=2]="MixedReadWrite",e[e.Read=3]="Read",e}(si||{}),cS=(()=>{class e{impl=null;execute(){this.impl?.execute()}static \u0275prov=j({token:e,providedIn:"root",factory:()=>new e})}return e})(),YN=[si.EarlyRead,si.Write,si.MixedReadWrite,si.Read],ZN=(()=>{class e{ngZone=D(Ce);scheduler=D(mi);errorHandler=D(yn,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;execute(){this.executing=!0;for(let n of YN)for(let r of this.sequences)if(!(r.erroredOrDestroyed||!r.hooks[n]))try{r.pipelinedValue=this.ngZone.runOutsideAngular(()=>r.hooks[n](r.pipelinedValue))}catch(i){r.erroredOrDestroyed=!0,this.errorHandler?.handleError(i)}this.executing=!1;for(let n of this.sequences)n.afterRun(),n.once&&(this.sequences.delete(n),n.destroy());for(let n of this.deferredRegistrations)this.sequences.add(n);this.deferredRegistrations.size>0&&this.scheduler.notify(8),this.deferredRegistrations.clear()}register(n){this.executing?this.deferredRegistrations.add(n):(this.sequences.add(n),this.scheduler.notify(7))}unregister(n){this.executing&&this.sequences.has(n)?(n.erroredOrDestroyed=!0,n.pipelinedValue=void 0,n.once=!0):(this.sequences.delete(n),this.deferredRegistrations.delete(n))}static \u0275prov=j({token:e,providedIn:"root",factory:()=>new e})}return e})(),cf=class{impl;hooks;once;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(t,n,r,i){this.impl=t,this.hooks=n,this.once=r,this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.()}};function ch(e,t){!t?.injector&&$f(ch);let n=t?.injector??D(ot);return Qt("NgAfterNextRender"),XN(e,n,t,!0)}function QN(e,t){if(e instanceof Function){let n=[void 0,void 0,void 0,void 0];return n[t]=e,n}else return[e.earlyRead,e.write,e.mixedReadWrite,e.read]}function XN(e,t,n,r){let i=t.get(cS);i.impl??=t.get(ZN);let s=n?.phase??si.MixedReadWrite,o=n?.manualCleanup!==!0?t.get(bi):null,a=new cf(i.impl,QN(e,s),r,o);return i.impl.register(a),a}var tt=function(e){return e[e.NOT_STARTED=0]="NOT_STARTED",e[e.IN_PROGRESS=1]="IN_PROGRESS",e[e.COMPLETE=2]="COMPLETE",e[e.FAILED=3]="FAILED",e}(tt||{}),gE=0,eM=1,xe=function(e){return e[e.Placeholder=0]="Placeholder",e[e.Loading=1]="Loading",e[e.Complete=2]="Complete",e[e.Error=3]="Error",e}(xe||{});var tM=0,uh=1;var nM=4,rM=5;var iM=7,fn=8,sM=9,uS=function(e){return e[e.Manual=0]="Manual",e[e.Playthrough=1]="Playthrough",e}(uS||{});function Va(e,t){let n=aM(e),r=t[n];if(r!==null){for(let i of r)i();t[n]=null}}function oM(e){Va(1,e),Va(0,e),Va(2,e)}function aM(e){let t=nM;return e===1?t=rM:e===2&&(t=sM),t}function lS(e){return e+1}function Nc(e,t){let n=e[U],r=lS(t.index);return e[r]}function Mc(e,t){let n=lS(t.index);return e.data[n]}function cM(e,t,n){let r=t[U],i=Mc(r,n);switch(e){case xe.Complete:return i.primaryTmplIndex;case xe.Loading:return i.loadingTmplIndex;case xe.Error:return i.errorTmplIndex;case xe.Placeholder:return i.placeholderTmplIndex;default:return null}}function yE(e,t){return t===xe.Placeholder?e.placeholderBlockConfig?.[gE]??null:t===xe.Loading?e.loadingBlockConfig?.[gE]??null:null}function uM(e){return e.loadingBlockConfig?.[eM]??null}function vE(e,t){if(!e||e.length===0)return t;let n=new Set(e);for(let r of t)n.add(r);return e.length===n.size?e:Array.from(n)}function lM(e,t){let n=t.primaryTmplIndex+Oe;return Sc(e,n)}var Ac="ngb";var dM=(e,t,n)=>{let r=e,i=r.__jsaction_fns??new Map,s=i.get(t)??[];s.push(n),i.set(t,s),r.__jsaction_fns=i},fM=(e,t)=>{let n=e.getAttribute(Ac)??"",r=e,i=t.get(n)??new Set;i.has(r)||i.add(r),t.set(n,i)};var hM=e=>{e.removeAttribute(Dd.JSACTION),e.removeAttribute(Ac),e.__jsaction_fns=void 0},pM=new O("",{providedIn:"root",factory:()=>({})});function dS(e,t){let n=t?.__jsaction_fns?.get(e.type);if(n)for(let r of n)r(e)}var lh=new O("");var mM="__nghData__",fS=mM,gM="__nghDeferData__",hS=gM,Od="ngh",yM="nghm",pS=()=>null;function vM(e,t,n=!1){let r=e.getAttribute(Od);if(r==null)return null;let[i,s]=r.split("|");if(r=n?s:i,!r)return null;let o=s?`|${s}`:"",a=n?i:o,c={},u;if(r!==""){let d=t.get(Er,null,{optional:!0});if(d!==null){let f=d.get(fS,[]);u=d.get(hS,{}),c=f[Number(r)]}}let l={data:c,firstChild:e.firstChild??null};return n&&(l.firstChild=e,xc(l,0,e.nextSibling)),a?e.setAttribute(Od,a):e.removeAttribute(Od),l}function bM(){pS=vM}function dh(e,t,n=!1){return pS(e,t,n)}function EM(e){let t=e._lView;return t[U].type===2?null:(Qa(t)&&(t=t[Oe]),t)}function CM(e){return e.textContent?.replace(/\s/gm,"")}function SM(e){let t=Rc(),n=t.createNodeIterator(e,NodeFilter.SHOW_COMMENT,{acceptNode(s){let o=CM(s);return o==="ngetn"||o==="ngtns"?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}}),r,i=[];for(;r=n.nextNode();)i.push(r);for(let s of i)s.textContent==="ngetn"?s.replaceWith(t.createTextNode("")):s.remove()}function xc(e,t,n){e.segmentHeads??={},e.segmentHeads[t]=n}function uf(e,t){return e.segmentHeads?.[t]??null}function wM(e){return e.get(JN,!1,{optional:!0})}function DM(e,t){let n=e.data,r=n[BN]?.[t]??null;return r===null&&n[ah]?.[t]&&(r=fh(e,t)),r}function mS(e,t){return e.data[ah]?.[t]??null}function fh(e,t){let n=mS(e,t)??[],r=0;for(let i of n)r+=i[ic]*(i[rS]??1);return r}function IM(e){if(typeof e.disconnectedNodes>"u"){let t=e.data[iS];e.disconnectedNodes=t?new Set(t):null}return e.disconnectedNodes}function _s(e,t){if(typeof e.disconnectedNodes>"u"){let n=e.data[iS];e.disconnectedNodes=n?new Set(n):null}return!!IM(e)?.has(t)}function TM(e,t){let n=t.get(lh),i=t.get(Er).get(hS,{}),s=!1,o=e,a=[];for(;!s&&o;)a.unshift(o),s=n.has(o),o=i[o][WN];return a}var Yt=function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}(Yt||{});var _M=/^>|^->|<!--|-->|--!>|<!-$/g,RM=/(<|>)/g,NM="\u200B$1\u200B";function MM(e){return e.replace(_M,t=>t.replace(RM,NM))}function AM(e){return e.ownerDocument.body}function gS(e){return e instanceof Function?e():e}var jn=function(e){return e[e.None=0]="None",e[e.SignalBased=1]="SignalBased",e[e.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",e}(jn||{}),Cr=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}(Cr||{}),xM;function hh(e,t){return xM(e,t)}function oi(e,t,n,r,i){if(r!=null){let s,o=!1;Zt(r)?s=r:Kt(r)&&(o=!0,r=r[st]);let a=xt(r);e===0&&n!==null?i==null?CS(t,n,a):oc(t,n,a,i||null,!0):e===1&&n!==null?oc(t,n,a,i||null,!0):e===2?yh(t,a,o):e===3&&t.destroyNode(a),s!=null&&WM(t,e,s,n,i)}}function yS(e,t){return e.createText(t)}function kM(e,t,n){e.setValue(t,n)}function vS(e,t){return e.createComment(MM(t))}function ph(e,t,n){return e.createElement(t,n)}function OM(e,t){bS(e,t),t[st]=null,t[kt]=null}function PM(e,t,n,r,i,s){r[st]=i,r[kt]=t,Oc(e,r,n,1,i,s)}function bS(e,t){t[Ln].changeDetectionScheduler?.notify(10),Oc(e,t,t[Se],2,null,null)}function LM(e){let t=e[bs];if(!t)return Pd(e[U],e);for(;t;){let n=null;if(Kt(t))n=t[bs];else{let r=t[Ge];r&&(n=r)}if(!n){for(;t&&!t[Mt]&&t!==e;)Kt(t)&&Pd(t[U],t),t=t[ke];t===null&&(t=e),Kt(t)&&Pd(t[U],t),n=t&&t[Mt]}t=n}}function FM(e,t,n,r){let i=Ge+r,s=n.length;r>0&&(n[i-1][Mt]=t),r<s-Ge?(t[Mt]=n[i],XE(n,Ge+r,t)):(n.push(t),t[Mt]=null),t[ke]=n;let o=t[dr];o!==null&&n!==o&&ES(o,t);let a=t[mn];a!==null&&a.insertView(e),Wd(t),t[F]|=128}function ES(e,t){let n=e[fi],r=t[ke];if(Kt(r))e[F]|=Za.HasTransplantedViews;else{let i=r[ke][Ct];t[Ct]!==i&&(e[F]|=Za.HasTransplantedViews)}n===null?e[fi]=[t]:n.push(t)}function mh(e,t){let n=e[fi],r=n.indexOf(t);n.splice(r,1)}function sc(e,t){if(e.length<=Ge)return;let n=Ge+t,r=e[n];if(r){let i=r[dr];i!==null&&i!==e&&mh(i,r),t>0&&(e[n-1][Mt]=r[Mt]);let s=Ga(e,Ge+t);OM(r[U],r);let o=s[mn];o!==null&&o.detachView(s[U]),r[ke]=null,r[Mt]=null,r[F]&=-129}return r}function gh(e,t){if(!(t[F]&256)){let n=t[Se];n.destroyNode&&Oc(e,t,n,3,null,null),LM(t)}}function Pd(e,t){if(t[F]&256)return;let n=re(null);try{t[F]&=-129,t[F]|=256,t[rt]&&ed(t[rt]),UM(e,t),jM(e,t),t[U].type===1&&t[Se].destroy();let r=t[dr];if(r!==null&&Zt(t[ke])){r!==t[ke]&&mh(r,t);let i=t[mn];i!==null&&i.detachView(e)}sf(t)}finally{re(n)}}function jM(e,t){let n=e.cleanup,r=t[Ka];if(n!==null)for(let o=0;o<n.length-1;o+=2)if(typeof n[o]=="string"){let a=n[o+3];a>=0?r[a]():r[-a].unsubscribe(),o+=2}else{let a=r[n[o+1]];n[o].call(a)}r!==null&&(t[Ka]=null);let i=t[kn];if(i!==null){t[kn]=null;for(let o=0;o<i.length;o++){let a=i[o];a()}}let s=t[Ja];if(s!==null){t[Ja]=null;for(let o of s)o.destroy()}}function UM(e,t){let n;if(e!=null&&(n=e.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=t[n[r]];if(!(i instanceof Es)){let s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],c=s[o+1];Gt(4,a,c);try{c.call(a)}finally{Gt(5,a,c)}}else{Gt(4,i,s);try{s.call(i)}finally{Gt(5,i,s)}}}}}function VM(e,t,n){return BM(e,t.parent,n)}function BM(e,t,n){let r=t;for(;r!==null&&r.type&168;)t=r,r=t.parent;if(r===null)return n[st];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=e.data[r.directiveStart+i];if(s===Yt.None||s===Yt.Emulated)return null}return at(r,n)}}function oc(e,t,n,r,i){e.insertBefore(t,n,r,i)}function CS(e,t,n){e.appendChild(t,n)}function bE(e,t,n,r,i){r!==null?oc(e,t,n,r,i):CS(e,t,n)}function SS(e,t){return e.parentNode(t)}function $M(e,t){return e.nextSibling(t)}function HM(e,t,n){return qM(e,t,n)}function zM(e,t,n){return e.type&40?at(e,n):null}var qM=zM,EE;function kc(e,t,n,r){let i=VM(e,r,t),s=t[Se],o=r.parent||t[kt],a=HM(o,r,t);if(i!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)bE(s,i,n[c],a,!1);else bE(s,i,n,a,!1);EE!==void 0&&EE(s,r,t,n,i)}function ps(e,t){if(t!==null){let n=t.type;if(n&3)return at(t,e);if(n&4)return lf(-1,e[t.index]);if(n&8){let r=t.child;if(r!==null)return ps(e,r);{let i=e[t.index];return Zt(i)?lf(-1,i):xt(i)}}else{if(n&128)return ps(e,t.next);if(n&32)return hh(t,e)()||xt(e[t.index]);{let r=wS(e,t);if(r!==null){if(Array.isArray(r))return r[0];let i=fr(e[Ct]);return ps(i,r)}else return ps(e,t.next)}}}return null}function wS(e,t){if(t!==null){let r=e[Ct][kt],i=t.projection;return r.projection[i]}return null}function lf(e,t){let n=Ge+e+1;if(n<t.length){let r=t[n],i=r[U].firstChild;if(i!==null)return ps(r,i)}return t[gn]}function yh(e,t,n){e.removeChild(null,t,n)}function DS(e){e.textContent=""}function vh(e,t,n,r,i,s,o){for(;n!=null;){if(n.type===128){n=n.next;continue}let a=r[n.index],c=n.type;if(o&&t===0&&(a&&Fn(xt(a),r),n.flags|=2),(n.flags&32)!==32)if(c&8)vh(e,t,n.child,r,i,s,!1),oi(t,e,i,a,s);else if(c&32){let u=hh(n,r),l;for(;l=u();)oi(t,e,i,l,s);oi(t,e,i,a,s)}else c&16?GM(e,t,r,n,i,s):oi(t,e,i,a,s);n=o?n.projectionNext:n.next}}function Oc(e,t,n,r,i,s){vh(n,r,e.firstChild,t,i,s,!1)}function GM(e,t,n,r,i,s){let o=n[Ct],c=o[kt].projection[r.projection];if(Array.isArray(c))for(let u=0;u<c.length;u++){let l=c[u];oi(t,e,i,l,s)}else{let u=c,l=o[ke];rc(r)&&(u.flags|=128),vh(e,t,u,l,i,s,!0)}}function WM(e,t,n,r,i){let s=n[gn],o=xt(n);s!==o&&oi(t,e,r,s,i);for(let a=Ge;a<n.length;a++){let c=n[a];Oc(c[U],c,e,t,r,s)}}function KM(e,t,n){e.setAttribute(t,"style",n)}function IS(e,t,n){n===""?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n)}function TS(e,t,n){let{mergedAttrs:r,classes:i,styles:s}=n;r!==null&&Yd(e,t,r),i!==null&&IS(e,t,i),s!==null&&KM(e,t,s)}function JM(e,t,n){let r=e.length;for(;;){let i=e.indexOf(t,n);if(i===-1)return i;if(i===0||e.charCodeAt(i-1)<=32){let s=t.length;if(i+s===r||e.charCodeAt(i+s)<=32)return i}n=i+1}}var _S="ng-template";function YM(e,t,n,r){let i=0;if(r){for(;i<t.length&&typeof t[i]=="string";i+=2)if(t[i]==="class"&&JM(t[i+1].toLowerCase(),n,0)!==-1)return!0}else if(bh(e))return!1;if(i=t.indexOf(1,i),i>-1){let s;for(;++i<t.length&&typeof(s=t[i])=="string";)if(s.toLowerCase()===n)return!0}return!1}function bh(e){return e.type===4&&e.value!==_S}function ZM(e,t,n){let r=e.type===4&&!n?_S:e.value;return t===r}function QM(e,t,n){let r=4,i=e.attrs,s=i!==null?tA(i):0,o=!1;for(let a=0;a<t.length;a++){let c=t[a];if(typeof c=="number"){if(!o&&!Nt(r)&&!Nt(c))return!1;if(o&&Nt(c))continue;o=!1,r=c|r&1;continue}if(!o)if(r&4){if(r=2|r&1,c!==""&&!ZM(e,c,n)||c===""&&t.length===1){if(Nt(r))return!1;o=!0}}else if(r&8){if(i===null||!YM(e,i,c,n)){if(Nt(r))return!1;o=!0}}else{let u=t[++a],l=XM(c,i,bh(e),n);if(l===-1){if(Nt(r))return!1;o=!0;continue}if(u!==""){let d;if(l>s?d="":d=i[l+1].toLowerCase(),r&2&&u!==d){if(Nt(r))return!1;o=!0}}}}return Nt(r)||o}function Nt(e){return(e&1)===0}function XM(e,t,n,r){if(t===null)return-1;let i=0;if(r||!n){let s=!1;for(;i<t.length;){let o=t[i];if(o===e)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=t[++i];for(;typeof a=="string";)a=t[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return nA(t,e)}function eA(e,t,n=!1){for(let r=0;r<t.length;r++)if(QM(e,t[r],n))return!0;return!1}function tA(e){for(let t=0;t<e.length;t++){let n=e[t];if(cN(n))return t}return e.length}function nA(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){let r=e[n];if(typeof r=="number")return-1;if(r===t)return n;n++}return-1}function CE(e,t){return e?":not("+t.trim()+")":t}function rA(e){let t=e[0],n=1,r=2,i="",s=!1;for(;n<e.length;){let o=e[n];if(typeof o=="string")if(r&2){let a=e[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!Nt(o)&&(t+=CE(s,i),i=""),r=o,s=s||!Nt(r);n++}return i!==""&&(t+=CE(s,i)),t}function iA(e){return e.map(rA).join(",")}function sA(e){let t=[],n=[],r=1,i=2;for(;r<e.length;){let s=e[r];if(typeof s=="string")i===2?s!==""&&t.push(s,e[++r]):i===8&&n.push(s);else{if(!Nt(i))break;i=s}r++}return{attrs:t,classes:n}}var Rs={};function Ot(e=1){RS(ct(),ge(),Qf()+e,!1)}function RS(e,t,n,r){if(!r)if((t[F]&3)===3){let s=e.preOrderCheckHooks;s!==null&&Fa(t,s,n)}else{let s=e.preOrderHooks;s!==null&&ja(t,s,0,n)}hr(n)}function Ke(e,t=J.Default){let n=ge();if(n===null)return Q(e,t);let r=wt();return FC(r,n,Et(e),t)}function NS(e,t,n,r,i,s){let o=re(null);try{let a=null;i&jn.SignalBased&&(a=t[r][mt]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),i&jn.HasDecoratorInputTransform&&(s=e.inputTransforms[r].call(t,s)),e.setInput!==null?e.setInput(t,a,s,n,r):uC(t,a,r,s)}finally{re(o)}}function oA(e,t){let n=e.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)hr(~i);else{let s=i,o=n[++r],a=n[++r];XR(o,s);let c=t[s];a(2,c)}}}finally{hr(-1)}}function Pc(e,t,n,r,i,s,o,a,c,u,l){let d=t.blueprint.slice();return d[st]=i,d[F]=r|4|128|8|64|1024,(u!==null||e&&e[F]&2048)&&(d[F]|=2048),hC(d),d[ke]=d[vi]=e,d[At]=n,d[Ln]=o||e&&e[Ln],d[Se]=a||e&&e[Se],d[pn]=c||e&&e[pn]||null,d[kt]=s,d[Ec]=LN(),d[Jt]=l,d[aC]=u,d[Ct]=t.type==2?e[Ct]:d,d}function Ns(e,t,n,r,i){let s=e.data[t];if(s===null)s=aA(e,t,n,r,i),QR()&&(s.flags|=32);else if(s.type&64){s.type=n,s.value=r,s.attrs=i;let o=JR();s.injectorIndex=o===null?-1:o.injectorIndex}return vr(s,!0),s}function aA(e,t,n,r,i){let s=vC(),o=Wf(),a=o?s:s&&s.parent,c=e.data[t]=pA(e,a,n,t,r,i);return e.firstChild===null&&(e.firstChild=c),s!==null&&(o?s.child==null&&c.parent!==null&&(s.child=c):s.next===null&&(s.next=c,c.prev=s)),c}function MS(e,t,n,r){if(n===0)return-1;let i=t.length;for(let s=0;s<n;s++)t.push(r),e.blueprint.push(r),e.data.push(null);return i}function AS(e,t,n,r,i){let s=Qf(),o=r&2;try{hr(-1),o&&t.length>Oe&&RS(e,t,Oe,!1),Gt(o?2:0,i),n(r,i)}finally{hr(s),Gt(o?3:1,i)}}function Eh(e,t,n){if(Hf(t)){let r=re(null);try{let i=t.directiveStart,s=t.directiveEnd;for(let o=i;o<s;o++){let a=e.data[o];if(a.contentQueries){let c=n[o];a.contentQueries(1,c,o)}}}finally{re(r)}}}function Ch(e,t,n){mC()&&(EA(e,t,n,at(n,t)),(n.flags&64)===64&&LS(e,t,n))}function Sh(e,t,n=at){let r=t.localNames;if(r!==null){let i=t.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?n(t,e):e[o];e[i++]=a}}}function xS(e){let t=e.tView;return t===null||t.incompleteFirstPass?e.tView=wh(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):t}function wh(e,t,n,r,i,s,o,a,c,u,l){let d=Oe+r,f=d+i,h=cA(d,f),p=typeof u=="function"?u():u;return h[U]={type:e,blueprint:h,template:n,queries:null,viewQuery:a,declTNode:t,data:h.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:f,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:c,consts:p,incompleteFirstPass:!1,ssrId:l}}function cA(e,t){let n=[];for(let r=0;r<t;r++)n.push(r<e?null:Rs);return n}function uA(e,t,n,r){let s=r.get(oS,sS)||n===Yt.ShadowDom,o=e.selectRootElement(t,s);return lA(o),o}function lA(e){kS(e)}var kS=()=>null;function dA(e){KC(e)?DS(e):SM(e)}function fA(){kS=dA}function hA(e,t,n,r){let i=VS(t);i.push(n),e.firstCreatePass&&BS(e).push(r,i.length-1)}function pA(e,t,n,r,i,s){let o=t?t.injectorIndex:-1,a=0;return Ts()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function SE(e,t,n,r,i){for(let s in t){if(!t.hasOwnProperty(s))continue;let o=t[s];if(o===void 0)continue;r??={};let a,c=jn.None;Array.isArray(o)?(a=o[0],c=o[1]):a=o;let u=s;if(i!==null){if(!i.hasOwnProperty(s))continue;u=i[s]}e===0?wE(r,n,u,a,c):wE(r,n,u,a)}return r}function wE(e,t,n,r,i){let s;e.hasOwnProperty(n)?(s=e[n]).push(t,r):s=e[n]=[t,r],i!==void 0&&s.push(i)}function mA(e,t,n){let r=t.directiveStart,i=t.directiveEnd,s=e.data,o=t.attrs,a=[],c=null,u=null;for(let l=r;l<i;l++){let d=s[l],f=n?n.get(d):null,h=f?f.inputs:null,p=f?f.outputs:null;c=SE(0,d.inputs,l,c,h),u=SE(1,d.outputs,l,u,p);let m=c!==null&&o!==null&&!bh(t)?AA(c,l,o):null;a.push(m)}c!==null&&(c.hasOwnProperty("class")&&(t.flags|=8),c.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=a,t.inputs=c,t.outputs=u}function gA(e){return e==="class"?"className":e==="for"?"htmlFor":e==="formaction"?"formAction":e==="innerHtml"?"innerHTML":e==="readonly"?"readOnly":e==="tabindex"?"tabIndex":e}function OS(e,t,n,r,i,s,o,a){let c=at(t,n),u=t.inputs,l;!a&&u!=null&&(l=u[r])?(Ih(e,n,l,r,i),Ds(t)&&yA(n,t.index)):t.type&3?(r=gA(r),i=o!=null?o(i,t.value||"",r):i,s.setProperty(c,r,i)):t.type&12}function yA(e,t){let n=yr(t,e);n[F]&16||(n[F]|=64)}function Dh(e,t,n,r){if(mC()){let i=r===null?null:{"":-1},s=SA(e,n),o,a;s===null?o=a=null:[o,a]=s,o!==null&&PS(e,t,n,o,i,a),i&&wA(n,r,i)}n.mergedAttrs=eh(n.mergedAttrs,n.attrs)}function PS(e,t,n,r,i,s){for(let u=0;u<r.length;u++)pN(kC(n,t),e,r[u].type);IA(n,e.data.length,r.length);for(let u=0;u<r.length;u++){let l=r[u];l.providersResolver&&l.providersResolver(l)}let o=!1,a=!1,c=MS(e,t,r.length,null);for(let u=0;u<r.length;u++){let l=r[u];n.mergedAttrs=eh(n.mergedAttrs,l.hostAttrs),TA(e,n,t,c,l),DA(c,l,i),l.contentQueries!==null&&(n.flags|=4),(l.hostBindings!==null||l.hostAttrs!==null||l.hostVars!==0)&&(n.flags|=64);let d=l.type.prototype;!o&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((e.preOrderHooks??=[]).push(n.index),o=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(n.index),a=!0),c++}mA(e,n,s)}function vA(e,t,n,r,i){let s=i.hostBindings;if(s){let o=e.hostBindingOpCodes;o===null&&(o=e.hostBindingOpCodes=[]);let a=~t.index;bA(o)!=a&&o.push(a),o.push(n,r,s)}}function bA(e){let t=e.length;for(;t>0;){let n=e[--t];if(typeof n=="number"&&n<0)return n}return 0}function EA(e,t,n,r){let i=n.directiveStart,s=n.directiveEnd;Ds(n)&&_A(t,n,e.data[i+n.componentOffset]),e.firstCreatePass||kC(n,t),Fn(r,t);let o=n.initialInputs;for(let a=i;a<s;a++){let c=e.data[a],u=pi(t,e,a,n);if(Fn(u,t),o!==null&&MA(t,a-i,u,c,n,o),Is(c)){let l=yr(n.index,t);l[At]=pi(t,e,a,n)}}}function LS(e,t,n){let r=n.directiveStart,i=n.directiveEnd,s=n.index,o=eN();try{hr(s);for(let a=r;a<i;a++){let c=e.data[a],u=t[a];Jd(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&CA(c,u)}}finally{hr(-1),Jd(o)}}function CA(e,t){e.hostBindings!==null&&e.hostBindings(1,t)}function SA(e,t){let n=e.directiveRegistry,r=null,i=null;if(n)for(let s=0;s<n.length;s++){let o=n[s];if(eA(t,o.selectors,!1))if(r||(r=[]),Is(o))if(o.findHostDirectiveDefs!==null){let a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o);let c=a.length;df(e,t,c)}else r.unshift(o),df(e,t,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function df(e,t,n){t.componentOffset=n,(e.components??=[]).push(t.index)}function wA(e,t,n){if(t){let r=e.localNames=[];for(let i=0;i<t.length;i+=2){let s=n[t[i+1]];if(s==null)throw new A(-301,!1);r.push(t[i],s)}}}function DA(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;Is(t)&&(n[""]=e)}}function IA(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function TA(e,t,n,r,i){e.data[r]=i;let s=i.factory||(i.factory=di(i.type,!0)),o=new Es(s,Is(i),Ke);e.blueprint[r]=o,n[r]=o,vA(e,t,r,MS(e,n,i.hostVars,Rs),i)}function FS(e){let t=16;return e.signals?t=4096:e.onPush&&(t=64),t}function _A(e,t,n){let r=at(t,e),i=xS(n),s=e[Ln].rendererFactory,o=Lc(e,Pc(e,i,null,FS(n),r,t,null,s.createRenderer(r,n),null,null,null));e[t.index]=o}function RA(e,t,n,r,i,s){let o=at(e,t);NA(t[Se],o,s,e.value,n,r,i)}function NA(e,t,n,r,i,s,o){if(s==null)e.removeAttribute(t,i,n);else{let a=o==null?kf(s):o(s,r||"",i);e.setAttribute(t,i,a,n)}}function MA(e,t,n,r,i,s){let o=s[t];if(o!==null)for(let a=0;a<o.length;){let c=o[a++],u=o[a++],l=o[a++],d=o[a++];NS(r,n,c,u,l,d)}}function AA(e,t,n){let r=null,i=0;for(;i<n.length;){let s=n[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(e.hasOwnProperty(s)){r===null&&(r=[]);let o=e[s];for(let a=0;a<o.length;a+=3)if(o[a]===t){r.push(s,o[a+1],o[a+2],n[i+1]);break}}i+=2}return r}function jS(e,t,n,r){return[e,!0,0,t,null,r,null,n,null,null]}function US(e,t){let n=e.contentQueries;if(n!==null){let r=re(null);try{for(let i=0;i<n.length;i+=2){let s=n[i],o=n[i+1];if(o!==-1){let a=e.data[o];Jf(s),a.contentQueries(2,t[o],o)}}}finally{re(r)}}}function Lc(e,t){return e[bs]?e[eE][Mt]=t:e[bs]=t,e[eE]=t,t}function ff(e,t,n){Jf(0);let r=re(null);try{t(e,n)}finally{re(r)}}function VS(e){return e[Ka]??=[]}function BS(e){return e.cleanup??=[]}function Fc(e,t){let n=e[pn],r=n?n.get(yn,null):null;r&&r.handleError(t)}function Ih(e,t,n,r,i){for(let s=0;s<n.length;){let o=n[s++],a=n[s++],c=n[s++],u=t[o],l=e.data[o];NS(l,u,r,a,c,i)}}function xA(e,t,n){let r=FR(t,e);kM(e[Se],r,n)}function kA(e,t){let n=yr(t,e),r=n[U];OA(r,n);let i=n[st];i!==null&&n[Jt]===null&&(n[Jt]=dh(i,n[pn])),Th(r,n,n[At])}function OA(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}function Th(e,t,n){Yf(t);try{let r=e.viewQuery;r!==null&&ff(1,r,n);let i=e.template;i!==null&&AS(e,t,i,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),t[mn]?.finishViewCreation(e),e.staticContentQueries&&US(e,t),e.staticViewQueries&&ff(2,e.viewQuery,n);let s=e.components;s!==null&&PA(t,s)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{t[F]&=-5,Zf()}}function PA(e,t){for(let n=0;n<t.length;n++)kA(e,t[n])}function $S(e,t,n,r){let i=re(null);try{let s=t.tView,a=e[F]&4096?4096:16,c=Pc(e,s,n,a,null,t,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),u=e[t.index];c[dr]=u;let l=e[mn];return l!==null&&(c[mn]=l.createEmbeddedView(s)),Th(s,c,n),c}finally{re(i)}}function hf(e,t){return!t||t.firstChild===null||rc(e)}function HS(e,t,n,r=!0){let i=t[U];if(FM(i,t,e,n),r){let o=lf(n,e),a=t[Se],c=SS(a,e[gn]);c!==null&&PM(i,e[kt],a,t,c,o)}let s=t[Jt];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function LA(e,t){let n=sc(e,t);return n!==void 0&&gh(n[U],n),n}function ac(e,t,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let s=t[n.index];s!==null&&r.push(xt(s)),Zt(s)&&FA(s,r);let o=n.type;if(o&8)ac(e,t,n.child,r);else if(o&32){let a=hh(n,t),c;for(;c=a();)r.push(c)}else if(o&16){let a=wS(t,n);if(Array.isArray(a))r.push(...a);else{let c=fr(t[Ct]);ac(c[U],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function FA(e,t){for(let n=Ge;n<e.length;n++){let r=e[n],i=r[U].firstChild;i!==null&&ac(r[U],r,i,t)}e[gn]!==e[st]&&t.push(e[gn])}var zS=[];function jA(e){return e[rt]??UA(e)}function UA(e){let t=zS.pop()??Object.create(BA);return t.lView=e,t}function VA(e){e.lView[rt]!==e&&(e.lView=null,zS.push(e))}var BA=R(E({},ss),{consumerIsAlwaysLive:!0,consumerMarkedDirty:e=>{Dc(e.lView)},consumerOnSignalRead(){this.lView[rt]=this}});function $A(e){let t=e[rt]??Object.create(HA);return t.lView=e,t}var HA=R(E({},ss),{consumerIsAlwaysLive:!0,consumerMarkedDirty:e=>{let t=fr(e.lView);for(;t&&!qS(t[U]);)t=fr(t);t&&Gf(t)},consumerOnSignalRead(){this.lView[rt]=this}});function qS(e){return e.type!==2}function GS(e){if(e[Ja]===null)return;let t=!0;for(;t;){let n=!1;for(let r of e[Ja])r.dirty&&(n=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));t=n&&!!(e[F]&8192)}}var zA=100;function WS(e,t=!0,n=0){let i=e[Ln].rendererFactory,s=!1;s||i.begin?.();try{qA(e,n)}catch(o){throw t&&Fc(e,o),o}finally{s||i.end?.()}}function qA(e,t){let n=EC();try{nE(!0),pf(e,t);let r=0;for(;wc(e);){if(r===zA)throw new A(103,!1);r++,pf(e,1)}}finally{nE(n)}}function GA(e,t,n,r){let i=t[F];if((i&256)===256)return;let s=!1,o=!1;Yf(t);let a=!0,c=null,u=null;s||(qS(e)?(u=jA(t),c=ea(u)):Bv()===null?(a=!1,u=$A(t),c=ea(u)):t[rt]&&(ed(t[rt]),t[rt]=null));try{hC(t),ZR(e.bindingStartIndex),n!==null&&AS(e,t,n,2,r);let l=(i&3)===3;if(!s)if(l){let h=e.preOrderCheckHooks;h!==null&&Fa(t,h,null)}else{let h=e.preOrderHooks;h!==null&&ja(t,h,0,null),Ad(t,0)}if(o||WA(t),GS(t),KS(t,0),e.contentQueries!==null&&US(e,t),!s)if(l){let h=e.contentCheckHooks;h!==null&&Fa(t,h)}else{let h=e.contentHooks;h!==null&&ja(t,h,1),Ad(t,1)}oA(e,t);let d=e.components;d!==null&&YS(t,d,0);let f=e.viewQuery;if(f!==null&&ff(2,f,r),!s)if(l){let h=e.viewCheckHooks;h!==null&&Fa(t,h)}else{let h=e.viewHooks;h!==null&&ja(t,h,2),Ad(t,2)}if(e.firstUpdatePass===!0&&(e.firstUpdatePass=!1),t[Md]){for(let h of t[Md])h();t[Md]=null}s||(t[F]&=-73)}catch(l){throw s||Dc(t),l}finally{u!==null&&(Ql(u,c),a&&VA(u)),Zf()}}function KS(e,t){for(let n=ZC(e);n!==null;n=QC(n))for(let r=Ge;r<n.length;r++){let i=n[r];JS(i,t)}}function WA(e){for(let t=ZC(e);t!==null;t=QC(t)){if(!(t[F]&Za.HasTransplantedViews))continue;let n=t[fi];for(let r=0;r<n.length;r++){let i=n[r];Gf(i)}}}function KA(e,t,n){let r=yr(t,e);JS(r,n)}function JS(e,t){qf(e)&&pf(e,t)}function pf(e,t){let r=e[U],i=e[F],s=e[rt],o=!!(t===0&&i&16);if(o||=!!(i&64&&t===0),o||=!!(i&1024),o||=!!(s?.dirty&&Xl(s)),o||=!1,s&&(s.dirty=!1),e[F]&=-9217,o)GA(r,e,r.template,e[At]);else if(i&8192){GS(e),KS(e,1);let a=r.components;a!==null&&YS(e,a,1)}}function YS(e,t,n){for(let r=0;r<t.length;r++)KA(e,t[r],n)}function jc(e,t){let n=EC()?64:1088;for(e[Ln].changeDetectionScheduler?.notify(t);e;){e[F]|=n;let r=fr(e);if(Qa(e)&&!r)return e;e=r}return null}var pr=class{_lView;_cdRefInjectingView;notifyErrorHandler;_appRef=null;_attachedToViewContainer=!1;get rootNodes(){let t=this._lView,n=t[U];return ac(n,t,n.firstChild,[])}constructor(t,n,r=!0){this._lView=t,this._cdRefInjectingView=n,this.notifyErrorHandler=r}get context(){return this._lView[At]}get dirty(){return!!(this._lView[F]&9280)||!!this._lView[rt]?.dirty}set context(t){this._lView[At]=t}get destroyed(){return(this._lView[F]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let t=this._lView[ke];if(Zt(t)){let n=t[Ya],r=n?n.indexOf(this):-1;r>-1&&(sc(t,r),Ga(n,r))}this._attachedToViewContainer=!1}gh(this._lView[U],this._lView)}onDestroy(t){pC(this._lView,t)}markForCheck(){jc(this._cdRefInjectingView||this._lView,4)}markForRefresh(){Gf(this._cdRefInjectingView||this._lView)}detach(){this._lView[F]&=-129}reattach(){Wd(this._lView),this._lView[F]|=128}detectChanges(){this._lView[F]|=1024,WS(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new A(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let t=Qa(this._lView),n=this._lView[dr];n!==null&&!t&&mh(n,this._lView),bS(this._lView[U],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new A(902,!1);this._appRef=t;let n=Qa(this._lView),r=this._lView[dr];r!==null&&!n&&ES(r,this._lView),Wd(this._lView)}},mr=(()=>{class e{static __NG_ELEMENT_ID__=ZA}return e})(),JA=mr,YA=class extends JA{_declarationLView;_declarationTContainer;elementRef;constructor(t,n,r){super(),this._declarationLView=t,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,n){return this.createEmbeddedViewImpl(t,n)}createEmbeddedViewImpl(t,n,r){let i=$S(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:n,dehydratedView:r});return new pr(i)}};function ZA(){return _h(wt(),ge())}function _h(e,t){return e.type&4?new YA(t,e,Ei(e,t)):null}var mf=class{resolveComponentFactory(t){throw Error(`No component factory found for ${qe(t)}.`)}},gi=class{static NULL=new mf},Un=class{},Cs=class{},gf=class{},cc=class{},yi=class{};var QA=(()=>{class e{static \u0275prov=j({token:e,providedIn:"root",factory:()=>null})}return e})();function uc(e,t,n){let r=n?e.styles:null,i=n?e.classes:null,s=0;if(t!==null)for(let o=0;o<t.length;o++){let a=t[o];if(typeof a=="number")s=a;else if(s==1)i=Kb(i,a);else if(s==2){let c=a,u=t[++o];r=Kb(r,c+": "+u+";")}}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=i:e.classesWithoutHost=i}var lc=class extends gi{ngModule;constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){let n=Pn(t);return new Ss(n,this.ngModule)}};function DE(e,t){let n=[];for(let r in e){if(!e.hasOwnProperty(r))continue;let i=e[r];if(i===void 0)continue;let s=Array.isArray(i),o=s?i[0]:i,a=s?i[1]:jn.None;t?n.push({propName:o,templateName:r,isSignal:(a&jn.SignalBased)!==0}):n.push({propName:o,templateName:r})}return n}function XA(e){let t=e.toLowerCase();return t==="svg"?PR:t==="math"?LR:null}var Ss=class extends cc{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;get inputs(){let t=this.componentDef,n=t.inputTransforms,r=DE(t.inputs,!0);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return DE(this.componentDef.outputs,!1)}constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=iA(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!n}create(t,n,r,i){let s=re(null);try{i=i||this.ngModule;let o=i instanceof it?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new li(t,o):t,c=a.get(yi,null);if(c===null)throw new A(407,!1);let u=a.get(QA,null),l=a.get(mi,null),d={rendererFactory:c,sanitizer:u,changeDetectionScheduler:l},f=c.createRenderer(null,this.componentDef),h=this.componentDef.selectors[0][0]||"div",p=r?uA(f,r,this.componentDef.encapsulation,a):ph(f,h,XA(h)),m=512;this.componentDef.signals?m|=4096:this.componentDef.onPush||(m|=16);let y=null;p!==null&&(y=dh(p,a,!0));let v=wh(0,null,null,1,0,null,null,null,null,null,null),S=Pc(null,v,null,m,null,null,d,f,a,null,y);Yf(S);let _,N,B=null;try{let L=this.componentDef,ae,he=null;L.findHostDirectiveDefs?(ae=[],he=new Map,L.findHostDirectiveDefs(L,ae,he),ae.push(L)):ae=[L];let Bt=ex(S,p);B=tx(Bt,p,L,ae,S,d,f),N=Sc(v,Oe),p&&ix(f,L,p,r),n!==void 0&&sx(N,this.ngContentSelectors,n),_=rx(B,L,ae,he,S,[ox]),Th(v,S,null)}catch(L){throw B!==null&&sf(B),sf(S),L}finally{Zf()}return new yf(this.componentType,_,Ei(N,S),S,N)}finally{re(s)}}},yf=class extends gf{location;_rootLView;_tNode;instance;hostView;changeDetectorRef;componentType;previousInputValues=null;constructor(t,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.instance=n,this.hostView=this.changeDetectorRef=new pr(i,void 0,!1),this.componentType=t}setInput(t,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[t])){if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),n))return;let s=this._rootLView;Ih(s[U],s,i,t,n),this.previousInputValues.set(t,n);let o=yr(this._tNode.index,s);jc(o,1)}}get injector(){return new lr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}};function ex(e,t){let n=e[U],r=Oe;return e[r]=t,Ns(n,r,2,"#host",null)}function tx(e,t,n,r,i,s,o){let a=i[U];nx(r,e,t,o);let c=null;t!==null&&(c=dh(t,i[pn]));let u=s.rendererFactory.createRenderer(t,n),l=Pc(i,xS(n),null,FS(n),i[e.index],e,s,u,null,null,c);return a.firstCreatePass&&df(a,e,r.length-1),Lc(i,l),i[e.index]=l}function nx(e,t,n,r){for(let i of e)t.mergedAttrs=eh(t.mergedAttrs,i.hostAttrs);t.mergedAttrs!==null&&(uc(t,t.mergedAttrs,!0),n!==null&&TS(r,n,t))}function rx(e,t,n,r,i,s){let o=wt(),a=i[U],c=at(o,i);PS(a,i,o,n,null,r);for(let l=0;l<n.length;l++){let d=o.directiveStart+l,f=pi(i,a,d,o);Fn(f,i)}LS(a,i,o),c&&Fn(c,i);let u=pi(i,a,o.directiveStart+o.componentOffset,o);if(e[At]=i[At]=u,s!==null)for(let l of s)l(u,t);return Eh(a,o,i),u}function ix(e,t,n,r){if(r)Yd(e,n,["ng-version","19.0.0"]);else{let{attrs:i,classes:s}=sA(t.selectors[0]);i&&Yd(e,n,i),s&&s.length>0&&IS(e,n,s.join(" "))}}function sx(e,t,n){let r=e.projection=[];for(let i=0;i<t.length;i++){let s=n[i];r.push(s!=null&&s.length?Array.from(s):null)}}function ox(){let e=wt();Tc(ge()[U],e)}var vf=class extends Un{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new lc(this);constructor(t,n,r,i=!0){super(),this.ngModuleType=t,this._parent=n;let s=nC(t);this._bootstrapComponents=gS(s.bootstrap),this._r3Injector=VC(t,n,[{provide:Un,useValue:this},{provide:gi,useValue:this.componentFactoryResolver},...r],qe(t),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}},bf=class extends Cs{moduleType;constructor(t){super(),this.moduleType=t}create(t){return new vf(this.moduleType,t,[])}};var dc=class extends Un{injector;componentFactoryResolver=new lc(this);instance=null;constructor(t){super();let n=new vs([...t.providers,{provide:Un,useValue:this},{provide:gi,useValue:this.componentFactoryResolver}],t.parent||Bf(),t.debugName,new Set(["environment"]));this.injector=n,t.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}};function Uc(e,t,n=null){return new dc({providers:e,parent:t,debugName:n,runEnvironmentInitializers:!0}).injector}var ax=(()=>{class e{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=Uf(!1,n.type),i=r.length>0?Uc([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=j({token:e,providedIn:"environment",factory:()=>new e(Q(it))})}return e})();function $n(e){return ws(()=>{let t=ZS(e),n=R(E({},t),{decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===JC.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&e.dependencies||null,getStandaloneInjector:t.standalone?i=>i.get(ax).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||Yt.Emulated,styles:e.styles||qt,_:null,schemas:e.schemas||null,tView:null,id:""});t.standalone&&Qt("NgStandalone"),QS(n);let r=e.dependencies;return n.directiveDefs=TE(r,!1),n.pipeDefs=TE(r,!0),n.id=lx(n),n})}function cx(e){return Pn(e)||Ff(e)}function ux(e){return e!==null}function Vc(e){return ws(()=>({type:e.type,bootstrap:e.bootstrap||qt,declarations:e.declarations||qt,imports:e.imports||qt,exports:e.exports||qt,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function IE(e,t){if(e==null)return ys;let n={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r],s,o,a=jn.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),t?(n[s]=a!==jn.None?[r,a]:r,t[s]=o):n[s]=r}return n}function Ms(e){return ws(()=>{let t=ZS(e);return QS(t),t})}function ZS(e){let t={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputTransforms:null,inputConfig:e.inputs||ys,exportAs:e.exportAs||null,standalone:e.standalone??!0,signals:e.signals===!0,selectors:e.selectors||qt,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:IE(e.inputs,t),outputs:IE(e.outputs),debugInfo:null}}function QS(e){e.features?.forEach(t=>t(e))}function TE(e,t){if(!e)return null;let n=t?jf:cx;return()=>(typeof e=="function"?e():e).map(r=>n(r)).filter(ux)}function lx(e){let t=0,n=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,e.consts,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery].join("|");for(let i of n)t=Math.imul(31,t)+i.charCodeAt(0)<<0;return t+=2147483648,"c"+t}var Bc=(()=>{class e{log(n){console.log(n)}warn(n){console.warn(n)}static \u0275fac=function(r){return new(r||e)};static \u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"platform"})}return e})();var XS=new O("");function As(e){return!!e&&typeof e.then=="function"}function ew(e){return!!e&&typeof e.subscribe=="function"}var tw=new O("");var nw=(()=>{class e{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r});appInits=D(tw,{optional:!0})??[];injector=D(ot);constructor(){}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let s=St(this.injector,i);if(As(s))n.push(s);else if(ew(s)){let o=new Promise((a,c)=>{s.subscribe({complete:a,error:c})});n.push(o)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||e)};static \u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),dx=(()=>{class e{static \u0275prov=j({token:e,providedIn:"root",factory:()=>new Ef})}return e})(),Ef=class{queuedEffectCount=0;queues=new Map;schedule(t){this.enqueue(t)}enqueue(t){let n=t.zone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(t)||(this.queuedEffectCount++,r.add(t))}flush(){for(;this.queuedEffectCount>0;)for(let[t,n]of this.queues)t===null?this.flushQueue(n):t.run(()=>this.flushQueue(n))}flushQueue(t){for(let n of t)t.delete(n),this.queuedEffectCount--,n.run()}},Sr=new O("");function fx(){Yv(()=>{throw new A(600,!1)})}function hx(e){return e.isBoundToModule}var px=10;function mx(e,t,n){try{let r=n();return As(r)?r.catch(i=>{throw t.runOutsideAngular(()=>e.handleError(i)),i}):r}catch(r){throw t.runOutsideAngular(()=>e.handleError(r)),r}}var We=(()=>{class e{_bootstrapListeners=[];_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=D(_N);afterRenderManager=D(cS);zonelessEnabled=D(_c);rootEffectScheduler=D(dx);dirtyFlags=0;deferredDirtyFlags=0;externalTestViews=new Set;afterTick=new be;get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];isStable=D(Bn).hasPendingTasks.pipe(P(n=>!n));whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}_injector=D(it);get injector(){return this._injector}bootstrap(n,r){let i=n instanceof cc;if(!this._injector.get(nw).done){let f=!i&&rC(n),h=!1;throw new A(405,h)}let o;i?o=n:o=this._injector.get(gi).resolveComponentFactory(n),this.componentTypes.push(o.componentType);let a=hx(o)?void 0:this._injector.get(Un),c=r||o.selector,u=o.create(ot.NULL,[],c,a),l=u.location.nativeElement,d=u.injector.get(XS,null);return d?.registerApplication(l),u.onDestroy(()=>{this.detachView(u.hostView),Ba(this.components,u),d?.unregisterApplication(l)}),this._loadComponent(u),u}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new A(101,!1);let n=re(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,re(n),this.afterTick.next()}}synchronize(){let n=null;this._injector.destroyed||(n=this._injector.get(yi,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<px;)this.synchronizeOnce(n)}synchronizeOnce(n){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush()),this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i,notifyErrorHandler:s}of this.allViews)gx(i,s,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}else n?.begin?.(),n?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>wc(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;Ba(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);let r=this._injector.get(Sr,[]);[...this._bootstrapListeners,...r].forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>Ba(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new A(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static \u0275fac=function(r){return new(r||e)};static \u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function Ba(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}var ka;function Si(e){ka??=new WeakMap;let t=ka.get(e);if(t)return t;let n=e.isStable.pipe(Rt(r=>r)).toPromise().then(()=>{});return ka.set(e,n),e.onDestroy(()=>ka?.delete(e)),n}function gx(e,t,n,r){if(!n&&!wc(e))return;WS(e,t,n&&!r?0:1)}var yx=new RegExp(`^(\\d+)*(${nS}|${tS})*(.*)`);function vx(e){let t=e.match(yx),[n,r,i,s]=t,o=r?parseInt(r,10):i,a=[];for(let[c,u,l]of s.matchAll(/(f|n)(\d*)/g)){let d=parseInt(l,10)||1;a.push(u,d)}return[o,...a]}function bx(e){return!e.prev&&e.parent?.type===8}function Ld(e){return e.index-Oe}function Ex(e,t){let n=e.i18nNodes;if(n)return n.get(t)}function $c(e,t,n,r){let i=Ld(r),s=Ex(e,i);if(s===void 0){let o=e.data[zN];if(o?.[i])s=Sx(o[i],n);else if(t.firstChild===r)s=e.firstChild;else{let a=r.prev===null,c=r.prev??r.parent;if(bx(r)){let u=Ld(r.parent);s=uf(e,u)}else{let u=at(c,n);if(a)s=u.firstChild;else{let l=Ld(c),d=uf(e,l);if(c.type===2&&d){let h=fh(e,l)+1;s=Hc(h,d)}else s=u.nextSibling}}}}return s}function Hc(e,t){let n=t;for(let r=0;r<e;r++)n=n.nextSibling;return n}function Cx(e,t){let n=e;for(let r=0;r<t.length;r+=2){let i=t[r],s=t[r+1];for(let o=0;o<s;o++)switch(i){case af.FirstChild:n=n.firstChild;break;case af.NextSibling:n=n.nextSibling;break}}return n}function Sx(e,t){let[n,...r]=vx(e),i;if(n===tS)i=t[Ct][st];else if(n===nS)i=AM(t[Ct][st]);else{let s=Number(n);i=xt(t[s+Oe])}return Cx(i,r)}var wx=!1;function Dx(e){wx=e}function Ix(e){let t=e[Jt];if(t){let{i18nNodes:n,dehydratedIcuData:r}=t;if(n&&r){let i=e[Se];for(let s of r.values())Tx(i,n,s)}t.i18nNodes=void 0,t.dehydratedIcuData=void 0}}function Tx(e,t,n){for(let r of n.node.cases[n.case]){let i=t.get(r.index-Oe);i&&yh(e,i,!1)}}function rw(e){let t=e[hn]??[],r=e[ke][Se],i=[];for(let s of t)s.data[qN]!==void 0?i.push(s):_x(s,r);e[hn]=i}function _x(e,t){let n=0,r=e.firstChild;if(r){let i=e.data[ic];for(;n<i;){let s=r.nextSibling;yh(t,r,!1),r=s,n++}}}function Rh(e){rw(e);let t=e[st];Kt(t)&&fc(t);for(let n=Ge;n<e.length;n++)fc(e[n])}function fc(e){Ix(e);let t=e[U];for(let n=Oe;n<t.bindingStartIndex;n++)if(Zt(e[n])){let r=e[n];Rh(r)}else Kt(e[n])&&fc(e[n])}function iw(e){let t=e._views;for(let n of t){let r=EM(n);r!==null&&r[st]!==null&&(Kt(r)?fc(r):Rh(r))}}function Rx(e,t,n){return g(this,null,function*(){return e!==null&&(n.get(lh).cleanup([...t]),Rh(e.lContainer),iw(n.get(We))),Si(n.get(We))})}function Nx(e,t){let n=[];for(let r of t)for(let i=0;i<(r[rS]??1);i++){let s={data:r,firstChild:null};r[ic]>0&&(s.firstChild=e,e=Hc(r[ic],e)),n.push(s)}return[e,n]}var sw=()=>null;function Mx(e,t){let n=e[hn];return!t||n===null||n.length===0?null:n[0].data[HN]===t?n.shift():(rw(e),null)}function Ax(){sw=Mx}function _E(e,t){return sw(e,t)}var Hn=(()=>{class e{static __NG_ELEMENT_ID__=xx}return e})();function xx(){let e=wt();return aw(e,ge())}var kx=Hn,ow=class extends kx{_lContainer;_hostTNode;_hostLView;constructor(t,n,r){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=r}get element(){return Ei(this._hostTNode,this._hostLView)}get injector(){return new lr(this._hostTNode,this._hostLView)}get parentInjector(){let t=th(this._hostTNode,this._hostLView);if(MC(t)){let n=ec(t,this._hostLView),r=Xa(t),i=n[U].data[r+8];return new lr(i,n)}else return new lr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){let n=RE(this._lContainer);return n!==null&&n[t]||null}get length(){return this._lContainer.length-Ge}createEmbeddedView(t,n,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=_E(this._lContainer,t.ssrId),a=t.createEmbeddedViewImpl(n||{},s,o);return this.insertImpl(a,i,hf(this._hostTNode,o)),a}createComponent(t,n,r,i,s){let o=t&&!MR(t),a;if(o)a=n;else{let p=n||{};a=p.index,r=p.injector,i=p.projectableNodes,s=p.environmentInjector||p.ngModuleRef}let c=o?t:new Ss(Pn(t)),u=r||this.parentInjector;if(!s&&c.ngModule==null){let m=(o?u:this.parentInjector).get(it,null);m&&(s=m)}let l=Pn(c.componentType??{}),d=_E(this._lContainer,l?.id??null),f=d?.firstChild??null,h=c.create(u,i,f,s);return this.insertImpl(h.hostView,a,hf(this._hostTNode,d)),h}insert(t,n){return this.insertImpl(t,n,!0)}insertImpl(t,n,r){let i=t._lView;if(VR(i)){let a=this.indexOf(t);if(a!==-1)this.detach(a);else{let c=i[ke],u=new ow(c,c[kt],c[ke]);u.detach(u.indexOf(t))}}let s=this._adjustIndex(n),o=this._lContainer;return HS(o,i,s,r),t.attachToViewContainerRef(),XE(Fd(o),s,t),t}move(t,n){return this.insert(t,n)}indexOf(t){let n=RE(this._lContainer);return n!==null?n.indexOf(t):-1}remove(t){let n=this._adjustIndex(t,-1),r=sc(this._lContainer,n);r&&(Ga(Fd(this._lContainer),n),gh(r[U],r))}detach(t){let n=this._adjustIndex(t,-1),r=sc(this._lContainer,n);return r&&Ga(Fd(this._lContainer),n)!=null?new pr(r):null}_adjustIndex(t,n=0){return t??this.length+n}};function RE(e){return e[Ya]}function Fd(e){return e[Ya]||(e[Ya]=[])}function aw(e,t){let n,r=t[e.index];return Zt(r)?n=r:(n=jS(r,t,null,e),t[e.index]=n,Lc(t,n)),cw(n,t,e,r),new ow(n,e,t)}function Ox(e,t){let n=e[Se],r=n.createComment(""),i=at(t,e),s=SS(n,i);return oc(n,s,r,$M(n,i),!1),r}var cw=uw,Nh=()=>!1;function Px(e,t,n){return Nh(e,t,n)}function uw(e,t,n,r){if(e[gn])return;let i;n.type&8?i=xt(r):i=Ox(t,n),e[gn]=i}function Lx(e,t,n){if(e[gn]&&e[hn])return!0;let r=n[Jt],i=t.index-Oe;if(!r||ON(t)||_s(r,i))return!1;let o=uf(r,i),a=r.data[ah]?.[i],[c,u]=Nx(o,a);return e[gn]=c,e[hn]=u,!0}function Fx(e,t,n,r){Nh(e,n,t)||uw(e,t,n,r)}function jx(){cw=Fx,Nh=Lx}var Cf=class e{queryList;matches=null;constructor(t){this.queryList=t}clone(){return new e(this.queryList)}setDirty(){this.queryList.setDirty()}},Sf=class e{queries;constructor(t=[]){this.queries=t}createEmbeddedView(t){let n=t.queries;if(n!==null){let r=t.contentQueries!==null?t.contentQueries[0]:n.length,i=[];for(let s=0;s<r;s++){let o=n.getByIndex(s),a=this.queries[o.indexInDeclarationView];i.push(a.clone())}return new e(i)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}finishViewCreation(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let n=0;n<this.queries.length;n++)Mh(t,n).matches!==null&&this.queries[n].setDirty()}},wf=class{flags;read;predicate;constructor(t,n,r=null){this.flags=n,this.read=r,typeof t=="string"?this.predicate=Gx(t):this.predicate=t}},Df=class e{queries;constructor(t=[]){this.queries=t}elementStart(t,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(t,n)}elementEnd(t){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(t)}embeddedTView(t){let n=null;for(let r=0;r<this.length;r++){let i=n!==null?n.length:0,s=this.getByIndex(r).embeddedTView(t,i);s&&(s.indexInDeclarationView=r,n!==null?n.push(s):n=[s])}return n!==null?new e(n):null}template(t,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(t,n)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}},If=class e{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(t,n=-1){this.metadata=t,this._declarationNodeIndex=n}elementStart(t,n){this.isApplyingToNode(n)&&this.matchTNode(t,n)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,n){this.elementStart(t,n)}embeddedTView(t,n){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,n),new e(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,r=t.parent;for(;r!==null&&r.type&8&&r.index!==n;)r=r.parent;return n===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(t,n){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let s=r[i];this.matchTNodeWithReadOption(t,n,Ux(n,s)),this.matchTNodeWithReadOption(t,n,Ua(n,t,s,!1,!1))}else r===mr?n.type&4&&this.matchTNodeWithReadOption(t,n,-1):this.matchTNodeWithReadOption(t,n,Ua(n,t,r,!1,!1))}matchTNodeWithReadOption(t,n,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===br||i===Hn||i===mr&&n.type&4)this.addMatch(n.index,-2);else{let s=Ua(n,t,i,!1,!1);s!==null&&this.addMatch(n.index,s)}else this.addMatch(n.index,r)}}addMatch(t,n){this.matches===null?this.matches=[t,n]:this.matches.push(t,n)}};function Ux(e,t){let n=e.localNames;if(n!==null){for(let r=0;r<n.length;r+=2)if(n[r]===t)return n[r+1]}return null}function Vx(e,t){return e.type&11?Ei(e,t):e.type&4?_h(e,t):null}function Bx(e,t,n,r){return n===-1?Vx(t,e):n===-2?$x(e,t,r):pi(e,e[U],n,t)}function $x(e,t,n){if(n===br)return Ei(t,e);if(n===mr)return _h(t,e);if(n===Hn)return aw(t,e)}function lw(e,t,n,r){let i=t[mn].queries[r];if(i.matches===null){let s=e.data,o=n.matches,a=[];for(let c=0;o!==null&&c<o.length;c+=2){let u=o[c];if(u<0)a.push(null);else{let l=s[u];a.push(Bx(t,l,o[c+1],n.metadata.read))}}i.matches=a}return i.matches}function Tf(e,t,n,r){let i=e.queries.getByIndex(n),s=i.matches;if(s!==null){let o=lw(e,t,i,n);for(let a=0;a<s.length;a+=2){let c=s[a];if(c>0)r.push(o[a/2]);else{let u=s[a+1],l=t[-c];for(let d=Ge;d<l.length;d++){let f=l[d];f[dr]===f[ke]&&Tf(f[U],f,u,r)}if(l[fi]!==null){let d=l[fi];for(let f=0;f<d.length;f++){let h=d[f];Tf(h[U],h,u,r)}}}}}return r}function Hx(e,t){return e[mn].queries[t].queryList}function zx(e,t,n){let r=new rf((n&4)===4);return hA(e,t,r,r.destroy),(t[mn]??=new Sf).queries.push(new Cf(r))-1}function qx(e,t,n){let r=ct();return r.firstCreatePass&&(Wx(r,new wf(e,t,n),-1),(t&2)===2&&(r.staticViewQueries=!0)),zx(r,ge(),t)}function Gx(e){return e.split(",").map(t=>t.trim())}function Wx(e,t,n){e.queries===null&&(e.queries=new Df),e.queries.track(new If(t,n))}function Mh(e,t){return e.queries.getByIndex(t)}function Kx(e,t){let n=e[U],r=Mh(n,t);return r.crossesNgTemplate?Tf(n,e,t,[]):lw(n,e,r,t)}function xs(e,t){Qt("NgSignals");let n=Zv(e),r=n[mt];return t?.equal&&(r.equal=t.equal),n.set=i=>ra(r,i),n.update=i=>Qv(r,i),n.asReadonly=Jx.bind(n),n}function Jx(){let e=this[mt];if(e.readonlyFn===void 0){let t=()=>this();t[mt]=e,e.readonlyFn=t}return e.readonlyFn}function dw(e){return Zx(e)?Array.isArray(e)||!(e instanceof Map)&&Symbol.iterator in e:!1}function Yx(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n]);else{let n=e[Symbol.iterator](),r;for(;!(r=n.next()).done;)t(r.value)}}function Zx(e){return e!==null&&(typeof e=="function"||typeof e=="object")}function Ah(e,t,n){let r=e[t];return Object.is(r,n)?!1:(e[t]=n,!0)}function ks(e){return(e.flags&32)===32}function Qx(e,t,n,r,i,s,o,a,c){let u=t.consts,l=Ns(t,e,4,o||null,a||null);Dh(t,n,l,hi(u,c)),Tc(t,l);let d=l.tView=wh(2,l,r,i,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,u,null);return t.queries!==null&&(t.queries.template(t,l),d.queries=t.queries.embeddedTView(l)),l}function Xx(e,t,n,r,i,s,o,a,c,u){let l=n+Oe,d=t.firstCreatePass?Qx(l,t,e,r,i,s,o,a,c):t.data[l];vr(d,!1);let f=fw(t,e,d,n);Ic()&&kc(t,e,f,d),Fn(f,e);let h=jS(f,e,f,d);return e[l]=h,Lc(e,h),Px(h,d,e),Cc(d)&&Ch(t,e,d),c!=null&&Sh(e,d,u),d}function Os(e,t,n,r,i,s,o,a){let c=ge(),u=ct(),l=hi(u.consts,s);return Xx(c,u,e,t,n,r,i,l,o,a),Os}var fw=hw;function hw(e,t,n,r){return Vn(!0),t[Se].createComment("")}function ek(e,t,n,r){let i=t[Jt],s=!i||Ts()||ks(n)||_s(i,r);if(Vn(s),s)return hw(e,t,n,r);let o=i.data[$N]?.[r]??null;o!==null&&n.tView!==null&&n.tView.ssrId===null&&(n.tView.ssrId=o);let a=$c(i,e,t,n);xc(i,r,a);let c=fh(i,r);return Hc(c,a)}function tk(){fw=ek}var nk=(()=>{class e{cachedInjectors=new Map;getOrCreateInjector(n,r,i,s){if(!this.cachedInjectors.has(n)){let o=i.length>0?Uc(i,r,s):null;this.cachedInjectors.set(n,o)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=j({token:e,providedIn:"environment",factory:()=>new e})}return e})();var rk=new O("");function jd(e,t,n){return e.get(nk).getOrCreateInjector(t,e,n,"")}function ik(e,t,n){if(e instanceof li){let i=e.injector,s=e.parentInjector,o=jd(s,t,n);return new li(i,o)}let r=e.get(it);if(r!==e){let i=jd(r,t,n);return new li(e,i)}return jd(e,t,n)}function ai(e,t,n,r=!1){let i=n[ke],s=i[U];if(AR(i))return;let o=Nc(i,t),a=o[uh],c=o[iM];if(!(c!==null&&e<c)&&NE(a,e)&&NE(o[tM]??-1,e)){let u=Mc(s,t),d=!r&&!0&&(uM(u)!==null||yE(u,xe.Loading)!==null||yE(u,xe.Placeholder))?ak:ok;try{d(e,o,n,t,i)}catch(f){Fc(i,f)}}}function sk(e,t){let n=e[hn];return n===null||n.length===0?null:n.find(r=>r.data[GN]===t[uh])??null}function ok(e,t,n,r,i){let s=cM(e,i,r);if(s!==null){t[uh]=e;let o=i[U],a=s+Oe,c=Sc(o,a),u=0;LA(n,u);let l;if(e===xe.Complete){let h=Mc(o,r),p=h.providers;p&&p.length>0&&(l=ik(i[pn],h,p))}let d=sk(n,t);if(n[hn]===null||n[hn].length===0||d){n[hn]=null;let h=$S(i,c,null,{injector:l,dehydratedView:d});HS(n,h,u,hf(c,d)),jc(h,2)}if(e===xe.Complete&&Array.isArray(t[fn])){for(let h of t[fn])h();t[fn]=null}}if(e===xe.Complete&&Array.isArray(t[fn])){for(let o of t[fn])o();t[fn]=null}}function NE(e,t){return e<t}function ME(e,t,n){e.loadingPromise.then(()=>{e.loadingState===tt.COMPLETE?ai(xe.Complete,t,n):e.loadingState===tt.FAILED&&ai(xe.Error,t,n)})}var ak=null;function ck(e,t,n){let r=t[pn],i=t[U];if(e.loadingState!==tt.NOT_STARTED)return e.loadingPromise??Promise.resolve();let s=Nc(t,n),o=lM(i,e);e.loadingState=tt.IN_PROGRESS,Va(1,s);let a=e.dependencyResolverFn,c=r.get(Bn),u=c.add();return a?(e.loadingPromise=Promise.allSettled(a()).then(l=>{let d=!1,f=[],h=[];for(let p of l)if(p.status==="fulfilled"){let m=p.value,y=Pn(m)||Ff(m);if(y)f.push(y);else{let v=jf(m);v&&h.push(v)}}else{d=!0;break}if(e.loadingPromise=null,c.remove(u),d){if(e.loadingState=tt.FAILED,e.errorTmplIndex===null){let p="",m=new A(750,!1);Fc(t,m)}}else{e.loadingState=tt.COMPLETE;let p=o.tView;if(f.length>0){p.directiveRegistry=vE(p.directiveRegistry,f);let m=f.map(v=>v.type),y=Uf(!1,...m);e.providers=y}h.length>0&&(p.pipeRegistry=vE(p.pipeRegistry,h))}}),e.loadingPromise):(e.loadingPromise=Promise.resolve().then(()=>{e.loadingPromise=null,e.loadingState=tt.COMPLETE,c.remove(u)}),e.loadingPromise)}function uk(e,t){let n=e[U],r=e[t.index],i=e[pn],s=Nc(e,t),o=Mc(n,t);if(pk(i,o))switch(oM(s),o.loadingState){case tt.NOT_STARTED:ai(xe.Loading,t,r),ck(o,e,t),o.loadingState===tt.IN_PROGRESS&&ME(o,t,r);break;case tt.IN_PROGRESS:ai(xe.Loading,t,r),ME(o,t,r);break;case tt.COMPLETE:ai(xe.Complete,t,r);break;case tt.FAILED:ai(xe.Error,t,r);break;default:}}function lk(e,t,n=()=>{}){return g(this,null,function*(){let{deferBlock:r,hydratedBlocks:i}=yield hk(e,t);n(i),yield Rx(r,i,e)})}function dk(e,t,n){let r,i=new Promise(s=>{r=s});return ch(()=>{let s=t.get(e);if(s!==null){let{tNode:o,lView:a}=s,c=Nc(a,o);fk(c,r),uk(a,o)}},{injector:n}),i}function fk(e,t){Array.isArray(e[fn])||(e[fn]=[]),e[fn].push(t)}function hk(e,t){return g(this,null,function*(){let n=e.get(lh);if(n.hydrating.has(t))return{deferBlock:null,hydratedBlocks:new Set};let r=TM(t,e);r.forEach(a=>n.hydrating.add(a));for(let a of r)yield dk(a,n,e);let i=new Set(r),s=r.slice(-1)[0];return{deferBlock:n.get(s),hydratedBlocks:i}})}function pk(e,t){return e.get(rk,null,{optional:!0})?.behavior!==uS.Manual}function zc(e,t,n,r){let i=ge(),s=Kf();if(Ah(i,s,t)){let o=ct(),a=Xf();RA(a,i,e,t,n,r)}return zc}function pw(e,t,n,r){return Ah(e,Kf(),n)?t+kf(n)+r:Rs}function zn(e,t,n){let r=ge(),i=Kf();if(Ah(r,i,t)){let s=ct(),o=Xf();OS(s,o,r,e,t,r[Se],n,!1)}return zn}function AE(e,t,n,r,i){let s=t.inputs,o=i?"class":"style";Ih(e,n,s[o],o,r)}function mk(e,t,n,r,i,s){let o=t.consts,a=hi(o,i),c=Ns(t,e,2,r,a);return Dh(t,n,c,hi(o,s)),c.attrs!==null&&uc(c,c.attrs,!1),c.mergedAttrs!==null&&uc(c,c.mergedAttrs,!0),t.queries!==null&&t.queries.elementStart(t,c),c}function He(e,t,n,r){let i=ge(),s=ct(),o=Oe+e,a=i[Se],c=s.firstCreatePass?mk(o,s,i,t,n,r):s.data[o],u=mw(s,i,c,a,t,e);i[o]=u;let l=Cc(c);return vr(c,!0),TS(a,u,c),!ks(c)&&Ic()&&kc(s,i,u,c),HR()===0&&Fn(u,i),zR(),l&&(Ch(s,i,c),Eh(s,c,i)),r!==null&&Sh(i,c),He}function Ve(){let e=wt();Wf()?bC():(e=e.parent,vr(e,!1));let t=e;GR(t)&&KR(),qR();let n=ct();return n.firstCreatePass&&(Tc(n,e),Hf(e)&&n.queries.elementEnd(e)),t.classesWithoutHost!=null&&oN(t)&&AE(n,t,ge(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&aN(t)&&AE(n,t,ge(),t.stylesWithoutHost,!1),Ve}function Dt(e,t,n,r){return He(e,t,n,r),Ve(),Dt}var mw=(e,t,n,r,i,s)=>(Vn(!0),ph(r,i,_C()));function gk(e,t,n,r,i,s){let o=t[Jt],a=!o||Ts()||ks(n)||_s(o,s);if(Vn(a),a)return ph(r,i,_C());let c=$c(o,e,t,n);return mS(o,s)&&xc(o,s,c.nextSibling),o&&(WC(n)||KC(c))&&Ds(n)&&(WR(n),DS(c)),c}function yk(){mw=gk}function vk(e,t,n,r,i){let s=t.consts,o=hi(s,r),a=Ns(t,e,8,"ng-container",o);o!==null&&uc(a,o,!0);let c=hi(s,i);return Dh(t,n,a,c),t.queries!==null&&t.queries.elementStart(t,a),a}function xh(e,t,n){let r=ge(),i=ct(),s=e+Oe,o=i.firstCreatePass?vk(s,i,r,t,n):i.data[s];vr(o,!0);let a=gw(i,r,o,e);return r[s]=a,Ic()&&kc(i,r,a,o),Fn(a,r),Cc(o)&&(Ch(i,r,o),Eh(i,o,r)),n!=null&&Sh(r,o),xh}function kh(){let e=wt(),t=ct();return Wf()?bC():(e=e.parent,vr(e,!1)),t.firstCreatePass&&(Tc(t,e),Hf(e)&&t.queries.elementEnd(e)),kh}var gw=(e,t,n,r)=>(Vn(!0),vS(t[Se],""));function bk(e,t,n,r){let i,s=t[Jt],o=!s||Ts()||_s(s,r)||ks(n);if(Vn(o),o)return vS(t[Se],"");let a=$c(s,e,t,n),c=DM(s,r);return xc(s,r,a),i=Hc(c,a),i}function Ek(){gw=bk}function yw(){return ge()}var hc="en-US";var Ck=hc;function Sk(e){typeof e=="string"&&(Ck=e.toLowerCase().replace(/_/g,"-"))}var vw=(e,t,n)=>{};function wk(e){vw=e}function qn(e,t,n,r){let i=ge(),s=ct(),o=wt();return Ik(s,i,i[Se],o,e,t,r),qn}function Dk(e,t,n,r){let i=e.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===n&&i[s+1]===r){let a=t[Ka],c=i[s+2];return a.length>c?a[c]:null}typeof o=="string"&&(s+=2)}return null}function Ik(e,t,n,r,i,s,o){let a=Cc(r),u=e.firstCreatePass&&BS(e),l=t[At],d=VS(t),f=!0;if(r.type&3||o){let m=at(r,t),y=o?o(m):m,v=d.length,S=o?N=>o(xt(N[r.index])):r.index,_=null;if(!o&&a&&(_=Dk(e,t,i,r.index)),_!==null){let N=_.__ngLastListenerFn__||_;N.__ngNextListenerFn__=s,_.__ngLastListenerFn__=s,f=!1}else{s=kE(r,t,l,s),vw(m,i,s);let N=n.listen(y,i,s);d.push(s,N),u&&u.push(i,S,v,v+1)}}else s=kE(r,t,l,s);let h=r.outputs,p;if(f&&h!==null&&(p=h[i])){let m=p.length;if(m)for(let y=0;y<m;y+=2){let v=p[y],S=p[y+1],B=t[v][S].subscribe(s),L=d.length;d.push(s,B),u&&u.push(i,r.index,L,-(L+1))}}}function xE(e,t,n,r){let i=re(null);try{return Gt(6,t,n),n(r)!==!1}catch(s){return Fc(e,s),!1}finally{Gt(7,t,n),re(i)}}function kE(e,t,n,r){return function i(s){if(s===Function)return r;let o=e.componentOffset>-1?yr(e.index,t):t;jc(o,5);let a=xE(t,n,r,s),c=i.__ngNextListenerFn__;for(;c;)a=xE(t,n,c,s)&&a,c=c.__ngNextListenerFn__;return a}}function Oh(e=1){return nN(e)}function qc(e,t,n,r,i){let s=ge(),o=pw(s,t,n,r);if(o!==Rs){let a=ct(),c=Xf();OS(a,c,s,e,o,s[Se],i,!1)}return qc}function Ph(e,t,n){qx(e,t,n)}function Gc(e){let t=ge(),n=ct(),r=CC();Jf(r+1);let i=Mh(n,r);if(e.dirty&&UR(t)===((i.metadata.flags&2)===2)){if(i.matches===null)e.reset([]);else{let s=Kx(t,r);e.reset(s,MN),e.notifyOnChanges()}return!0}return!1}function Wc(){return Hx(ge(),CC())}function bw(e){let t=YR();return jR(t,Oe+e)}function bn(e,t=""){let n=ge(),r=ct(),i=e+Oe,s=r.firstCreatePass?Ns(r,i,1,t,null):r.data[i],o=Ew(r,n,s,t,e);n[i]=o,Ic()&&kc(r,n,o,s),vr(s,!1)}var Ew=(e,t,n,r,i)=>(Vn(!0),yS(t[Se],r));function Tk(e,t,n,r,i){let s=t[Jt],o=!s||Ts()||ks(n)||_s(s,i);return Vn(o),o?yS(t[Se],r):$c(s,e,t,n)}function _k(){Ew=Tk}function Lh(e){return Cw("",e,""),Lh}function Cw(e,t,n){let r=ge(),i=pw(r,e,t,n);return i!==Rs&&xA(r,Qf(),i),Cw}var _f=class{ngModuleFactory;componentFactories;constructor(t,n){this.ngModuleFactory=t,this.componentFactories=n}},Fh=(()=>{class e{compileModuleSync(n){return new bf(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=nC(n),s=gS(i.declarations).reduce((o,a)=>{let c=Pn(a);return c&&o.push(new Ss(c)),o},[]);return new _f(r,s)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static \u0275fac=function(r){return new(r||e)};static \u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var Rk=(()=>{class e{zone=D(Ce);changeDetectionScheduler=D(mi);applicationRef=D(We);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||e)};static \u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Nk=new O("",{factory:()=>!1});function Sw({ngZoneFactory:e,ignoreChangesOutsideZone:t,scheduleInRootZone:n}){return e??=()=>new Ce(R(E({},Dw()),{scheduleInRootZone:n})),[{provide:Ce,useFactory:e},{provide:On,multi:!0,useFactory:()=>{let r=D(Rk,{optional:!0});return()=>r.initialize()}},{provide:On,multi:!0,useFactory:()=>{let r=D(Mk);return()=>{r.initialize()}}},t===!0?{provide:$C,useValue:!0}:[],{provide:HC,useValue:n??BC}]}function ww(e){let t=e?.ignoreChangesOutsideZone,n=e?.scheduleInRootZone,r=Sw({ngZoneFactory:()=>{let i=Dw(e);return i.scheduleInRootZone=n,i.shouldCoalesceEventChangeDetection&&Qt("NgZone_CoalesceEvent"),new Ce(i)},ignoreChangesOutsideZone:t,scheduleInRootZone:n});return gr([{provide:Nk,useValue:!0},{provide:_c,useValue:!1},r])}function Dw(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}var Mk=(()=>{class e{subscription=new ve;initialized=!1;zone=D(Ce);pendingTasks=D(Bn);initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Ce.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Ce.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||e)};static \u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var Ak=(()=>{class e{appRef=D(We);taskService=D(Bn);ngZone=D(Ce);zonelessEnabled=D(_c);disableScheduling=D($C,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new ve;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(nc):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(D(HC,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof nf||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&n===5)return;let r=!1;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 8:{this.appRef.deferredDirtyFlags|=8;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 13:{this.appRef.dirtyFlags|=16,r=!0;break}case 14:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{r=!0;break}case 10:case 9:case 7:case 11:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?uE:zC;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(n){return!(this.disableScheduling&&!n||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(nc+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(n),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,uE(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(r){return new(r||e)};static \u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function xk(){return typeof $localize<"u"&&$localize.locale||hc}var jh=new O("",{providedIn:"root",factory:()=>D(jh,J.Optional|J.SkipSelf)||xk()});var Rf=new O("");function Oa(e){return!e.moduleRef}function kk(e){let t=Oa(e)?e.r3Injector:e.moduleRef.injector,n=t.get(Ce);return n.run(()=>{Oa(e)?e.r3Injector.resolveInjectorInitializers():e.moduleRef.resolveInjectorInitializers();let r=t.get(yn,null),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:s=>{r.handleError(s)}})}),Oa(e)){let s=()=>t.destroy(),o=e.platformInjector.get(Rf);o.add(s),t.onDestroy(()=>{i.unsubscribe(),o.delete(s)})}else{let s=()=>e.moduleRef.destroy(),o=e.platformInjector.get(Rf);o.add(s),e.moduleRef.onDestroy(()=>{Ba(e.allPlatformModules,e.moduleRef),i.unsubscribe(),o.delete(s)})}return mx(r,n,()=>{let s=t.get(nw);return s.runInitializers(),s.donePromise.then(()=>{let o=t.get(jh,hc);if(Sk(o||hc),Oa(e)){let a=t.get(We);return e.rootComponent!==void 0&&a.bootstrap(e.rootComponent),a}else return Ok(e.moduleRef,e.allPlatformModules),e.moduleRef})})})}function Ok(e,t){let n=e.injector.get(We);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(r=>n.bootstrap(r));else if(e.instance.ngDoBootstrap)e.instance.ngDoBootstrap(n);else throw new A(-403,!1);t.push(e)}var $a=null;function Pk(e=[],t){return ot.create({name:t,providers:[{provide:bc,useValue:"platform"},{provide:Rf,useValue:new Set([()=>$a=null])},...e]})}function Lk(e=[]){if($a)return $a;let t=Pk(e);return $a=t,fx(),Fk(t),t}function Fk(e){let t=e.get(sh,null);St(e,()=>{t?.forEach(n=>n())})}var Ps=(()=>{class e{static __NG_ELEMENT_ID__=jk}return e})();function jk(e){return Uk(wt(),ge(),(e&16)===16)}function Uk(e,t,n){if(Ds(e)&&!n){let r=yr(e.index,t);return new pr(r,r)}else if(e.type&175){let r=t[Ct];return new pr(r,t)}return null}var Nf=class{constructor(){}supports(t){return dw(t)}create(t){return new Mf(t)}},Vk=(e,t)=>t,Mf=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(t){this._trackByFn=t||Vk}forEachItem(t){let n;for(n=this._itHead;n!==null;n=n._next)t(n)}forEachOperation(t){let n=this._itHead,r=this._removalsHead,i=0,s=null;for(;n||r;){let o=!r||n&&n.currentIndex<OE(r,i,s)?n:r,a=OE(o,i,s),c=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(n=n._next,o.previousIndex==null)i++;else{s||(s=[]);let u=a-i,l=c-i;if(u!=l){for(let f=0;f<u;f++){let h=f<s.length?s[f]:s[f]=0,p=h+f;l<=p&&p<u&&(s[f]=h+1)}let d=o.previousIndex;s[d]=l-u}}a!==c&&t(o,a,c)}}forEachPreviousItem(t){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)t(n)}forEachAddedItem(t){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)t(n)}forEachMovedItem(t){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)t(n)}forEachRemovedItem(t){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)t(n)}forEachIdentityChange(t){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)t(n)}diff(t){if(t==null&&(t=[]),!dw(t))throw new A(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let n=this._itHead,r=!1,i,s,o;if(Array.isArray(t)){this.length=t.length;for(let a=0;a<this.length;a++)s=t[a],o=this._trackByFn(a,s),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,s,o,a),r=!0):(r&&(n=this._verifyReinsertion(n,s,o,a)),Object.is(n.item,s)||this._addIdentityChange(n,s)),n=n._next}else i=0,Yx(t,a=>{o=this._trackByFn(i,a),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,a,o,i),r=!0):(r&&(n=this._verifyReinsertion(n,a,o,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=t,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;t!==null;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;t!==null;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;t!==null;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,n,r,i){let s;return t===null?s=this._itTail:(s=t._prev,this._remove(t)),t=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),t!==null?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._reinsertAfter(t,s,i)):(t=this._linkedRecords===null?null:this._linkedRecords.get(r,i),t!==null?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._moveAfter(t,s,i)):t=this._addAfter(new Af(n,r),s,i)),t}_verifyReinsertion(t,n,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?t=this._reinsertAfter(s,t._prev,i):t.currentIndex!=i&&(t.currentIndex=i,this._addToMoves(t,i)),t}_truncate(t){for(;t!==null;){let n=t._next;this._addToRemovals(this._unlink(t)),t=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(t);let i=t._prevRemoved,s=t._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(t,n,r),this._addToMoves(t,r),t}_moveAfter(t,n,r){return this._unlink(t),this._insertAfter(t,n,r),this._addToMoves(t,r),t}_addAfter(t,n,r){return this._insertAfter(t,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=t:this._additionsTail=this._additionsTail._nextAdded=t,t}_insertAfter(t,n,r){let i=n===null?this._itHead:n._next;return t._next=i,t._prev=n,i===null?this._itTail=t:i._prev=t,n===null?this._itHead=t:n._next=t,this._linkedRecords===null&&(this._linkedRecords=new pc),this._linkedRecords.put(t),t.currentIndex=r,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){this._linkedRecords!==null&&this._linkedRecords.remove(t);let n=t._prev,r=t._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,t}_addToMoves(t,n){return t.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=t:this._movesTail=this._movesTail._nextMoved=t),t}_addToRemovals(t){return this._unlinkedRecords===null&&(this._unlinkedRecords=new pc),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,n){return t.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=t:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=t,t}},Af=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(t,n){this.item=t,this.trackById=n}},xf=class{_head=null;_tail=null;add(t){this._head===null?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,t))return r;return null}remove(t){let n=t._prevDup,r=t._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},pc=class{map=new Map;put(t){let n=t.trackById,r=this.map.get(n);r||(r=new xf,this.map.set(n,r)),r.add(t)}get(t,n){let r=t,i=this.map.get(r);return i?i.get(t,n):null}remove(t){let n=t.trackById;return this.map.get(n).remove(t)&&this.map.delete(n),t}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function OE(e,t,n){let r=e.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+t+i}function PE(){return new Uh([new Nf])}var Uh=(()=>{class e{factories;static \u0275prov=j({token:e,providedIn:"root",factory:PE});constructor(n){this.factories=n}static create(n,r){if(r!=null){let i=r.factories.slice();n=n.concat(i)}return new e(n)}static extend(n){return{provide:e,useFactory:r=>e.create(n,r||PE()),deps:[[e,new QE,new Pf]]}}find(n){let r=this.factories.find(i=>i.supports(n));if(r!=null)return r;throw new A(901,!1)}}return e})();function Iw(e){try{let{rootComponent:t,appProviders:n,platformProviders:r}=e,i=Lk(r),s=[Sw({}),{provide:mi,useExisting:Ak},...n||[]],o=new dc({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1});return kk({r3Injector:o.injector,platformInjector:i,rootComponent:t})}catch(t){return Promise.reject(t)}}var Pa=new WeakSet,LE="",Ha=[];function FE(e){return e.get(aS,KN)}function Tw(){let e=[{provide:aS,useFactory:()=>{let t=!0;{let n=D(Ci);t=!!window._ejsas?.[n]}return t&&Qt("NgEventReplay"),t}}];return e.push({provide:On,useValue:()=>{let t=D(ot),n=t.get(We);if(!Pa.has(n)){let r=D(pE);FE(t)&&wk((i,s,o)=>{dM(i,s,o),fM(i,r)})}},multi:!0},{provide:Sr,useFactory:()=>{let t=D(ot),n=D(We);return()=>{!FE(t)||Pa.has(n)||(Pa.add(n),n.onDestroy(()=>Pa.delete(n)),Si(n).then(()=>{let r=t.get(pM);Bk(r,t);let i=t.get(pE);i.get(LE)?.forEach(hM),i.delete(LE);let s=r.instance;wM(t)?n.onDestroy(()=>s.cleanUp()):s.cleanUp()}))}},multi:!0}),e}var Bk=(e,t)=>{let n=t.get(Ci),r=window._ejsas[n],i=e.instance=new qb(new Na(r.c));for(let a of r.et)i.addEvent(a);for(let a of r.etc)i.addEvent(a);let s=Gb(n);i.replayEarlyEventInfos(s),Wb(n);let o=new Ma(a=>{$k(t,a,a.currentTarget)});zb(i,o)};function $k(e,t,n){let r=(n&&n.getAttribute(Ac))??"";/d\d+/.test(r)?Hk(r,e,t,n):t.eventPhase===Rd.REPLAY&&dS(t,n)}function Hk(e,t,n,r){return g(this,null,function*(){Ha.push({event:n,currentTarget:r}),yield lk(t,e,zk)})}function zk(e){let t=[...Ha];Ha=[];for(let{event:n,currentTarget:r}of t){let i=r.getAttribute(Ac);e.has(i)?dS(n,r):Ha.push({event:n,currentTarget:r})}}var jE=!1;function qk(){jE||(jE=!0,bM(),yk(),_k(),Ek(),tk(),jx(),Ax(),fA())}function Gk(e,t){return Si(e)}function _w(){let e=[{provide:xa,useFactory:()=>{let t=!0;return t=!!D(Er,{optional:!0})?.get(fS,null),t&&Qt("NgHydration"),t}},{provide:On,useValue:()=>{Dx(!1),D(xa)&&(Wk(),qk())},multi:!0}];return e.push({provide:oS,useFactory:()=>D(xa)},{provide:Sr,useFactory:()=>{if(D(xa)){let t=D(We),n=D(ot);return()=>{Gk(t,n).then(()=>{iw(t)})}}return()=>{}},multi:!0}),gr(e)}function Wk(){let e=Rc(),t;for(let n of e.body.childNodes)if(n.nodeType===Node.COMMENT_NODE&&n.textContent?.trim()===yM){t=n;break}if(!t)throw new A(-507,!1)}function Kc(e,t){Qt("NgSignals");let n=Wv(e);return t?.equal&&(n[mt].equal=t.equal),n}var UE=class{[mt];constructor(t){this[mt]=t}destroy(){this[mt].destroy()}};var Ow=null;function wi(){return Ow}function Pw(e){Ow??=e}var Jc=class{};var ut=new O(""),Lw=(()=>{class e{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||e)};static \u0275prov=j({token:e,factory:()=>D(Xk),providedIn:"platform"})}return e})();var Xk=(()=>{class e extends Lw{_location;_history;_doc=D(ut);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return wi().getBaseHref(this._doc)}onPopState(n){let r=wi().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=wi().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||e)};static \u0275prov=j({token:e,factory:()=>new e,providedIn:"platform"})}return e})();function Fw(e,t){if(e.length==0)return t;if(t.length==0)return e;let n=0;return e.endsWith("/")&&n++,t.startsWith("/")&&n++,n==2?e+t.substring(1):n==1?e+t:e+"/"+t}function Rw(e){let t=e.match(/#|\?|$/),n=t&&t.index||e.length,r=n-(e[n-1]==="/"?1:0);return e.slice(0,r)+e.slice(n)}function Dr(e){return e&&e[0]!=="?"?"?"+e:e}var Zc=(()=>{class e{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||e)};static \u0275prov=j({token:e,factory:()=>D(jw),providedIn:"root"})}return e})(),eO=new O(""),jw=(()=>{class e extends Zc{_platformLocation;_baseHref;_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??D(ut).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return Fw(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+Dr(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,s){let o=this.prepareExternalUrl(i+Dr(s));this._platformLocation.pushState(n,r,o)}replaceState(n,r,i,s){let o=this.prepareExternalUrl(i+Dr(s));this._platformLocation.replaceState(n,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||e)(Q(Lw),Q(eO,8))};static \u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var Ls=(()=>{class e{_subject=new be;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(n){this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=rO(Rw(Nw(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+Dr(r))}normalize(n){return e.stripTrailingSlash(nO(this._basePath,Nw(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Dr(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Dr(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=Dr;static joinWithSlash=Fw;static stripTrailingSlash=Rw;static \u0275fac=function(r){return new(r||e)(Q(Zc))};static \u0275prov=j({token:e,factory:()=>tO(),providedIn:"root"})}return e})();function tO(){return new Ls(Q(Zc))}function nO(e,t){if(!e||!t.startsWith(e))return t;let n=t.substring(e.length);return n===""||["/",";","?","#"].includes(n[0])?n:t}function Nw(e){return e.replace(/\/index.html$/,"")}function rO(e){if(new RegExp("^(https?:)?//").test(e)){let[,n]=e.split(/\/\/[^\/]+/);return n}return e}function $h(e,t){t=encodeURIComponent(t);for(let n of e.split(";")){let r=n.indexOf("="),[i,s]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===t)return decodeURIComponent(s)}return null}var Vh=class{$implicit;ngForOf;index;count;constructor(t,n,r,i){this.$implicit=t,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Uw=(()=>{class e{_viewContainer;_template;_differs;set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(n,r,i){this._viewContainer=n,this._template=r,this._differs=i}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let n=this._ngForOf;if(!this._differ&&n)if(0)try{}catch{}else this._differ=this._differs.find(n).create(this.ngForTrackBy)}if(this._differ){let n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){let r=this._viewContainer;n.forEachOperation((i,s,o)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Vh(i.item,this._ngForOf,-1,-1),o===null?void 0:o);else if(o==null)r.remove(s===null?void 0:s);else if(s!==null){let a=r.get(s);r.move(a,o),Mw(a,i)}});for(let i=0,s=r.length;i<s;i++){let a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}n.forEachIdentityChange(i=>{let s=r.get(i.currentIndex);Mw(s,i)})}static ngTemplateContextGuard(n,r){return!0}static \u0275fac=function(r){return new(r||e)(Ke(Hn),Ke(mr),Ke(Uh))};static \u0275dir=Ms({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return e})();function Mw(e,t){e.context.$implicit=t.item}var Vw=(()=>{class e{_viewContainer;_context=new Bh;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(n,r){this._viewContainer=n,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){Aw("ngIfThen",n),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){Aw("ngIfElse",n),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(n,r){return!0}static \u0275fac=function(r){return new(r||e)(Ke(Hn),Ke(mr))};static \u0275dir=Ms({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return e})(),Bh=class{$implicit=null;ngIf=null};function Aw(e,t){if(!!!(!t||t.createEmbeddedView))throw new Error(`${e} must be a TemplateRef, but received '${qe(t)}'.`)}var Fs=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275mod=Vc({type:e});static \u0275inj=gc({})}return e})(),Bw="browser",iO="server";function js(e){return e===iO}var Yc=class{};var Xc=class e{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(t){t?typeof t=="string"?this.lazyInit=()=>{this.headers=new Map,t.split(`
`).forEach(n=>{let r=n.indexOf(":");if(r>0){let i=n.slice(0,r),s=n.slice(r+1).trim();this.addHeaderEntry(i,s)}})}:typeof Headers<"u"&&t instanceof Headers?(this.headers=new Map,t.forEach((n,r)=>{this.addHeaderEntry(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(t).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();let n=this.headers.get(t.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,n){return this.clone({name:t,value:n,op:"a"})}set(t,n){return this.clone({name:t,value:n,op:"s"})}delete(t,n){return this.clone({name:t,value:n,op:"d"})}maybeSetNormalizedName(t,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,t)}init(){this.lazyInit&&(this.lazyInit instanceof e?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(n=>{this.headers.set(n,t.headers.get(n)),this.normalizedNames.set(n,t.normalizedNames.get(n))})}clone(t){let n=new e;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof e?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([t]),n}applyUpdate(t){let n=t.name.toLowerCase();switch(t.op){case"a":case"s":let r=t.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(t.name,n);let i=(t.op==="a"?this.headers.get(n):void 0)||[];i.push(...r),this.headers.set(n,i);break;case"d":let s=t.value;if(!s)this.headers.delete(n),this.normalizedNames.delete(n);else{let o=this.headers.get(n);if(!o)return;o=o.filter(a=>s.indexOf(a)===-1),o.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,o)}break}}addHeaderEntry(t,n){let r=t.toLowerCase();this.maybeSetNormalizedName(t,r),this.headers.has(r)?this.headers.get(r).push(n):this.headers.set(r,[n])}setHeaderEntries(t,n){let r=(Array.isArray(n)?n:[n]).map(s=>s.toString()),i=t.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(t,i)}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>t(this.normalizedNames.get(n),this.headers.get(n)))}};var Yw=function(e){return e[e.Sent=0]="Sent",e[e.UploadProgress=1]="UploadProgress",e[e.ResponseHeader=2]="ResponseHeader",e[e.DownloadProgress=3]="DownloadProgress",e[e.Response=4]="Response",e[e.User=5]="User",e}(Yw||{}),Hh=class{headers;status;statusText;url;ok;type;constructor(t,n=200,r="OK"){this.headers=t.headers||new Xc,this.status=t.status!==void 0?t.status:n,this.statusText=t.statusText||r,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}};var eu=class e extends Hh{body;constructor(t={}){super(t),this.body=t.body!==void 0?t.body:null}type=Yw.Response;clone(t={}){return new e({body:t.body!==void 0?t.body:this.body,headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}};var sO=new O("");var oO=new O(""),Hw="b",zw="h",qw="s",Gw="st",Ww="u",Kw="rt",Qc=new O(""),aO=["GET","HEAD"];function cO(e,t){let h=D(Qc),{isCacheActive:n}=h,r=_n(h,["isCacheActive"]),{transferCache:i,method:s}=e;if(!n||i===!1||s==="POST"&&!r.includePostRequests&&!i||s!=="POST"&&!aO.includes(s)||!r.includeRequestsWithAuthHeaders&&uO(e)||r.filter?.(e)===!1)return t(e);let o=D(Er),a=D(oO,{optional:!0}),c=js(D(vn));if(a&&!c)throw new A(2803,!1);let u=c&&a?hO(e.url,a):e.url,l=dO(e,u),d=o.get(l,null),f=r.includeHeaders;if(typeof i=="object"&&i.includeHeaders&&(f=i.includeHeaders),d){let{[Hw]:p,[Kw]:m,[zw]:y,[qw]:v,[Gw]:S,[Ww]:_}=d,N=p;switch(m){case"arraybuffer":N=new TextEncoder().encode(p).buffer;break;case"blob":N=new Blob([p]);break}let B=new Xc(y);return $(new eu({body:N,headers:B,status:v,statusText:S,url:_}))}return t(e).pipe(Ne(p=>{p instanceof eu&&c&&o.set(l,{[Hw]:p.body,[zw]:lO(p.headers,f),[qw]:p.status,[Gw]:p.statusText,[Ww]:u,[Kw]:e.responseType})}))}function uO(e){return e.headers.has("authorization")||e.headers.has("proxy-authorization")}function lO(e,t){if(!t)return{};let n={};for(let r of t){let i=e.getAll(r);i!==null&&(n[r]=i)}return n}function Jw(e){return[...e.keys()].sort().map(t=>`${t}=${e.getAll(t)}`).join("&")}function dO(e,t){let{params:n,method:r,responseType:i}=e,s=Jw(n),o=e.serializeBody();o instanceof URLSearchParams?o=Jw(o):typeof o!="string"&&(o="");let a=[r,i,t,o,s].join("|"),c=fO(a);return c}function fO(e){let t=0;for(let n of e)t=Math.imul(31,t)+n.charCodeAt(0)<<0;return t+=2147483648,t.toString()}function Zw(e){return[{provide:Qc,useFactory:()=>(Qt("NgHttpTransferCache"),E({isCacheActive:!0},e))},{provide:sO,useValue:cO,multi:!0,deps:[Er,Qc]},{provide:Sr,multi:!0,useFactory:()=>{let t=D(We),n=D(Qc);return()=>{Si(t).then(()=>{n.isCacheActive=!1})}}}]}function hO(e,t){let n=new URL(e,"resolve://").origin,r=t[n];return r?e.replace(n,r):e}var qh=class extends Jc{supportsDOMEvents=!0},Gh=class e extends qh{static makeCurrent(){Pw(new e)}onAndCancel(t,n,r){return t.addEventListener(n,r),()=>{t.removeEventListener(n,r)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.remove()}createElement(t,n){return n=n||this.getDefaultDocument(),n.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return n==="window"?window:n==="document"?t:n==="body"?t.body:null}getBaseHref(t){let n=pO();return n==null?null:mO(n)}resetBaseElement(){Us=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return $h(document.cookie,t)}},Us=null;function pO(){return Us=Us||document.querySelector("base"),Us?Us.getAttribute("href"):null}function mO(e){return new URL(e,document.baseURI).pathname}var gO=(()=>{class e{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||e)};static \u0275prov=j({token:e,factory:e.\u0275fac})}return e})(),Wh=new O(""),rD=(()=>{class e{_zone;_plugins;_eventNameToPlugin=new Map;constructor(n,r){this._zone=r,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(s=>s.supports(n)),!r)throw new A(5101,!1);return this._eventNameToPlugin.set(n,r),r}static \u0275fac=function(r){return new(r||e)(Q(Wh),Q(Ce))};static \u0275prov=j({token:e,factory:e.\u0275fac})}return e})(),tu=class{_doc;constructor(t){this._doc=t}manager},Kh="ng-app-id";function Qw(e){for(let t of e)t.remove()}function Xw(e,t){let n=t.createElement("style");return n.textContent=e,n}function yO(e,t,n){let r=e.head?.querySelectorAll(`style[${Kh}="${t}"]`);if(r)for(let i of r)i.textContent&&(i.removeAttribute(Kh),n.set(i.textContent,{usage:0,elements:[i]}))}function Jh(e,t){let n=t.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href",e),n}var iD=(()=>{class e{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(n,r,i,s={}){this.doc=n,this.appId=r,this.nonce=i,this.isServer=js(s),yO(n,r,this.inline),this.hosts.add(n.head)}addStyles(n,r){for(let i of n)this.addUsage(i,this.inline,Xw);r?.forEach(i=>this.addUsage(i,this.external,Jh))}removeStyles(n,r){for(let i of n)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(n,r,i){let s=r.get(n);s?s.usage++:r.set(n,{usage:1,elements:[...this.hosts].map(o=>this.addElement(o,i(n,this.doc)))})}removeUsage(n,r){let i=r.get(n);i&&(i.usage--,i.usage<=0&&(Qw(i.elements),r.delete(n)))}ngOnDestroy(){for(let[,{elements:n}]of[...this.inline,...this.external])Qw(n);this.hosts.clear()}addHost(n){this.hosts.add(n);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(n,Xw(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(n,Jh(r,this.doc)))}removeHost(n){this.hosts.delete(n)}addElement(n,r){return this.nonce&&r.setAttribute("nonce",this.nonce),this.isServer&&r.setAttribute(Kh,this.appId),n.appendChild(r)}static \u0275fac=function(r){return new(r||e)(Q(ut),Q(Ci),Q(oh,8),Q(vn))};static \u0275prov=j({token:e,factory:e.\u0275fac})}return e})(),zh={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Zh=/%COMP%/g,sD="%COMP%",vO=`_nghost-${sD}`,bO=`_ngcontent-${sD}`,EO=!0,CO=new O("",{providedIn:"root",factory:()=>EO});function SO(e){return bO.replace(Zh,e)}function wO(e){return vO.replace(Zh,e)}function oD(e,t){return t.map(n=>n.replace(Zh,e))}var eD=(()=>{class e{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(n,r,i,s,o,a,c,u=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=c,this.nonce=u,this.platformIsServer=js(a),this.defaultRenderer=new Vs(n,o,c,this.platformIsServer)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Yt.ShadowDom&&(r=R(E({},r),{encapsulation:Yt.Emulated}));let i=this.getOrCreateRenderer(n,r);return i instanceof nu?i.applyToHost(n):i instanceof Bs&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,s=i.get(r.id);if(!s){let o=this.doc,a=this.ngZone,c=this.eventManager,u=this.sharedStylesHost,l=this.removeStylesOnCompDestroy,d=this.platformIsServer;switch(r.encapsulation){case Yt.Emulated:s=new nu(c,u,r,this.appId,l,o,a,d);break;case Yt.ShadowDom:return new Yh(c,u,n,r,o,a,this.nonce,d);default:s=new Bs(c,u,r,l,o,a,d);break}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static \u0275fac=function(r){return new(r||e)(Q(rD),Q(iD),Q(Ci),Q(CO),Q(ut),Q(vn),Q(Ce),Q(oh))};static \u0275prov=j({token:e,factory:e.\u0275fac})}return e})(),Vs=class{eventManager;doc;ngZone;platformIsServer;data=Object.create(null);throwOnSyntheticProps=!0;constructor(t,n,r,i){this.eventManager=t,this.doc=n,this.ngZone=r,this.platformIsServer=i}destroy(){}destroyNode=null;createElement(t,n){return n?this.doc.createElementNS(zh[n]||n,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,n){(tD(t)?t.content:t).appendChild(n)}insertBefore(t,n,r){t&&(tD(t)?t.content:t).insertBefore(n,r)}removeChild(t,n){n.remove()}selectRootElement(t,n){let r=typeof t=="string"?this.doc.querySelector(t):t;if(!r)throw new A(-5104,!1);return n||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,r,i){if(i){n=i+":"+n;let s=zh[i];s?t.setAttributeNS(s,n,r):t.setAttribute(n,r)}else t.setAttribute(n,r)}removeAttribute(t,n,r){if(r){let i=zh[r];i?t.removeAttributeNS(i,n):t.removeAttribute(`${r}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,r,i){i&(Cr.DashCase|Cr.Important)?t.style.setProperty(n,r,i&Cr.Important?"important":""):t.style[n]=r}removeStyle(t,n,r){r&Cr.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,r){t!=null&&(t[n]=r)}setValue(t,n){t.nodeValue=n}listen(t,n,r){if(typeof t=="string"&&(t=wi().getGlobalEventTarget(this.doc,t),!t))throw new Error(`Unsupported event target ${t} for event ${n}`);return this.eventManager.addEventListener(t,n,this.decoratePreventDefault(r))}decoratePreventDefault(t){return n=>{if(n==="__ngUnwrap__")return t;(this.platformIsServer?this.ngZone.runGuarded(()=>t(n)):t(n))===!1&&n.preventDefault()}}};function tD(e){return e.tagName==="TEMPLATE"&&e.content!==void 0}var Yh=class extends Vs{sharedStylesHost;hostEl;shadowRoot;constructor(t,n,r,i,s,o,a,c){super(t,s,o,c),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=oD(i.id,i.styles);for(let d of u){let f=document.createElement("style");a&&f.setAttribute("nonce",a),f.textContent=d,this.shadowRoot.appendChild(f)}let l=i.getExternalStyles?.();if(l)for(let d of l){let f=Jh(d,s);a&&f.setAttribute("nonce",a),this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,r){return super.insertBefore(this.nodeOrShadowRoot(t),n,r)}removeChild(t,n){return super.removeChild(null,n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Bs=class extends Vs{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(t,n,r,i,s,o,a,c){super(t,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=c?oD(c,r.styles):r.styles,this.styleUrls=r.getExternalStyles?.(c)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},nu=class extends Bs{contentAttr;hostAttr;constructor(t,n,r,i,s,o,a,c){let u=i+"-"+r.id;super(t,n,r,s,o,a,c,u),this.contentAttr=SO(u),this.hostAttr=wO(u)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,n){let r=super.createElement(t,n);return super.setAttribute(r,this.contentAttr,""),r}},DO=(()=>{class e extends tu{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}static \u0275fac=function(r){return new(r||e)(Q(ut))};static \u0275prov=j({token:e,factory:e.\u0275fac})}return e})(),nD=["alt","control","meta","shift"],IO={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},TO={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey},_O=(()=>{class e extends tu{constructor(n){super(n)}supports(n){return e.parseEventName(n)!=null}addEventListener(n,r,i){let s=e.parseEventName(r),o=e.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>wi().onAndCancel(n,s.domEventName,o))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let s=e._normalizeKey(r.pop()),o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),nD.forEach(u=>{let l=r.indexOf(u);l>-1&&(r.splice(l,1),o+=u+".")}),o+=s,r.length!=0||s.length===0)return null;let c={};return c.domEventName=i,c.fullKey=o,c}static matchEventFullKeyCode(n,r){let i=IO[n.key]||n.key,s="";return r.indexOf("code.")>-1&&(i=n.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),nD.forEach(o=>{if(o!==i){let a=TO[o];a(n)&&(s+=o+".")}}),s+=i,s===r)}static eventCallback(n,r,i){return s=>{e.matchEventFullKeyCode(s,n)&&i.runGuarded(()=>r(s))}}static _normalizeKey(n){return n==="esc"?"escape":n}static \u0275fac=function(r){return new(r||e)(Q(ut))};static \u0275prov=j({token:e,factory:e.\u0275fac})}return e})();function aD(e,t){return Iw(E({rootComponent:e},RO(t)))}function RO(e){return{appProviders:[...kO,...e?.providers??[]],platformProviders:xO}}function NO(){Gh.makeCurrent()}function MO(){return new yn}function AO(){return eS(document),document}var xO=[{provide:vn,useValue:Bw},{provide:sh,useValue:NO,multi:!0},{provide:ut,useFactory:AO,deps:[]}];var kO=[{provide:bc,useValue:"root"},{provide:yn,useFactory:MO,deps:[]},{provide:Wh,useClass:DO,multi:!0,deps:[ut,Ce,vn]},{provide:Wh,useClass:_O,multi:!0,deps:[ut]},eD,iD,rD,{provide:yi,useExisting:eD},{provide:Yc,useClass:gO,deps:[]},[]];var cD=(()=>{class e{_doc;constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static \u0275fac=function(r){return new(r||e)(Q(ut))};static \u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var ru=function(e){return e[e.NoHttpTransferCache=0]="NoHttpTransferCache",e[e.HttpTransferCacheOptions=1]="HttpTransferCacheOptions",e[e.I18nSupport=2]="I18nSupport",e[e.EventReplay=3]="EventReplay",e[e.IncrementalHydration=4]="IncrementalHydration",e}(ru||{});function OO(e,t=[],n={}){return{\u0275kind:e,\u0275providers:t}}function uD(){return OO(ru.EventReplay,Tw())}function lD(...e){let t=[],n=new Set,r=n.has(ru.HttpTransferCacheOptions);for(let{\u0275providers:i,\u0275kind:s}of e)n.add(s),i.length&&t.push(i);return gr([[],_w(),n.has(ru.NoHttpTransferCache)||r?[]:Zw({}),t])}var K="primary",io=Symbol("RouteTitle"),np=class{params;constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n[0]:n}return null}getAll(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Ni(e){return new np(e)}function LO(e,t,n){let r=n.path.split("/");if(r.length>e.length||n.pathMatch==="full"&&(t.hasChildren()||r.length<e.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=e[s];if(o[0]===":")i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:e.slice(0,r.length),posParams:i}}function FO(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!Xt(e[n],t[n]))return!1;return!0}function Xt(e,t){let n=e?rp(e):void 0,r=t?rp(t):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!vD(e[i],t[i]))return!1;return!0}function rp(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}function vD(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;let n=[...e].sort(),r=[...t].sort();return n.every((i,s)=>r[s]===i)}else return e===t}function bD(e){return e.length>0?e[e.length-1]:null}function Gn(e){return fd(e)?e:As(e)?me(Promise.resolve(e)):$(e)}var jO={exact:CD,subset:SD},ED={exact:UO,subset:VO,ignored:()=>!0};function dD(e,t,n){return jO[n.paths](e.root,t.root,n.matrixParams)&&ED[n.queryParams](e.queryParams,t.queryParams)&&!(n.fragment==="exact"&&e.fragment!==t.fragment)}function UO(e,t){return Xt(e,t)}function CD(e,t,n){if(!Tr(e.segments,t.segments)||!ou(e.segments,t.segments,n)||e.numberOfChildren!==t.numberOfChildren)return!1;for(let r in t.children)if(!e.children[r]||!CD(e.children[r],t.children[r],n))return!1;return!0}function VO(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(n=>vD(e[n],t[n]))}function SD(e,t,n){return wD(e,t,t.segments,n)}function wD(e,t,n,r){if(e.segments.length>n.length){let i=e.segments.slice(0,n.length);return!(!Tr(i,n)||t.hasChildren()||!ou(i,n,r))}else if(e.segments.length===n.length){if(!Tr(e.segments,n)||!ou(e.segments,n,r))return!1;for(let i in t.children)if(!e.children[i]||!SD(e.children[i],t.children[i],r))return!1;return!0}else{let i=n.slice(0,e.segments.length),s=n.slice(e.segments.length);return!Tr(e.segments,i)||!ou(e.segments,i,r)||!e.children[K]?!1:wD(e.children[K],t,s,r)}}function ou(e,t,n){return t.every((r,i)=>ED[n](e[i].parameters,r.parameters))}var Cn=class{root;queryParams;fragment;_queryParamMap;constructor(t=new se([],{}),n={},r=null){this.root=t,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Ni(this.queryParams),this._queryParamMap}toString(){return HO.serialize(this)}},se=class{segments;children;parent=null;constructor(t,n){this.segments=t,this.children=n,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return au(this)}},Ir=class{path;parameters;_parameterMap;constructor(t,n){this.path=t,this.parameters=n}get parameterMap(){return this._parameterMap??=Ni(this.parameters),this._parameterMap}toString(){return ID(this)}};function BO(e,t){return Tr(e,t)&&e.every((n,r)=>Xt(n.parameters,t[r].parameters))}function Tr(e,t){return e.length!==t.length?!1:e.every((n,r)=>n.path===t[r].path)}function $O(e,t){let n=[];return Object.entries(e.children).forEach(([r,i])=>{r===K&&(n=n.concat(t(i,r)))}),Object.entries(e.children).forEach(([r,i])=>{r!==K&&(n=n.concat(t(i,r)))}),n}var Np=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275prov=j({token:e,factory:()=>new Ks,providedIn:"root"})}return e})(),Ks=class{parse(t){let n=new sp(t);return new Cn(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(t){let n=`/${$s(t.root,!0)}`,r=GO(t.queryParams),i=typeof t.fragment=="string"?`#${zO(t.fragment)}`:"";return`${n}${r}${i}`}},HO=new Ks;function au(e){return e.segments.map(t=>ID(t)).join("/")}function $s(e,t){if(!e.hasChildren())return au(e);if(t){let n=e.children[K]?$s(e.children[K],!1):"",r=[];return Object.entries(e.children).forEach(([i,s])=>{i!==K&&r.push(`${i}:${$s(s,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=$O(e,(r,i)=>i===K?[$s(e.children[K],!1)]:[`${i}:${$s(r,!1)}`]);return Object.keys(e.children).length===1&&e.children[K]!=null?`${au(e)}/${n[0]}`:`${au(e)}/(${n.join("//")})`}}function DD(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function iu(e){return DD(e).replace(/%3B/gi,";")}function zO(e){return encodeURI(e)}function ip(e){return DD(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function cu(e){return decodeURIComponent(e)}function fD(e){return cu(e.replace(/\+/g,"%20"))}function ID(e){return`${ip(e.path)}${qO(e.parameters)}`}function qO(e){return Object.entries(e).map(([t,n])=>`;${ip(t)}=${ip(n)}`).join("")}function GO(e){let t=Object.entries(e).map(([n,r])=>Array.isArray(r)?r.map(i=>`${iu(n)}=${iu(i)}`).join("&"):`${iu(n)}=${iu(r)}`).filter(n=>n);return t.length?`?${t.join("&")}`:""}var WO=/^[^\/()?;#]+/;function Qh(e){let t=e.match(WO);return t?t[0]:""}var KO=/^[^\/()?;=#]+/;function JO(e){let t=e.match(KO);return t?t[0]:""}var YO=/^[^=?&#]+/;function ZO(e){let t=e.match(YO);return t?t[0]:""}var QO=/^[^&#]+/;function XO(e){let t=e.match(QO);return t?t[0]:""}var sp=class{url;remaining;constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new se([],{}):new se([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(t.length>0||Object.keys(n).length>0)&&(r[K]=new se(t,n)),r}parseSegment(){let t=Qh(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new A(4009,!1);return this.capture(t),new Ir(cu(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let n=JO(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=Qh(this.remaining);i&&(r=i,this.capture(r))}t[cu(n)]=cu(r)}parseQueryParam(t){let n=ZO(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let o=XO(this.remaining);o&&(r=o,this.capture(r))}let i=fD(n),s=fD(r);if(t.hasOwnProperty(i)){let o=t[i];Array.isArray(o)||(o=[o],t[i]=o),o.push(s)}else t[i]=s}parseParens(t){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Qh(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new A(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):t&&(s=K);let o=this.parseChildren();n[s]=Object.keys(o).length===1?o[K]:new se([],o),this.consumeOptional("//")}return n}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new A(4011,!1)}};function TD(e){return e.segments.length>0?new se([],{[K]:e}):e}function _D(e){let t={};for(let[r,i]of Object.entries(e.children)){let s=_D(i);if(r===K&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))t[o]=a;else(s.segments.length>0||s.hasChildren())&&(t[r]=s)}let n=new se(e.segments,t);return eP(n)}function eP(e){if(e.numberOfChildren===1&&e.children[K]){let t=e.children[K];return new se(e.segments.concat(t.segments),t.children)}return e}function Js(e){return e instanceof Cn}function tP(e,t,n=null,r=null){let i=RD(e);return ND(i,t,n,r)}function RD(e){let t;function n(s){let o={};for(let c of s.children){let u=n(c);o[c.outlet]=u}let a=new se(s.url,o);return s===e&&(t=a),a}let r=n(e.root),i=TD(r);return t??i}function ND(e,t,n,r){let i=e;for(;i.parent;)i=i.parent;if(t.length===0)return Xh(i,i,i,n,r);let s=nP(t);if(s.toRoot())return Xh(i,i,new se([],{}),n,r);let o=rP(s,i,e),a=o.processChildren?qs(o.segmentGroup,o.index,s.commands):AD(o.segmentGroup,o.index,s.commands);return Xh(i,o.segmentGroup,a,n,r)}function uu(e){return typeof e=="object"&&e!=null&&!e.outlets&&!e.segmentPath}function Ys(e){return typeof e=="object"&&e!=null&&e.outlets}function Xh(e,t,n,r,i){let s={};r&&Object.entries(r).forEach(([c,u])=>{s[c]=Array.isArray(u)?u.map(l=>`${l}`):`${u}`});let o;e===t?o=n:o=MD(e,t,n);let a=TD(_D(o));return new Cn(a,s,i)}function MD(e,t,n){let r={};return Object.entries(e.children).forEach(([i,s])=>{s===t?r[i]=n:r[i]=MD(s,t,n)}),new se(e.segments,r)}var lu=class{isAbsolute;numberOfDoubleDots;commands;constructor(t,n,r){if(this.isAbsolute=t,this.numberOfDoubleDots=n,this.commands=r,t&&r.length>0&&uu(r[0]))throw new A(4003,!1);let i=r.find(Ys);if(i&&i!==bD(r))throw new A(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function nP(e){if(typeof e[0]=="string"&&e.length===1&&e[0]==="/")return new lu(!0,0,e);let t=0,n=!1,r=e.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,u])=>{a[c]=typeof u=="string"?u.split("/"):u}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?t++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new lu(n,t,r)}var Ti=class{segmentGroup;processChildren;index;constructor(t,n,r){this.segmentGroup=t,this.processChildren=n,this.index=r}};function rP(e,t,n){if(e.isAbsolute)return new Ti(t,!0,0);if(!n)return new Ti(t,!1,NaN);if(n.parent===null)return new Ti(n,!0,0);let r=uu(e.commands[0])?0:1,i=n.segments.length-1+r;return iP(n,i,e.numberOfDoubleDots)}function iP(e,t,n){let r=e,i=t,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new A(4005,!1);i=r.segments.length}return new Ti(r,!1,i-s)}function sP(e){return Ys(e[0])?e[0].outlets:{[K]:e}}function AD(e,t,n){if(e??=new se([],{}),e.segments.length===0&&e.hasChildren())return qs(e,t,n);let r=oP(e,t,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){let s=new se(e.segments.slice(0,r.pathIndex),{});return s.children[K]=new se(e.segments.slice(r.pathIndex),e.children),qs(s,0,i)}else return r.match&&i.length===0?new se(e.segments,{}):r.match&&!e.hasChildren()?op(e,t,n):r.match?qs(e,0,i):op(e,t,n)}function qs(e,t,n){if(n.length===0)return new se(e.segments,{});{let r=sP(n),i={};if(Object.keys(r).some(s=>s!==K)&&e.children[K]&&e.numberOfChildren===1&&e.children[K].segments.length===0){let s=qs(e.children[K],t,n);return new se(e.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=AD(e.children[s],t,o))}),Object.entries(e.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new se(e.segments,i)}}function oP(e,t,n){let r=0,i=t,s={match:!1,pathIndex:0,commandIndex:0};for(;i<e.segments.length;){if(r>=n.length)return s;let o=e.segments[i],a=n[r];if(Ys(a))break;let c=`${a}`,u=r<n.length-1?n[r+1]:null;if(i>0&&c===void 0)break;if(c&&u&&typeof u=="object"&&u.outlets===void 0){if(!pD(c,u,o))return s;r+=2}else{if(!pD(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function op(e,t,n){let r=e.segments.slice(0,t),i=0;for(;i<n.length;){let s=n[i];if(Ys(s)){let c=aP(s.outlets);return new se(r,c)}if(i===0&&uu(n[0])){let c=e.segments[t];r.push(new Ir(c.path,hD(n[0]))),i++;continue}let o=Ys(s)?s.outlets[K]:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&uu(a)?(r.push(new Ir(o,hD(a))),i+=2):(r.push(new Ir(o,{})),i++)}return new se(r,{})}function aP(e){let t={};return Object.entries(e).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(t[n]=op(new se([],{}),0,r))}),t}function hD(e){let t={};return Object.entries(e).forEach(([n,r])=>t[n]=`${r}`),t}function pD(e,t,n){return e==n.path&&Xt(t,n.parameters)}var Gs="imperative",Fe=function(e){return e[e.NavigationStart=0]="NavigationStart",e[e.NavigationEnd=1]="NavigationEnd",e[e.NavigationCancel=2]="NavigationCancel",e[e.NavigationError=3]="NavigationError",e[e.RoutesRecognized=4]="RoutesRecognized",e[e.ResolveStart=5]="ResolveStart",e[e.ResolveEnd=6]="ResolveEnd",e[e.GuardsCheckStart=7]="GuardsCheckStart",e[e.GuardsCheckEnd=8]="GuardsCheckEnd",e[e.RouteConfigLoadStart=9]="RouteConfigLoadStart",e[e.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",e[e.ChildActivationStart=11]="ChildActivationStart",e[e.ChildActivationEnd=12]="ChildActivationEnd",e[e.ActivationStart=13]="ActivationStart",e[e.ActivationEnd=14]="ActivationEnd",e[e.Scroll=15]="Scroll",e[e.NavigationSkipped=16]="NavigationSkipped",e}(Fe||{}),It=class{id;url;constructor(t,n){this.id=t,this.url=n}},Zs=class extends It{type=Fe.NavigationStart;navigationTrigger;restoredState;constructor(t,n,r="imperative",i=null){super(t,n),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},_r=class extends It{urlAfterRedirects;type=Fe.NavigationEnd;constructor(t,n,r){super(t,n),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},dt=function(e){return e[e.Redirect=0]="Redirect",e[e.SupersededByNewNavigation=1]="SupersededByNewNavigation",e[e.NoDataFromResolver=2]="NoDataFromResolver",e[e.GuardRejected=3]="GuardRejected",e}(dt||{}),ap=function(e){return e[e.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",e[e.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",e}(ap||{}),En=class extends It{reason;code;type=Fe.NavigationCancel;constructor(t,n,r,i){super(t,n),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Rr=class extends It{reason;code;type=Fe.NavigationSkipped;constructor(t,n,r,i){super(t,n),this.reason=r,this.code=i}},Qs=class extends It{error;target;type=Fe.NavigationError;constructor(t,n,r,i){super(t,n),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},du=class extends It{urlAfterRedirects;state;type=Fe.RoutesRecognized;constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},cp=class extends It{urlAfterRedirects;state;type=Fe.GuardsCheckStart;constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},up=class extends It{urlAfterRedirects;state;shouldActivate;type=Fe.GuardsCheckEnd;constructor(t,n,r,i,s){super(t,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},lp=class extends It{urlAfterRedirects;state;type=Fe.ResolveStart;constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},dp=class extends It{urlAfterRedirects;state;type=Fe.ResolveEnd;constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},fp=class{route;type=Fe.RouteConfigLoadStart;constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},hp=class{route;type=Fe.RouteConfigLoadEnd;constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},pp=class{snapshot;type=Fe.ChildActivationStart;constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},mp=class{snapshot;type=Fe.ChildActivationEnd;constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},gp=class{snapshot;type=Fe.ActivationStart;constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},yp=class{snapshot;type=Fe.ActivationEnd;constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Xs=class{},Mi=class{url;navigationBehaviorOptions;constructor(t,n){this.url=t,this.navigationBehaviorOptions=n}};function cP(e,t){return e.providers&&!e._injector&&(e._injector=Uc(e.providers,t,`Route: ${e.path}`)),e._injector??t}function Pt(e){return e.outlet||K}function uP(e,t){let n=e.filter(r=>Pt(r)===t);return n.push(...e.filter(r=>Pt(r)!==t)),n}function so(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let t=e.parent;t;t=t.parent){let n=t.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var vp=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return so(this.route?.snapshot)??this.rootInjector}constructor(t){this.rootInjector=t,this.children=new vu(this.rootInjector)}},vu=(()=>{class e{rootInjector;contexts=new Map;constructor(n){this.rootInjector=n}onChildOutletCreated(n,r){let i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new vp(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static \u0275fac=function(r){return new(r||e)(Q(it))};static \u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),fu=class{_root;constructor(t){this._root=t}get root(){return this._root.value}parent(t){let n=this.pathFromRoot(t);return n.length>1?n[n.length-2]:null}children(t){let n=bp(t,this._root);return n?n.children.map(r=>r.value):[]}firstChild(t){let n=bp(t,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(t){let n=Ep(t,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==t)}pathFromRoot(t){return Ep(t,this._root).map(n=>n.value)}};function bp(e,t){if(e===t.value)return t;for(let n of t.children){let r=bp(e,n);if(r)return r}return null}function Ep(e,t){if(e===t.value)return[t];for(let n of t.children){let r=Ep(e,n);if(r.length)return r.unshift(t),r}return[]}var lt=class{value;children;constructor(t,n){this.value=t,this.children=n}toString(){return`TreeNode(${this.value})`}};function Ii(e){let t={};return e&&e.children.forEach(n=>t[n.value.outlet]=n),t}var hu=class extends fu{snapshot;constructor(t,n){super(t),this.snapshot=n,Mp(this,t)}toString(){return this.snapshot.toString()}};function xD(e){let t=lP(e),n=new M([new Ir("",{})]),r=new M({}),i=new M({}),s=new M({}),o=new M(""),a=new Ai(n,r,s,o,i,K,e,t.root);return a.snapshot=t.root,new hu(new lt(a,[]),t)}function lP(e){let t={},n={},r={},i="",s=new _i([],t,r,i,n,K,e,null,{});return new mu("",new lt(s,[]))}var Ai=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(t,n,r,i,s,o,a,c){this.urlSubject=t,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(P(u=>u[io]))??$(void 0),this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(P(t=>Ni(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(P(t=>Ni(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function pu(e,t,n="emptyOnly"){let r,{routeConfig:i}=e;return t!==null&&(n==="always"||i?.path===""||!t.component&&!t.routeConfig?.loadComponent)?r={params:E(E({},t.params),e.params),data:E(E({},t.data),e.data),resolve:E(E(E(E({},e.data),t.data),i?.data),e._resolvedData)}:r={params:E({},e.params),data:E({},e.data),resolve:E(E({},e.data),e._resolvedData??{})},i&&OD(i)&&(r.resolve[io]=i.title),r}var _i=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[io]}constructor(t,n,r,i,s,o,a,c,u){this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Ni(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Ni(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${n}')`}},mu=class extends fu{url;constructor(t,n){super(n),this.url=t,Mp(this,n)}toString(){return kD(this._root)}};function Mp(e,t){t.value._routerState=e,t.children.forEach(n=>Mp(e,n))}function kD(e){let t=e.children.length>0?` { ${e.children.map(kD).join(", ")} } `:"";return`${e.value}${t}`}function ep(e){if(e.snapshot){let t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,Xt(t.queryParams,n.queryParams)||e.queryParamsSubject.next(n.queryParams),t.fragment!==n.fragment&&e.fragmentSubject.next(n.fragment),Xt(t.params,n.params)||e.paramsSubject.next(n.params),FO(t.url,n.url)||e.urlSubject.next(n.url),Xt(t.data,n.data)||e.dataSubject.next(n.data)}else e.snapshot=e._futureSnapshot,e.dataSubject.next(e._futureSnapshot.data)}function Cp(e,t){let n=Xt(e.params,t.params)&&BO(e.url,t.url),r=!e.parent!=!t.parent;return n&&!r&&(!e.parent||Cp(e.parent,t.parent))}function OD(e){return typeof e.title=="string"||e.title===null}var dP=new O(""),Ap=(()=>{class e{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=K;activateEvents=new nt;deactivateEvents=new nt;attachEvents=new nt;detachEvents=new nt;routerOutletData=GC(void 0);parentContexts=D(vu);location=D(Hn);changeDetector=D(Ps);inputBinder=D(xp,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new A(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new A(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new A(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new A(4013,!1);this._activatedRoute=n;let i=this.location,o=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new Sp(n,a,i.injector,this.routerOutletData);this.activated=i.createComponent(o,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||e)};static \u0275dir=Ms({type:e,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[zf]})}return e})(),Sp=class e{route;childContexts;parent;outletData;__ngOutletInjector(t){return new e(this.route,this.childContexts,t,this.outletData)}constructor(t,n,r,i){this.route=t,this.childContexts=n,this.parent=r,this.outletData=i}get(t,n){return t===Ai?this.route:t===vu?this.childContexts:t===dP?this.outletData:this.parent.get(t,n)}},xp=new O("");function fP(e,t,n){let r=eo(e,t._root,n?n._root:void 0);return new hu(r,t)}function eo(e,t,n){if(n&&e.shouldReuseRoute(t.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=t.value;let i=hP(e,t,n);return new lt(r,i)}else{if(e.shouldAttach(t.value)){let s=e.retrieve(t.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=t.value,o.children=t.children.map(a=>eo(e,a)),o}}let r=pP(t.value),i=t.children.map(s=>eo(e,s));return new lt(r,i)}}function hP(e,t,n){return t.children.map(r=>{for(let i of n.children)if(e.shouldReuseRoute(r.value,i.value.snapshot))return eo(e,r,i);return eo(e,r)})}function pP(e){return new Ai(new M(e.url),new M(e.params),new M(e.queryParams),new M(e.fragment),new M(e.data),e.outlet,e.component,e)}var to=class{redirectTo;navigationBehaviorOptions;constructor(t,n){this.redirectTo=t,this.navigationBehaviorOptions=n}},PD="ngNavigationCancelingError";function gu(e,t){let{redirectTo:n,navigationBehaviorOptions:r}=Js(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,i=LD(!1,dt.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function LD(e,t){let n=new Error(`NavigationCancelingError: ${e||""}`);return n[PD]=!0,n.cancellationCode=t,n}function mP(e){return FD(e)&&Js(e.url)}function FD(e){return!!e&&e[PD]}var gP=(e,t,n,r)=>P(i=>(new wp(t,i.targetRouterState,i.currentRouterState,n,r).activate(e),i)),wp=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(t,n,r,i,s){this.routeReuseStrategy=t,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(t){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,t),ep(this.futureState.root),this.activateChildRoutes(n,r,t)}deactivateChildRoutes(t,n,r){let i=Ii(n);t.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(t,n,r){let i=t.value,s=n?n.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(t,n,o.children)}else this.deactivateChildRoutes(t,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(t,n){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,n):this.deactivateRouteAndOutlet(t,n)}detachAndStoreRouteSubtree(t,n){let r=n.getContext(t.value.outlet),i=r&&t.value.component?r.children:n,s=Ii(t);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:o,route:t,contexts:a})}}deactivateRouteAndOutlet(t,n){let r=n.getContext(t.value.outlet),i=r&&t.value.component?r.children:n,s=Ii(t);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(t,n,r){let i=Ii(n);t.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new yp(s.value.snapshot))}),t.children.length&&this.forwardEvent(new mp(t.value.snapshot))}activateRoutes(t,n,r){let i=t.value,s=n?n.value:null;if(ep(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(t,n,o.children)}else this.activateChildRoutes(t,n,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),ep(a.route.value),this.activateChildRoutes(t,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(t,null,o.children)}else this.activateChildRoutes(t,null,r)}},yu=class{path;route;constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},Ri=class{component;route;constructor(t,n){this.component=t,this.route=n}};function yP(e,t,n){let r=e._root,i=t?t._root:null;return Hs(r,i,n,[r.value])}function vP(e){let t=e.routeConfig?e.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:e,guards:t}}function ki(e,t){let n=Symbol(),r=t.get(e,n);return r===n?typeof e=="function"&&!qE(e)?e:t.get(e):r}function Hs(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=Ii(t);return e.children.forEach(o=>{bP(o,s[o.value.outlet],n,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Ws(a,n.getContext(o),i)),i}function bP(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=e.value,o=t?t.value:null,a=n?n.getContext(e.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=EP(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new yu(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?Hs(e,t,a?a.children:null,r,i):Hs(e,t,n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Ri(a.outlet.component,o))}else o&&Ws(t,a,i),i.canActivateChecks.push(new yu(r)),s.component?Hs(e,null,a?a.children:null,r,i):Hs(e,null,n,r,i);return i}function EP(e,t,n){if(typeof n=="function")return n(e,t);switch(n){case"pathParamsChange":return!Tr(e.url,t.url);case"pathParamsOrQueryParamsChange":return!Tr(e.url,t.url)||!Xt(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Cp(e,t)||!Xt(e.queryParams,t.queryParams);case"paramsChange":default:return!Cp(e,t)}}function Ws(e,t,n){let r=Ii(e),i=e.value;Object.entries(r).forEach(([s,o])=>{i.component?t?Ws(o,t.children.getContext(s),n):Ws(o,null,n):Ws(o,t,n)}),i.component?t&&t.outlet&&t.outlet.isActivated?n.canDeactivateChecks.push(new Ri(t.outlet.component,i)):n.canDeactivateChecks.push(new Ri(null,i)):n.canDeactivateChecks.push(new Ri(null,i))}function oo(e){return typeof e=="function"}function CP(e){return typeof e=="boolean"}function SP(e){return e&&oo(e.canLoad)}function wP(e){return e&&oo(e.canActivate)}function DP(e){return e&&oo(e.canActivateChild)}function IP(e){return e&&oo(e.canDeactivate)}function TP(e){return e&&oo(e.canMatch)}function jD(e){return e instanceof un||e?.name==="EmptyError"}var su=Symbol("INITIAL_VALUE");function xi(){return vt(e=>gt(e.map(t=>t.pipe(ln(1),dn(su)))).pipe(P(t=>{for(let n of t)if(n!==!0){if(n===su)return su;if(n===!1||_P(n))return n}return!0}),yt(t=>t!==su),ln(1)))}function _P(e){return Js(e)||e instanceof to}function RP(e,t){return Ee(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return o.length===0&&s.length===0?$(R(E({},n),{guardsResult:!0})):NP(o,r,i,e).pipe(Ee(a=>a&&CP(a)?MP(r,s,e,t):$(a)),P(a=>R(E({},n),{guardsResult:a})))})}function NP(e,t,n,r){return me(e).pipe(Ee(i=>PP(i.component,i.route,n,t,r)),Rt(i=>i!==!0,!0))}function MP(e,t,n,r){return me(t).pipe(Xe(i=>Xr(xP(i.route.parent,r),AP(i.route,r),OP(e,i.path,n),kP(e,i.route,n))),Rt(i=>i!==!0,!0))}function AP(e,t){return e!==null&&t&&t(new gp(e)),$(!0)}function xP(e,t){return e!==null&&t&&t(new pp(e)),$(!0)}function kP(e,t,n){let r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||r.length===0)return $(!0);let i=r.map(s=>wa(()=>{let o=so(t)??n,a=ki(s,o),c=wP(a)?a.canActivate(t,e):St(o,()=>a(t,e));return Gn(c).pipe(Rt())}));return $(i).pipe(xi())}function OP(e,t,n){let r=t[t.length-1],s=t.slice(0,t.length-1).reverse().map(o=>vP(o)).filter(o=>o!==null).map(o=>wa(()=>{let a=o.guards.map(c=>{let u=so(o.node)??n,l=ki(c,u),d=DP(l)?l.canActivateChild(r,e):St(u,()=>l(r,e));return Gn(d).pipe(Rt())});return $(a).pipe(xi())}));return $(s).pipe(xi())}function PP(e,t,n,r,i){let s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!s||s.length===0)return $(!0);let o=s.map(a=>{let c=so(t)??i,u=ki(a,c),l=IP(u)?u.canDeactivate(e,t,n,r):St(c,()=>u(e,t,n,r));return Gn(l).pipe(Rt())});return $(o).pipe(xi())}function LP(e,t,n,r){let i=t.canLoad;if(i===void 0||i.length===0)return $(!0);let s=i.map(o=>{let a=ki(o,e),c=SP(a)?a.canLoad(t,n):St(e,()=>a(t,n));return Gn(c)});return $(s).pipe(xi(),UD(r))}function UD(e){return ad(Ne(t=>{if(typeof t!="boolean")throw gu(e,t)}),P(t=>t===!0))}function FP(e,t,n,r){let i=t.canMatch;if(!i||i.length===0)return $(!0);let s=i.map(o=>{let a=ki(o,e),c=TP(a)?a.canMatch(t,n):St(e,()=>a(t,n));return Gn(c)});return $(s).pipe(xi(),UD(r))}var no=class{segmentGroup;constructor(t){this.segmentGroup=t||null}},ro=class extends Error{urlTree;constructor(t){super(),this.urlTree=t}};function Di(e){return Zr(new no(e))}function jP(e){return Zr(new A(4e3,!1))}function UP(e){return Zr(LD(!1,dt.GuardRejected))}var Dp=class{urlSerializer;urlTree;constructor(t,n){this.urlSerializer=t,this.urlTree=n}lineralizeSegments(t,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return $(r);if(i.numberOfChildren>1||!i.children[K])return jP(`${t.redirectTo}`);i=i.children[K]}}applyRedirectCommands(t,n,r,i,s){if(typeof n!="string"){let a=n,{queryParams:c,fragment:u,routeConfig:l,url:d,outlet:f,params:h,data:p,title:m}=i,y=St(s,()=>a({params:h,data:p,queryParams:c,fragment:u,routeConfig:l,url:d,outlet:f,title:m}));if(y instanceof Cn)throw new ro(y);n=y}let o=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),t,r);if(n[0]==="/")throw new ro(o);return o}applyRedirectCreateUrlTree(t,n,r,i){let s=this.createSegmentGroup(t,n.root,r,i);return new Cn(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(t,n){let r={};return Object.entries(t).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);r[i]=n[a]}else r[i]=s}),r}createSegmentGroup(t,n,r,i){let s=this.createSegments(t,n.segments,r,i),o={};return Object.entries(n.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(t,c,r,i)}),new se(s,o)}createSegments(t,n,r,i){return n.map(s=>s.path[0]===":"?this.findPosParam(t,s,i):this.findOrReturn(s,r))}findPosParam(t,n,r){let i=r[n.path.substring(1)];if(!i)throw new A(4001,!1);return i}findOrReturn(t,n){let r=0;for(let i of n){if(i.path===t.path)return n.splice(r),i;r++}return t}},Ip={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function VP(e,t,n,r,i){let s=VD(e,t,n);return s.matched?(r=cP(t,r),FP(r,t,n,i).pipe(P(o=>o===!0?s:E({},Ip)))):$(s)}function VD(e,t,n){if(t.path==="**")return BP(n);if(t.path==="")return t.pathMatch==="full"&&(e.hasChildren()||n.length>0)?E({},Ip):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(t.matcher||LO)(n,e,t);if(!i)return E({},Ip);let s={};Object.entries(i.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=i.consumed.length>0?E(E({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function BP(e){return{matched:!0,parameters:e.length>0?bD(e).parameters:{},consumedSegments:e,remainingSegments:[],positionalParamSegments:{}}}function mD(e,t,n,r){return n.length>0&&zP(e,n,r)?{segmentGroup:new se(t,HP(r,new se(n,e.children))),slicedSegments:[]}:n.length===0&&qP(e,n,r)?{segmentGroup:new se(e.segments,$P(e,n,r,e.children)),slicedSegments:n}:{segmentGroup:new se(e.segments,e.children),slicedSegments:n}}function $P(e,t,n,r){let i={};for(let s of n)if(bu(e,t,s)&&!r[Pt(s)]){let o=new se([],{});i[Pt(s)]=o}return E(E({},r),i)}function HP(e,t){let n={};n[K]=t;for(let r of e)if(r.path===""&&Pt(r)!==K){let i=new se([],{});n[Pt(r)]=i}return n}function zP(e,t,n){return n.some(r=>bu(e,t,r)&&Pt(r)!==K)}function qP(e,t,n){return n.some(r=>bu(e,t,r))}function bu(e,t,n){return(e.hasChildren()||t.length>0)&&n.pathMatch==="full"?!1:n.path===""}function GP(e,t,n){return t.length===0&&!e.children[n]}var Tp=class{};function WP(e,t,n,r,i,s,o="emptyOnly"){return new _p(e,t,n,r,i,o,s).recognize()}var KP=31,_p=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(t,n,r,i,s,o,a){this.injector=t,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new Dp(this.urlSerializer,this.urlTree)}noMatchError(t){return new A(4002,`'${t.segmentGroup}'`)}recognize(){let t=mD(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(P(({children:n,rootSnapshot:r})=>{let i=new lt(r,n),s=new mu("",i),o=tP(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(t){let n=new _i([],Object.freeze({}),Object.freeze(E({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),K,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,t,K,n).pipe(P(r=>({children:r,rootSnapshot:n})),Nn(r=>{if(r instanceof ro)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof no?this.noMatchError(r):r}))}processSegmentGroup(t,n,r,i,s){return r.segments.length===0&&r.hasChildren()?this.processChildren(t,n,r,s):this.processSegment(t,n,r,r.segments,i,!0,s).pipe(P(o=>o instanceof lt?[o]:[]))}processChildren(t,n,r,i){let s=[];for(let o of Object.keys(r.children))o==="primary"?s.unshift(o):s.push(o);return me(s).pipe(Xe(o=>{let a=r.children[o],c=uP(n,o);return this.processSegmentGroup(t,c,a,o,i)}),yd((o,a)=>(o.push(...a),o)),Mn(null),md(),Ee(o=>{if(o===null)return Di(r);let a=BD(o);return JP(a),$(a)}))}processSegment(t,n,r,i,s,o,a){return me(n).pipe(Xe(c=>this.processSegmentAgainstRoute(c._injector??t,n,c,r,i,s,o,a).pipe(Nn(u=>{if(u instanceof no)return $(null);throw u}))),Rt(c=>!!c),Nn(c=>{if(jD(c))return GP(r,i,s)?$(new Tp):Di(r);throw c}))}processSegmentAgainstRoute(t,n,r,i,s,o,a,c){return Pt(r)!==o&&(o===K||!bu(i,s,r))?Di(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(t,i,r,s,o,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(t,i,n,r,s,o,c):Di(i)}expandSegmentAgainstRouteUsingRedirect(t,n,r,i,s,o,a){let{matched:c,parameters:u,consumedSegments:l,positionalParamSegments:d,remainingSegments:f}=VD(n,i,s);if(!c)return Di(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>KP&&(this.allowRedirects=!1));let h=new _i(s,u,Object.freeze(E({},this.urlTree.queryParams)),this.urlTree.fragment,gD(i),Pt(i),i.component??i._loadedComponent??null,i,yD(i)),p=pu(h,a,this.paramsInheritanceStrategy);h.params=Object.freeze(p.params),h.data=Object.freeze(p.data);let m=this.applyRedirects.applyRedirectCommands(l,i.redirectTo,d,h,t);return this.applyRedirects.lineralizeSegments(i,m).pipe(Ee(y=>this.processSegment(t,r,n,y.concat(f),o,!1,a)))}matchSegmentAgainstRoute(t,n,r,i,s,o){let a=VP(n,r,i,t,this.urlSerializer);return r.path==="**"&&(n.children={}),a.pipe(vt(c=>c.matched?(t=r._injector??t,this.getChildConfig(t,r,i).pipe(vt(({routes:u})=>{let l=r._loadedInjector??t,{parameters:d,consumedSegments:f,remainingSegments:h}=c,p=new _i(f,d,Object.freeze(E({},this.urlTree.queryParams)),this.urlTree.fragment,gD(r),Pt(r),r.component??r._loadedComponent??null,r,yD(r)),m=pu(p,o,this.paramsInheritanceStrategy);p.params=Object.freeze(m.params),p.data=Object.freeze(m.data);let{segmentGroup:y,slicedSegments:v}=mD(n,f,h,u);if(v.length===0&&y.hasChildren())return this.processChildren(l,u,y,p).pipe(P(_=>new lt(p,_)));if(u.length===0&&v.length===0)return $(new lt(p,[]));let S=Pt(r)===s;return this.processSegment(l,u,y,v,S?K:s,!0,p).pipe(P(_=>new lt(p,_ instanceof lt?[_]:[])))}))):Di(n)))}getChildConfig(t,n,r){return n.children?$({routes:n.children,injector:t}):n.loadChildren?n._loadedRoutes!==void 0?$({routes:n._loadedRoutes,injector:n._loadedInjector}):LP(t,n,r,this.urlSerializer).pipe(Ee(i=>i?this.configLoader.loadChildren(t,n).pipe(Ne(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):UP(n))):$({routes:[],injector:t})}};function JP(e){e.sort((t,n)=>t.value.outlet===K?-1:n.value.outlet===K?1:t.value.outlet.localeCompare(n.value.outlet))}function YP(e){let t=e.value.routeConfig;return t&&t.path===""}function BD(e){let t=[],n=new Set;for(let r of e){if(!YP(r)){t.push(r);continue}let i=t.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):t.push(r)}for(let r of n){let i=BD(r.children);t.push(new lt(r.value,i))}return t.filter(r=>!n.has(r))}function gD(e){return e.data||{}}function yD(e){return e.resolve||{}}function ZP(e,t,n,r,i,s){return Ee(o=>WP(e,t,n,r,o.extractedUrl,i,s).pipe(P(({state:a,tree:c})=>R(E({},o),{targetSnapshot:a,urlAfterRedirects:c}))))}function QP(e,t){return Ee(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return $(n);let s=new Set(i.map(c=>c.route)),o=new Set;for(let c of s)if(!o.has(c))for(let u of $D(c))o.add(u);let a=0;return me(o).pipe(Xe(c=>s.has(c)?XP(c,r,e,t):(c.data=pu(c,c.parent,e).resolve,$(void 0))),Ne(()=>a++),ni(1),Ee(c=>a===o.size?$(n):$e))})}function $D(e){let t=e.children.map(n=>$D(n)).flat();return[e,...t]}function XP(e,t,n,r){let i=e.routeConfig,s=e._resolve;return i?.title!==void 0&&!OD(i)&&(s[io]=i.title),eL(s,e,t,r).pipe(P(o=>(e._resolvedData=o,e.data=pu(e,e.parent,n).resolve,null)))}function eL(e,t,n,r){let i=rp(e);if(i.length===0)return $({});let s={};return me(i).pipe(Ee(o=>tL(e[o],t,n,r).pipe(Rt(),Ne(a=>{if(a instanceof to)throw gu(new Ks,a);s[o]=a}))),ni(1),pd(s),Nn(o=>jD(o)?$e:Zr(o)))}function tL(e,t,n,r){let i=so(t)??r,s=ki(e,i),o=s.resolve?s.resolve(t,n):St(i,()=>s(t,n));return Gn(o)}function tp(e){return vt(t=>{let n=e(t);return n?me(n).pipe(P(()=>t)):$(t)})}var HD=(()=>{class e{buildTitle(n){let r,i=n.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===K);return r}getResolvedTitleForRoute(n){return n.data[io]}static \u0275fac=function(r){return new(r||e)};static \u0275prov=j({token:e,factory:()=>D(nL),providedIn:"root"})}return e})(),nL=(()=>{class e extends HD{title;constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||e)(Q(cD))};static \u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),kp=new O("",{providedIn:"root",factory:()=>({})}),rL=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275cmp=$n({type:e,selectors:[["ng-component"]],decls:1,vars:0,template:function(r,i){r&1&&Dt(0,"router-outlet")},dependencies:[Ap],encapsulation:2})}return e})();function Op(e){let t=e.children&&e.children.map(Op),n=t?R(E({},e),{children:t}):E({},e);return!n.component&&!n.loadComponent&&(t||n.loadChildren)&&n.outlet&&n.outlet!==K&&(n.component=rL),n}var Pp=new O(""),iL=(()=>{class e{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=D(Fh);loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return $(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);let r=Gn(n.loadComponent()).pipe(P(zD),Ne(s=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=s}),ti(()=>{this.componentLoaders.delete(n)})),i=new Kr(r,()=>new be).pipe(Wr());return this.componentLoaders.set(n,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return $({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let s=sL(r,this.compiler,n,this.onLoadEndListener).pipe(ti(()=>{this.childrenLoaders.delete(r)})),o=new Kr(s,()=>new be).pipe(Wr());return this.childrenLoaders.set(r,o),o}static \u0275fac=function(r){return new(r||e)};static \u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function sL(e,t,n,r){return Gn(e.loadChildren()).pipe(P(zD),Ee(i=>i instanceof Cs||Array.isArray(i)?$(i):me(t.compileModuleAsync(i))),P(i=>{r&&r(e);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(n).injector,o=s.get(Pp,[],{optional:!0,self:!0}).flat()),{routes:o.map(Op),injector:s}}))}function oL(e){return e&&typeof e=="object"&&"default"in e}function zD(e){return oL(e)?e.default:e}var Lp=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275prov=j({token:e,factory:()=>D(aL),providedIn:"root"})}return e})(),aL=(()=>{class e{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static \u0275fac=function(r){return new(r||e)};static \u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),cL=new O("");var uL=new O(""),lL=(()=>{class e{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new be;transitionAbortSubject=new be;configLoader=D(iL);environmentInjector=D(it);urlSerializer=D(Np);rootContexts=D(vu);location=D(Ls);inputBindingEnabled=D(xp,{optional:!0})!==null;titleStrategy=D(HD);options=D(kp,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=D(Lp);createViewTransition=D(cL,{optional:!0});navigationErrorHandler=D(uL,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>$(void 0);rootComponentType=null;constructor(){let n=i=>this.events.next(new fp(i)),r=i=>this.events.next(new hp(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;this.transitions?.next(R(E(E({},this.transitions.value),n),{id:r}))}setupNavigations(n,r,i){return this.transitions=new M({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Gs,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(yt(s=>s.id!==0),P(s=>R(E({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),vt(s=>{let o=!1,a=!1;return $(s).pipe(vt(c=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",dt.SupersededByNewNavigation),$e;this.currentTransition=s,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,targetBrowserUrl:typeof c.extras.browserUrl=="string"?this.urlSerializer.parse(c.extras.browserUrl):c.extras.browserUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?R(E({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let u=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),l=c.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!u&&l!=="reload"){let d="";return this.events.next(new Rr(c.id,this.urlSerializer.serialize(c.rawUrl),d,ap.IgnoredSameUrlNavigation)),c.resolve(!1),$e}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return $(c).pipe(vt(d=>{let f=this.transitions?.getValue();return this.events.next(new Zs(d.id,this.urlSerializer.serialize(d.extractedUrl),d.source,d.restoredState)),f!==this.transitions?.getValue()?$e:Promise.resolve(d)}),ZP(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),Ne(d=>{s.targetSnapshot=d.targetSnapshot,s.urlAfterRedirects=d.urlAfterRedirects,this.currentNavigation=R(E({},this.currentNavigation),{finalUrl:d.urlAfterRedirects});let f=new du(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:d,extractedUrl:f,source:h,restoredState:p,extras:m}=c,y=new Zs(d,this.urlSerializer.serialize(f),h,p);this.events.next(y);let v=xD(this.rootComponentType).snapshot;return this.currentTransition=s=R(E({},c),{targetSnapshot:v,urlAfterRedirects:f,extras:R(E({},m),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=f,$(s)}else{let d="";return this.events.next(new Rr(c.id,this.urlSerializer.serialize(c.extractedUrl),d,ap.IgnoredByUrlHandlingStrategy)),c.resolve(!1),$e}}),Ne(c=>{let u=new cp(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}),P(c=>(this.currentTransition=s=R(E({},c),{guards:yP(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),s)),RP(this.environmentInjector,c=>this.events.next(c)),Ne(c=>{if(s.guardsResult=c.guardsResult,c.guardsResult&&typeof c.guardsResult!="boolean")throw gu(this.urlSerializer,c.guardsResult);let u=new up(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(u)}),yt(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",dt.GuardRejected),!1)),tp(c=>{if(c.guards.canActivateChecks.length)return $(c).pipe(Ne(u=>{let l=new lp(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}),vt(u=>{let l=!1;return $(u).pipe(QP(this.paramsInheritanceStrategy,this.environmentInjector),Ne({next:()=>l=!0,complete:()=>{l||this.cancelNavigationTransition(u,"",dt.NoDataFromResolver)}}))}),Ne(u=>{let l=new dp(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}))}),tp(c=>{let u=l=>{let d=[];l.routeConfig?.loadComponent&&!l.routeConfig._loadedComponent&&d.push(this.configLoader.loadComponent(l.routeConfig).pipe(Ne(f=>{l.component=f}),P(()=>{})));for(let f of l.children)d.push(...u(f));return d};return gt(u(c.targetSnapshot.root)).pipe(Mn(null),ln(1))}),tp(()=>this.afterPreactivation()),vt(()=>{let{currentSnapshot:c,targetSnapshot:u}=s,l=this.createViewTransition?.(this.environmentInjector,c.root,u.root);return l?me(l).pipe(P(()=>s)):$(s)}),P(c=>{let u=fP(n.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=s=R(E({},c),{targetRouterState:u}),this.currentNavigation.targetRouterState=u,s}),Ne(()=>{this.events.next(new Xs)}),gP(this.rootContexts,n.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),ln(1),Ne({next:c=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new _r(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{o=!0}}),bd(this.transitionAbortSubject.pipe(Ne(c=>{throw c}))),ti(()=>{!o&&!a&&this.cancelNavigationTransition(s,"",dt.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),Nn(c=>{if(a=!0,FD(c))this.events.next(new En(s.id,this.urlSerializer.serialize(s.extractedUrl),c.message,c.cancellationCode)),mP(c)?this.events.next(new Mi(c.url,c.navigationBehaviorOptions)):s.resolve(!1);else{let u=new Qs(s.id,this.urlSerializer.serialize(s.extractedUrl),c,s.targetSnapshot??void 0);try{let l=St(this.environmentInjector,()=>this.navigationErrorHandler?.(u));if(l instanceof to){let{message:d,cancellationCode:f}=gu(this.urlSerializer,l);this.events.next(new En(s.id,this.urlSerializer.serialize(s.extractedUrl),d,f)),this.events.next(new Mi(l.redirectTo,l.navigationBehaviorOptions))}else throw this.events.next(u),c}catch(l){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(l)}}return $e}))}))}cancelNavigationTransition(n,r,i){let s=new En(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(s),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return n.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||e)};static \u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function dL(e){return e!==Gs}var fL=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275prov=j({token:e,factory:()=>D(hL),providedIn:"root"})}return e})(),Rp=class{shouldDetach(t){return!1}store(t,n){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,n){return t.routeConfig===n.routeConfig}},hL=(()=>{class e extends Rp{static \u0275fac=(()=>{let n;return function(i){return(n||(n=nh(e)))(i||e)}})();static \u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),qD=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275prov=j({token:e,factory:()=>D(pL),providedIn:"root"})}return e})(),pL=(()=>{class e extends qD{location=D(Ls);urlSerializer=D(Np);options=D(kp,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";urlHandlingStrategy=D(Lp);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Cn;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}routerState=xD(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&n(r.url,r.state)})}handleRouterEvent(n,r){if(n instanceof Zs)this.stateMemento=this.createStateMemento();else if(n instanceof Rr)this.rawUrlTree=r.initialUrl;else if(n instanceof du){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else n instanceof Xs?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):n instanceof En&&(n.code===dt.GuardRejected||n.code===dt.NoDataFromResolver)?this.restoreHistory(r):n instanceof Qs?this.restoreHistory(r,!0):n instanceof _r&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,r){let i=n instanceof Cn?this.urlSerializer.serialize(n):n;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let s=this.browserPageId,o=E(E({},r.extras.state),this.generateNgRouterState(r.id,s));this.location.replaceState(i,"",o)}else{let s=E(E({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",s)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,s=this.currentPageId-i;s!==0?this.location.historyGo(s):this.currentUrlTree===n.finalUrl&&s===0&&(this.resetState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static \u0275fac=(()=>{let n;return function(i){return(n||(n=nh(e)))(i||e)}})();static \u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),zs=function(e){return e[e.COMPLETE=0]="COMPLETE",e[e.FAILED=1]="FAILED",e[e.REDIRECTING=2]="REDIRECTING",e}(zs||{});function mL(e,t){e.events.pipe(yt(n=>n instanceof _r||n instanceof En||n instanceof Qs||n instanceof Rr),P(n=>n instanceof _r||n instanceof Rr?zs.COMPLETE:(n instanceof En?n.code===dt.Redirect||n.code===dt.SupersededByNewNavigation:!1)?zs.REDIRECTING:zs.FAILED),yt(n=>n!==zs.REDIRECTING),ln(1)).subscribe(()=>{t()})}var gL={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},yL={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},GD=(()=>{class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=D(Bc);stateManager=D(qD);options=D(kp,{optional:!0})||{};pendingTasks=D(Bn);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=D(lL);urlSerializer=D(Np);location=D(Ls);urlHandlingStrategy=D(Lp);_events=new be;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=D(fL);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=D(Pp,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!D(xp,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}eventsSubscription=new ve;subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(i!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof En&&r.code!==dt.Redirect&&r.code!==dt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof _r)this.navigated=!0;else if(r instanceof Mi){let o=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=E({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||dL(i.source)},o);this.scheduleNavigation(a,Gs,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}bL(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Gs,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(n,"popstate",r)},0)})}navigateToSyncWithBrowser(n,r,i){let s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){let c=E({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(s.state=c)}let a=this.parseUrl(n);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(Op),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:c}=r,u=c?this.currentUrlTree.fragment:o,l=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":l=E(E({},this.currentUrlTree.queryParams),s);break;case"preserve":l=this.currentUrlTree.queryParams;break;default:l=s||null}l!==null&&(l=this.removeEmptyProps(l));let d;try{let f=i?i.snapshot:this.routerState.snapshot.root;d=RD(f)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),d=this.currentUrlTree.root}return ND(d,n,l,u??null)}navigateByUrl(n,r={skipLocationChange:!1}){let i=Js(n)?n:this.parseUrl(n),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,Gs,null,r)}navigate(n,r={skipLocationChange:!1}){return vL(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.urlSerializer.parse("/")}}isActive(n,r){let i;if(r===!0?i=E({},gL):r===!1?i=E({},yL):i=r,Js(n))return dD(this.currentUrlTree,n,i);let s=this.parseUrl(n);return dD(this.currentUrlTree,s,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,s])=>(s!=null&&(r[i]=s),r),{})}scheduleNavigation(n,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,c,u;o?(a=o.resolve,c=o.reject,u=o.promise):u=new Promise((d,f)=>{a=d,c=f});let l=this.pendingTasks.add();return mL(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(l))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:s,resolve:a,reject:c,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(d=>Promise.reject(d))}static \u0275fac=function(r){return new(r||e)};static \u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function vL(e){for(let t=0;t<e.length;t++)if(e[t]==null)throw new A(4008,!1)}function bL(e){return!(e instanceof Xs)&&!(e instanceof Mi)}var EL=new O("");function WD(e,...t){return gr([{provide:Pp,multi:!0,useValue:e},[],{provide:Ai,useFactory:CL,deps:[GD]},{provide:Sr,multi:!0,useFactory:SL},t.map(n=>n.\u0275providers)])}function CL(e){return e.routerState.root}function SL(){let e=D(ot);return t=>{let n=e.get(We);if(t!==n.components[0])return;let r=e.get(GD),i=e.get(wL);e.get(DL)===1&&r.initialNavigation(),e.get(IL,null,J.Optional)?.setUpPreloading(),e.get(EL,null,J.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var wL=new O("",{factory:()=>new be}),DL=new O("",{providedIn:"root",factory:()=>1});var IL=new O("");var KD=[];var JD={providers:[ww({eventCoalescing:!0}),WD(KD),lD(uD())]};var ZD=!0,QD=!0;function ao(e,t,n){let r=e.match(t);return r&&r.length>=n&&parseInt(r[n],10)}function en(e,t,n){if(!e.RTCPeerConnection)return;let r=e.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(o,a){if(o!==t)return i.apply(this,arguments);let c=u=>{let l=n(u);l&&(a.handleEvent?a.handleEvent(l):a(l))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(a,c),i.apply(this,[o,c])};let s=r.removeEventListener;r.removeEventListener=function(o,a){if(o!==t||!this._eventMap||!this._eventMap[t])return s.apply(this,arguments);if(!this._eventMap[t].has(a))return s.apply(this,arguments);let c=this._eventMap[t].get(a);return this._eventMap[t].delete(a),this._eventMap[t].size===0&&delete this._eventMap[t],Object.keys(this._eventMap).length===0&&delete this._eventMap,s.apply(this,[o,c])},Object.defineProperty(r,"on"+t,{get(){return this["_on"+t]},set(o){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),o&&this.addEventListener(t,this["_on"+t]=o)},enumerable:!0,configurable:!0})}function XD(e){return typeof e!="boolean"?new Error("Argument type: "+typeof e+". Please use a boolean."):(ZD=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function eI(e){return typeof e!="boolean"?new Error("Argument type: "+typeof e+". Please use a boolean."):(QD=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function Eu(){if(typeof window=="object"){if(ZD)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function Oi(e,t){QD&&console.warn(e+" is deprecated, please use "+t+" instead.")}function tI(e){let t={browser:null,version:null};if(typeof e>"u"||!e.navigator||!e.navigator.userAgent)return t.browser="Not a browser.",t;let{navigator:n}=e;if(n.mozGetUserMedia)t.browser="firefox",t.version=ao(n.userAgent,/Firefox\/(\d+)\./,1);else if(n.webkitGetUserMedia||e.isSecureContext===!1&&e.webkitRTCPeerConnection)t.browser="chrome",t.version=ao(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(e.RTCPeerConnection&&n.userAgent.match(/AppleWebKit\/(\d+)\./))t.browser="safari",t.version=ao(n.userAgent,/AppleWebKit\/(\d+)\./,1),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype;else return t.browser="Not a supported browser.",t;return t}function YD(e){return Object.prototype.toString.call(e)==="[object Object]"}function jp(e){return YD(e)?Object.keys(e).reduce(function(t,n){let r=YD(e[n]),i=r?jp(e[n]):e[n],s=r&&!Object.keys(i).length;return i===void 0||s?t:Object.assign(t,{[n]:i})},{}):e}function Fp(e,t,n){!t||n.has(t.id)||(n.set(t.id,t),Object.keys(t).forEach(r=>{r.endsWith("Id")?Fp(e,e.get(t[r]),n):r.endsWith("Ids")&&t[r].forEach(i=>{Fp(e,e.get(i),n)})}))}function Up(e,t,n){let r=n?"outbound-rtp":"inbound-rtp",i=new Map;if(t===null)return i;let s=[];return e.forEach(o=>{o.type==="track"&&o.trackIdentifier===t.id&&s.push(o)}),s.forEach(o=>{e.forEach(a=>{a.type===r&&a.trackId===o.id&&Fp(e,a,i)})}),i}var wu={};ns(wu,{fixNegotiationNeeded:()=>Gp,shimAddTrackRemoveTrack:()=>qp,shimAddTrackRemoveTrackWithNative:()=>iI,shimGetDisplayMedia:()=>rI,shimGetSendersWithDtmf:()=>$p,shimGetStats:()=>Hp,shimGetUserMedia:()=>Cu,shimMediaStream:()=>Vp,shimOnTrack:()=>Bp,shimPeerConnection:()=>Su,shimSenderReceiverGetStats:()=>zp});var nI=Eu;function Cu(e,t){let n=e&&e.navigator;if(!n.mediaDevices)return;let r=function(a){if(typeof a!="object"||a.mandatory||a.optional)return a;let c={};return Object.keys(a).forEach(u=>{if(u==="require"||u==="advanced"||u==="mediaSource")return;let l=typeof a[u]=="object"?a[u]:{ideal:a[u]};l.exact!==void 0&&typeof l.exact=="number"&&(l.min=l.max=l.exact);let d=function(f,h){return f?f+h.charAt(0).toUpperCase()+h.slice(1):h==="deviceId"?"sourceId":h};if(l.ideal!==void 0){c.optional=c.optional||[];let f={};typeof l.ideal=="number"?(f[d("min",u)]=l.ideal,c.optional.push(f),f={},f[d("max",u)]=l.ideal,c.optional.push(f)):(f[d("",u)]=l.ideal,c.optional.push(f))}l.exact!==void 0&&typeof l.exact!="number"?(c.mandatory=c.mandatory||{},c.mandatory[d("",u)]=l.exact):["min","max"].forEach(f=>{l[f]!==void 0&&(c.mandatory=c.mandatory||{},c.mandatory[d(f,u)]=l[f])})}),a.advanced&&(c.optional=(c.optional||[]).concat(a.advanced)),c},i=function(a,c){if(t.version>=61)return c(a);if(a=JSON.parse(JSON.stringify(a)),a&&typeof a.audio=="object"){let u=function(l,d,f){d in l&&!(f in l)&&(l[f]=l[d],delete l[d])};a=JSON.parse(JSON.stringify(a)),u(a.audio,"autoGainControl","googAutoGainControl"),u(a.audio,"noiseSuppression","googNoiseSuppression"),a.audio=r(a.audio)}if(a&&typeof a.video=="object"){let u=a.video.facingMode;u=u&&(typeof u=="object"?u:{ideal:u});let l=t.version<66;if(u&&(u.exact==="user"||u.exact==="environment"||u.ideal==="user"||u.ideal==="environment")&&!(n.mediaDevices.getSupportedConstraints&&n.mediaDevices.getSupportedConstraints().facingMode&&!l)){delete a.video.facingMode;let d;if(u.exact==="environment"||u.ideal==="environment"?d=["back","rear"]:(u.exact==="user"||u.ideal==="user")&&(d=["front"]),d)return n.mediaDevices.enumerateDevices().then(f=>{f=f.filter(p=>p.kind==="videoinput");let h=f.find(p=>d.some(m=>p.label.toLowerCase().includes(m)));return!h&&f.length&&d.includes("back")&&(h=f[f.length-1]),h&&(a.video.deviceId=u.exact?{exact:h.deviceId}:{ideal:h.deviceId}),a.video=r(a.video),nI("chrome: "+JSON.stringify(a)),c(a)})}a.video=r(a.video)}return nI("chrome: "+JSON.stringify(a)),c(a)},s=function(a){return t.version>=64?a:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[a.name]||a.name,message:a.message,constraint:a.constraint||a.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},o=function(a,c,u){i(a,l=>{n.webkitGetUserMedia(l,c,d=>{u&&u(s(d))})})};if(n.getUserMedia=o.bind(n),n.mediaDevices.getUserMedia){let a=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(c){return i(c,u=>a(u).then(l=>{if(u.audio&&!l.getAudioTracks().length||u.video&&!l.getVideoTracks().length)throw l.getTracks().forEach(d=>{d.stop()}),new DOMException("","NotFoundError");return l},l=>Promise.reject(s(l))))}}}function rI(e,t){if(!(e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices)&&e.navigator.mediaDevices){if(typeof t!="function"){console.error("shimGetDisplayMedia: getSourceId argument is not a function");return}e.navigator.mediaDevices.getDisplayMedia=function(r){return t(r).then(i=>{let s=r.video&&r.video.width,o=r.video&&r.video.height,a=r.video&&r.video.frameRate;return r.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:i,maxFrameRate:a||3}},s&&(r.video.mandatory.maxWidth=s),o&&(r.video.mandatory.maxHeight=o),e.navigator.mediaDevices.getUserMedia(r)})}}}function Vp(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function Bp(e){if(typeof e=="object"&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(n){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=n)},enumerable:!0,configurable:!0});let t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=r=>{r.stream.addEventListener("addtrack",i=>{let s;e.RTCPeerConnection.prototype.getReceivers?s=this.getReceivers().find(a=>a.track&&a.track.id===i.track.id):s={track:i.track};let o=new Event("track");o.track=i.track,o.receiver=s,o.transceiver={receiver:s},o.streams=[r.stream],this.dispatchEvent(o)}),r.stream.getTracks().forEach(i=>{let s;e.RTCPeerConnection.prototype.getReceivers?s=this.getReceivers().find(a=>a.track&&a.track.id===i.id):s={track:i};let o=new Event("track");o.track=i,o.receiver=s,o.transceiver={receiver:s},o.streams=[r.stream],this.dispatchEvent(o)})},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else en(e,"track",t=>(t.transceiver||Object.defineProperty(t,"transceiver",{value:{receiver:t.receiver}}),t))}function $p(e){if(typeof e=="object"&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){let t=function(i,s){return{track:s,get dtmf(){return this._dtmf===void 0&&(s.kind==="audio"?this._dtmf=i.createDTMFSender(s):this._dtmf=null),this._dtmf},_pc:i}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};let i=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(a,c){let u=i.apply(this,arguments);return u||(u=t(this,a),this._senders.push(u)),u};let s=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(a){s.apply(this,arguments);let c=this._senders.indexOf(a);c!==-1&&this._senders.splice(c,1)}}let n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(s){this._senders=this._senders||[],n.apply(this,[s]),s.getTracks().forEach(o=>{this._senders.push(t(this,o))})};let r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(s){this._senders=this._senders||[],r.apply(this,[s]),s.getTracks().forEach(o=>{let a=this._senders.find(c=>c.track===o);a&&this._senders.splice(this._senders.indexOf(a),1)})}}else if(typeof e=="object"&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){let t=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){let r=t.apply(this,[]);return r.forEach(i=>i._pc=this),r},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function Hp(e){if(!e.RTCPeerConnection)return;let t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){let[r,i,s]=arguments;if(arguments.length>0&&typeof r=="function")return t.apply(this,arguments);if(t.length===0&&(arguments.length===0||typeof r!="function"))return t.apply(this,[]);let o=function(c){let u={};return c.result().forEach(d=>{let f={id:d.id,timestamp:d.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[d.type]||d.type};d.names().forEach(h=>{f[h]=d.stat(h)}),u[f.id]=f}),u},a=function(c){return new Map(Object.keys(c).map(u=>[u,c[u]]))};if(arguments.length>=2){let c=function(u){i(a(o(u)))};return t.apply(this,[c,r])}return new Promise((c,u)=>{t.apply(this,[function(l){c(a(o(l)))},u])}).then(i,s)}}function zp(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver))return;if(!("getStats"in e.RTCRtpSender.prototype)){let n=e.RTCPeerConnection.prototype.getSenders;n&&(e.RTCPeerConnection.prototype.getSenders=function(){let s=n.apply(this,[]);return s.forEach(o=>o._pc=this),s});let r=e.RTCPeerConnection.prototype.addTrack;r&&(e.RTCPeerConnection.prototype.addTrack=function(){let s=r.apply(this,arguments);return s._pc=this,s}),e.RTCRtpSender.prototype.getStats=function(){let s=this;return this._pc.getStats().then(o=>Up(o,s.track,!0))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){let n=e.RTCPeerConnection.prototype.getReceivers;n&&(e.RTCPeerConnection.prototype.getReceivers=function(){let i=n.apply(this,[]);return i.forEach(s=>s._pc=this),i}),en(e,"track",r=>(r.receiver._pc=r.srcElement,r)),e.RTCRtpReceiver.prototype.getStats=function(){let i=this;return this._pc.getStats().then(s=>Up(s,i.track,!1))}}if(!("getStats"in e.RTCRtpSender.prototype&&"getStats"in e.RTCRtpReceiver.prototype))return;let t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){let r=arguments[0],i,s,o;return this.getSenders().forEach(a=>{a.track===r&&(i?o=!0:i=a)}),this.getReceivers().forEach(a=>(a.track===r&&(s?o=!0:s=a),a.track===r)),o||i&&s?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):i?i.getStats():s?s.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return t.apply(this,arguments)}}function iI(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(o=>this._shimmedLocalStreams[o][0])};let t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(o,a){if(!a)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};let c=t.apply(this,arguments);return this._shimmedLocalStreams[a.id]?this._shimmedLocalStreams[a.id].indexOf(c)===-1&&this._shimmedLocalStreams[a.id].push(c):this._shimmedLocalStreams[a.id]=[a,c],c};let n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(o){this._shimmedLocalStreams=this._shimmedLocalStreams||{},o.getTracks().forEach(u=>{if(this.getSenders().find(d=>d.track===u))throw new DOMException("Track already exists.","InvalidAccessError")});let a=this.getSenders();n.apply(this,arguments);let c=this.getSenders().filter(u=>a.indexOf(u)===-1);this._shimmedLocalStreams[o.id]=[o].concat(c)};let r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(o){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[o.id],r.apply(this,arguments)};let i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(o){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},o&&Object.keys(this._shimmedLocalStreams).forEach(a=>{let c=this._shimmedLocalStreams[a].indexOf(o);c!==-1&&this._shimmedLocalStreams[a].splice(c,1),this._shimmedLocalStreams[a].length===1&&delete this._shimmedLocalStreams[a]}),i.apply(this,arguments)}}function qp(e,t){if(!e.RTCPeerConnection)return;if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return iI(e);let n=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){let l=n.apply(this);return this._reverseStreams=this._reverseStreams||{},l.map(d=>this._reverseStreams[d.id])};let r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(l){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},l.getTracks().forEach(d=>{if(this.getSenders().find(h=>h.track===d))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[l.id]){let d=new e.MediaStream(l.getTracks());this._streams[l.id]=d,this._reverseStreams[d.id]=l,l=d}r.apply(this,[l])};let i=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(l){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[l.id]||l]),delete this._reverseStreams[this._streams[l.id]?this._streams[l.id].id:l.id],delete this._streams[l.id]},e.RTCPeerConnection.prototype.addTrack=function(l,d){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");let f=[].slice.call(arguments,1);if(f.length!==1||!f[0].getTracks().find(m=>m===l))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(m=>m.track===l))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};let p=this._streams[d.id];if(p)p.addTrack(l),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{let m=new e.MediaStream([l]);this._streams[d.id]=m,this._reverseStreams[m.id]=d,this.addStream(m)}return this.getSenders().find(m=>m.track===l)};function s(u,l){let d=l.sdp;return Object.keys(u._reverseStreams||[]).forEach(f=>{let h=u._reverseStreams[f],p=u._streams[h.id];d=d.replace(new RegExp(p.id,"g"),h.id)}),new RTCSessionDescription({type:l.type,sdp:d})}function o(u,l){let d=l.sdp;return Object.keys(u._reverseStreams||[]).forEach(f=>{let h=u._reverseStreams[f],p=u._streams[h.id];d=d.replace(new RegExp(h.id,"g"),p.id)}),new RTCSessionDescription({type:l.type,sdp:d})}["createOffer","createAnswer"].forEach(function(u){let l=e.RTCPeerConnection.prototype[u],d={[u](){let f=arguments;return arguments.length&&typeof arguments[0]=="function"?l.apply(this,[p=>{let m=s(this,p);f[0].apply(null,[m])},p=>{f[1]&&f[1].apply(null,p)},arguments[2]]):l.apply(this,arguments).then(p=>s(this,p))}};e.RTCPeerConnection.prototype[u]=d[u]});let a=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?a.apply(this,arguments):(arguments[0]=o(this,arguments[0]),a.apply(this,arguments))};let c=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get(){let u=c.get.apply(this);return u.type===""?u:s(this,u)}}),e.RTCPeerConnection.prototype.removeTrack=function(l){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!l._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(l._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let f;Object.keys(this._streams).forEach(h=>{this._streams[h].getTracks().find(m=>l.track===m)&&(f=this._streams[h])}),f&&(f.getTracks().length===1?this.removeStream(this._reverseStreams[f.id]):f.removeTrack(l.track),this.dispatchEvent(new Event("negotiationneeded")))}}function Su(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(n){let r=e.RTCPeerConnection.prototype[n],i={[n](){return arguments[0]=new(n==="addIceCandidate"?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}};e.RTCPeerConnection.prototype[n]=i[n]})}function Gp(e,t){en(e,"negotiationneeded",n=>{let r=n.target;if(!((t.version<72||r.getConfiguration&&r.getConfiguration().sdpSemantics==="plan-b")&&r.signalingState!=="stable"))return n})}var Tu={};ns(Tu,{shimAddTransceiver:()=>Qp,shimCreateAnswer:()=>tm,shimCreateOffer:()=>em,shimGetDisplayMedia:()=>sI,shimGetParameters:()=>Xp,shimGetUserMedia:()=>Du,shimOnTrack:()=>Wp,shimPeerConnection:()=>Iu,shimRTCDataChannel:()=>Zp,shimReceiverGetStats:()=>Jp,shimRemoveStream:()=>Yp,shimSenderGetStats:()=>Kp});function Du(e,t){let n=e&&e.navigator,r=e&&e.MediaStreamTrack;if(n.getUserMedia=function(i,s,o){Oi("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(i).then(s,o)},!(t.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){let i=function(o,a,c){a in o&&!(c in o)&&(o[c]=o[a],delete o[a])},s=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(o){return typeof o=="object"&&typeof o.audio=="object"&&(o=JSON.parse(JSON.stringify(o)),i(o.audio,"autoGainControl","mozAutoGainControl"),i(o.audio,"noiseSuppression","mozNoiseSuppression")),s(o)},r&&r.prototype.getSettings){let o=r.prototype.getSettings;r.prototype.getSettings=function(){let a=o.apply(this,arguments);return i(a,"mozAutoGainControl","autoGainControl"),i(a,"mozNoiseSuppression","noiseSuppression"),a}}if(r&&r.prototype.applyConstraints){let o=r.prototype.applyConstraints;r.prototype.applyConstraints=function(a){return this.kind==="audio"&&typeof a=="object"&&(a=JSON.parse(JSON.stringify(a)),i(a,"autoGainControl","mozAutoGainControl"),i(a,"noiseSuppression","mozNoiseSuppression")),o.apply(this,[a])}}}}function sI(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(r){if(!(r&&r.video)){let i=new DOMException("getDisplayMedia without video constraints is undefined");return i.name="NotFoundError",i.code=8,Promise.reject(i)}return r.video===!0?r.video={mediaSource:t}:r.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(r)})}function Wp(e){typeof e=="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Iu(e,t){if(typeof e!="object"||!(e.RTCPeerConnection||e.mozRTCPeerConnection))return;!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(i){let s=e.RTCPeerConnection.prototype[i],o={[i](){return arguments[0]=new(i==="addIceCandidate"?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),s.apply(this,arguments)}};e.RTCPeerConnection.prototype[i]=o[i]});let n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){let[s,o,a]=arguments;return r.apply(this,[s||null]).then(c=>{if(t.version<53&&!o)try{c.forEach(u=>{u.type=n[u.type]||u.type})}catch(u){if(u.name!=="TypeError")throw u;c.forEach((l,d)=>{c.set(d,Object.assign({},l,{type:n[l.type]||l.type}))})}return c}).then(o,a)}}function Kp(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender)||e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)return;let t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){let i=t.apply(this,[]);return i.forEach(s=>s._pc=this),i});let n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){let i=n.apply(this,arguments);return i._pc=this,i}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function Jp(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender)||e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)return;let t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){let r=t.apply(this,[]);return r.forEach(i=>i._pc=this),r}),en(e,"track",n=>(n.receiver._pc=n.srcElement,n)),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function Yp(e){!e.RTCPeerConnection||"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(n){Oi("removeStream","removeTrack"),this.getSenders().forEach(r=>{r.track&&n.getTracks().includes(r.track)&&this.removeTrack(r)})})}function Zp(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function Qp(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;let t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let r=arguments[1]&&arguments[1].sendEncodings;r===void 0&&(r=[]),r=[...r];let i=r.length>0;i&&r.forEach(o=>{if("rid"in o&&!/^[a-z0-9]{0,16}$/i.test(o.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in o&&!(parseFloat(o.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in o&&!(parseFloat(o.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});let s=t.apply(this,arguments);if(i){let{sender:o}=s,a=o.getParameters();(!("encodings"in a)||a.encodings.length===1&&Object.keys(a.encodings[0]).length===0)&&(a.encodings=r,o.sendEncodings=r,this.setParametersPromises.push(o.setParameters(a).then(()=>{delete o.sendEncodings}).catch(()=>{delete o.sendEncodings})))}return s})}function Xp(e){if(!(typeof e=="object"&&e.RTCRtpSender))return;let t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){let r=t.apply(this,arguments);return"encodings"in r||(r.encodings=[].concat(this.sendEncodings||[{}])),r})}function em(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;let t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}function tm(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;let t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}var _u={};ns(_u,{shimAudioContext:()=>um,shimCallbacksAPI:()=>im,shimConstraints:()=>oI,shimCreateOfferLegacy:()=>cm,shimGetUserMedia:()=>sm,shimLocalStreamsAPI:()=>nm,shimRTCIceServerUrls:()=>om,shimRemoteStreamsAPI:()=>rm,shimTrackEventTransceiver:()=>am});function nm(e){if(!(typeof e!="object"||!e.RTCPeerConnection)){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){let t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(r){this._localStreams||(this._localStreams=[]),this._localStreams.includes(r)||this._localStreams.push(r),r.getAudioTracks().forEach(i=>t.call(this,i,r)),r.getVideoTracks().forEach(i=>t.call(this,i,r))},e.RTCPeerConnection.prototype.addTrack=function(r,...i){return i&&i.forEach(s=>{this._localStreams?this._localStreams.includes(s)||this._localStreams.push(s):this._localStreams=[s]}),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(n){this._localStreams||(this._localStreams=[]);let r=this._localStreams.indexOf(n);if(r===-1)return;this._localStreams.splice(r,1);let i=n.getTracks();this.getSenders().forEach(s=>{i.includes(s.track)&&this.removeTrack(s)})})}}function rm(e){if(!(typeof e!="object"||!e.RTCPeerConnection)&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(n){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=n),this.addEventListener("track",this._onaddstreampoly=r=>{r.streams.forEach(i=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(i))return;this._remoteStreams.push(i);let s=new Event("addstream");s.stream=i,this.dispatchEvent(s)})})}});let t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){let r=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(i){i.streams.forEach(s=>{if(r._remoteStreams||(r._remoteStreams=[]),r._remoteStreams.indexOf(s)>=0)return;r._remoteStreams.push(s);let o=new Event("addstream");o.stream=s,r.dispatchEvent(o)})}),t.apply(r,arguments)}}}function im(e){if(typeof e!="object"||!e.RTCPeerConnection)return;let t=e.RTCPeerConnection.prototype,n=t.createOffer,r=t.createAnswer,i=t.setLocalDescription,s=t.setRemoteDescription,o=t.addIceCandidate;t.createOffer=function(u,l){let d=arguments.length>=2?arguments[2]:arguments[0],f=n.apply(this,[d]);return l?(f.then(u,l),Promise.resolve()):f},t.createAnswer=function(u,l){let d=arguments.length>=2?arguments[2]:arguments[0],f=r.apply(this,[d]);return l?(f.then(u,l),Promise.resolve()):f};let a=function(c,u,l){let d=i.apply(this,[c]);return l?(d.then(u,l),Promise.resolve()):d};t.setLocalDescription=a,a=function(c,u,l){let d=s.apply(this,[c]);return l?(d.then(u,l),Promise.resolve()):d},t.setRemoteDescription=a,a=function(c,u,l){let d=o.apply(this,[c]);return l?(d.then(u,l),Promise.resolve()):d},t.addIceCandidate=a}function sm(e){let t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){let n=t.mediaDevices,r=n.getUserMedia.bind(n);t.mediaDevices.getUserMedia=i=>r(oI(i))}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(r,i,s){t.mediaDevices.getUserMedia(r).then(i,s)}.bind(t))}function oI(e){return e&&e.video!==void 0?Object.assign({},e,{video:jp(e.video)}):e}function om(e){if(!e.RTCPeerConnection)return;let t=e.RTCPeerConnection;e.RTCPeerConnection=function(r,i){if(r&&r.iceServers){let s=[];for(let o=0;o<r.iceServers.length;o++){let a=r.iceServers[o];a.urls===void 0&&a.url?(Oi("RTCIceServer.url","RTCIceServer.urls"),a=JSON.parse(JSON.stringify(a)),a.urls=a.url,delete a.url,s.push(a)):s.push(r.iceServers[o])}r.iceServers=s}return new t(r,i)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get(){return t.generateCertificate}})}function am(e){typeof e=="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function cm(e){let t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(r){if(r){typeof r.offerToReceiveAudio<"u"&&(r.offerToReceiveAudio=!!r.offerToReceiveAudio);let i=this.getTransceivers().find(o=>o.receiver.track.kind==="audio");r.offerToReceiveAudio===!1&&i?i.direction==="sendrecv"?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":i.direction==="recvonly"&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):r.offerToReceiveAudio===!0&&!i&&this.addTransceiver("audio",{direction:"recvonly"}),typeof r.offerToReceiveVideo<"u"&&(r.offerToReceiveVideo=!!r.offerToReceiveVideo);let s=this.getTransceivers().find(o=>o.receiver.track.kind==="video");r.offerToReceiveVideo===!1&&s?s.direction==="sendrecv"?s.setDirection?s.setDirection("sendonly"):s.direction="sendonly":s.direction==="recvonly"&&(s.setDirection?s.setDirection("inactive"):s.direction="inactive"):r.offerToReceiveVideo===!0&&!s&&this.addTransceiver("video",{direction:"recvonly"})}return t.apply(this,arguments)}}function um(e){typeof e!="object"||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}var fm={};ns(fm,{removeExtmapAllowMixed:()=>Mu,shimAddIceCandidateNullOrEmpty:()=>fo,shimConnectionState:()=>Nu,shimMaxMessageSize:()=>uo,shimParameterlessSetLocalDescription:()=>ho,shimRTCIceCandidate:()=>co,shimRTCIceCandidateRelayProtocol:()=>Ru,shimSendThrowTypeError:()=>lo});var Pi=rs(dm());function co(e){if(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)return;let t=e.RTCIceCandidate;e.RTCIceCandidate=function(r){if(typeof r=="object"&&r.candidate&&r.candidate.indexOf("a=")===0&&(r=JSON.parse(JSON.stringify(r)),r.candidate=r.candidate.substring(2)),r.candidate&&r.candidate.length){let i=new t(r),s=Pi.default.parseCandidate(r.candidate);for(let o in s)o in i||Object.defineProperty(i,o,{value:s[o]});return i.toJSON=function(){return{candidate:i.candidate,sdpMid:i.sdpMid,sdpMLineIndex:i.sdpMLineIndex,usernameFragment:i.usernameFragment}},i}return new t(r)},e.RTCIceCandidate.prototype=t.prototype,en(e,"icecandidate",n=>(n.candidate&&Object.defineProperty(n,"candidate",{value:new e.RTCIceCandidate(n.candidate),writable:"false"}),n))}function Ru(e){!e.RTCIceCandidate||e.RTCIceCandidate&&"relayProtocol"in e.RTCIceCandidate.prototype||en(e,"icecandidate",t=>{if(t.candidate){let n=Pi.default.parseCandidate(t.candidate.candidate);n.type==="relay"&&(t.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[n.priority>>24])}return t})}function uo(e,t){if(!e.RTCPeerConnection)return;"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});let n=function(a){if(!a||!a.sdp)return!1;let c=Pi.default.splitSections(a.sdp);return c.shift(),c.some(u=>{let l=Pi.default.parseMLine(u);return l&&l.kind==="application"&&l.protocol.indexOf("SCTP")!==-1})},r=function(a){let c=a.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(c===null||c.length<2)return-1;let u=parseInt(c[1],10);return u!==u?-1:u},i=function(a){let c=65536;return t.browser==="firefox"&&(t.version<57?a===-1?c=16384:c=2147483637:t.version<60?c=t.version===57?65535:65536:c=2147483637),c},s=function(a,c){let u=65536;t.browser==="firefox"&&t.version===57&&(u=65535);let l=Pi.default.matchPrefix(a.sdp,"a=max-message-size:");return l.length>0?u=parseInt(l[0].substring(19),10):t.browser==="firefox"&&c!==-1&&(u=2147483637),u},o=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,t.browser==="chrome"&&t.version>=76){let{sdpSemantics:c}=this.getConfiguration();c==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){let c=r(arguments[0]),u=i(c),l=s(arguments[0],c),d;u===0&&l===0?d=Number.POSITIVE_INFINITY:u===0||l===0?d=Math.max(u,l):d=Math.min(u,l);let f={};Object.defineProperty(f,"maxMessageSize",{get(){return d}}),this._sctp=f}return o.apply(this,arguments)}}function lo(e){if(!(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype))return;function t(r,i){let s=r.send;r.send=function(){let a=arguments[0],c=a.length||a.size||a.byteLength;if(r.readyState==="open"&&i.sctp&&c>i.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+i.sctp.maxMessageSize+" bytes)");return s.apply(r,arguments)}}let n=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){let i=n.apply(this,arguments);return t(i,this),i},en(e,"datachannel",r=>(t(r.channel,r.target),r))}function Nu(e){if(!e.RTCPeerConnection||"connectionState"in e.RTCPeerConnection.prototype)return;let t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(n){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),n&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=n)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(n=>{let r=t[n];t[n]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=i=>{let s=i.target;if(s._lastConnectionState!==s.connectionState){s._lastConnectionState=s.connectionState;let o=new Event("connectionstatechange",i);s.dispatchEvent(o)}return i},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),r.apply(this,arguments)}})}function Mu(e,t){if(!e.RTCPeerConnection||t.browser==="chrome"&&t.version>=71||t.browser==="safari"&&t.version>=605)return;let n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(i){if(i&&i.sdp&&i.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){let s=i.sdp.split(`
`).filter(o=>o.trim()!=="a=extmap-allow-mixed").join(`
`);e.RTCSessionDescription&&i instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:i.type,sdp:s}):i.sdp=s}return n.apply(this,arguments)}}function fo(e,t){if(!(e.RTCPeerConnection&&e.RTCPeerConnection.prototype))return;let n=e.RTCPeerConnection.prototype.addIceCandidate;!n||n.length===0||(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(t.browser==="chrome"&&t.version<78||t.browser==="firefox"&&t.version<68||t.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function ho(e,t){if(!(e.RTCPeerConnection&&e.RTCPeerConnection.prototype))return;let n=e.RTCPeerConnection.prototype.setLocalDescription;!n||n.length===0||(e.RTCPeerConnection.prototype.setLocalDescription=function(){let i=arguments[0]||{};if(typeof i!="object"||i.type&&i.sdp)return n.apply(this,arguments);if(i={type:i.type,sdp:i.sdp},!i.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":i.type="offer";break;default:i.type="answer";break}return i.sdp||i.type!=="offer"&&i.type!=="answer"?n.apply(this,[i]):(i.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(o=>n.apply(this,[o]))})}var TL=rs(dm());function aI({window:e}={},t={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){let n=Eu,r=tI(e),i={browserDetails:r,commonShim:fm,extractVersion:ao,disableLog:XD,disableWarnings:eI,sdp:TL};switch(r.browser){case"chrome":if(!wu||!Su||!t.shimChrome)return n("Chrome shim is not included in this adapter release."),i;if(r.version===null)return n("Chrome shim can not determine version, not shimming."),i;n("adapter.js shimming chrome."),i.browserShim=wu,fo(e,r),ho(e,r),Cu(e,r),Vp(e,r),Su(e,r),Bp(e,r),qp(e,r),$p(e,r),Hp(e,r),zp(e,r),Gp(e,r),co(e,r),Ru(e,r),Nu(e,r),uo(e,r),lo(e,r),Mu(e,r);break;case"firefox":if(!Tu||!Iu||!t.shimFirefox)return n("Firefox shim is not included in this adapter release."),i;n("adapter.js shimming firefox."),i.browserShim=Tu,fo(e,r),ho(e,r),Du(e,r),Iu(e,r),Wp(e,r),Yp(e,r),Kp(e,r),Jp(e,r),Zp(e,r),Qp(e,r),Xp(e,r),em(e,r),tm(e,r),co(e,r),Nu(e,r),uo(e,r),lo(e,r);break;case"safari":if(!_u||!t.shimSafari)return n("Safari shim is not included in this adapter release."),i;n("adapter.js shimming safari."),i.browserShim=_u,fo(e,r),ho(e,r),om(e,r),cm(e,r),im(e,r),nm(e,r),rm(e,r),am(e,r),sm(e,r),um(e,r),co(e,r),Ru(e,r),uo(e,r),lo(e,r),Mu(e,r);break;default:n("Unsupported browser!");break}return i}var Pq=aI({window:typeof window>"u"?void 0:window});function tn(e){let t=typeof e;if(t=="object"){if(Array.isArray(e))return"array";if(e===null)return"null"}return t}function Wn(e){return e!==null&&typeof e=="object"&&!Array.isArray(e)}var Sn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),Au=[];for(let e=0;e<Sn.length;e++)Au[Sn[e].charCodeAt(0)]=e;Au[45]=Sn.indexOf("+");Au[95]=Sn.indexOf("/");function cI(e){let t=e.length*3/4;e[e.length-2]=="="?t-=2:e[e.length-1]=="="&&(t-=1);let n=new Uint8Array(t),r=0,i=0,s,o=0;for(let a=0;a<e.length;a++){if(s=Au[e.charCodeAt(a)],s===void 0)switch(e[a]){case"=":i=0;case`
`:case"\r":case"	":case" ":continue;default:throw Error("invalid base64 string.")}switch(i){case 0:o=s,i=1;break;case 1:n[r++]=o<<2|(s&48)>>4,o=s,i=2;break;case 2:n[r++]=(o&15)<<4|(s&60)>>2,o=s,i=3;break;case 3:n[r++]=(o&3)<<6|s,i=0;break}}if(i==1)throw Error("invalid base64 string.");return n.subarray(0,r)}function uI(e){let t="",n=0,r,i=0;for(let s=0;s<e.length;s++)switch(r=e[s],n){case 0:t+=Sn[r>>2],i=(r&3)<<4,n=1;break;case 1:t+=Sn[i|r>>4],i=(r&15)<<2,n=2;break;case 2:t+=Sn[i|r>>6],t+=Sn[r&63],n=0;break}return n&&(t+=Sn[i],t+="=",n==1&&(t+="=")),t}var Mr;(function(e){e.symbol=Symbol.for("protobuf-ts/unknown"),e.onRead=(n,r,i,s,o)=>{(t(r)?r[e.symbol]:r[e.symbol]=[]).push({no:i,wireType:s,data:o})},e.onWrite=(n,r,i)=>{for(let{no:s,wireType:o,data:a}of e.list(r))i.tag(s,o).raw(a)},e.list=(n,r)=>{if(t(n)){let i=n[e.symbol];return r?i.filter(s=>s.no==r):i}return[]},e.last=(n,r)=>e.list(n,r).slice(-1)[0];let t=n=>n&&Array.isArray(n[e.symbol])})(Mr||(Mr={}));function hm(e,t){return Object.assign(Object.assign({},e),t)}var ye=function(e){return e[e.Varint=0]="Varint",e[e.Bit64=1]="Bit64",e[e.LengthDelimited=2]="LengthDelimited",e[e.StartGroup=3]="StartGroup",e[e.EndGroup=4]="EndGroup",e[e.Bit32=5]="Bit32",e}(ye||{});function lI(){let e=0,t=0;for(let r=0;r<28;r+=7){let i=this.buf[this.pos++];if(e|=(i&127)<<r,!(i&128))return this.assertBounds(),[e,t]}let n=this.buf[this.pos++];if(e|=(n&15)<<28,t=(n&112)>>4,!(n&128))return this.assertBounds(),[e,t];for(let r=3;r<=31;r+=7){let i=this.buf[this.pos++];if(t|=(i&127)<<r,!(i&128))return this.assertBounds(),[e,t]}throw new Error("invalid varint")}function ku(e,t,n){for(let s=0;s<28;s=s+7){let o=e>>>s,a=!(!(o>>>7)&&t==0),c=(a?o|128:o)&255;if(n.push(c),!a)return}let r=e>>>28&15|(t&7)<<4,i=!!(t>>3);if(n.push((i?r|128:r)&255),!!i){for(let s=3;s<31;s=s+7){let o=t>>>s,a=!!(o>>>7),c=(a?o|128:o)&255;if(n.push(c),!a)return}n.push(t>>>31&1)}}var xu=65536*65536;function pm(e){let t=e[0]=="-";t&&(e=e.slice(1));let n=1e6,r=0,i=0;function s(o,a){let c=Number(e.slice(o,a));i*=n,r=r*n+c,r>=xu&&(i=i+(r/xu|0),r=r%xu)}return s(-24,-18),s(-18,-12),s(-12,-6),s(-6),[t,r,i]}function Ou(e,t){if(t>>>0<=2097151)return""+(xu*t+(e>>>0));let n=e&16777215,r=(e>>>24|t<<8)>>>0&16777215,i=t>>16&65535,s=n+r*6777216+i*6710656,o=r+i*8147497,a=i*2,c=1e7;s>=c&&(o+=Math.floor(s/c),s%=c),o>=c&&(a+=Math.floor(o/c),o%=c);function u(l,d){let f=l?String(l):"";return d?"0000000".slice(f.length)+f:f}return u(a,0)+u(o,a)+u(s,1)}function mm(e,t){if(e>=0){for(;e>127;)t.push(e&127|128),e=e>>>7;t.push(e)}else{for(let n=0;n<9;n++)t.push(e&127|128),e=e>>7;t.push(1)}}function dI(){let e=this.buf[this.pos++],t=e&127;if(!(e&128))return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(e&127)<<7,!(e&128))return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(e&127)<<14,!(e&128))return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(e&127)<<21,!(e&128))return this.assertBounds(),t;e=this.buf[this.pos++],t|=(e&15)<<28;for(let n=5;e&128&&n<10;n++)e=this.buf[this.pos++];if(e&128)throw new Error("invalid varint");return this.assertBounds(),t>>>0}var ue;function _L(){let e=new DataView(new ArrayBuffer(8));ue=globalThis.BigInt!==void 0&&typeof e.getBigInt64=="function"&&typeof e.getBigUint64=="function"&&typeof e.setBigInt64=="function"&&typeof e.setBigUint64=="function"?{MIN:BigInt("-9223372036854775808"),MAX:BigInt("9223372036854775807"),UMIN:BigInt("0"),UMAX:BigInt("18446744073709551615"),C:BigInt,V:e}:void 0}_L();function fI(e){if(!e)throw new Error("BigInt unavailable, see https://github.com/timostamm/protobuf-ts/blob/v1.0.8/MANUAL.md#bigint-support")}var hI=/^-?[0-9]+$/,Lu=4294967296,Pu=2147483648,Fu=class{constructor(t,n){this.lo=t|0,this.hi=n|0}isZero(){return this.lo==0&&this.hi==0}toNumber(){let t=this.hi*Lu+(this.lo>>>0);if(!Number.isSafeInteger(t))throw new Error("cannot convert to safe number");return t}},we=class e extends Fu{static from(t){if(ue)switch(typeof t){case"string":if(t=="0")return this.ZERO;if(t=="")throw new Error("string is no integer");t=ue.C(t);case"number":if(t===0)return this.ZERO;t=ue.C(t);case"bigint":if(!t)return this.ZERO;if(t<ue.UMIN)throw new Error("signed value for ulong");if(t>ue.UMAX)throw new Error("ulong too large");return ue.V.setBigUint64(0,t,!0),new e(ue.V.getInt32(0,!0),ue.V.getInt32(4,!0))}else switch(typeof t){case"string":if(t=="0")return this.ZERO;if(t=t.trim(),!hI.test(t))throw new Error("string is no integer");let[n,r,i]=pm(t);if(n)throw new Error("signed value for ulong");return new e(r,i);case"number":if(t==0)return this.ZERO;if(!Number.isSafeInteger(t))throw new Error("number is no integer");if(t<0)throw new Error("signed value for ulong");return new e(t,t/Lu)}throw new Error("unknown value "+typeof t)}toString(){return ue?this.toBigInt().toString():Ou(this.lo,this.hi)}toBigInt(){return fI(ue),ue.V.setInt32(0,this.lo,!0),ue.V.setInt32(4,this.hi,!0),ue.V.getBigUint64(0,!0)}};we.ZERO=new we(0,0);var oe=class e extends Fu{static from(t){if(ue)switch(typeof t){case"string":if(t=="0")return this.ZERO;if(t=="")throw new Error("string is no integer");t=ue.C(t);case"number":if(t===0)return this.ZERO;t=ue.C(t);case"bigint":if(!t)return this.ZERO;if(t<ue.MIN)throw new Error("signed long too small");if(t>ue.MAX)throw new Error("signed long too large");return ue.V.setBigInt64(0,t,!0),new e(ue.V.getInt32(0,!0),ue.V.getInt32(4,!0))}else switch(typeof t){case"string":if(t=="0")return this.ZERO;if(t=t.trim(),!hI.test(t))throw new Error("string is no integer");let[n,r,i]=pm(t);if(n){if(i>Pu||i==Pu&&r!=0)throw new Error("signed long too small")}else if(i>=Pu)throw new Error("signed long too large");let s=new e(r,i);return n?s.negate():s;case"number":if(t==0)return this.ZERO;if(!Number.isSafeInteger(t))throw new Error("number is no integer");return t>0?new e(t,t/Lu):new e(-t,-t/Lu).negate()}throw new Error("unknown value "+typeof t)}isNegative(){return(this.hi&Pu)!==0}negate(){let t=~this.hi,n=this.lo;return n?n=~n+1:t+=1,new e(n,t)}toString(){if(ue)return this.toBigInt().toString();if(this.isNegative()){let t=this.negate();return"-"+Ou(t.lo,t.hi)}return Ou(this.lo,this.hi)}toBigInt(){return fI(ue),ue.V.setInt32(0,this.lo,!0),ue.V.setInt32(4,this.hi,!0),ue.V.getBigInt64(0,!0)}};oe.ZERO=new oe(0,0);var pI={readUnknownField:!0,readerFactory:e=>new gm(e)};function mI(e){return e?Object.assign(Object.assign({},pI),e):pI}var gm=class{constructor(t,n){this.varint64=lI,this.uint32=dI,this.buf=t,this.len=t.length,this.pos=0,this.view=new DataView(t.buffer,t.byteOffset,t.byteLength),this.textDecoder=n??new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0})}tag(){let t=this.uint32(),n=t>>>3,r=t&7;if(n<=0||r<0||r>5)throw new Error("illegal tag: field no "+n+" wire type "+r);return[n,r]}skip(t){let n=this.pos;switch(t){case ye.Varint:for(;this.buf[this.pos++]&128;);break;case ye.Bit64:this.pos+=4;case ye.Bit32:this.pos+=4;break;case ye.LengthDelimited:let r=this.uint32();this.pos+=r;break;case ye.StartGroup:let i;for(;(i=this.tag()[1])!==ye.EndGroup;)this.skip(i);break;default:throw new Error("cant skip wire type "+t)}return this.assertBounds(),this.buf.subarray(n,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return this.uint32()|0}sint32(){let t=this.uint32();return t>>>1^-(t&1)}int64(){return new oe(...this.varint64())}uint64(){return new we(...this.varint64())}sint64(){let[t,n]=this.varint64(),r=-(t&1);return t=(t>>>1|(n&1)<<31)^r,n=n>>>1^r,new oe(t,n)}bool(){let[t,n]=this.varint64();return t!==0||n!==0}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return new we(this.sfixed32(),this.sfixed32())}sfixed64(){return new oe(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let t=this.uint32(),n=this.pos;return this.pos+=t,this.assertBounds(),this.buf.subarray(n,n+t)}string(){return this.textDecoder.decode(this.bytes())}};function X(e,t){if(!e)throw new Error(t)}function ym(e,t){throw new Error(t??"Unexpected object: "+e)}var RL=34028234663852886e22,NL=-34028234663852886e22,ML=4294967295,AL=2147483647,xL=-2147483648;function wn(e){if(typeof e!="number")throw new Error("invalid int 32: "+typeof e);if(!Number.isInteger(e)||e>AL||e<xL)throw new Error("invalid int 32: "+e)}function Kn(e){if(typeof e!="number")throw new Error("invalid uint 32: "+typeof e);if(!Number.isInteger(e)||e>ML||e<0)throw new Error("invalid uint 32: "+e)}function Ar(e){if(typeof e!="number")throw new Error("invalid float 32: "+typeof e);if(Number.isFinite(e)&&(e>RL||e<NL))throw new Error("invalid float 32: "+e)}var gI={writeUnknownFields:!0,writerFactory:()=>new vm};function yI(e){return e?Object.assign(Object.assign({},gI),e):gI}var vm=class{constructor(t){this.stack=[],this.textEncoder=t??new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let t=0;for(let i=0;i<this.chunks.length;i++)t+=this.chunks[i].length;let n=new Uint8Array(t),r=0;for(let i=0;i<this.chunks.length;i++)n.set(this.chunks[i],r),r+=this.chunks[i].length;return this.chunks=[],n}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let t=this.finish(),n=this.stack.pop();if(!n)throw new Error("invalid state, fork stack empty");return this.chunks=n.chunks,this.buf=n.buf,this.uint32(t.byteLength),this.raw(t)}tag(t,n){return this.uint32((t<<3|n)>>>0)}raw(t){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(t),this}uint32(t){for(Kn(t);t>127;)this.buf.push(t&127|128),t=t>>>7;return this.buf.push(t),this}int32(t){return wn(t),mm(t,this.buf),this}bool(t){return this.buf.push(t?1:0),this}bytes(t){return this.uint32(t.byteLength),this.raw(t)}string(t){let n=this.textEncoder.encode(t);return this.uint32(n.byteLength),this.raw(n)}float(t){Ar(t);let n=new Uint8Array(4);return new DataView(n.buffer).setFloat32(0,t,!0),this.raw(n)}double(t){let n=new Uint8Array(8);return new DataView(n.buffer).setFloat64(0,t,!0),this.raw(n)}fixed32(t){Kn(t);let n=new Uint8Array(4);return new DataView(n.buffer).setUint32(0,t,!0),this.raw(n)}sfixed32(t){wn(t);let n=new Uint8Array(4);return new DataView(n.buffer).setInt32(0,t,!0),this.raw(n)}sint32(t){return wn(t),t=(t<<1^t>>31)>>>0,mm(t,this.buf),this}sfixed64(t){let n=new Uint8Array(8),r=new DataView(n.buffer),i=oe.from(t);return r.setInt32(0,i.lo,!0),r.setInt32(4,i.hi,!0),this.raw(n)}fixed64(t){let n=new Uint8Array(8),r=new DataView(n.buffer),i=we.from(t);return r.setInt32(0,i.lo,!0),r.setInt32(4,i.hi,!0),this.raw(n)}int64(t){let n=oe.from(t);return ku(n.lo,n.hi,this.buf),this}sint64(t){let n=oe.from(t),r=n.hi>>31,i=n.lo<<1^r,s=(n.hi<<1|n.lo>>>31)^r;return ku(i,s,this.buf),this}uint64(t){let n=we.from(t);return ku(n.lo,n.hi,this.buf),this}};var vI={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0},bI={ignoreUnknownFields:!1};function bm(e){return e?Object.assign(Object.assign({},bI),e):bI}function Em(e){return e?Object.assign(Object.assign({},vI),e):vI}function Cm(e,t){var n,r;let i=Object.assign(Object.assign({},e),t);return i.typeRegistry=[...(n=e?.typeRegistry)!==null&&n!==void 0?n:[],...(r=t?.typeRegistry)!==null&&r!==void 0?r:[]],i}var ju=Symbol.for("protobuf-ts/message-type");function Jn(e){let t=!1,n=[];for(let r=0;r<e.length;r++){let i=e.charAt(r);i=="_"?t=!0:/\d/.test(i)?(n.push(i),t=!0):t?(n.push(i.toUpperCase()),t=!1):r==0?n.push(i.toLowerCase()):n.push(i)}return n.join("")}var C=function(e){return e[e.DOUBLE=1]="DOUBLE",e[e.FLOAT=2]="FLOAT",e[e.INT64=3]="INT64",e[e.UINT64=4]="UINT64",e[e.INT32=5]="INT32",e[e.FIXED64=6]="FIXED64",e[e.FIXED32=7]="FIXED32",e[e.BOOL=8]="BOOL",e[e.STRING=9]="STRING",e[e.BYTES=12]="BYTES",e[e.UINT32=13]="UINT32",e[e.SFIXED32=15]="SFIXED32",e[e.SFIXED64=16]="SFIXED64",e[e.SINT32=17]="SINT32",e[e.SINT64=18]="SINT64",e}(C||{}),Je=function(e){return e[e.BIGINT=0]="BIGINT",e[e.STRING=1]="STRING",e[e.NUMBER=2]="NUMBER",e}(Je||{}),Uu=function(e){return e[e.NO=0]="NO",e[e.PACKED=1]="PACKED",e[e.UNPACKED=2]="UNPACKED",e}(Uu||{});function EI(e){var t,n,r,i;return e.localName=(t=e.localName)!==null&&t!==void 0?t:Jn(e.name),e.jsonName=(n=e.jsonName)!==null&&n!==void 0?n:Jn(e.name),e.repeat=(r=e.repeat)!==null&&r!==void 0?r:Uu.NO,e.opt=(i=e.opt)!==null&&i!==void 0?i:e.repeat||e.oneof?!1:e.kind=="message",e}function CI(e){if(typeof e!="object"||e===null||!e.hasOwnProperty("oneofKind"))return!1;switch(typeof e.oneofKind){case"string":return e[e.oneofKind]===void 0?!1:Object.keys(e).length==2;case"undefined":return Object.keys(e).length==1;default:return!1}}var Vu=class{constructor(t){var n;this.fields=(n=t.fields)!==null&&n!==void 0?n:[]}prepare(){if(this.data)return;let t=[],n=[],r=[];for(let i of this.fields)if(i.oneof)r.includes(i.oneof)||(r.push(i.oneof),t.push(i.oneof),n.push(i.oneof));else switch(n.push(i.localName),i.kind){case"scalar":case"enum":(!i.opt||i.repeat)&&t.push(i.localName);break;case"message":i.repeat&&t.push(i.localName);break;case"map":t.push(i.localName);break}this.data={req:t,known:n,oneofs:Object.values(r)}}is(t,n,r=!1){if(n<0)return!0;if(t==null||typeof t!="object")return!1;this.prepare();let i=Object.keys(t),s=this.data;if(i.length<s.req.length||s.req.some(o=>!i.includes(o))||!r&&i.some(o=>!s.known.includes(o)))return!1;if(n<1)return!0;for(let o of s.oneofs){let a=t[o];if(!CI(a))return!1;if(a.oneofKind===void 0)continue;let c=this.fields.find(u=>u.localName===a.oneofKind);if(!c||!this.field(a[a.oneofKind],c,r,n))return!1}for(let o of this.fields)if(o.oneof===void 0&&!this.field(t[o.localName],o,r,n))return!1;return!0}field(t,n,r,i){let s=n.repeat;switch(n.kind){case"scalar":return t===void 0?n.opt:s?this.scalars(t,n.T,i,n.L):this.scalar(t,n.T,n.L);case"enum":return t===void 0?n.opt:s?this.scalars(t,C.INT32,i):this.scalar(t,C.INT32);case"message":return t===void 0?!0:s?this.messages(t,n.T(),r,i):this.message(t,n.T(),r,i);case"map":if(typeof t!="object"||t===null)return!1;if(i<2)return!0;if(!this.mapKeys(t,n.K,i))return!1;switch(n.V.kind){case"scalar":return this.scalars(Object.values(t),n.V.T,i,n.V.L);case"enum":return this.scalars(Object.values(t),C.INT32,i);case"message":return this.messages(Object.values(t),n.V.T(),r,i)}break}return!0}message(t,n,r,i){return r?n.isAssignable(t,i):n.is(t,i)}messages(t,n,r,i){if(!Array.isArray(t))return!1;if(i<2)return!0;if(r){for(let s=0;s<t.length&&s<i;s++)if(!n.isAssignable(t[s],i-1))return!1}else for(let s=0;s<t.length&&s<i;s++)if(!n.is(t[s],i-1))return!1;return!0}scalar(t,n,r){let i=typeof t;switch(n){case C.UINT64:case C.FIXED64:case C.INT64:case C.SFIXED64:case C.SINT64:switch(r){case Je.BIGINT:return i=="bigint";case Je.NUMBER:return i=="number"&&!isNaN(t);default:return i=="string"}case C.BOOL:return i=="boolean";case C.STRING:return i=="string";case C.BYTES:return t instanceof Uint8Array;case C.DOUBLE:case C.FLOAT:return i=="number"&&!isNaN(t);default:return i=="number"&&Number.isInteger(t)}}scalars(t,n,r,i){if(!Array.isArray(t))return!1;if(r<2)return!0;if(Array.isArray(t)){for(let s=0;s<t.length&&s<r;s++)if(!this.scalar(t[s],n,i))return!1}return!0}mapKeys(t,n,r){let i=Object.keys(t);switch(n){case C.INT32:case C.FIXED32:case C.SFIXED32:case C.SINT32:case C.UINT32:return this.scalars(i.slice(0,r).map(s=>parseInt(s)),n,r);case C.BOOL:return this.scalars(i.slice(0,r).map(s=>s=="true"?!0:s=="false"?!1:s),n,r);default:return this.scalars(i,n,r,Je.STRING)}}};function Ye(e,t){switch(t){case Je.BIGINT:return e.toBigInt();case Je.NUMBER:return e.toNumber();default:return e.toString()}}var Bu=class{constructor(t){this.info=t}prepare(){var t;if(this.fMap===void 0){this.fMap={};let n=(t=this.info.fields)!==null&&t!==void 0?t:[];for(let r of n)this.fMap[r.name]=r,this.fMap[r.jsonName]=r,this.fMap[r.localName]=r}}assert(t,n,r){if(!t){let i=tn(r);throw(i=="number"||i=="boolean")&&(i=r.toString()),new Error(`Cannot parse JSON ${i} for ${this.info.typeName}#${n}`)}}read(t,n,r){this.prepare();let i=[];for(let[s,o]of Object.entries(t)){let a=this.fMap[s];if(!a){if(!r.ignoreUnknownFields)throw new Error(`Found unknown field while reading ${this.info.typeName} from JSON format. JSON key: ${s}`);continue}let c=a.localName,u;if(a.oneof){if(o===null&&(a.kind!=="enum"||a.T()[0]!=="google.protobuf.NullValue"))continue;if(i.includes(a.oneof))throw new Error(`Multiple members of the oneof group "${a.oneof}" of ${this.info.typeName} are present in JSON.`);i.push(a.oneof),u=n[a.oneof]={oneofKind:c}}else u=n;if(a.kind=="map"){if(o===null)continue;this.assert(Wn(o),a.name,o);let l=u[c];for(let[d,f]of Object.entries(o)){this.assert(f!==null,a.name+" map value",null);let h;switch(a.V.kind){case"message":h=a.V.T().internalJsonRead(f,r);break;case"enum":if(h=this.enum(a.V.T(),f,a.name,r.ignoreUnknownFields),h===!1)continue;break;case"scalar":h=this.scalar(f,a.V.T,a.V.L,a.name);break}this.assert(h!==void 0,a.name+" map value",f);let p=d;a.K==C.BOOL&&(p=p=="true"?!0:p=="false"?!1:p),p=this.scalar(p,a.K,Je.STRING,a.name).toString(),l[p]=h}}else if(a.repeat){if(o===null)continue;this.assert(Array.isArray(o),a.name,o);let l=u[c];for(let d of o){this.assert(d!==null,a.name,null);let f;switch(a.kind){case"message":f=a.T().internalJsonRead(d,r);break;case"enum":if(f=this.enum(a.T(),d,a.name,r.ignoreUnknownFields),f===!1)continue;break;case"scalar":f=this.scalar(d,a.T,a.L,a.name);break}this.assert(f!==void 0,a.name,o),l.push(f)}}else switch(a.kind){case"message":if(o===null&&a.T().typeName!="google.protobuf.Value"){this.assert(a.oneof===void 0,a.name+" (oneof member)",null);continue}u[c]=a.T().internalJsonRead(o,r,u[c]);break;case"enum":let l=this.enum(a.T(),o,a.name,r.ignoreUnknownFields);if(l===!1)continue;u[c]=l;break;case"scalar":u[c]=this.scalar(o,a.T,a.L,a.name);break}}}enum(t,n,r,i){if(t[0]=="google.protobuf.NullValue"&&X(n===null||n==="NULL_VALUE",`Unable to parse field ${this.info.typeName}#${r}, enum ${t[0]} only accepts null.`),n===null)return 0;switch(typeof n){case"number":return X(Number.isInteger(n),`Unable to parse field ${this.info.typeName}#${r}, enum can only be integral number, got ${n}.`),n;case"string":let s=n;t[2]&&n.substring(0,t[2].length)===t[2]&&(s=n.substring(t[2].length));let o=t[1][s];return typeof o>"u"&&i?!1:(X(typeof o=="number",`Unable to parse field ${this.info.typeName}#${r}, enum ${t[0]} has no value for "${n}".`),o)}X(!1,`Unable to parse field ${this.info.typeName}#${r}, cannot parse enum value from ${typeof n}".`)}scalar(t,n,r,i){let s;try{switch(n){case C.DOUBLE:case C.FLOAT:if(t===null)return 0;if(t==="NaN")return Number.NaN;if(t==="Infinity")return Number.POSITIVE_INFINITY;if(t==="-Infinity")return Number.NEGATIVE_INFINITY;if(t===""){s="empty string";break}if(typeof t=="string"&&t.trim().length!==t.length){s="extra whitespace";break}if(typeof t!="string"&&typeof t!="number")break;let o=Number(t);if(Number.isNaN(o)){s="not a number";break}if(!Number.isFinite(o)){s="too large or small";break}return n==C.FLOAT&&Ar(o),o;case C.INT32:case C.FIXED32:case C.SFIXED32:case C.SINT32:case C.UINT32:if(t===null)return 0;let a;if(typeof t=="number"?a=t:t===""?s="empty string":typeof t=="string"&&(t.trim().length!==t.length?s="extra whitespace":a=Number(t)),a===void 0)break;return n==C.UINT32?Kn(a):wn(a),a;case C.INT64:case C.SFIXED64:case C.SINT64:if(t===null)return Ye(oe.ZERO,r);if(typeof t!="number"&&typeof t!="string")break;return Ye(oe.from(t),r);case C.FIXED64:case C.UINT64:if(t===null)return Ye(we.ZERO,r);if(typeof t!="number"&&typeof t!="string")break;return Ye(we.from(t),r);case C.BOOL:if(t===null)return!1;if(typeof t!="boolean")break;return t;case C.STRING:if(t===null)return"";if(typeof t!="string"){s="extra whitespace";break}try{encodeURIComponent(t)}catch(c){c="invalid UTF8";break}return t;case C.BYTES:if(t===null||t==="")return new Uint8Array(0);if(typeof t!="string")break;return cI(t)}}catch(o){s=o.message}this.assert(!1,i+(s?" - "+s:""),t)}};var $u=class{constructor(t){var n;this.fields=(n=t.fields)!==null&&n!==void 0?n:[]}write(t,n){let r={},i=t;for(let s of this.fields){if(!s.oneof){let u=this.field(s,i[s.localName],n);u!==void 0&&(r[n.useProtoFieldName?s.name:s.jsonName]=u);continue}let o=i[s.oneof];if(o.oneofKind!==s.localName)continue;let a=s.kind=="scalar"||s.kind=="enum"?Object.assign(Object.assign({},n),{emitDefaultValues:!0}):n,c=this.field(s,o[s.localName],a);X(c!==void 0),r[n.useProtoFieldName?s.name:s.jsonName]=c}return r}field(t,n,r){let i;if(t.kind=="map"){X(typeof n=="object"&&n!==null);let s={};switch(t.V.kind){case"scalar":for(let[c,u]of Object.entries(n)){let l=this.scalar(t.V.T,u,t.name,!1,!0);X(l!==void 0),s[c.toString()]=l}break;case"message":let o=t.V.T();for(let[c,u]of Object.entries(n)){let l=this.message(o,u,t.name,r);X(l!==void 0),s[c.toString()]=l}break;case"enum":let a=t.V.T();for(let[c,u]of Object.entries(n)){X(u===void 0||typeof u=="number");let l=this.enum(a,u,t.name,!1,!0,r.enumAsInteger);X(l!==void 0),s[c.toString()]=l}break}(r.emitDefaultValues||Object.keys(s).length>0)&&(i=s)}else if(t.repeat){X(Array.isArray(n));let s=[];switch(t.kind){case"scalar":for(let c=0;c<n.length;c++){let u=this.scalar(t.T,n[c],t.name,t.opt,!0);X(u!==void 0),s.push(u)}break;case"enum":let o=t.T();for(let c=0;c<n.length;c++){X(n[c]===void 0||typeof n[c]=="number");let u=this.enum(o,n[c],t.name,t.opt,!0,r.enumAsInteger);X(u!==void 0),s.push(u)}break;case"message":let a=t.T();for(let c=0;c<n.length;c++){let u=this.message(a,n[c],t.name,r);X(u!==void 0),s.push(u)}break}(r.emitDefaultValues||s.length>0||r.emitDefaultValues)&&(i=s)}else switch(t.kind){case"scalar":i=this.scalar(t.T,n,t.name,t.opt,r.emitDefaultValues);break;case"enum":i=this.enum(t.T(),n,t.name,t.opt,r.emitDefaultValues,r.enumAsInteger);break;case"message":i=this.message(t.T(),n,t.name,r);break}return i}enum(t,n,r,i,s,o){if(t[0]=="google.protobuf.NullValue")return!s&&!i?void 0:null;if(n===void 0){X(i);return}if(!(n===0&&!s&&!i))return X(typeof n=="number"),X(Number.isInteger(n)),o||!t[1].hasOwnProperty(n)?n:t[2]?t[2]+t[1][n]:t[1][n]}message(t,n,r,i){return n===void 0?i.emitDefaultValues?null:void 0:t.internalJsonWrite(n,i)}scalar(t,n,r,i,s){if(n===void 0){X(i);return}let o=s||i;switch(t){case C.INT32:case C.SFIXED32:case C.SINT32:return n===0?o?0:void 0:(wn(n),n);case C.FIXED32:case C.UINT32:return n===0?o?0:void 0:(Kn(n),n);case C.FLOAT:Ar(n);case C.DOUBLE:return n===0?o?0:void 0:(X(typeof n=="number"),Number.isNaN(n)?"NaN":n===Number.POSITIVE_INFINITY?"Infinity":n===Number.NEGATIVE_INFINITY?"-Infinity":n);case C.STRING:return n===""?o?"":void 0:(X(typeof n=="string"),n);case C.BOOL:return n===!1?o?!1:void 0:(X(typeof n=="boolean"),n);case C.UINT64:case C.FIXED64:X(typeof n=="number"||typeof n=="string"||typeof n=="bigint");let a=we.from(n);return a.isZero()&&!o?void 0:a.toString();case C.INT64:case C.SFIXED64:case C.SINT64:X(typeof n=="number"||typeof n=="string"||typeof n=="bigint");let c=oe.from(n);return c.isZero()&&!o?void 0:c.toString();case C.BYTES:return X(n instanceof Uint8Array),n.byteLength?uI(n):o?"":void 0}}};function po(e,t=Je.STRING){switch(e){case C.BOOL:return!1;case C.UINT64:case C.FIXED64:return Ye(we.ZERO,t);case C.INT64:case C.SFIXED64:case C.SINT64:return Ye(oe.ZERO,t);case C.DOUBLE:case C.FLOAT:return 0;case C.BYTES:return new Uint8Array(0);case C.STRING:return"";default:return 0}}var Hu=class{constructor(t){this.info=t}prepare(){var t;if(!this.fieldNoToField){let n=(t=this.info.fields)!==null&&t!==void 0?t:[];this.fieldNoToField=new Map(n.map(r=>[r.no,r]))}}read(t,n,r,i){this.prepare();let s=i===void 0?t.len:t.pos+i;for(;t.pos<s;){let[o,a]=t.tag(),c=this.fieldNoToField.get(o);if(!c){let f=r.readUnknownField;if(f=="throw")throw new Error(`Unknown field ${o} (wire type ${a}) for ${this.info.typeName}`);let h=t.skip(a);f!==!1&&(f===!0?Mr.onRead:f)(this.info.typeName,n,o,a,h);continue}let u=n,l=c.repeat,d=c.localName;switch(c.oneof&&(u=u[c.oneof],u.oneofKind!==d&&(u=n[c.oneof]={oneofKind:d})),c.kind){case"scalar":case"enum":let f=c.kind=="enum"?C.INT32:c.T,h=c.kind=="scalar"?c.L:void 0;if(l){let y=u[d];if(a==ye.LengthDelimited&&f!=C.STRING&&f!=C.BYTES){let v=t.uint32()+t.pos;for(;t.pos<v;)y.push(this.scalar(t,f,h))}else y.push(this.scalar(t,f,h))}else u[d]=this.scalar(t,f,h);break;case"message":if(l){let y=u[d],v=c.T().internalBinaryRead(t,t.uint32(),r);y.push(v)}else u[d]=c.T().internalBinaryRead(t,t.uint32(),r,u[d]);break;case"map":let[p,m]=this.mapEntry(c,t,r);u[d][p]=m;break}}}mapEntry(t,n,r){let i=n.uint32(),s=n.pos+i,o,a;for(;n.pos<s;){let[c,u]=n.tag();switch(c){case 1:t.K==C.BOOL?o=n.bool().toString():o=this.scalar(n,t.K,Je.STRING);break;case 2:switch(t.V.kind){case"scalar":a=this.scalar(n,t.V.T,t.V.L);break;case"enum":a=n.int32();break;case"message":a=t.V.T().internalBinaryRead(n,n.uint32(),r);break}break;default:throw new Error(`Unknown field ${c} (wire type ${u}) in map entry for ${this.info.typeName}#${t.name}`)}}if(o===void 0){let c=po(t.K);o=t.K==C.BOOL?c.toString():c}if(a===void 0)switch(t.V.kind){case"scalar":a=po(t.V.T,t.V.L);break;case"enum":a=0;break;case"message":a=t.V.T().create();break}return[o,a]}scalar(t,n,r){switch(n){case C.INT32:return t.int32();case C.STRING:return t.string();case C.BOOL:return t.bool();case C.DOUBLE:return t.double();case C.FLOAT:return t.float();case C.INT64:return Ye(t.int64(),r);case C.UINT64:return Ye(t.uint64(),r);case C.FIXED64:return Ye(t.fixed64(),r);case C.FIXED32:return t.fixed32();case C.BYTES:return t.bytes();case C.UINT32:return t.uint32();case C.SFIXED32:return t.sfixed32();case C.SFIXED64:return Ye(t.sfixed64(),r);case C.SINT32:return t.sint32();case C.SINT64:return Ye(t.sint64(),r)}}};var zu=class{constructor(t){this.info=t}prepare(){if(!this.fields){let t=this.info.fields?this.info.fields.concat():[];this.fields=t.sort((n,r)=>n.no-r.no)}}write(t,n,r){this.prepare();for(let s of this.fields){let o,a,c=s.repeat,u=s.localName;if(s.oneof){let l=t[s.oneof];if(l.oneofKind!==u)continue;o=l[u],a=!0}else o=t[u],a=!1;switch(s.kind){case"scalar":case"enum":let l=s.kind=="enum"?C.INT32:s.T;if(c)if(X(Array.isArray(o)),c==Uu.PACKED)this.packed(n,l,s.no,o);else for(let d of o)this.scalar(n,l,s.no,d,!0);else o===void 0?X(s.opt):this.scalar(n,l,s.no,o,a||s.opt);break;case"message":if(c){X(Array.isArray(o));for(let d of o)this.message(n,r,s.T(),s.no,d)}else this.message(n,r,s.T(),s.no,o);break;case"map":X(typeof o=="object"&&o!==null);for(let[d,f]of Object.entries(o))this.mapEntry(n,r,s,d,f);break}}let i=r.writeUnknownFields;i!==!1&&(i===!0?Mr.onWrite:i)(this.info.typeName,t,n)}mapEntry(t,n,r,i,s){t.tag(r.no,ye.LengthDelimited),t.fork();let o=i;switch(r.K){case C.INT32:case C.FIXED32:case C.UINT32:case C.SFIXED32:case C.SINT32:o=Number.parseInt(i);break;case C.BOOL:X(i=="true"||i=="false"),o=i=="true";break}switch(this.scalar(t,r.K,1,o,!0),r.V.kind){case"scalar":this.scalar(t,r.V.T,2,s,!0);break;case"enum":this.scalar(t,C.INT32,2,s,!0);break;case"message":this.message(t,n,r.V.T(),2,s);break}t.join()}message(t,n,r,i,s){s!==void 0&&(r.internalBinaryWrite(s,t.tag(i,ye.LengthDelimited).fork(),n),t.join())}scalar(t,n,r,i,s){let[o,a,c]=this.scalarInfo(n,i);(!c||s)&&(t.tag(r,o),t[a](i))}packed(t,n,r,i){if(!i.length)return;X(n!==C.BYTES&&n!==C.STRING),t.tag(r,ye.LengthDelimited),t.fork();let[,s]=this.scalarInfo(n);for(let o=0;o<i.length;o++)t[s](i[o]);t.join()}scalarInfo(t,n){let r=ye.Varint,i,s=n===void 0,o=n===0;switch(t){case C.INT32:i="int32";break;case C.STRING:o=s||!n.length,r=ye.LengthDelimited,i="string";break;case C.BOOL:o=n===!1,i="bool";break;case C.UINT32:i="uint32";break;case C.DOUBLE:r=ye.Bit64,i="double";break;case C.FLOAT:r=ye.Bit32,i="float";break;case C.INT64:o=s||oe.from(n).isZero(),i="int64";break;case C.UINT64:o=s||we.from(n).isZero(),i="uint64";break;case C.FIXED64:o=s||we.from(n).isZero(),r=ye.Bit64,i="fixed64";break;case C.BYTES:o=s||!n.byteLength,r=ye.LengthDelimited,i="bytes";break;case C.FIXED32:r=ye.Bit32,i="fixed32";break;case C.SFIXED32:r=ye.Bit32,i="sfixed32";break;case C.SFIXED64:o=s||oe.from(n).isZero(),r=ye.Bit64,i="sfixed64";break;case C.SINT32:i="sint32";break;case C.SINT64:o=s||oe.from(n).isZero(),i="sint64";break}return[r,i,s||o]}};function SI(e){let t=e.messagePrototype?Object.create(e.messagePrototype):Object.defineProperty({},ju,{value:e});for(let n of e.fields){let r=n.localName;if(!n.opt)if(n.oneof)t[n.oneof]={oneofKind:void 0};else if(n.repeat)t[r]=[];else switch(n.kind){case"scalar":t[r]=po(n.T,n.L);break;case"enum":t[r]=0;break;case"map":t[r]={};break}}return t}function qu(e,t,n){let r,i=n,s;for(let o of e.fields){let a=o.localName;if(o.oneof){let c=i[o.oneof];if(c?.oneofKind==null)continue;if(r=c[a],s=t[o.oneof],s.oneofKind=c.oneofKind,r==null){delete s[a];continue}}else if(r=i[a],s=t,r==null)continue;switch(o.repeat&&(s[a].length=r.length),o.kind){case"scalar":case"enum":if(o.repeat)for(let u=0;u<r.length;u++)s[a][u]=r[u];else s[a]=r;break;case"message":let c=o.T();if(o.repeat)for(let u=0;u<r.length;u++)s[a][u]=c.create(r[u]);else s[a]===void 0?s[a]=c.create(r):c.mergePartial(s[a],r);break;case"map":switch(o.V.kind){case"scalar":case"enum":Object.assign(s[a],r);break;case"message":let u=o.V.T();for(let l of Object.keys(r))s[a][l]=u.create(r[l]);break}break}}}function II(e,t,n){if(t===n)return!0;if(!t||!n)return!1;for(let r of e.fields){let i=r.localName,s=r.oneof?t[r.oneof][i]:t[i],o=r.oneof?n[r.oneof][i]:n[i];switch(r.kind){case"enum":case"scalar":let a=r.kind=="enum"?C.INT32:r.T;if(!(r.repeat?wI(a,s,o):TI(a,s,o)))return!1;break;case"map":if(!(r.V.kind=="message"?DI(r.V.T(),Gu(s),Gu(o)):wI(r.V.kind=="enum"?C.INT32:r.V.T,Gu(s),Gu(o))))return!1;break;case"message":let c=r.T();if(!(r.repeat?DI(c,s,o):c.equals(s,o)))return!1;break}}return!0}var Gu=Object.values;function TI(e,t,n){if(t===n)return!0;if(e!==C.BYTES)return!1;let r=t,i=n;if(r.length!==i.length)return!1;for(let s=0;s<r.length;s++)if(r[s]!=i[s])return!1;return!0}function wI(e,t,n){if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(!TI(e,t[r],n[r]))return!1;return!0}function DI(e,t,n){if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(!e.equals(t[r],n[r]))return!1;return!0}var kL=Object.getOwnPropertyDescriptors(Object.getPrototypeOf({})),T=class{constructor(t,n,r){this.defaultCheckDepth=16,this.typeName=t,this.fields=n.map(EI),this.options=r??{},this.messagePrototype=Object.create(null,Object.assign(Object.assign({},kL),{[ju]:{value:this}})),this.refTypeCheck=new Vu(this),this.refJsonReader=new Bu(this),this.refJsonWriter=new $u(this),this.refBinReader=new Hu(this),this.refBinWriter=new zu(this)}create(t){let n=SI(this);return t!==void 0&&qu(this,n,t),n}clone(t){let n=this.create();return qu(this,n,t),n}equals(t,n){return II(this,t,n)}is(t,n=this.defaultCheckDepth){return this.refTypeCheck.is(t,n,!1)}isAssignable(t,n=this.defaultCheckDepth){return this.refTypeCheck.is(t,n,!0)}mergePartial(t,n){qu(this,t,n)}fromBinary(t,n){let r=mI(n);return this.internalBinaryRead(r.readerFactory(t),t.byteLength,r)}fromJson(t,n){return this.internalJsonRead(t,bm(n))}fromJsonString(t,n){let r=JSON.parse(t);return this.fromJson(r,n)}toJson(t,n){return this.internalJsonWrite(t,Em(n))}toJsonString(t,n){var r;let i=this.toJson(t,n);return JSON.stringify(i,null,(r=n?.prettySpaces)!==null&&r!==void 0?r:0)}toBinary(t,n){let r=yI(n);return this.internalBinaryWrite(t,r.writerFactory(),r).finish()}internalJsonRead(t,n,r){if(t!==null&&typeof t=="object"&&!Array.isArray(t)){let i=r??this.create();return this.refJsonReader.read(t,i,n),i}throw new Error(`Unable to parse message ${this.typeName} from JSON ${tn(t)}.`)}internalJsonWrite(t,n){return this.refJsonWriter.write(t,n)}internalBinaryWrite(t,n,r){return this.refBinWriter.write(t,n,r),n}internalBinaryRead(t,n,r,i){let s=i??this.create();return this.refBinReader.read(t,s,r,n),s}};function _I(e,t){var n,r,i;let s=e;return s.service=t,s.localName=(n=s.localName)!==null&&n!==void 0?n:Jn(s.name),s.serverStreaming=!!s.serverStreaming,s.clientStreaming=!!s.clientStreaming,s.options=(r=s.options)!==null&&r!==void 0?r:{},s.idempotency=(i=s.idempotency)!==null&&i!==void 0?i:void 0,s}var mo=class{constructor(t,n,r){this.typeName=t,this.methods=n.map(i=>_I(i,this)),this.options=r??{}}};var Ie=class extends Error{constructor(t,n="UNKNOWN",r){super(t),this.name="RpcError",Object.setPrototypeOf(this,new.target.prototype),this.code=n,this.meta=r??{}}toString(){let t=[this.name+": "+this.message];this.code&&(t.push(""),t.push("Code: "+this.code)),this.serviceName&&this.methodName&&t.push("Method: "+this.serviceName+"/"+this.methodName);let n=Object.entries(this.meta);if(n.length){t.push(""),t.push("Meta:");for(let[r,i]of n)t.push(`  ${r}: ${i}`)}return t.join(`
`)}};function Sm(e,t){if(!t)return e;let n={};Wu(e,n),Wu(t,n);for(let r of Object.keys(t)){let i=t[r];switch(r){case"jsonOptions":n.jsonOptions=Cm(e.jsonOptions,n.jsonOptions);break;case"binaryOptions":n.binaryOptions=hm(e.binaryOptions,n.binaryOptions);break;case"meta":n.meta={},Wu(e.meta,n.meta),Wu(t.meta,n.meta);break;case"interceptors":n.interceptors=e.interceptors?e.interceptors.concat(i):i.concat();break}}return n}function Wu(e,t){if(!e)return;let n=t;for(let[r,i]of Object.entries(e))i instanceof Date?n[r]=new Date(i.getTime()):Array.isArray(i)?n[r]=i.concat():n[r]=i}var Lt=function(e){return e[e.PENDING=0]="PENDING",e[e.REJECTED=1]="REJECTED",e[e.RESOLVED=2]="RESOLVED",e}(Lt||{}),Yn=class{constructor(t=!0){this._state=Lt.PENDING,this._promise=new Promise((n,r)=>{this._resolve=n,this._reject=r}),t&&this._promise.catch(n=>{})}get state(){return this._state}get promise(){return this._promise}resolve(t){if(this.state!==Lt.PENDING)throw new Error(`cannot resolve ${Lt[this.state].toLowerCase()}`);this._resolve(t),this._state=Lt.RESOLVED}reject(t){if(this.state!==Lt.PENDING)throw new Error(`cannot reject ${Lt[this.state].toLowerCase()}`);this._reject(t),this._state=Lt.REJECTED}resolvePending(t){this._state===Lt.PENDING&&this.resolve(t)}rejectPending(t){this._state===Lt.PENDING&&this.reject(t)}};var OL=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(l){try{u(r.next(l))}catch(d){o(d)}}function c(l){try{u(r.throw(l))}catch(d){o(d)}}function u(l){l.done?s(l.value):i(l.value).then(a,c)}u((r=r.apply(e,t||[])).next())})},go=class{constructor(t,n,r,i,s,o,a){this.method=t,this.requestHeaders=n,this.request=r,this.headers=i,this.response=s,this.status=o,this.trailers=a}then(t,n){return this.promiseFinished().then(r=>t?Promise.resolve(t(r)):r,r=>n?Promise.resolve(n(r)):Promise.reject(r))}promiseFinished(){return OL(this,void 0,void 0,function*(){let[t,n,r,i]=yield Promise.all([this.headers,this.response,this.status,this.trailers]);return{method:this.method,requestHeaders:this.requestHeaders,request:this.request,headers:t,response:n,status:r,trailers:i}})}};function Ft(e,t,n,r,i){var s,o,a,c;if(e=="unary"){let u=(l,d,f)=>t.unary(l,d,f);for(let l of((s=r.interceptors)!==null&&s!==void 0?s:[]).filter(d=>d.interceptUnary).reverse()){let d=u;u=(f,h,p)=>l.interceptUnary(d,f,h,p)}return u(n,i,r)}if(e=="serverStreaming"){let u=(l,d,f)=>t.serverStreaming(l,d,f);for(let l of((o=r.interceptors)!==null&&o!==void 0?o:[]).filter(d=>d.interceptServerStreaming).reverse()){let d=u;u=(f,h,p)=>l.interceptServerStreaming(d,f,h,p)}return u(n,i,r)}if(e=="clientStreaming"){let u=(l,d)=>t.clientStreaming(l,d);for(let l of((a=r.interceptors)!==null&&a!==void 0?a:[]).filter(d=>d.interceptClientStreaming).reverse()){let d=u;u=(f,h)=>l.interceptClientStreaming(d,f,h)}return u(n,r)}if(e=="duplex"){let u=(l,d)=>t.duplex(l,d);for(let l of((c=r.interceptors)!==null&&c!==void 0?c:[]).filter(d=>d.interceptDuplex).reverse()){let d=u;u=(f,h)=>l.interceptDuplex(d,f,h)}return u(n,r)}ym(e)}function yo(e,t){return function(){return e.apply(t,arguments)}}var{toString:PL}=Object.prototype,{getPrototypeOf:Im}=Object,Ju=(e=>t=>{let n=PL.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),jt=e=>(e=e.toLowerCase(),t=>Ju(t)===e),Yu=e=>t=>typeof t===e,{isArray:Li}=Array,vo=Yu("undefined");function LL(e){return e!==null&&!vo(e)&&e.constructor!==null&&!vo(e.constructor)&&ft(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}var MI=jt("ArrayBuffer");function FL(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&MI(e.buffer),t}var jL=Yu("string"),ft=Yu("function"),AI=Yu("number"),Zu=e=>e!==null&&typeof e=="object",UL=e=>e===!0||e===!1,Ku=e=>{if(Ju(e)!=="object")return!1;let t=Im(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},VL=jt("Date"),BL=jt("File"),$L=jt("Blob"),HL=jt("FileList"),zL=e=>Zu(e)&&ft(e.pipe),qL=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||ft(e.append)&&((t=Ju(e))==="formdata"||t==="object"&&ft(e.toString)&&e.toString()==="[object FormData]"))},GL=jt("URLSearchParams"),[WL,KL,JL,YL]=["ReadableStream","Request","Response","Headers"].map(jt),ZL=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function bo(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let r,i;if(typeof e!="object"&&(e=[e]),Li(e))for(r=0,i=e.length;r<i;r++)t.call(null,e[r],r,e);else{let s=n?Object.getOwnPropertyNames(e):Object.keys(e),o=s.length,a;for(r=0;r<o;r++)a=s[r],t.call(null,e[a],a,e)}}function xI(e,t){t=t.toLowerCase();let n=Object.keys(e),r=n.length,i;for(;r-- >0;)if(i=n[r],t===i.toLowerCase())return i;return null}var xr=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,kI=e=>!vo(e)&&e!==xr;function Dm(){let{caseless:e}=kI(this)&&this||{},t={},n=(r,i)=>{let s=e&&xI(t,i)||i;Ku(t[s])&&Ku(r)?t[s]=Dm(t[s],r):Ku(r)?t[s]=Dm({},r):Li(r)?t[s]=r.slice():t[s]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&bo(arguments[r],n);return t}var QL=(e,t,n,{allOwnKeys:r}={})=>(bo(t,(i,s)=>{n&&ft(i)?e[s]=yo(i,n):e[s]=i},{allOwnKeys:r}),e),XL=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),e1=(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},t1=(e,t,n,r)=>{let i,s,o,a={};if(t=t||{},e==null)return t;do{for(i=Object.getOwnPropertyNames(e),s=i.length;s-- >0;)o=i[s],(!r||r(o,e,t))&&!a[o]&&(t[o]=e[o],a[o]=!0);e=n!==!1&&Im(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},n1=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;let r=e.indexOf(t,n);return r!==-1&&r===n},r1=e=>{if(!e)return null;if(Li(e))return e;let t=e.length;if(!AI(t))return null;let n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},i1=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Im(Uint8Array)),s1=(e,t)=>{let r=(e&&e[Symbol.iterator]).call(e),i;for(;(i=r.next())&&!i.done;){let s=i.value;t.call(e,s[0],s[1])}},o1=(e,t)=>{let n,r=[];for(;(n=e.exec(t))!==null;)r.push(n);return r},a1=jt("HTMLFormElement"),c1=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),RI=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),u1=jt("RegExp"),OI=(e,t)=>{let n=Object.getOwnPropertyDescriptors(e),r={};bo(n,(i,s)=>{let o;(o=t(i,s,e))!==!1&&(r[s]=o||i)}),Object.defineProperties(e,r)},l1=e=>{OI(e,(t,n)=>{if(ft(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;let r=e[n];if(ft(r)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},d1=(e,t)=>{let n={},r=i=>{i.forEach(s=>{n[s]=!0})};return Li(e)?r(e):r(String(e).split(t)),n},f1=()=>{},h1=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t,wm="abcdefghijklmnopqrstuvwxyz",NI="0123456789",PI={DIGIT:NI,ALPHA:wm,ALPHA_DIGIT:wm+wm.toUpperCase()+NI},p1=(e=16,t=PI.ALPHA_DIGIT)=>{let n="",{length:r}=t;for(;e--;)n+=t[Math.random()*r|0];return n};function m1(e){return!!(e&&ft(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}var g1=e=>{let t=new Array(10),n=(r,i)=>{if(Zu(r)){if(t.indexOf(r)>=0)return;if(!("toJSON"in r)){t[i]=r;let s=Li(r)?[]:{};return bo(r,(o,a)=>{let c=n(o,i+1);!vo(c)&&(s[a]=c)}),t[i]=void 0,s}}return r};return n(e,0)},y1=jt("AsyncFunction"),v1=e=>e&&(Zu(e)||ft(e))&&ft(e.then)&&ft(e.catch),LI=((e,t)=>e?setImmediate:t?((n,r)=>(xr.addEventListener("message",({source:i,data:s})=>{i===xr&&s===n&&r.length&&r.shift()()},!1),i=>{r.push(i),xr.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",ft(xr.postMessage)),b1=typeof queueMicrotask<"u"?queueMicrotask.bind(xr):typeof process<"u"&&process.nextTick||LI,b={isArray:Li,isArrayBuffer:MI,isBuffer:LL,isFormData:qL,isArrayBufferView:FL,isString:jL,isNumber:AI,isBoolean:UL,isObject:Zu,isPlainObject:Ku,isReadableStream:WL,isRequest:KL,isResponse:JL,isHeaders:YL,isUndefined:vo,isDate:VL,isFile:BL,isBlob:$L,isRegExp:u1,isFunction:ft,isStream:zL,isURLSearchParams:GL,isTypedArray:i1,isFileList:HL,forEach:bo,merge:Dm,extend:QL,trim:ZL,stripBOM:XL,inherits:e1,toFlatObject:t1,kindOf:Ju,kindOfTest:jt,endsWith:n1,toArray:r1,forEachEntry:s1,matchAll:o1,isHTMLForm:a1,hasOwnProperty:RI,hasOwnProp:RI,reduceDescriptors:OI,freezeMethods:l1,toObjectSet:d1,toCamelCase:c1,noop:f1,toFiniteNumber:h1,findKey:xI,global:xr,isContextDefined:kI,ALPHABET:PI,generateString:p1,isSpecCompliantForm:m1,toJSONObject:g1,isAsyncFn:y1,isThenable:v1,setImmediate:LI,asap:b1};function Fi(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}b.inherits(Fi,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:b.toJSONObject(this.config),code:this.code,status:this.status}}});var FI=Fi.prototype,jI={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{jI[e]={value:e}});Object.defineProperties(Fi,jI);Object.defineProperty(FI,"isAxiosError",{value:!0});Fi.from=(e,t,n,r,i,s)=>{let o=Object.create(FI);return b.toFlatObject(e,o,function(c){return c!==Error.prototype},a=>a!=="isAxiosError"),Fi.call(o,e.message,t,n,r,i),o.cause=e,o.name=e.name,s&&Object.assign(o,s),o};var H=Fi;var Qu=null;function Tm(e){return b.isPlainObject(e)||b.isArray(e)}function VI(e){return b.endsWith(e,"[]")?e.slice(0,-2):e}function UI(e,t,n){return e?e.concat(t).map(function(i,s){return i=VI(i),!n&&s?"["+i+"]":i}).join(n?".":""):t}function E1(e){return b.isArray(e)&&!e.some(Tm)}var C1=b.toFlatObject(b,{},null,function(t){return/^is[A-Z]/.test(t)});function S1(e,t,n){if(!b.isObject(e))throw new TypeError("target must be an object");t=t||new(Qu||FormData),n=b.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(m,y){return!b.isUndefined(y[m])});let r=n.metaTokens,i=n.visitor||l,s=n.dots,o=n.indexes,c=(n.Blob||typeof Blob<"u"&&Blob)&&b.isSpecCompliantForm(t);if(!b.isFunction(i))throw new TypeError("visitor must be a function");function u(p){if(p===null)return"";if(b.isDate(p))return p.toISOString();if(!c&&b.isBlob(p))throw new H("Blob is not supported. Use a Buffer instead.");return b.isArrayBuffer(p)||b.isTypedArray(p)?c&&typeof Blob=="function"?new Blob([p]):Buffer.from(p):p}function l(p,m,y){let v=p;if(p&&!y&&typeof p=="object"){if(b.endsWith(m,"{}"))m=r?m:m.slice(0,-2),p=JSON.stringify(p);else if(b.isArray(p)&&E1(p)||(b.isFileList(p)||b.endsWith(m,"[]"))&&(v=b.toArray(p)))return m=VI(m),v.forEach(function(_,N){!(b.isUndefined(_)||_===null)&&t.append(o===!0?UI([m],N,s):o===null?m:m+"[]",u(_))}),!1}return Tm(p)?!0:(t.append(UI(y,m,s),u(p)),!1)}let d=[],f=Object.assign(C1,{defaultVisitor:l,convertValue:u,isVisitable:Tm});function h(p,m){if(!b.isUndefined(p)){if(d.indexOf(p)!==-1)throw Error("Circular reference detected in "+m.join("."));d.push(p),b.forEach(p,function(v,S){(!(b.isUndefined(v)||v===null)&&i.call(t,v,b.isString(S)?S.trim():S,m,f))===!0&&h(v,m?m.concat(S):[S])}),d.pop()}}if(!b.isObject(e))throw new TypeError("data must be an object");return h(e),t}var Zn=S1;function BI(e){let t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return t[r]})}function $I(e,t){this._pairs=[],e&&Zn(e,this,t)}var HI=$I.prototype;HI.append=function(t,n){this._pairs.push([t,n])};HI.toString=function(t){let n=t?function(r){return t.call(this,r,BI)}:BI;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};var Xu=$I;function w1(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Eo(e,t,n){if(!t)return e;let r=n&&n.encode||w1,i=n&&n.serialize,s;if(i?s=i(t,n):s=b.isURLSearchParams(t)?t.toString():new Xu(t,n).toString(r),s){let o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+s}return e}var _m=class{constructor(){this.handlers=[]}use(t,n,r){return this.handlers.push({fulfilled:t,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){b.forEach(this.handlers,function(r){r!==null&&t(r)})}},Rm=_m;var el={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1};var zI=typeof URLSearchParams<"u"?URLSearchParams:Xu;var qI=typeof FormData<"u"?FormData:null;var GI=typeof Blob<"u"?Blob:null;var WI={isBrowser:!0,classes:{URLSearchParams:zI,FormData:qI,Blob:GI},protocols:["http","https","file","blob","url","data"]};var Am={};ns(Am,{hasBrowserEnv:()=>Mm,hasStandardBrowserEnv:()=>D1,hasStandardBrowserWebWorkerEnv:()=>I1,navigator:()=>Nm,origin:()=>T1});var Mm=typeof window<"u"&&typeof document<"u",Nm=typeof navigator=="object"&&navigator||void 0,D1=Mm&&(!Nm||["ReactNative","NativeScript","NS"].indexOf(Nm.product)<0),I1=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",T1=Mm&&window.location.href||"http://localhost";var De=E(E({},Am),WI);function xm(e,t){return Zn(e,new De.classes.URLSearchParams,Object.assign({visitor:function(n,r,i,s){return De.isNode&&b.isBuffer(n)?(this.append(r,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},t))}function _1(e){return b.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function R1(e){let t={},n=Object.keys(e),r,i=n.length,s;for(r=0;r<i;r++)s=n[r],t[s]=e[s];return t}function N1(e){function t(n,r,i,s){let o=n[s++];if(o==="__proto__")return!0;let a=Number.isFinite(+o),c=s>=n.length;return o=!o&&b.isArray(i)?i.length:o,c?(b.hasOwnProp(i,o)?i[o]=[i[o],r]:i[o]=r,!a):((!i[o]||!b.isObject(i[o]))&&(i[o]=[]),t(n,r,i[o],s)&&b.isArray(i[o])&&(i[o]=R1(i[o])),!a)}if(b.isFormData(e)&&b.isFunction(e.entries)){let n={};return b.forEachEntry(e,(r,i)=>{t(_1(r),i,n,0)}),n}return null}var tl=N1;function M1(e,t,n){if(b.isString(e))try{return(t||JSON.parse)(e),b.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(e)}var km={transitional:el,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){let r=n.getContentType()||"",i=r.indexOf("application/json")>-1,s=b.isObject(t);if(s&&b.isHTMLForm(t)&&(t=new FormData(t)),b.isFormData(t))return i?JSON.stringify(tl(t)):t;if(b.isArrayBuffer(t)||b.isBuffer(t)||b.isStream(t)||b.isFile(t)||b.isBlob(t)||b.isReadableStream(t))return t;if(b.isArrayBufferView(t))return t.buffer;if(b.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let a;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return xm(t,this.formSerializer).toString();if((a=b.isFileList(t))||r.indexOf("multipart/form-data")>-1){let c=this.env&&this.env.FormData;return Zn(a?{"files[]":t}:t,c&&new c,this.formSerializer)}}return s||i?(n.setContentType("application/json",!1),M1(t)):t}],transformResponse:[function(t){let n=this.transitional||km.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(b.isResponse(t)||b.isReadableStream(t))return t;if(t&&b.isString(t)&&(r&&!this.responseType||i)){let o=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(t)}catch(a){if(o)throw a.name==="SyntaxError"?H.from(a,H.ERR_BAD_RESPONSE,this,null,this.response):a}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:De.classes.FormData,Blob:De.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};b.forEach(["delete","get","head","post","put","patch"],e=>{km.headers[e]={}});var ji=km;var A1=b.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),KI=e=>{let t={},n,r,i;return e&&e.split(`
`).forEach(function(o){i=o.indexOf(":"),n=o.substring(0,i).trim().toLowerCase(),r=o.substring(i+1).trim(),!(!n||t[n]&&A1[n])&&(n==="set-cookie"?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t};var JI=Symbol("internals");function Co(e){return e&&String(e).trim().toLowerCase()}function nl(e){return e===!1||e==null?e:b.isArray(e)?e.map(nl):String(e)}function x1(e){let t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g,r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}var k1=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Om(e,t,n,r,i){if(b.isFunction(r))return r.call(this,t,n);if(i&&(t=n),!!b.isString(t)){if(b.isString(r))return t.indexOf(r)!==-1;if(b.isRegExp(r))return r.test(t)}}function O1(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,r)=>n.toUpperCase()+r)}function P1(e,t){let n=b.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(i,s,o){return this[r].call(this,t,i,s,o)},configurable:!0})})}var Ui=class{constructor(t){t&&this.set(t)}set(t,n,r){let i=this;function s(a,c,u){let l=Co(c);if(!l)throw new Error("header name must be a non-empty string");let d=b.findKey(i,l);(!d||i[d]===void 0||u===!0||u===void 0&&i[d]!==!1)&&(i[d||c]=nl(a))}let o=(a,c)=>b.forEach(a,(u,l)=>s(u,l,c));if(b.isPlainObject(t)||t instanceof this.constructor)o(t,n);else if(b.isString(t)&&(t=t.trim())&&!k1(t))o(KI(t),n);else if(b.isHeaders(t))for(let[a,c]of t.entries())s(c,a,r);else t!=null&&s(n,t,r);return this}get(t,n){if(t=Co(t),t){let r=b.findKey(this,t);if(r){let i=this[r];if(!n)return i;if(n===!0)return x1(i);if(b.isFunction(n))return n.call(this,i,r);if(b.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=Co(t),t){let r=b.findKey(this,t);return!!(r&&this[r]!==void 0&&(!n||Om(this,this[r],r,n)))}return!1}delete(t,n){let r=this,i=!1;function s(o){if(o=Co(o),o){let a=b.findKey(r,o);a&&(!n||Om(r,r[a],a,n))&&(delete r[a],i=!0)}}return b.isArray(t)?t.forEach(s):s(t),i}clear(t){let n=Object.keys(this),r=n.length,i=!1;for(;r--;){let s=n[r];(!t||Om(this,this[s],s,t,!0))&&(delete this[s],i=!0)}return i}normalize(t){let n=this,r={};return b.forEach(this,(i,s)=>{let o=b.findKey(r,s);if(o){n[o]=nl(i),delete n[s];return}let a=t?O1(s):String(s).trim();a!==s&&delete n[s],n[a]=nl(i),r[a]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){let n=Object.create(null);return b.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=t&&b.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){let r=new this(t);return n.forEach(i=>r.set(i)),r}static accessor(t){let r=(this[JI]=this[JI]={accessors:{}}).accessors,i=this.prototype;function s(o){let a=Co(o);r[a]||(P1(i,o),r[a]=!0)}return b.isArray(t)?t.forEach(s):s(t),this}};Ui.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);b.reduceDescriptors(Ui.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(r){this[n]=r}}});b.freezeMethods(Ui);var Me=Ui;function So(e,t){let n=this||ji,r=t||n,i=Me.from(r.headers),s=r.data;return b.forEach(e,function(a){s=a.call(n,s,i.normalize(),t?t.status:void 0)}),i.normalize(),s}function wo(e){return!!(e&&e.__CANCEL__)}function YI(e,t,n){H.call(this,e??"canceled",H.ERR_CANCELED,t,n),this.name="CanceledError"}b.inherits(YI,H,{__CANCEL__:!0});var nn=YI;function Do(e,t,n){let r=n.config.validateStatus;!n.status||!r||r(n.status)?e(n):t(new H("Request failed with status code "+n.status,[H.ERR_BAD_REQUEST,H.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function Pm(e){let t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function L1(e,t){e=e||10;let n=new Array(e),r=new Array(e),i=0,s=0,o;return t=t!==void 0?t:1e3,function(c){let u=Date.now(),l=r[s];o||(o=u),n[i]=c,r[i]=u;let d=s,f=0;for(;d!==i;)f+=n[d++],d=d%e;if(i=(i+1)%e,i===s&&(s=(s+1)%e),u-o<t)return;let h=l&&u-l;return h?Math.round(f*1e3/h):void 0}}var ZI=L1;function F1(e,t){let n=0,r=1e3/t,i,s,o=(u,l=Date.now())=>{n=l,i=null,s&&(clearTimeout(s),s=null),e.apply(null,u)};return[(...u)=>{let l=Date.now(),d=l-n;d>=r?o(u,l):(i=u,s||(s=setTimeout(()=>{s=null,o(i)},r-d)))},()=>i&&o(i)]}var QI=F1;var Vi=(e,t,n=3)=>{let r=0,i=ZI(50,250);return QI(s=>{let o=s.loaded,a=s.lengthComputable?s.total:void 0,c=o-r,u=i(c),l=o<=a;r=o;let d={loaded:o,total:a,progress:a?o/a:void 0,bytes:c,rate:u||void 0,estimated:u&&a&&l?(a-o)/u:void 0,event:s,lengthComputable:a!=null,[t?"download":"upload"]:!0};e(d)},n)},Lm=(e,t)=>{let n=e!=null;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},Fm=e=>(...t)=>b.asap(()=>e(...t));var XI=De.hasStandardBrowserEnv?function(){let t=De.navigator&&/(msie|trident)/i.test(De.navigator.userAgent),n=document.createElement("a"),r;function i(s){let o=s;return t&&(n.setAttribute("href",o),o=n.href),n.setAttribute("href",o),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return r=i(window.location.href),function(o){let a=b.isString(o)?i(o):o;return a.protocol===r.protocol&&a.host===r.host}}():function(){return function(){return!0}}();var eT=De.hasStandardBrowserEnv?{write(e,t,n,r,i,s){let o=[e+"="+encodeURIComponent(t)];b.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),b.isString(r)&&o.push("path="+r),b.isString(i)&&o.push("domain="+i),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read(e){let t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function jm(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function Um(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function Io(e,t){return e&&!jm(t)?Um(e,t):t}var tT=e=>e instanceof Me?E({},e):e;function Ut(e,t){t=t||{};let n={};function r(u,l,d){return b.isPlainObject(u)&&b.isPlainObject(l)?b.merge.call({caseless:d},u,l):b.isPlainObject(l)?b.merge({},l):b.isArray(l)?l.slice():l}function i(u,l,d){if(b.isUndefined(l)){if(!b.isUndefined(u))return r(void 0,u,d)}else return r(u,l,d)}function s(u,l){if(!b.isUndefined(l))return r(void 0,l)}function o(u,l){if(b.isUndefined(l)){if(!b.isUndefined(u))return r(void 0,u)}else return r(void 0,l)}function a(u,l,d){if(d in t)return r(u,l);if(d in e)return r(void 0,u)}let c={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(u,l)=>i(tT(u),tT(l),!0)};return b.forEach(Object.keys(Object.assign({},e,t)),function(l){let d=c[l]||i,f=d(e[l],t[l],l);b.isUndefined(f)&&d!==a||(n[l]=f)}),n}var rl=e=>{let t=Ut({},e),{data:n,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:s,headers:o,auth:a}=t;t.headers=o=Me.from(o),t.url=Eo(Io(t.baseURL,t.url),e.params,e.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let c;if(b.isFormData(n)){if(De.hasStandardBrowserEnv||De.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((c=o.getContentType())!==!1){let[u,...l]=c?c.split(";").map(d=>d.trim()).filter(Boolean):[];o.setContentType([u||"multipart/form-data",...l].join("; "))}}if(De.hasStandardBrowserEnv&&(r&&b.isFunction(r)&&(r=r(t)),r||r!==!1&&XI(t.url))){let u=i&&s&&eT.read(s);u&&o.set(i,u)}return t};var j1=typeof XMLHttpRequest<"u",nT=j1&&function(e){return new Promise(function(n,r){let i=rl(e),s=i.data,o=Me.from(i.headers).normalize(),{responseType:a,onUploadProgress:c,onDownloadProgress:u}=i,l,d,f,h,p;function m(){h&&h(),p&&p(),i.cancelToken&&i.cancelToken.unsubscribe(l),i.signal&&i.signal.removeEventListener("abort",l)}let y=new XMLHttpRequest;y.open(i.method.toUpperCase(),i.url,!0),y.timeout=i.timeout;function v(){if(!y)return;let _=Me.from("getAllResponseHeaders"in y&&y.getAllResponseHeaders()),B={data:!a||a==="text"||a==="json"?y.responseText:y.response,status:y.status,statusText:y.statusText,headers:_,config:e,request:y};Do(function(ae){n(ae),m()},function(ae){r(ae),m()},B),y=null}"onloadend"in y?y.onloadend=v:y.onreadystatechange=function(){!y||y.readyState!==4||y.status===0&&!(y.responseURL&&y.responseURL.indexOf("file:")===0)||setTimeout(v)},y.onabort=function(){y&&(r(new H("Request aborted",H.ECONNABORTED,e,y)),y=null)},y.onerror=function(){r(new H("Network Error",H.ERR_NETWORK,e,y)),y=null},y.ontimeout=function(){let N=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded",B=i.transitional||el;i.timeoutErrorMessage&&(N=i.timeoutErrorMessage),r(new H(N,B.clarifyTimeoutError?H.ETIMEDOUT:H.ECONNABORTED,e,y)),y=null},s===void 0&&o.setContentType(null),"setRequestHeader"in y&&b.forEach(o.toJSON(),function(N,B){y.setRequestHeader(B,N)}),b.isUndefined(i.withCredentials)||(y.withCredentials=!!i.withCredentials),a&&a!=="json"&&(y.responseType=i.responseType),u&&([f,p]=Vi(u,!0),y.addEventListener("progress",f)),c&&y.upload&&([d,h]=Vi(c),y.upload.addEventListener("progress",d),y.upload.addEventListener("loadend",h)),(i.cancelToken||i.signal)&&(l=_=>{y&&(r(!_||_.type?new nn(null,e,y):_),y.abort(),y=null)},i.cancelToken&&i.cancelToken.subscribe(l),i.signal&&(i.signal.aborted?l():i.signal.addEventListener("abort",l)));let S=Pm(i.url);if(S&&De.protocols.indexOf(S)===-1){r(new H("Unsupported protocol "+S+":",H.ERR_BAD_REQUEST,e));return}y.send(s||null)})};var U1=(e,t)=>{let{length:n}=e=e?e.filter(Boolean):[];if(t||n){let r=new AbortController,i,s=function(u){if(!i){i=!0,a();let l=u instanceof Error?u:this.reason;r.abort(l instanceof H?l:new nn(l instanceof Error?l.message:l))}},o=t&&setTimeout(()=>{o=null,s(new H(`timeout ${t} of ms exceeded`,H.ETIMEDOUT))},t),a=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(u=>{u.unsubscribe?u.unsubscribe(s):u.removeEventListener("abort",s)}),e=null)};e.forEach(u=>u.addEventListener("abort",s));let{signal:c}=r;return c.unsubscribe=()=>b.asap(a),c}},rT=U1;var V1=function*(e,t){let n=e.byteLength;if(!t||n<t){yield e;return}let r=0,i;for(;r<n;)i=r+t,yield e.slice(r,i),r=i},B1=function(e,t){return zl(this,null,function*(){try{for(var n=Vv($1(e)),r,i,s;r=!(i=yield new ir(n.next())).done;r=!1){let o=i.value;yield*ql(V1(o,t))}}catch{s=[i]}finally{try{r&&(i=n.return)&&(yield new ir(i.call(n)))}finally{if(s)throw s[0]}}})},$1=function(e){return zl(this,null,function*(){if(e[Symbol.asyncIterator]){yield*ql(e);return}let t=e.getReader();try{for(;;){let{done:n,value:r}=yield new ir(t.read());if(n)break;yield r}}finally{yield new ir(t.cancel())}})},Vm=(e,t,n,r)=>{let i=B1(e,t),s=0,o,a=u=>{o||(o=!0,r&&r(u))};return new ReadableStream({pull(u){return g(this,null,function*(){try{let{done:l,value:d}=yield i.next();if(l){a(),u.close();return}let f=d.byteLength;if(n){let h=s+=f;n(h)}u.enqueue(new Uint8Array(d))}catch(l){throw a(l),l}})},cancel(u){return a(u),i.return()}},{highWaterMark:2})};var sl=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",sT=sl&&typeof ReadableStream=="function",H1=sl&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):e=>g(void 0,null,function*(){return new Uint8Array(yield new Response(e).arrayBuffer())})),oT=(e,...t)=>{try{return!!e(...t)}catch{return!1}},z1=sT&&oT(()=>{let e=!1,t=new Request(De.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),iT=64*1024,Bm=sT&&oT(()=>b.isReadableStream(new Response("").body)),il={stream:Bm&&(e=>e.body)};sl&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!il[t]&&(il[t]=b.isFunction(e[t])?n=>n[t]():(n,r)=>{throw new H(`Response type '${t}' is not supported`,H.ERR_NOT_SUPPORT,r)})})})(new Response);var q1=e=>g(void 0,null,function*(){if(e==null)return 0;if(b.isBlob(e))return e.size;if(b.isSpecCompliantForm(e))return(yield new Request(De.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(b.isArrayBufferView(e)||b.isArrayBuffer(e))return e.byteLength;if(b.isURLSearchParams(e)&&(e=e+""),b.isString(e))return(yield H1(e)).byteLength}),G1=(e,t)=>g(void 0,null,function*(){let n=b.toFiniteNumber(e.getContentLength());return n??q1(t)}),aT=sl&&(e=>g(void 0,null,function*(){let{url:t,method:n,data:r,signal:i,cancelToken:s,timeout:o,onDownloadProgress:a,onUploadProgress:c,responseType:u,headers:l,withCredentials:d="same-origin",fetchOptions:f}=rl(e);u=u?(u+"").toLowerCase():"text";let h=rT([i,s&&s.toAbortSignal()],o),p,m=h&&h.unsubscribe&&(()=>{h.unsubscribe()}),y;try{if(c&&z1&&n!=="get"&&n!=="head"&&(y=yield G1(l,r))!==0){let B=new Request(t,{method:"POST",body:r,duplex:"half"}),L;if(b.isFormData(r)&&(L=B.headers.get("content-type"))&&l.setContentType(L),B.body){let[ae,he]=Lm(y,Vi(Fm(c)));r=Vm(B.body,iT,ae,he)}}b.isString(d)||(d=d?"include":"omit");let v="credentials"in Request.prototype;p=new Request(t,R(E({},f),{signal:h,method:n.toUpperCase(),headers:l.normalize().toJSON(),body:r,duplex:"half",credentials:v?d:void 0}));let S=yield fetch(p),_=Bm&&(u==="stream"||u==="response");if(Bm&&(a||_&&m)){let B={};["status","statusText","headers"].forEach(Bt=>{B[Bt]=S[Bt]});let L=b.toFiniteNumber(S.headers.get("content-length")),[ae,he]=a&&Lm(L,Vi(Fm(a),!0))||[];S=new Response(Vm(S.body,iT,ae,()=>{he&&he(),m&&m()}),B)}u=u||"text";let N=yield il[b.findKey(il,u)||"text"](S,e);return!_&&m&&m(),yield new Promise((B,L)=>{Do(B,L,{data:N,headers:Me.from(S.headers),status:S.status,statusText:S.statusText,config:e,request:p})})}catch(v){throw m&&m(),v&&v.name==="TypeError"&&/fetch/i.test(v.message)?Object.assign(new H("Network Error",H.ERR_NETWORK,e,p),{cause:v.cause||v}):H.from(v,v&&v.code,e,p)}}));var $m={http:Qu,xhr:nT,fetch:aT};b.forEach($m,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});var cT=e=>`- ${e}`,W1=e=>b.isFunction(e)||e===null||e===!1,ol={getAdapter:e=>{e=b.isArray(e)?e:[e];let{length:t}=e,n,r,i={};for(let s=0;s<t;s++){n=e[s];let o;if(r=n,!W1(n)&&(r=$m[(o=String(n)).toLowerCase()],r===void 0))throw new H(`Unknown adapter '${o}'`);if(r)break;i[o||"#"+s]=r}if(!r){let s=Object.entries(i).map(([a,c])=>`adapter ${a} `+(c===!1?"is not supported by the environment":"is not available in the build")),o=t?s.length>1?`since :
`+s.map(cT).join(`
`):" "+cT(s[0]):"as no adapter specified";throw new H("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:$m};function Hm(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new nn(null,e)}function al(e){return Hm(e),e.headers=Me.from(e.headers),e.data=So.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),ol.getAdapter(e.adapter||ji.adapter)(e).then(function(r){return Hm(e),r.data=So.call(e,e.transformResponse,r),r.headers=Me.from(r.headers),r},function(r){return wo(r)||(Hm(e),r&&r.response&&(r.response.data=So.call(e,e.transformResponse,r.response),r.response.headers=Me.from(r.response.headers))),Promise.reject(r)})}var cl="1.7.7";var zm={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{zm[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});var uT={};zm.transitional=function(t,n,r){function i(s,o){return"[Axios v"+cl+"] Transitional option '"+s+"'"+o+(r?". "+r:"")}return(s,o,a)=>{if(t===!1)throw new H(i(o," has been removed"+(n?" in "+n:"")),H.ERR_DEPRECATED);return n&&!uT[o]&&(uT[o]=!0,console.warn(i(o," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(s,o,a):!0}};function K1(e,t,n){if(typeof e!="object")throw new H("options must be an object",H.ERR_BAD_OPTION_VALUE);let r=Object.keys(e),i=r.length;for(;i-- >0;){let s=r[i],o=t[s];if(o){let a=e[s],c=a===void 0||o(a,s,e);if(c!==!0)throw new H("option "+s+" must be "+c,H.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new H("Unknown option "+s,H.ERR_BAD_OPTION)}}var ul={assertOptions:K1,validators:zm};var Qn=ul.validators,Bi=class{constructor(t){this.defaults=t,this.interceptors={request:new Rm,response:new Rm}}request(t,n){return g(this,null,function*(){try{return yield this._request(t,n)}catch(r){if(r instanceof Error){let i;Error.captureStackTrace?Error.captureStackTrace(i={}):i=new Error;let s=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?s&&!String(r.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+s):r.stack=s}catch{}}throw r}})}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=Ut(this.defaults,n);let{transitional:r,paramsSerializer:i,headers:s}=n;r!==void 0&&ul.assertOptions(r,{silentJSONParsing:Qn.transitional(Qn.boolean),forcedJSONParsing:Qn.transitional(Qn.boolean),clarifyTimeoutError:Qn.transitional(Qn.boolean)},!1),i!=null&&(b.isFunction(i)?n.paramsSerializer={serialize:i}:ul.assertOptions(i,{encode:Qn.function,serialize:Qn.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=s&&b.merge(s.common,s[n.method]);s&&b.forEach(["delete","get","head","post","put","patch","common"],p=>{delete s[p]}),n.headers=Me.concat(o,s);let a=[],c=!0;this.interceptors.request.forEach(function(m){typeof m.runWhen=="function"&&m.runWhen(n)===!1||(c=c&&m.synchronous,a.unshift(m.fulfilled,m.rejected))});let u=[];this.interceptors.response.forEach(function(m){u.push(m.fulfilled,m.rejected)});let l,d=0,f;if(!c){let p=[al.bind(this),void 0];for(p.unshift.apply(p,a),p.push.apply(p,u),f=p.length,l=Promise.resolve(n);d<f;)l=l.then(p[d++],p[d++]);return l}f=a.length;let h=n;for(d=0;d<f;){let p=a[d++],m=a[d++];try{h=p(h)}catch(y){m.call(this,y);break}}try{l=al.call(this,h)}catch(p){return Promise.reject(p)}for(d=0,f=u.length;d<f;)l=l.then(u[d++],u[d++]);return l}getUri(t){t=Ut(this.defaults,t);let n=Io(t.baseURL,t.url);return Eo(n,t.params,t.paramsSerializer)}};b.forEach(["delete","get","head","options"],function(t){Bi.prototype[t]=function(n,r){return this.request(Ut(r||{},{method:t,url:n,data:(r||{}).data}))}});b.forEach(["post","put","patch"],function(t){function n(r){return function(s,o,a){return this.request(Ut(a||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}Bi.prototype[t]=n(),Bi.prototype[t+"Form"]=n(!0)});var To=Bi;var qm=class e{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});let r=this;this.promise.then(i=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](i);r._listeners=null}),this.promise.then=i=>{let s,o=new Promise(a=>{r.subscribe(a),s=a}).then(i);return o.cancel=function(){r.unsubscribe(s)},o},t(function(s,o,a){r.reason||(r.reason=new nn(s,o,a),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;let n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){let t=new AbortController,n=r=>{t.abort(r)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new e(function(i){t=i}),cancel:t}}},lT=qm;function Gm(e){return function(n){return e.apply(null,n)}}function Wm(e){return b.isObject(e)&&e.isAxiosError===!0}var Km={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Km).forEach(([e,t])=>{Km[t]=e});var dT=Km;function fT(e){let t=new To(e),n=yo(To.prototype.request,t);return b.extend(n,To.prototype,t,{allOwnKeys:!0}),b.extend(n,t,null,{allOwnKeys:!0}),n.create=function(i){return fT(Ut(e,i))},n}var Te=fT(ji);Te.Axios=To;Te.CanceledError=nn;Te.CancelToken=lT;Te.isCancel=wo;Te.VERSION=cl;Te.toFormData=Zn;Te.AxiosError=H;Te.Cancel=Te.CanceledError;Te.all=function(t){return Promise.all(t)};Te.spread=Gm;Te.isAxiosError=Wm;Te.mergeConfig=Ut;Te.AxiosHeaders=Me;Te.formToJSON=e=>tl(b.isHTMLForm(e)?new FormData(e):e);Te.getAdapter=ol.getAdapter;Te.HttpStatusCode=dT;Te.default=Te;var kr=Te;var{Axios:U9,AxiosError:V9,CanceledError:B9,isCancel:$9,CancelToken:H9,VERSION:z9,all:q9,Cancel:G9,isAxiosError:W9,spread:K9,toFormData:J9,AxiosHeaders:hT,HttpStatusCode:Y9,formToJSON:Z9,getAdapter:Q9,mergeConfig:X9}=kr;var le=function(e){return e[e.cancelled=0]="cancelled",e[e.unknown=1]="unknown",e[e.invalid_argument=2]="invalid_argument",e[e.malformed=3]="malformed",e[e.deadline_exceeded=4]="deadline_exceeded",e[e.not_found=5]="not_found",e[e.bad_route=6]="bad_route",e[e.already_exists=7]="already_exists",e[e.permission_denied=8]="permission_denied",e[e.unauthenticated=9]="unauthenticated",e[e.resource_exhausted=10]="resource_exhausted",e[e.failed_precondition=11]="failed_precondition",e[e.aborted=12]="aborted",e[e.out_of_range=13]="out_of_range",e[e.unimplemented=14]="unimplemented",e[e.internal=15]="internal",e[e.unavailable=16]="unavailable",e[e.dataloss=17]="dataloss",e}(le||{});function pT(e,t,n){if(n)for(let[r,i]of Object.entries(n))if(typeof i=="string")e.append(r,i);else for(let s of i)e.append(r,s);return e.set("Content-Type",t?"application/json":"application/protobuf"),e.set("Accept",t?"application/json":"application/protobuf, application/json"),e}function mT(e){if(!Wn(e)||typeof e.code!="string"||typeof e.msg!="string")return new Ie("cannot read twirp error response",le[le.internal]);let t={};if(Wn(e.meta))for(let[n,r]of Object.entries(e.meta))typeof r=="string"&&(t[n]=r);return new Ie(e.msg,e.code,t)}function gT(e){let t={};return e.forEach((n,r)=>{r.toLowerCase()!=="content-type"&&r.toLowerCase()!=="content-length"&&(t.hasOwnProperty(r)?t[r].push(n):t[r]=n)}),t}var _o=class{constructor(t){this.defaultOptions=t}mergeOptions(t){return Sm(this.defaultOptions,t)}unary(t,n,r){var i,s,o;let a=r,c=this.makeUrl(t,a),u=(i=a.fetchInit)!==null&&i!==void 0?i:{},l=a.sendJson?t.I.toJsonString(n,a.jsonOptions):t.I.toBinary(n,a.binaryOptions),d=new Yn,f=new Yn,h=new Yn,p=new Yn;return globalThis.fetch(c,Object.assign(Object.assign({},u),{method:"POST",headers:pT(new globalThis.Headers,!!a.sendJson,a.meta),body:l,signal:(s=r.abort)!==null&&s!==void 0?s:null})).then(m=>{d.resolve(gT(m.headers));let y;try{y=m.type}catch{}switch(y){case"error":case"opaque":case"opaqueredirect":throw new Ie(`fetch response type ${m.type}`,le[le.unknown])}return m.ok?a.sendJson?m.json().then(v=>t.O.fromJson(v,a.jsonOptions),()=>{throw new Ie("unable to read response body as json",le[le.dataloss])}):m.arrayBuffer().then(v=>t.O.fromBinary(new Uint8Array(v),a.binaryOptions),()=>{throw new Ie("unable to read response body",le[le.dataloss])}):m.json().then(v=>{throw mT(v)},()=>{throw new Ie("received HTTP "+m.status+", unable to read response body as json",le[le.internal])})},m=>{throw m instanceof Error&&m.name==="AbortError"?new Ie(m.message,le[le.cancelled]):new Ie(m instanceof Error?m.message:m)}).then(m=>{f.resolve(m),h.resolve({code:"OK",detail:""}),p.resolve({})}).catch(m=>{let y=m instanceof Ie?m:new Ie(m instanceof Error?m.message:m,le[le.internal]);y.methodName=t.name,y.serviceName=t.service.typeName,d.rejectPending(y),f.rejectPending(y),h.rejectPending(y),p.rejectPending(y)}),new go(t,(o=a.meta)!==null&&o!==void 0?o:{},n,d.promise,f.promise,h.promise,p.promise)}makeUrl(t,n){let r=n.baseUrl;r.endsWith("/")&&(r=r.substring(0,r.length-1));let i=t.name;return n.useProtoMethodName!==!0&&(i=Jn(i),i=i.substring(0,1).toUpperCase()+i.substring(1)),`${r}/${t.service.typeName}/${i}`}clientStreaming(t){let n=new Ie("Client streaming is not supported by Twirp",le[le.unimplemented]);throw n.methodName=t.name,n.serviceName=t.service.typeName,n}duplex(t){let n=new Ie("Duplex streaming is not supported by Twirp",le[le.unimplemented]);throw n.methodName=t.name,n.serviceName=t.service.typeName,n}serverStreaming(t){let n=new Ie("Server streaming is not supported by Twirp",le[le.unimplemented]);throw n.methodName=t.name,n.serviceName=t.service.typeName,n}};var GT=rs(yT());var Bo=rs(IT());var Hi=null;typeof WebSocket<"u"?Hi=WebSocket:typeof MozWebSocket<"u"?Hi=MozWebSocket:typeof global<"u"?Hi=global.WebSocket||global.MozWebSocket:typeof window<"u"?Hi=window.WebSocket||window.MozWebSocket:typeof self<"u"&&(Hi=self.WebSocket||self.MozWebSocket);var TT=Hi;var WT=rs(NT());var Qm={AVAILABLE:"available",DISABLED:"disabled",AUTO_ON:"auto-on"},je={BLOCK_USERS:"block-users",CHANGE_MAX_DURATION:"change-max-duration",CREATE_CALL:"create-call",CREATE_REACTION:"create-reaction",ENABLE_NOISE_CANCELLATION:"enable-noise-cancellation",END_CALL:"end-call",JOIN_BACKSTAGE:"join-backstage",JOIN_CALL:"join-call",JOIN_ENDED_CALL:"join-ended-call",MUTE_USERS:"mute-users",PIN_FOR_EVERYONE:"pin-for-everyone",READ_CALL:"read-call",REMOVE_CALL_MEMBER:"remove-call-member",SCREENSHARE:"screenshare",SEND_AUDIO:"send-audio",SEND_VIDEO:"send-video",START_BROADCAST_CALL:"start-broadcast-call",START_RECORD_CALL:"start-record-call",START_TRANSCRIPTION_CALL:"start-transcription-call",STOP_BROADCAST_CALL:"stop-broadcast-call",STOP_RECORD_CALL:"stop-record-call",STOP_TRANSCRIPTION_CALL:"stop-transcription-call",UPDATE_CALL:"update-call",UPDATE_CALL_MEMBER:"update-call-member",UPDATE_CALL_PERMISSIONS:"update-call-permissions",UPDATE_CALL_SETTINGS:"update-call-settings"};var pl=class extends Error{},sg=function(e){return e[e.NULL_VALUE=0]="NULL_VALUE",e}(sg||{}),og=class extends T{constructor(){super("google.protobuf.Struct",[{no:1,name:"fields",kind:"map",K:9,V:{kind:"message",T:()=>Gi}}])}internalJsonWrite(t,n){let r={};for(let[i,s]of Object.entries(t.fields))r[i]=Gi.toJson(s);return r}internalJsonRead(t,n,r){if(!Wn(t))throw new globalThis.Error("Unable to parse message "+this.typeName+" from JSON "+tn(t)+".");r||(r=this.create());for(let[i,s]of globalThis.Object.entries(t))r.fields[i]=Gi.fromJson(s);return r}},ml=new og,ag=class extends T{constructor(){super("google.protobuf.Value",[{no:1,name:"null_value",kind:"enum",oneof:"kind",T:()=>["google.protobuf.NullValue",sg]},{no:2,name:"number_value",kind:"scalar",oneof:"kind",T:1},{no:3,name:"string_value",kind:"scalar",oneof:"kind",T:9},{no:4,name:"bool_value",kind:"scalar",oneof:"kind",T:8},{no:5,name:"struct_value",kind:"message",oneof:"kind",T:()=>ml},{no:6,name:"list_value",kind:"message",oneof:"kind",T:()=>MT}])}internalJsonWrite(t,n){if(t.kind.oneofKind===void 0)throw new globalThis.Error;switch(t.kind.oneofKind){case void 0:throw new globalThis.Error;case"boolValue":return t.kind.boolValue;case"nullValue":return null;case"numberValue":let r=t.kind.numberValue;if(typeof r=="number"&&!Number.isFinite(r))throw new globalThis.Error;return r;case"stringValue":return t.kind.stringValue;case"listValue":let i=this.fields.find(o=>o.no===6);if(i?.kind!=="message")throw new globalThis.Error;return i.T().toJson(t.kind.listValue);case"structValue":let s=this.fields.find(o=>o.no===5);if(s?.kind!=="message")throw new globalThis.Error;return s.T().toJson(t.kind.structValue)}}internalJsonRead(t,n,r){switch(r||(r=this.create()),typeof t){case"number":r.kind={oneofKind:"numberValue",numberValue:t};break;case"string":r.kind={oneofKind:"stringValue",stringValue:t};break;case"boolean":r.kind={oneofKind:"boolValue",boolValue:t};break;case"object":t===null?r.kind={oneofKind:"nullValue",nullValue:sg.NULL_VALUE}:globalThis.Array.isArray(t)?r.kind={oneofKind:"listValue",listValue:MT.fromJson(t)}:r.kind={oneofKind:"structValue",structValue:ml.fromJson(t)};break;default:throw new globalThis.Error("Unable to parse "+this.typeName+" from JSON "+tn(t))}return r}},Gi=new ag,cg=class extends T{constructor(){super("google.protobuf.ListValue",[{no:1,name:"values",kind:"message",repeat:1,T:()=>Gi}])}internalJsonWrite(t,n){return t.values.map(r=>Gi.toJson(r))}internalJsonRead(t,n,r){if(!globalThis.Array.isArray(t))throw new globalThis.Error("Unable to parse "+this.typeName+" from JSON "+tn(t));r||(r=this.create());let i=t.map(s=>Gi.fromJson(s));return r.values.push(...i),r}},MT=new cg,ug=class extends T{constructor(){super("google.protobuf.Timestamp",[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}])}now(){let t=this.create(),n=Date.now();return t.seconds=oe.from(Math.floor(n/1e3)).toString(),t.nanos=n%1e3*1e6,t}toDate(t){return new Date(oe.from(t.seconds).toNumber()*1e3+Math.ceil(t.nanos/1e6))}fromDate(t){let n=this.create(),r=t.getTime();return n.seconds=oe.from(Math.floor(r/1e3)).toString(),n.nanos=r%1e3*1e6,n}internalJsonWrite(t,n){let r=oe.from(t.seconds).toNumber()*1e3;if(r<Date.parse("0001-01-01T00:00:00Z")||r>Date.parse("9999-12-31T23:59:59Z"))throw new Error("Unable to encode Timestamp to JSON. Must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive.");if(t.nanos<0)throw new Error("Unable to encode invalid Timestamp to JSON. Nanos must not be negative.");let i="Z";if(t.nanos>0){let s=(t.nanos+1e9).toString().substring(1);s.substring(3)==="000000"?i="."+s.substring(0,3)+"Z":s.substring(6)==="000"?i="."+s.substring(0,6)+"Z":i="."+s+"Z"}return new Date(r).toISOString().replace(".000Z",i)}internalJsonRead(t,n,r){if(typeof t!="string")throw new Error("Unable to parse Timestamp from JSON "+tn(t)+".");let i=t.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:Z|\.([0-9]{3,9})Z|([+-][0-9][0-9]:[0-9][0-9]))$/);if(!i)throw new Error("Unable to parse Timestamp from JSON. Invalid format.");let s=Date.parse(i[1]+"-"+i[2]+"-"+i[3]+"T"+i[4]+":"+i[5]+":"+i[6]+(i[8]?i[8]:"Z"));if(Number.isNaN(s))throw new Error("Unable to parse Timestamp from JSON. Invalid value.");if(s<Date.parse("0001-01-01T00:00:00Z")||s>Date.parse("9999-12-31T23:59:59Z"))throw new globalThis.Error("Unable to parse Timestamp from JSON. Must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive.");return r||(r=this.create()),r.seconds=oe.from(s/1e3).toString(),r.nanos=0,i[7]&&(r.nanos=parseInt("1"+i[7]+"0".repeat(9-i[7].length))-1e9),r}},Po=new ug,Ze=function(e){return e[e.PUBLISHER_UNSPECIFIED=0]="PUBLISHER_UNSPECIFIED",e[e.SUBSCRIBER=1]="SUBSCRIBER",e}(Ze||{}),dv=function(e){return e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.POOR=1]="POOR",e[e.GOOD=2]="GOOD",e[e.EXCELLENT=3]="EXCELLENT",e}(dv||{}),Wi=function(e){return e[e.LOW_UNSPECIFIED=0]="LOW_UNSPECIFIED",e[e.MID=1]="MID",e[e.HIGH=2]="HIGH",e[e.OFF=3]="OFF",e}(Wi||{}),I=function(e){return e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.AUDIO=1]="AUDIO",e[e.VIDEO=2]="VIDEO",e[e.SCREEN_SHARE=3]="SCREEN_SHARE",e[e.SCREEN_SHARE_AUDIO=4]="SCREEN_SHARE_AUDIO",e}(I||{}),Il=function(e){return e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.PUBLISH_TRACK_NOT_FOUND=100]="PUBLISH_TRACK_NOT_FOUND",e[e.PUBLISH_TRACKS_MISMATCH=101]="PUBLISH_TRACKS_MISMATCH",e[e.PUBLISH_TRACK_OUT_OF_ORDER=102]="PUBLISH_TRACK_OUT_OF_ORDER",e[e.PUBLISH_TRACK_VIDEO_LAYER_NOT_FOUND=103]="PUBLISH_TRACK_VIDEO_LAYER_NOT_FOUND",e[e.LIVE_ENDED=104]="LIVE_ENDED",e[e.PARTICIPANT_NOT_FOUND=200]="PARTICIPANT_NOT_FOUND",e[e.PARTICIPANT_MIGRATING_OUT=201]="PARTICIPANT_MIGRATING_OUT",e[e.PARTICIPANT_MIGRATION_FAILED=202]="PARTICIPANT_MIGRATION_FAILED",e[e.PARTICIPANT_MIGRATING=203]="PARTICIPANT_MIGRATING",e[e.PARTICIPANT_RECONNECT_FAILED=204]="PARTICIPANT_RECONNECT_FAILED",e[e.PARTICIPANT_MEDIA_TRANSPORT_FAILURE=205]="PARTICIPANT_MEDIA_TRANSPORT_FAILURE",e[e.CALL_NOT_FOUND=300]="CALL_NOT_FOUND",e[e.REQUEST_VALIDATION_FAILED=400]="REQUEST_VALIDATION_FAILED",e[e.UNAUTHENTICATED=401]="UNAUTHENTICATED",e[e.PERMISSION_DENIED=403]="PERMISSION_DENIED",e[e.TOO_MANY_REQUESTS=429]="TOO_MANY_REQUESTS",e[e.INTERNAL_SERVER_ERROR=500]="INTERNAL_SERVER_ERROR",e[e.SFU_SHUTTING_DOWN=600]="SFU_SHUTTING_DOWN",e[e.SFU_FULL=700]="SFU_FULL",e}(Il||{}),Ki=function(e){return e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.REACT=1]="REACT",e[e.ANGULAR=2]="ANGULAR",e[e.ANDROID=3]="ANDROID",e[e.IOS=4]="IOS",e[e.FLUTTER=5]="FLUTTER",e[e.REACT_NATIVE=6]="REACT_NATIVE",e[e.UNITY=7]="UNITY",e[e.GO=8]="GO",e[e.PLAIN_JAVASCRIPT=9]="PLAIN_JAVASCRIPT",e}(Ki||{}),fv=function(e){return e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.USER_MUTED=1]="USER_MUTED",e[e.PERMISSION_REVOKED=2]="PERMISSION_REVOKED",e[e.MODERATION=3]="MODERATION",e}(fv||{}),KT=function(e){return e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.SHUTTING_DOWN=1]="SHUTTING_DOWN",e[e.REBALANCE=2]="REBALANCE",e}(KT||{}),hv=function(e){return e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.ENDED=1]="ENDED",e[e.LIVE_ENDED=2]="LIVE_ENDED",e[e.KICKED=3]="KICKED",e[e.SESSION_ENDED=4]="SESSION_ENDED",e}(hv||{}),ee=function(e){return e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.DISCONNECT=1]="DISCONNECT",e[e.FAST=2]="FAST",e[e.REJOIN=3]="REJOIN",e[e.MIGRATE=4]="MIGRATE",e}(ee||{}),JT=function(e){return e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.NONE=1]="NONE",e[e.LIGHT=2]="LIGHT",e[e.MODERATE=3]="MODERATE",e[e.SEVERE=4]="SEVERE",e[e.CRITICAL=5]="CRITICAL",e[e.EMERGENCY=6]="EMERGENCY",e[e.SHUTDOWN=7]="SHUTDOWN",e}(JT||{}),YT=function(e){return e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.NOMINAL=1]="NOMINAL",e[e.FAIR=2]="FAIR",e[e.SERIOUS=3]="SERIOUS",e[e.CRITICAL=4]="CRITICAL",e}(YT||{}),lg=class extends T{constructor(){super("stream.video.sfu.models.CallState",[{no:1,name:"participants",kind:"message",repeat:1,T:()=>Yi},{no:2,name:"started_at",kind:"message",T:()=>Po},{no:3,name:"participant_count",kind:"message",T:()=>ZT},{no:4,name:"pins",kind:"message",repeat:1,T:()=>QT}])}},lF=new lg,dg=class extends T{constructor(){super("stream.video.sfu.models.ParticipantCount",[{no:1,name:"total",kind:"scalar",T:13},{no:2,name:"anonymous",kind:"scalar",T:13}])}},ZT=new dg,fg=class extends T{constructor(){super("stream.video.sfu.models.Pin",[{no:1,name:"user_id",kind:"scalar",T:9},{no:2,name:"session_id",kind:"scalar",T:9}])}},QT=new fg,hg=class extends T{constructor(){super("stream.video.sfu.models.Participant",[{no:1,name:"user_id",kind:"scalar",T:9},{no:2,name:"session_id",kind:"scalar",T:9},{no:3,name:"published_tracks",kind:"enum",repeat:1,T:()=>["stream.video.sfu.models.TrackType",I,"TRACK_TYPE_"]},{no:4,name:"joined_at",kind:"message",T:()=>Po},{no:5,name:"track_lookup_prefix",kind:"scalar",T:9},{no:6,name:"connection_quality",kind:"enum",T:()=>["stream.video.sfu.models.ConnectionQuality",dv,"CONNECTION_QUALITY_"]},{no:7,name:"is_speaking",kind:"scalar",T:8},{no:8,name:"is_dominant_speaker",kind:"scalar",T:8},{no:9,name:"audio_level",kind:"scalar",T:2},{no:10,name:"name",kind:"scalar",T:9},{no:11,name:"image",kind:"scalar",T:9},{no:12,name:"custom",kind:"message",T:()=>ml},{no:13,name:"roles",kind:"scalar",repeat:2,T:9}])}},Yi=new hg,pg=class extends T{constructor(){super("stream.video.sfu.models.StreamQuality",[{no:1,name:"video_quality",kind:"enum",T:()=>["stream.video.sfu.models.VideoQuality",Wi,"VIDEO_QUALITY_"]},{no:2,name:"user_id",kind:"scalar",T:9}])}},_7=new pg,mg=class extends T{constructor(){super("stream.video.sfu.models.VideoDimension",[{no:1,name:"width",kind:"scalar",T:13},{no:2,name:"height",kind:"scalar",T:13}])}},XT=new mg,gg=class extends T{constructor(){super("stream.video.sfu.models.VideoLayer",[{no:1,name:"rid",kind:"scalar",T:9},{no:2,name:"video_dimension",kind:"message",T:()=>XT},{no:4,name:"bitrate",kind:"scalar",T:13},{no:5,name:"fps",kind:"scalar",T:13},{no:6,name:"quality",kind:"enum",T:()=>["stream.video.sfu.models.VideoQuality",Wi,"VIDEO_QUALITY_"]}])}},dF=new gg,yg=class extends T{constructor(){super("stream.video.sfu.models.PublishOptions",[{no:1,name:"codecs",kind:"message",repeat:1,T:()=>e0}])}},fF=new yg,vg=class extends T{constructor(){super("stream.video.sfu.models.PublishOption",[{no:1,name:"track_type",kind:"enum",T:()=>["stream.video.sfu.models.TrackType",I,"TRACK_TYPE_"]},{no:2,name:"codec",kind:"message",T:()=>Tl},{no:3,name:"bitrate",kind:"scalar",T:5},{no:4,name:"fps",kind:"scalar",T:5},{no:5,name:"max_spatial_layers",kind:"scalar",T:5},{no:6,name:"max_temporal_layers",kind:"scalar",T:5}])}},e0=new vg,bg=class extends T{constructor(){super("stream.video.sfu.models.Codec",[{no:11,name:"payload_type",kind:"scalar",T:13},{no:10,name:"name",kind:"scalar",T:9},{no:14,name:"clock_rate",kind:"scalar",T:13},{no:13,name:"encoding_parameters",kind:"scalar",T:9},{no:12,name:"fmtp",kind:"scalar",T:9}])}},Tl=new bg,hF=class extends T{constructor(){super("stream.video.sfu.models.ICETrickle",[{no:1,name:"peer_type",kind:"enum",T:()=>["stream.video.sfu.models.PeerType",Ze,"PEER_TYPE_"]},{no:2,name:"ice_candidate",kind:"scalar",T:9},{no:3,name:"session_id",kind:"scalar",T:9}])}},t0=new hF,Eg=class extends T{constructor(){super("stream.video.sfu.models.TrackInfo",[{no:1,name:"track_id",kind:"scalar",T:9},{no:2,name:"track_type",kind:"enum",T:()=>["stream.video.sfu.models.TrackType",I,"TRACK_TYPE_"]},{no:5,name:"layers",kind:"message",repeat:1,T:()=>dF},{no:6,name:"mid",kind:"scalar",T:9},{no:7,name:"dtx",kind:"scalar",T:8},{no:8,name:"stereo",kind:"scalar",T:8},{no:9,name:"red",kind:"scalar",T:8},{no:10,name:"muted",kind:"scalar",T:8}])}},pv=new Eg,pF=class extends T{constructor(){super("stream.video.sfu.models.Error",[{no:1,name:"code",kind:"enum",T:()=>["stream.video.sfu.models.ErrorCode",Il,"ERROR_CODE_"]},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"should_retry",kind:"scalar",T:8}])}},on=new pF,Cg=class extends T{constructor(){super("stream.video.sfu.models.ClientDetails",[{no:1,name:"sdk",kind:"message",T:()=>gF},{no:2,name:"os",kind:"message",T:()=>yF},{no:3,name:"browser",kind:"message",T:()=>vF},{no:4,name:"device",kind:"message",T:()=>bF}])}},mF=new Cg,Sg=class extends T{constructor(){super("stream.video.sfu.models.Sdk",[{no:1,name:"type",kind:"enum",T:()=>["stream.video.sfu.models.SdkType",Ki,"SDK_TYPE_"]},{no:2,name:"major",kind:"scalar",T:9},{no:3,name:"minor",kind:"scalar",T:9},{no:4,name:"patch",kind:"scalar",T:9}])}},gF=new Sg,wg=class extends T{constructor(){super("stream.video.sfu.models.OS",[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"version",kind:"scalar",T:9},{no:3,name:"architecture",kind:"scalar",T:9}])}},yF=new wg,Dg=class extends T{constructor(){super("stream.video.sfu.models.Browser",[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"version",kind:"scalar",T:9}])}},vF=new Dg,Ig=class extends T{constructor(){super("stream.video.sfu.models.Device",[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"version",kind:"scalar",T:9}])}},bF=new Ig,Tg=class extends T{constructor(){super("stream.video.sfu.models.Call",[{no:1,name:"type",kind:"scalar",T:9},{no:2,name:"id",kind:"scalar",T:9},{no:3,name:"created_by_user_id",kind:"scalar",T:9},{no:4,name:"host_user_id",kind:"scalar",T:9},{no:5,name:"custom",kind:"message",T:()=>ml},{no:6,name:"created_at",kind:"message",T:()=>Po},{no:7,name:"updated_at",kind:"message",T:()=>Po}])}},M7=new Tg,_g=class extends T{constructor(){super("stream.video.sfu.models.CallGrants",[{no:1,name:"can_publish_audio",kind:"scalar",T:8},{no:2,name:"can_publish_video",kind:"scalar",T:8},{no:3,name:"can_screenshare",kind:"scalar",T:8}])}},EF=new _g,Rg=class extends T{constructor(){super("stream.video.sfu.models.InputDevices",[{no:1,name:"available_devices",kind:"scalar",repeat:2,T:9},{no:2,name:"current_device",kind:"scalar",T:9},{no:3,name:"is_permitted",kind:"scalar",T:8}])}},AT=new Rg,Ng=class extends T{constructor(){super("stream.video.sfu.models.AndroidState",[{no:1,name:"thermal_state",kind:"enum",T:()=>["stream.video.sfu.models.AndroidThermalState",JT,"ANDROID_THERMAL_STATE_"]},{no:2,name:"is_power_saver_mode",kind:"scalar",T:8}])}},CF=new Ng,Mg=class extends T{constructor(){super("stream.video.sfu.models.AppleState",[{no:1,name:"thermal_state",kind:"enum",T:()=>["stream.video.sfu.models.AppleThermalState",YT,"APPLE_THERMAL_STATE_"]},{no:2,name:"is_low_power_mode_enabled",kind:"scalar",T:8}])}},SF=new Mg;var Ag=class extends T{constructor(){super("stream.video.sfu.signal.StartNoiseCancellationRequest",[{no:1,name:"session_id",kind:"scalar",T:9}])}},wF=new Ag,xg=class extends T{constructor(){super("stream.video.sfu.signal.StartNoiseCancellationResponse",[{no:1,name:"error",kind:"message",T:()=>on}])}},DF=new xg,kg=class extends T{constructor(){super("stream.video.sfu.signal.StopNoiseCancellationRequest",[{no:1,name:"session_id",kind:"scalar",T:9}])}},IF=new kg,Og=class extends T{constructor(){super("stream.video.sfu.signal.StopNoiseCancellationResponse",[{no:1,name:"error",kind:"message",T:()=>on}])}},TF=new Og,Pg=class extends T{constructor(){super("stream.video.sfu.signal.Reconnection",[{no:1,name:"time_seconds",kind:"scalar",T:2},{no:2,name:"strategy",kind:"enum",T:()=>["stream.video.sfu.models.WebsocketReconnectStrategy",ee,"WEBSOCKET_RECONNECT_STRATEGY_"]}])}},_F=new Pg,Lg=class extends T{constructor(){super("stream.video.sfu.signal.Telemetry",[{no:1,name:"connection_time_seconds",kind:"scalar",oneof:"data",T:2},{no:2,name:"reconnection",kind:"message",oneof:"data",T:()=>_F}])}},RF=new Lg,Fg=class extends T{constructor(){super("stream.video.sfu.signal.SendStatsRequest",[{no:1,name:"session_id",kind:"scalar",T:9},{no:2,name:"subscriber_stats",kind:"scalar",T:9},{no:3,name:"publisher_stats",kind:"scalar",T:9},{no:4,name:"webrtc_version",kind:"scalar",T:9},{no:5,name:"sdk",kind:"scalar",T:9},{no:6,name:"sdk_version",kind:"scalar",T:9},{no:7,name:"audio_devices",kind:"message",T:()=>AT},{no:8,name:"video_devices",kind:"message",T:()=>AT},{no:9,name:"android",kind:"message",oneof:"deviceState",T:()=>CF},{no:10,name:"apple",kind:"message",oneof:"deviceState",T:()=>SF},{no:11,name:"telemetry",kind:"message",T:()=>RF}])}},NF=new Fg,jg=class extends T{constructor(){super("stream.video.sfu.signal.SendStatsResponse",[{no:1,name:"error",kind:"message",T:()=>on}])}},MF=new jg,Ug=class extends T{constructor(){super("stream.video.sfu.signal.ICERestartRequest",[{no:1,name:"session_id",kind:"scalar",T:9},{no:2,name:"peer_type",kind:"enum",T:()=>["stream.video.sfu.models.PeerType",Ze,"PEER_TYPE_"]}])}},AF=new Ug,Vg=class extends T{constructor(){super("stream.video.sfu.signal.ICERestartResponse",[{no:1,name:"error",kind:"message",T:()=>on}])}},xF=new Vg,Bg=class extends T{constructor(){super("stream.video.sfu.signal.UpdateMuteStatesRequest",[{no:1,name:"session_id",kind:"scalar",T:9},{no:3,name:"mute_states",kind:"message",repeat:1,T:()=>PF}])}},kF=new Bg,$g=class extends T{constructor(){super("stream.video.sfu.signal.UpdateMuteStatesResponse",[{no:4,name:"error",kind:"message",T:()=>on}])}},OF=new $g,Hg=class extends T{constructor(){super("stream.video.sfu.signal.TrackMuteState",[{no:1,name:"track_type",kind:"enum",T:()=>["stream.video.sfu.models.TrackType",I,"TRACK_TYPE_"]},{no:2,name:"muted",kind:"scalar",T:8}])}},PF=new Hg,zg=class extends T{constructor(){super("stream.video.sfu.signal.AudioMuteChanged",[{no:1,name:"muted",kind:"scalar",T:8}])}};new zg;var qg=class extends T{constructor(){super("stream.video.sfu.signal.VideoMuteChanged",[{no:2,name:"muted",kind:"scalar",T:8}])}};new qg;var Gg=class extends T{constructor(){super("stream.video.sfu.signal.UpdateSubscriptionsRequest",[{no:2,name:"session_id",kind:"scalar",T:9},{no:3,name:"tracks",kind:"message",repeat:1,T:()=>mv}])}},LF=new Gg,Wg=class extends T{constructor(){super("stream.video.sfu.signal.UpdateSubscriptionsResponse",[{no:4,name:"error",kind:"message",T:()=>on}])}},FF=new Wg,Kg=class extends T{constructor(){super("stream.video.sfu.signal.TrackSubscriptionDetails",[{no:1,name:"user_id",kind:"scalar",T:9},{no:2,name:"session_id",kind:"scalar",T:9},{no:3,name:"track_type",kind:"enum",T:()=>["stream.video.sfu.models.TrackType",I,"TRACK_TYPE_"]},{no:4,name:"dimension",kind:"message",T:()=>XT}])}},mv=new Kg,Jg=class extends T{constructor(){super("stream.video.sfu.signal.SendAnswerRequest",[{no:1,name:"peer_type",kind:"enum",T:()=>["stream.video.sfu.models.PeerType",Ze,"PEER_TYPE_"]},{no:2,name:"sdp",kind:"scalar",T:9},{no:3,name:"session_id",kind:"scalar",T:9}])}},jF=new Jg,Yg=class extends T{constructor(){super("stream.video.sfu.signal.SendAnswerResponse",[{no:4,name:"error",kind:"message",T:()=>on}])}},UF=new Yg,Zg=class extends T{constructor(){super("stream.video.sfu.signal.ICETrickleResponse",[{no:4,name:"error",kind:"message",T:()=>on}])}},VF=new Zg,Qg=class extends T{constructor(){super("stream.video.sfu.signal.SetPublisherRequest",[{no:1,name:"sdp",kind:"scalar",T:9},{no:2,name:"session_id",kind:"scalar",T:9},{no:3,name:"tracks",kind:"message",repeat:1,T:()=>pv}])}},BF=new Qg,Xg=class extends T{constructor(){super("stream.video.sfu.signal.SetPublisherResponse",[{no:1,name:"sdp",kind:"scalar",T:9},{no:2,name:"session_id",kind:"scalar",T:9},{no:3,name:"ice_restart",kind:"scalar",T:8},{no:4,name:"error",kind:"message",T:()=>on}])}},$F=new Xg,Xm=new mo("stream.video.sfu.signal.SignalServer",[{name:"SetPublisher",options:{},I:BF,O:$F},{name:"SendAnswer",options:{},I:jF,O:UF},{name:"IceTrickle",options:{},I:t0,O:VF},{name:"UpdateSubscriptions",options:{},I:LF,O:FF},{name:"UpdateMuteStates",options:{},I:kF,O:OF},{name:"IceRestart",options:{},I:AF,O:xF},{name:"SendStats",options:{},I:NF,O:MF},{name:"StartNoiseCancellation",options:{},I:wF,O:DF},{name:"StopNoiseCancellation",options:{},I:IF,O:TF}]),ey=class extends T{constructor(){super("stream.video.sfu.event.SfuEvent",[{no:1,name:"subscriber_offer",kind:"message",oneof:"eventPayload",T:()=>oj},{no:2,name:"publisher_answer",kind:"message",oneof:"eventPayload",T:()=>aj},{no:3,name:"connection_quality_changed",kind:"message",oneof:"eventPayload",T:()=>cj},{no:4,name:"audio_level_changed",kind:"message",oneof:"eventPayload",T:()=>fj},{no:5,name:"ice_trickle",kind:"message",oneof:"eventPayload",T:()=>t0},{no:6,name:"change_publish_quality",kind:"message",oneof:"eventPayload",T:()=>gj},{no:10,name:"participant_joined",kind:"message",oneof:"eventPayload",T:()=>rj},{no:11,name:"participant_left",kind:"message",oneof:"eventPayload",T:()=>ij},{no:12,name:"dominant_speaker_changed",kind:"message",oneof:"eventPayload",T:()=>lj},{no:13,name:"join_response",kind:"message",oneof:"eventPayload",T:()=>nj},{no:14,name:"health_check_response",kind:"message",oneof:"eventPayload",T:()=>ZF},{no:16,name:"track_published",kind:"message",oneof:"eventPayload",T:()=>QF},{no:17,name:"track_unpublished",kind:"message",oneof:"eventPayload",T:()=>XF},{no:18,name:"error",kind:"message",oneof:"eventPayload",T:()=>WF},{no:19,name:"call_grants_updated",kind:"message",oneof:"eventPayload",T:()=>yj},{no:20,name:"go_away",kind:"message",oneof:"eventPayload",T:()=>vj},{no:21,name:"ice_restart",kind:"message",oneof:"eventPayload",T:()=>KF},{no:22,name:"pins_updated",kind:"message",oneof:"eventPayload",T:()=>GF},{no:23,name:"call_ended",kind:"message",oneof:"eventPayload",T:()=>bj},{no:24,name:"participant_updated",kind:"message",oneof:"eventPayload",T:()=>sj},{no:25,name:"participant_migration_complete",kind:"message",oneof:"eventPayload",T:()=>qF},{no:26,name:"codec_negotiation_complete",kind:"message",oneof:"eventPayload",T:()=>zF},{no:27,name:"change_publish_options",kind:"message",oneof:"eventPayload",T:()=>HF}])}},xT=new ey,ty=class extends T{constructor(){super("stream.video.sfu.event.ChangePublishOptions",[{no:1,name:"publish_option",kind:"message",T:()=>e0}])}},HF=new ty,ny=class extends T{constructor(){super("stream.video.sfu.event.CodecNegotiationComplete",[])}},zF=new ny,ry=class extends T{constructor(){super("stream.video.sfu.event.ParticipantMigrationComplete",[])}},qF=new ry,iy=class extends T{constructor(){super("stream.video.sfu.event.PinsChanged",[{no:1,name:"pins",kind:"message",repeat:1,T:()=>QT}])}},GF=new iy,sy=class extends T{constructor(){super("stream.video.sfu.event.Error",[{no:4,name:"error",kind:"message",T:()=>on},{no:5,name:"reconnect_strategy",kind:"enum",T:()=>["stream.video.sfu.models.WebsocketReconnectStrategy",ee,"WEBSOCKET_RECONNECT_STRATEGY_"]}])}},WF=new sy,oy=class extends T{constructor(){super("stream.video.sfu.event.ICETrickle",[{no:1,name:"peer_type",kind:"enum",T:()=>["stream.video.sfu.models.PeerType",Ze,"PEER_TYPE_"]},{no:2,name:"ice_candidate",kind:"scalar",T:9}])}},A7=new oy,ay=class extends T{constructor(){super("stream.video.sfu.event.ICERestart",[{no:1,name:"peer_type",kind:"enum",T:()=>["stream.video.sfu.models.PeerType",Ze,"PEER_TYPE_"]}])}},KF=new ay,cy=class extends T{constructor(){super("stream.video.sfu.event.SfuRequest",[{no:1,name:"join_request",kind:"message",oneof:"requestPayload",T:()=>n0},{no:2,name:"health_check_request",kind:"message",oneof:"requestPayload",T:()=>YF},{no:3,name:"leave_call_request",kind:"message",oneof:"requestPayload",T:()=>JF}])}},Mo=new cy,uy=class extends T{constructor(){super("stream.video.sfu.event.LeaveCallRequest",[{no:1,name:"session_id",kind:"scalar",T:9},{no:2,name:"reason",kind:"scalar",T:9}])}},JF=new uy,ly=class extends T{constructor(){super("stream.video.sfu.event.HealthCheckRequest",[])}},YF=new ly,dy=class extends T{constructor(){super("stream.video.sfu.event.HealthCheckResponse",[{no:1,name:"participant_count",kind:"message",T:()=>ZT}])}},ZF=new dy,fy=class extends T{constructor(){super("stream.video.sfu.event.TrackPublished",[{no:1,name:"user_id",kind:"scalar",T:9},{no:2,name:"session_id",kind:"scalar",T:9},{no:3,name:"type",kind:"enum",T:()=>["stream.video.sfu.models.TrackType",I,"TRACK_TYPE_"]},{no:4,name:"participant",kind:"message",T:()=>Yi}])}},QF=new fy,hy=class extends T{constructor(){super("stream.video.sfu.event.TrackUnpublished",[{no:1,name:"user_id",kind:"scalar",T:9},{no:2,name:"session_id",kind:"scalar",T:9},{no:3,name:"type",kind:"enum",T:()=>["stream.video.sfu.models.TrackType",I,"TRACK_TYPE_"]},{no:4,name:"cause",kind:"enum",T:()=>["stream.video.sfu.models.TrackUnpublishReason",fv,"TRACK_UNPUBLISH_REASON_"]},{no:5,name:"participant",kind:"message",T:()=>Yi}])}},XF=new hy,py=class extends T{constructor(){super("stream.video.sfu.event.JoinRequest",[{no:1,name:"token",kind:"scalar",T:9},{no:2,name:"session_id",kind:"scalar",T:9},{no:3,name:"subscriber_sdp",kind:"scalar",T:9},{no:8,name:"publisher_sdp",kind:"scalar",T:9},{no:4,name:"client_details",kind:"message",T:()=>mF},{no:5,name:"migration",kind:"message",T:()=>tj},{no:6,name:"fast_reconnect",kind:"scalar",T:8},{no:7,name:"reconnect_details",kind:"message",T:()=>ej}])}},n0=new py,my=class extends T{constructor(){super("stream.video.sfu.event.ReconnectDetails",[{no:1,name:"strategy",kind:"enum",T:()=>["stream.video.sfu.models.WebsocketReconnectStrategy",ee,"WEBSOCKET_RECONNECT_STRATEGY_"]},{no:3,name:"announced_tracks",kind:"message",repeat:1,T:()=>pv},{no:4,name:"subscriptions",kind:"message",repeat:1,T:()=>mv},{no:5,name:"reconnect_attempt",kind:"scalar",T:13},{no:6,name:"from_sfu_id",kind:"scalar",T:9},{no:7,name:"previous_session_id",kind:"scalar",T:9}])}},ej=new my,gy=class extends T{constructor(){super("stream.video.sfu.event.Migration",[{no:1,name:"from_sfu_id",kind:"scalar",T:9},{no:2,name:"announced_tracks",kind:"message",repeat:1,T:()=>pv},{no:3,name:"subscriptions",kind:"message",repeat:1,T:()=>mv}])}},tj=new gy,yy=class extends T{constructor(){super("stream.video.sfu.event.JoinResponse",[{no:1,name:"call_state",kind:"message",T:()=>lF},{no:2,name:"reconnected",kind:"scalar",T:8},{no:3,name:"fast_reconnect_deadline_seconds",kind:"scalar",T:5},{no:4,name:"publish_options",kind:"message",T:()=>fF}])}},nj=new yy,vy=class extends T{constructor(){super("stream.video.sfu.event.ParticipantJoined",[{no:1,name:"call_cid",kind:"scalar",T:9},{no:2,name:"participant",kind:"message",T:()=>Yi}])}},rj=new vy,by=class extends T{constructor(){super("stream.video.sfu.event.ParticipantLeft",[{no:1,name:"call_cid",kind:"scalar",T:9},{no:2,name:"participant",kind:"message",T:()=>Yi}])}},ij=new by,Ey=class extends T{constructor(){super("stream.video.sfu.event.ParticipantUpdated",[{no:1,name:"call_cid",kind:"scalar",T:9},{no:2,name:"participant",kind:"message",T:()=>Yi}])}},sj=new Ey,Cy=class extends T{constructor(){super("stream.video.sfu.event.SubscriberOffer",[{no:1,name:"ice_restart",kind:"scalar",T:8},{no:2,name:"sdp",kind:"scalar",T:9}])}},oj=new Cy,Sy=class extends T{constructor(){super("stream.video.sfu.event.PublisherAnswer",[{no:1,name:"sdp",kind:"scalar",T:9}])}},aj=new Sy,wy=class extends T{constructor(){super("stream.video.sfu.event.ConnectionQualityChanged",[{no:1,name:"connection_quality_updates",kind:"message",repeat:1,T:()=>uj}])}},cj=new wy,Dy=class extends T{constructor(){super("stream.video.sfu.event.ConnectionQualityInfo",[{no:1,name:"user_id",kind:"scalar",T:9},{no:2,name:"session_id",kind:"scalar",T:9},{no:3,name:"connection_quality",kind:"enum",T:()=>["stream.video.sfu.models.ConnectionQuality",dv,"CONNECTION_QUALITY_"]}])}},uj=new Dy,Iy=class extends T{constructor(){super("stream.video.sfu.event.DominantSpeakerChanged",[{no:1,name:"user_id",kind:"scalar",T:9},{no:2,name:"session_id",kind:"scalar",T:9}])}},lj=new Iy,Ty=class extends T{constructor(){super("stream.video.sfu.event.AudioLevel",[{no:1,name:"user_id",kind:"scalar",T:9},{no:2,name:"session_id",kind:"scalar",T:9},{no:3,name:"level",kind:"scalar",T:2},{no:4,name:"is_speaking",kind:"scalar",T:8}])}},dj=new Ty,_y=class extends T{constructor(){super("stream.video.sfu.event.AudioLevelChanged",[{no:1,name:"audio_levels",kind:"message",repeat:1,T:()=>dj}])}},fj=new _y,Ry=class extends T{constructor(){super("stream.video.sfu.event.AudioSender",[{no:2,name:"codec",kind:"message",T:()=>Tl}])}},hj=new Ry,Ny=class extends T{constructor(){super("stream.video.sfu.event.VideoLayerSetting",[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"active",kind:"scalar",T:8},{no:3,name:"max_bitrate",kind:"scalar",T:5},{no:4,name:"scale_resolution_down_by",kind:"scalar",T:2},{no:6,name:"codec",kind:"message",T:()=>Tl},{no:7,name:"max_framerate",kind:"scalar",T:13},{no:8,name:"scalability_mode",kind:"scalar",T:9}])}},pj=new Ny,My=class extends T{constructor(){super("stream.video.sfu.event.VideoSender",[{no:2,name:"codec",kind:"message",T:()=>Tl},{no:3,name:"layers",kind:"message",repeat:1,T:()=>pj}])}},mj=new My,Ay=class extends T{constructor(){super("stream.video.sfu.event.ChangePublishQuality",[{no:1,name:"audio_senders",kind:"message",repeat:1,T:()=>hj},{no:2,name:"video_senders",kind:"message",repeat:1,T:()=>mj}])}},gj=new Ay,xy=class extends T{constructor(){super("stream.video.sfu.event.CallGrantsUpdated",[{no:1,name:"current_grants",kind:"message",T:()=>EF},{no:2,name:"message",kind:"scalar",T:9}])}},yj=new xy,ky=class extends T{constructor(){super("stream.video.sfu.event.GoAway",[{no:1,name:"reason",kind:"enum",T:()=>["stream.video.sfu.models.GoAwayReason",KT,"GO_AWAY_REASON_"]}])}},vj=new ky,Oy=class extends T{constructor(){super("stream.video.sfu.event.CallEnded",[{no:1,name:"reason",kind:"enum",T:()=>["stream.video.sfu.models.CallEndedReason",hv,"CALL_ENDED_REASON_"]}])}},bj=new Oy;var _e=function(e){return e.UNKNOWN="UNKNOWN",e.VISIBLE="VISIBLE",e.INVISIBLE="INVISIBLE",e}(_e||{}),Xn=function(e){return e[e.IMMEDIATE=20]="IMMEDIATE",e[e.FAST=100]="FAST",e[e.MEDIUM=600]="MEDIUM",e[e.SLOW=1200]="SLOW",e}(Xn||{}),Py=class{constructor(t){this._transport=t,this.typeName=Xm.typeName,this.methods=Xm.methods,this.options=Xm.options}setPublisher(t,n){let r=this.methods[0],i=this._transport.mergeOptions(n);return Ft("unary",this._transport,r,i,t)}sendAnswer(t,n){let r=this.methods[1],i=this._transport.mergeOptions(n);return Ft("unary",this._transport,r,i,t)}iceTrickle(t,n){let r=this.methods[2],i=this._transport.mergeOptions(n);return Ft("unary",this._transport,r,i,t)}updateSubscriptions(t,n){let r=this.methods[3],i=this._transport.mergeOptions(n);return Ft("unary",this._transport,r,i,t)}updateMuteStates(t,n){let r=this.methods[4],i=this._transport.mergeOptions(n);return Ft("unary",this._transport,r,i,t)}iceRestart(t,n){let r=this.methods[5],i=this._transport.mergeOptions(n);return Ft("unary",this._transport,r,i,t)}sendStats(t,n){let r=this.methods[6],i=this._transport.mergeOptions(n);return Ft("unary",this._transport,r,i,t)}startNoiseCancellation(t,n){let r=this.methods[7],i=this._transport.mergeOptions(n);return Ft("unary",this._transport,r,i,t)}stopNoiseCancellation(t,n){let r=this.methods[8],i=this._transport.mergeOptions(n);return Ft("unary",this._transport,r,i,t)}},Ej={baseUrl:"",sendJson:!0,timeout:5*1e3,jsonOptions:{ignoreUnknownFields:!0}},Cj=e=>({interceptUnary(t,n,r,i){return i.meta=E(E({},i.meta),e),t(n,r,i)}}),Sj=(e,t)=>({interceptUnary:(n,r,i,s)=>(e(t,`Calling SFU RPC method ${r.name}`,{input:i,options:s}),n(r,i,s))}),wj=e=>{let t=new _o(E(E({},Ej),e));return new Py(t)},sn=e=>new Promise(t=>setTimeout(t,e));function Ly(e){return e&&(Object.prototype.toString.call(e)==="[object Function]"||typeof e=="function"||e instanceof Function)}var zi={TOKEN_EXPIRED:40,WS_CLOSED_SUCCESS:1e3,WS_CLOSED_ABRUPTLY:1006,WS_POLICY_VIOLATION:1008};function Lo(e){let t=Math.min(500+e*2e3,5e3),n=Math.min(Math.max(250,(e-1)*2e3),5e3);return Math.floor(Math.random()*(t-n)+n)}function Oo(){return r0()}function Ao(e){let t="";for(let n=0;n<e.length;n++)t+=e[n].toString(16).padStart(2,"0");return t}function r0(){let e=Tj(16);return e[6]=e[6]&15|64,e[8]=e[8]&191|128,Ao(e.subarray(0,4))+"-"+Ao(e.subarray(4,6))+"-"+Ao(e.subarray(6,8))+"-"+Ao(e.subarray(8,10))+"-"+Ao(e.subarray(10,16))}function Dj(e){let t=Math.pow(2,8*e.byteLength/e.length);for(let n=0;n<e.length;n++)e[n]=Math.random()*t}var Ij=typeof crypto<"u"&&typeof crypto?.getRandomValues<"u"?crypto.getRandomValues.bind(crypto):typeof msCrypto<"u"?msCrypto.getRandomValues.bind(msCrypto):Dj;function Tj(e){let t=new Uint8Array(e);return Ij(t),t}function _j(e){let t={};if(!e)return t;try{Object.getOwnPropertyNames(e).forEach(n=>{t[n]=Object.getOwnPropertyDescriptor(e,n)})}catch{return{error:"failed to serialize the error"}}return t}function Rj(e){return g(this,null,function*(){let t={};return Promise.race([e,t]).then(n=>n===t,()=>!1)})}function Nj(e){let t=typeof navigator<"u"?navigator:typeof window<"u"&&window.navigator?window.navigator:void 0;return t?typeof t.onLine!="boolean"?!0:t.onLine:(e("warn","isOnline failed to access window.navigator and assume browser is online"),!0)}function gl(e){typeof window<"u"&&window.addEventListener&&(window.addEventListener("offline",e),window.addEventListener("online",e))}function gv(e){typeof window<"u"&&window.removeEventListener&&(window.removeEventListener("offline",e),window.removeEventListener("online",e))}var Le=()=>typeof navigator>"u"?!1:navigator.product?.toLowerCase()==="reactnative",kT=Object.freeze({trace:0,debug:1,info:2,warn:3,error:4}),i0,yv="info",s0=(e,t,...n)=>{let r;switch(e){case"error":if(Le()){t=`ERROR: ${t}`,r=console.info;break}r=console.error;break;case"warn":if(Le()){t=`WARN: ${t}`,r=console.info;break}r=console.warn;break;case"info":r=console.info;break;case"trace":r=console.trace;break;default:r=console.log;break}r(t,...n)},Mj=(e,t)=>{i0=e,t&&Aj(t)},Aj=e=>{yv=e},xj=()=>yv,fe=e=>{let t=i0||s0,n=(e||[]).filter(Boolean).join(":");return(i,s,...o)=>{kT[i]>=kT[yv]&&t(i,`[${n}]: ${s}`,...o)}},Tn=(e,t)=>g(void 0,null,function*(){let n=0,r;do{n>0&&(yield sn(Lo(n)));try{r=yield e()}catch(i){let s=i instanceof Ie&&i.code===le[le.cancelled],o=t?.aborted??!1;if(s||o)throw i;fe(["sfu-client","rpc"])("debug",`rpc failed (${n})`,i),n++}}while(!r||r.response.error?.shouldRetry);return r}),kj="1.11.3",[Oj,Pj,Lj]=kj.split("."),Fj={type:Ki.PLAIN_JAVASCRIPT,major:Oj,minor:Pj,patch:Lj},jj,Uj,Vj;var Fy=()=>Fj;var o0=()=>jj;var Bj=()=>Uj,$j=()=>Vj;var OT=()=>{if(Le())return{sdk:Fy(),os:o0(),device:Bj()};let e=new GT.UAParser(navigator.userAgent),{browser:t,os:n,device:r,cpu:i}=e.getResult();return{sdk:Fy(),browser:{name:t.name||navigator.userAgent,version:t.version||""},os:{name:n.name||"",version:n.version||"",architecture:i.architecture||""},device:{name:[r.vendor,r.model,r.type].filter(Boolean).join(" "),version:""}}},vv=()=>typeof navigator>"u"?!1:/^((?!chrome|android).)*safari/i.test(navigator.userAgent||""),_l=()=>typeof navigator>"u"?!1:navigator.userAgent?.includes("Firefox");var PT=(e,t,n)=>{if(!("getCapabilities"in RTCRtpReceiver))return;let r=RTCRtpReceiver.getCapabilities(e);if(!r)return;let i=[],s=[],o=[],a=`${e}/${t.toLowerCase()}`,c=n&&`${e}/${n.toLowerCase()}`;for(let u of r.codecs){let l=u.mimeType.toLowerCase();if(l===c)continue;if(!(l===a)){o.push(u);continue}if(l!=="video/h264"){i.push(u);continue}let h=u.sdpFmtpLine;if(!h||!h.includes("profile-level-id=42e01f")){s.push(u);continue}h.includes("packetization-mode=0")||!h.includes("packetization-mode")?i.unshift(u):i.push(u)}return[...i,...s,...o]},Hj=e=>g(void 0,null,function*(){let t=new RTCPeerConnection;t.addTransceiver("video",{direction:e}),t.addTransceiver("audio",{direction:e});let r=(yield t.createOffer()).sdp??"";return t.getTransceivers().forEach(i=>{i.stop?.()}),t.close(),r}),LT=e=>{if(Le()){let t=o0()?.name.toLowerCase();return t==="android"?eg(e,"vp8"):t==="ios"||t==="ipados"?"h264":eg(e,"h264")}return vv()?"h264":_l()?"vp8":eg(e,"vp8")},eg=(e,t)=>{if(!e||!("getCapabilities"in RTCRtpSender))return t;let n=RTCRtpSender.getCapabilities("video");if(!n||yl(e)&&(vv()||_l()))return t;let{codecs:r}=n,i=`video/${e}`.toLowerCase();return r.some(s=>s.mimeType.toLowerCase()===i)?e:t},yl=e=>e?(e=e.toLowerCase(),e==="vp9"||e==="av1"||e==="video/vp9"||e==="video/av1"):!1,zj={subscriberOffer:void 0,publisherAnswer:void 0,connectionQualityChanged:void 0,audioLevelChanged:void 0,iceTrickle:void 0,changePublishQuality:void 0,participantJoined:void 0,participantLeft:void 0,dominantSpeakerChanged:void 0,joinResponse:void 0,healthCheckResponse:void 0,trackPublished:void 0,trackUnpublished:void 0,error:void 0,callGrantsUpdated:void 0,goAway:void 0,iceRestart:void 0,pinsUpdated:void 0,callEnded:void 0,participantUpdated:void 0,participantMigrationComplete:void 0,codecNegotiationComplete:void 0,changePublishOptions:void 0},FT=e=>Object.prototype.hasOwnProperty.call(zj,e),jy=class{constructor(){this.logger=fe(["Dispatcher"]),this.subscribers={},this.dispatch=(t,n="0")=>{let r=t.eventPayload.oneofKind;if(!r)return;let i=t.eventPayload[r];this.logger("debug",`Dispatching ${r}, tag=${n}`,i);let s=this.subscribers[r];if(s)for(let o of s)try{o(i)}catch(a){this.logger("warn","Listener failed with error",a)}},this.on=(t,n)=>{var r;return((r=this.subscribers)[t]??(r[t]=[])).push(n),()=>{this.off(t,n)}},this.off=(t,n)=>{this.subscribers[t]=(this.subscribers[t]||[]).filter(r=>r!==n)},this.offAll=t=>{t?this.subscribers[t]=[]:this.subscribers={}}}},Uy=class{constructor(){this.subscriberCandidates=new Rn,this.publisherCandidates=new Rn,this.push=t=>{t.peerType===Ze.SUBSCRIBER?this.subscriberCandidates.next(t):t.peerType===Ze.PUBLISHER_UNSPECIFIED?this.publisherCandidates.next(t):fe(["sfu-client"])("warn","ICETrickle, Unknown peer type",t)}}};function a0(e){if(e.usernameFragment)return JSON.stringify(e.toJSON());{let t=e.candidate.split(" "),n=t.findIndex(i=>i==="ufrag")+1,r=t[n];return JSON.stringify(R(E({},e),{usernameFragment:r}))}}var qj={h264:{2160:5e6,1440:3e6,1080:2e6,720:125e4,540:75e4,360:4e5,default:125e4},vp8:{2160:5e6,1440:275e4,1080:2e6,720:125e4,540:6e5,360:35e4,default:125e4},vp9:{2160:3e6,1440:2e6,1080:15e5,720:125e4,540:5e5,360:275e3,default:125e4},av1:{2160:2e6,1440:155e4,1080:1e6,720:6e5,540:35e4,360:2e5,default:6e5}},Gj=(e,t)=>{let n=qj[e];if(!n)throw new Error(`Unknown codec: ${e}`);let r=n[t];if(!r){let s=Object.keys(n).map(Number).reduce((o,a)=>Math.abs(a-t)<Math.abs(o-t)?a:o);r=n[s]}return r??n.default},c0=125e4,Wj={bitrate:c0,width:1280,height:720},Kj={q:3e5,h:75e4,f:c0},Jj=e=>e?.filter(t=>t.rid==="f").map(t=>R(E({},t),{rid:"q"})),Yj=e=>e==="q"?Wi.LOW_UNSPECIFIED:e==="h"?Wi.MID:Wi.HIGH,Zj=(e,t=Wj,n,r)=>{let i=[],s=e.getSettings(),{width:o=0,height:a=0}=s,{scalabilityMode:c,bitrateDownscaleFactor:u=2,maxSimulcastLayers:l=3}=r||{},d=Qj(t,o,a,n,r),f=1,h=1,p=yl(n),m=p?3:Math.min(3,l);for(let y of["f","h","q"].slice(0,m)){let v={active:!0,rid:y,width:Math.round(o/f),height:Math.round(a/f),maxBitrate:Math.round(d/h)||Kj[y],maxFramerate:30};p?v.scalabilityMode=c||"L3T2_KEY":v.scaleResolutionDownBy=f,f*=2,h*=u,i.unshift(v)}return Xj(s,i)},Qj=(e,t,n,r,i)=>{let{width:s,height:o,bitrate:a}=e,{preferredBitrate:c}=i||{},u=t>n?n:t,l=c||(r?Gj(r,u):a);if(t<s||n<o){let d=t*n,f=s*o,h=d/f;return Math.round(l*h)}return l},Xj=(e,t)=>{let n,r=Math.max(e.width||0,e.height||0);r<=320?n=t.filter(s=>s.rid==="f"):r<=640?n=t.filter(s=>s.rid!=="h"):n=t;let i=["q","h","f"];return n.map((s,o)=>R(E({},s),{rid:i[o]}))},eU=(e,t,n=3e6)=>{let{screenShareSettings:r}=t||{},i=e.getSettings();return[{active:!0,rid:"q",width:i.width||0,height:i.height||0,scaleResolutionDownBy:1,maxBitrate:r?.maxBitrate??n,maxFramerate:r?.maxFramerate??30}]},vl=(e,t)=>{fe(["helpers"])("warn",t,e)},bv=e=>{switch(e){case I.SCREEN_SHARE:return"screenShareStream";case I.SCREEN_SHARE_AUDIO:return"screenShareAudioStream";case I.VIDEO:return"videoStream";case I.AUDIO:return"audioStream";case I.UNSPECIFIED:throw new Error("Track type is unspecified");default:vl(e,"Unknown track type")}},tU=e=>{switch(e){case"audio":return I.AUDIO;case"video":return I.VIDEO;case"screenshare":return I.SCREEN_SHARE;case"screenshare_audio":return I.SCREEN_SHARE_AUDIO;default:vl(e,"Unknown mute type")}},nU=e=>{switch(e){case"TRACK_TYPE_AUDIO":return I.AUDIO;case"TRACK_TYPE_VIDEO":return I.VIDEO;case"TRACK_TYPE_SCREEN_SHARE":return I.SCREEN_SHARE;case"TRACK_TYPE_SCREEN_SHARE_AUDIO":return I.SCREEN_SHARE_AUDIO;default:return}},pt=u0(iU),tg=u0(sU),Fo=new Map;function rU(e){return g(this,null,function*(){yield Fo.get(e)?.promise})}function u0(e){return function(n,r){let{cb:i,onContinued:s}=e(n,r),o=Fo.get(n);o?.onContinued();let a=o?o.promise.then(i,i):i();return Fo.set(n,{promise:a,onContinued:s}),a}}function iU(e,t){let n=!1;return{cb:()=>t().finally(()=>{n||Fo.delete(e)}),onContinued:()=>n=!0}}function sU(e,t){let n=new AbortController;return{cb:()=>n.signal.aborted?Promise.resolve("canceled"):t(n.signal).finally(()=>{n.signal.aborted||Fo.delete(e)}),onContinued:()=>n.abort()}}var oU=e=>typeof e=="function",Vt=e=>{let t,n;if(gt([e]).subscribe({next:([r])=>{t=r},error:r=>{n=r}}).unsubscribe(),n)throw n;return t},Ur=(e,t)=>{let n=oU(t)?t(Vt(e)):t;return e.next(n),n},ht=(e,t,n=r=>fe(["RxUtils"])("warn","An observable emitted an error",r))=>{let r=e.subscribe({next:t,error:n});return()=>{r.unsubscribe()}},aU=(e,t)=>{let n=Symbol();return ht(e,r=>{pt(n,()=>t(r))})};var V=function(e){return e.UNKNOWN="unknown",e.IDLE="idle",e.RINGING="ringing",e.JOINING="joining",e.JOINED="joined",e.LEFT="left",e.RECONNECTING="reconnecting",e.MIGRATING="migrating",e.RECONNECTING_FAILED="reconnecting-failed",e.OFFLINE="offline",e}(V||{}),Vy=class{constructor(){this.connectedUserSubject=new M(void 0),this.callsSubject=new M([]),this.setConnectedUser=t=>Ur(this.connectedUserSubject,t),this.setCalls=t=>Ur(this.callsSubject,t),this.registerCall=t=>{this.calls.find(n=>n.cid===t.cid)||this.setCalls(n=>[...n,t])},this.unregisterCall=t=>this.setCalls(n=>n.filter(r=>r!==t)),this.findCall=(t,n)=>this.calls.find(r=>r.type===t&&r.id===n),this.connectedUserSubject.subscribe(t=>g(this,null,function*(){if(!t){let n=fe(["client-state"]);for(let r of this.calls)r.state.callingState!==V.LEFT&&(n("info",`User disconnected, leaving call: ${r.cid}`),yield r.leave({reason:"client.disconnectUser() called"}).catch(i=>{n("error",`Error leaving call: ${r.cid}`,i)}))}}))}get connectedUser(){return Vt(this.connectedUserSubject)}get calls(){return Vt(this.callsSubject)}},By=class{constructor(t){this.getCurrentValue=Vt,this.connectedUser$=t.connectedUserSubject.asObservable(),this.calls$=t.callsSubject.asObservable()}get connectedUser(){return Vt(this.connectedUser$)}get calls(){return Vt(this.calls$)}},er=(...e)=>(t,n)=>{for(let r of e){let i=r(t,n);if(i!==0)return i}return 0};var l0=e=>t=>(n,r)=>e(n,r)?t(n,r):0;var qi=e=>e.publishedTracks.includes(I.VIDEO),fl=e=>e.publishedTracks.includes(I.AUDIO),Fr=e=>e.publishedTracks.includes(I.SCREEN_SHARE),cU=e=>e.publishedTracks.includes(I.SCREEN_SHARE_AUDIO);var Rl=(e,t)=>e.isDominantSpeaker&&!t.isDominantSpeaker?-1:!e.isDominantSpeaker&&t.isDominantSpeaker?1:0,Nl=(e,t)=>e.isSpeaking&&!t.isSpeaking?-1:!e.isSpeaking&&t.isSpeaking?1:0,d0=(e,t)=>Fr(e)&&!Fr(t)?-1:!Fr(e)&&Fr(t)?1:0,Ml=(e,t)=>qi(e)&&!qi(t)?-1:!qi(e)&&qi(t)?1:0,Al=(e,t)=>fl(e)&&!fl(t)?-1:!fl(e)&&fl(t)?1:0,Ev=(e,t)=>{if(e.pin&&t.pin){if(!e.pin.isLocalPin&&t.pin.isLocalPin)return-1;if(e.pin.isLocalPin&&!t.pin.isLocalPin)return 1;if(e.pin.pinnedAt>t.pin.pinnedAt)return-1;if(e.pin.pinnedAt<t.pin.pinnedAt)return 1}return e.pin&&!t.pin?-1:!e.pin&&t.pin?1:0},xl=e=>(t,n)=>t.reaction?.type===e&&n.reaction?.type!==e?-1:t.reaction?.type!==e&&n.reaction?.type===e?1:0,uU=(...e)=>(t,n)=>hl(t,e)&&!hl(n,e)?-1:!hl(t,e)&&hl(n,e)?1:0;var hl=(e,t)=>(e.roles||[]).some(n=>t.includes(n)),Cv=l0((e,t)=>e.viewportVisibilityState?.videoTrack===_e.INVISIBLE||t.viewportVisibilityState?.videoTrack===_e.INVISIBLE),lU=l0((e,t)=>e.viewportVisibilityState?.videoTrack===_e.INVISIBLE||e.viewportVisibilityState?.videoTrack===_e.UNKNOWN||t.viewportVisibilityState?.videoTrack===_e.INVISIBLE||t.viewportVisibilityState?.videoTrack===_e.UNKNOWN),bl=er(Ev,d0,Cv(er(Rl,Nl,xl("raised-hand"),Ml,Al))),x7=er(Ev,d0,Rl,Cv(er(Nl,xl("raised-hand"),Ml,Al))),k7=er(Ev,lU(er(Rl,Nl,xl("raised-hand"),Ml,Al))),jT=er(Cv(er(Rl,Nl,xl("raised-hand"),Ml,Al)),uU("admin","host","speaker")),ng={broadcasting:!1,hls:{playlist_url:""},rtmps:[]},$y=class{constructor(){this.backstageSubject=new M(!0),this.blockedUserIdsSubject=new M([]),this.createdAtSubject=new M(new Date),this.endedAtSubject=new M(void 0),this.startsAtSubject=new M(void 0),this.updatedAtSubject=new M(new Date),this.createdBySubject=new M(void 0),this.customSubject=new M({}),this.egressSubject=new M(void 0),this.ingressSubject=new M(void 0),this.recordingSubject=new M(!1),this.sessionSubject=new M(void 0),this.settingsSubject=new M(void 0),this.transcribingSubject=new M(!1),this.endedBySubject=new M(void 0),this.thumbnailsSubject=new M(void 0),this.membersSubject=new M([]),this.ownCapabilitiesSubject=new M([]),this.callingStateSubject=new M(V.UNKNOWN),this.startedAtSubject=new M(void 0),this.participantCountSubject=new M(0),this.anonymousParticipantCountSubject=new M(0),this.participantsSubject=new M([]),this.callStatsReportSubject=new M(void 0),this.orphanedTracks=[],this.logger=fe(["CallState"]),this.sortParticipantsBy=bl,this.setSortParticipantsBy=r=>{this.sortParticipantsBy=r,this.setCurrentValue(this.participantsSubject,i=>i)},this.getCurrentValue=Vt,this.setCurrentValue=Ur,this.setParticipantCount=r=>this.setCurrentValue(this.participantCountSubject,r),this.setStartedAt=r=>this.setCurrentValue(this.startedAtSubject,r),this.setAnonymousParticipantCount=r=>this.setCurrentValue(this.anonymousParticipantCountSubject,r),this.setParticipants=r=>this.setCurrentValue(this.participantsSubject,r),this.setCallingState=r=>this.setCurrentValue(this.callingStateSubject,r),this.setCallStatsReport=r=>this.setCurrentValue(this.callStatsReportSubject,r),this.setMembers=r=>{this.setCurrentValue(this.membersSubject,r)},this.setOwnCapabilities=r=>this.setCurrentValue(this.ownCapabilitiesSubject,r),this.setEndedAt=r=>this.setCurrentValue(this.endedAtSubject,r),this.findParticipantBySessionId=r=>this.participants.find(i=>i.sessionId===r),this.getParticipantLookupBySessionId=()=>this.participants.reduce((r,i)=>(r[i.sessionId]=i,r),{}),this.updateParticipant=(r,i)=>{let s=this.findParticipantBySessionId(r);if(!s){this.logger("warn",`Participant with sessionId ${r} not found`);return}let o=typeof i=="function"?i(s):i,a=E(E({},s),o);return this.setParticipants(c=>c.map(u=>u.sessionId===r?a:u))},this.updateOrAddParticipant=(r,i)=>this.setParticipants(s=>{let o=!0,a=s.map(c=>c.sessionId===r?(o=!1,E(E({},c),i)):c);return o&&a.push(i),a}),this.updateParticipants=r=>Object.keys(r).length===0?this.participants:this.setParticipants(i=>i.map(s=>{let o=r[s.sessionId];return o?E(E({},s),o):s})),this.updateParticipantTracks=(r,i)=>this.updateParticipants(Object.entries(i).reduce((s,[o,a])=>{a.dimension&&(a.dimension.height=Math.ceil(a.dimension.height),a.dimension.width=Math.ceil(a.dimension.width));let c=r==="videoTrack"?"videoDimension":r==="screenShareTrack"?"screenShareDimension":void 0;return c&&(s[o]={[c]:a.dimension}),s},{})),this.updateFromEvent=r=>{let i=this.eventHandlers[r.type];i&&i(r)},this.setServerSidePins=r=>{let i=r.reduce((s,o)=>(s[o.sessionId]=Date.now(),s),{});return this.setParticipants(s=>s.map(o=>{let a=i[o.sessionId];return a?R(E({},o),{pin:{isLocalPin:!1,pinnedAt:a}}):o.pin&&!o.pin.isLocalPin?R(E({},o),{pin:void 0}):o}))},this.registerOrphanedTrack=r=>{this.orphanedTracks.push(r)},this.removeOrphanedTrack=r=>{this.orphanedTracks=this.orphanedTracks.filter(i=>i.id!==r)},this.takeOrphanedTracks=r=>{let i=this.orphanedTracks.filter(s=>s.trackLookupPrefix===r);return i.length>0&&(this.orphanedTracks=this.orphanedTracks.filter(s=>s.trackLookupPrefix!==r)),i},this.updateFromCallResponse=r=>{this.setCurrentValue(this.backstageSubject,r.backstage),this.setCurrentValue(this.blockedUserIdsSubject,r.blocked_user_ids),this.setCurrentValue(this.createdAtSubject,new Date(r.created_at)),this.setCurrentValue(this.updatedAtSubject,new Date(r.updated_at)),this.setCurrentValue(this.startsAtSubject,r.starts_at?new Date(r.starts_at):void 0),this.setEndedAt(r.ended_at?new Date(r.ended_at):void 0),this.setCurrentValue(this.createdBySubject,r.created_by),this.setCurrentValue(this.customSubject,r.custom),this.setCurrentValue(this.egressSubject,r.egress),this.setCurrentValue(this.ingressSubject,r.ingress),this.setCurrentValue(this.recordingSubject,r.recording);let i=this.setCurrentValue(this.sessionSubject,r.session);this.updateParticipantCountFromSession(i),this.setCurrentValue(this.settingsSubject,r.settings),this.setCurrentValue(this.transcribingSubject,r.transcribing),this.setCurrentValue(this.thumbnailsSubject,r.thumbnails)},this.updateFromSfuCallState=(r,i,s)=>{let{participants:o,participantCount:a,startedAt:c,pins:u}=r,l=s?.announcedTracks.map(d=>d.trackType)??[];this.setParticipants(()=>{let d=this.getParticipantLookupBySessionId();return o.map(f=>{let h=d[f.sessionId],p=f.sessionId===i;return Object.assign({},h,f,{isLocalParticipant:p,publishedTracks:p?l:f.publishedTracks,viewportVisibilityState:h?.viewportVisibilityState??{videoTrack:_e.UNKNOWN,screenShareTrack:_e.UNKNOWN}})})}),this.setParticipantCount(a?.total||0),this.setAnonymousParticipantCount(a?.anonymous||0),this.setStartedAt(c?Po.toDate(c):new Date),this.setServerSidePins(u)},this.updateFromMemberRemoved=r=>{this.updateFromCallResponse(r.call),this.setCurrentValue(this.membersSubject,i=>i.filter(s=>r.members.indexOf(s.user_id)===-1))},this.updateFromMemberAdded=r=>{this.updateFromCallResponse(r.call),this.setCurrentValue(this.membersSubject,i=>[...i,...r.members])},this.updateFromHLSBroadcastStopped=()=>{this.setCurrentValue(this.egressSubject,(r=ng)=>R(E({},r),{broadcasting:!1}))},this.updateFromHLSBroadcastingFailed=()=>{this.setCurrentValue(this.egressSubject,(r=ng)=>R(E({},r),{broadcasting:!1}))},this.updateFromHLSBroadcastStarted=r=>{this.setCurrentValue(this.egressSubject,(i=ng)=>R(E({},i),{broadcasting:!0,hls:R(E({},i.hls),{playlist_url:r.hls_playlist_url})}))},this.updateParticipantCountFromSession=r=>{if(!r||this.callingState===V.JOINED)return;let i=Object.values(r.participants_count_by_role).reduce((o,a)=>o+a,0),s=Math.max(i,r.participants.length);this.setParticipantCount(s),this.setAnonymousParticipantCount(r.anonymous_participant_count||0)},this.updateFromSessionParticipantCountUpdate=r=>{let i=this.setCurrentValue(this.sessionSubject,s=>s&&R(E({},s),{anonymous_participant_count:r.anonymous_participant_count,participants_count_by_role:r.participants_count_by_role}));this.updateParticipantCountFromSession(i)},this.updateFromSessionParticipantLeft=r=>{let i=this.setCurrentValue(this.sessionSubject,s=>{if(!s)return s;let{participants:o,participants_count_by_role:a}=s,{user:c,user_session_id:u}=r.participant;return R(E({},s),{participants:o.filter(l=>l.user_session_id!==u),participants_count_by_role:R(E({},a),{[c.role]:Math.max(0,(a[c.role]||0)-1)})})});this.updateParticipantCountFromSession(i)},this.updateFromSessionParticipantJoined=r=>{let i=this.setCurrentValue(this.sessionSubject,s=>{if(!s)return s;let{participants:o,participants_count_by_role:a}=s,{user:c,user_session_id:u}=r.participant,l=!0,d=o.map(h=>h.user_session_id===u?(l=!1,r.participant):h);l&&d.push(r.participant);let f=l?1:0;return R(E({},s),{participants:d,participants_count_by_role:R(E({},a),{[c.role]:(a[c.role]||0)+f})})});this.updateParticipantCountFromSession(i)},this.updateMembers=r=>{this.updateFromCallResponse(r.call),this.setCurrentValue(this.membersSubject,i=>i.map(s=>{let o=r.members.find(a=>a.user_id===s.user_id);return o||s}))},this.updateParticipantReaction=r=>{let{user:i,custom:s,type:o,emoji_code:a}=r.reaction;this.setParticipants(c=>c.map(u=>u.userId!==i.id?u:R(E({},u),{reaction:{type:o,emoji_code:a,custom:s}})))},this.unblockUser=r=>{this.setCurrentValue(this.blockedUserIdsSubject,i=>i&&i.filter(s=>s!==r.user.id))},this.blockUser=r=>{this.setCurrentValue(this.blockedUserIdsSubject,i=>[...i||[],r.user.id])},this.updateOwnCapabilities=r=>{r.user.id===this.localParticipant?.userId&&this.setCurrentValue(this.ownCapabilitiesSubject,r.own_capabilities)},this.participants$=this.participantsSubject.asObservable().pipe(P(r=>r.sort(this.sortParticipantsBy)),Ue({bufferSize:1,refCount:!0})),this.localParticipant$=this.participants$.pipe(P(r=>r.find(i=>i.isLocalParticipant)),Ue({bufferSize:1,refCount:!0})),this.remoteParticipants$=this.participants$.pipe(P(r=>r.filter(i=>!i.isLocalParticipant)),Ue({bufferSize:1,refCount:!0})),this.pinnedParticipants$=this.participants$.pipe(P(r=>r.filter(i=>!!i.pin)),Ue({bufferSize:1,refCount:!0})),this.dominantSpeaker$=this.participants$.pipe(P(r=>r.find(i=>i.isDominantSpeaker)),Ue({bufferSize:1,refCount:!0})),this.hasOngoingScreenShare$=this.participants$.pipe(P(r=>r.some(i=>Fr(i))),Ae(),Ue({bufferSize:1,refCount:!0})),this.createdAt$=this.createdAtSubject.asObservable(),this.endedAt$=this.endedAtSubject.asObservable(),this.startsAt$=this.startsAtSubject.asObservable(),this.startedAt$=this.startedAtSubject.asObservable(),this.updatedAt$=this.updatedAtSubject.asObservable(),this.callStatsReport$=this.callStatsReportSubject.asObservable(),this.members$=this.membersSubject.asObservable(),this.createdBy$=this.createdBySubject.asObservable(),this.custom$=this.customSubject.asObservable(),this.egress$=this.egressSubject.asObservable(),this.ingress$=this.ingressSubject.asObservable(),this.session$=this.sessionSubject.asObservable(),this.settings$=this.settingsSubject.asObservable(),this.endedBy$=this.endedBySubject.asObservable(),this.thumbnails$=this.thumbnailsSubject.asObservable();let t=(r,i)=>{if(r.length!==i.length)return!1;for(let s of r)if(!i.includes(s))return!1;for(let s of i)if(!r.includes(s))return!1;return!0},n=(r,i)=>r.asObservable().pipe(Ae(i));this.anonymousParticipantCount$=n(this.anonymousParticipantCountSubject),this.blockedUserIds$=n(this.blockedUserIdsSubject,t),this.backstage$=n(this.backstageSubject),this.callingState$=n(this.callingStateSubject),this.ownCapabilities$=n(this.ownCapabilitiesSubject,t),this.participantCount$=n(this.participantCountSubject),this.recording$=n(this.recordingSubject),this.transcribing$=n(this.transcribingSubject),this.eventHandlers={"call.closed_caption":void 0,"call.deleted":void 0,"call.permission_request":void 0,"call.recording_ready":void 0,"call.transcription_ready":void 0,"call.user_muted":void 0,"connection.error":void 0,"connection.ok":void 0,"health.check":void 0,"user.banned":void 0,"user.deactivated":void 0,"user.deleted":void 0,"user.muted":void 0,"user.presence.changed":void 0,"user.reactivated":void 0,"user.unbanned":void 0,"user.updated":void 0,custom:void 0,"call.accepted":r=>this.updateFromCallResponse(r.call),"call.blocked_user":this.blockUser,"call.created":r=>this.updateFromCallResponse(r.call),"call.ended":r=>{this.updateFromCallResponse(r.call),this.setCurrentValue(this.endedBySubject,r.user)},"call.hls_broadcasting_failed":this.updateFromHLSBroadcastingFailed,"call.hls_broadcasting_started":this.updateFromHLSBroadcastStarted,"call.hls_broadcasting_stopped":this.updateFromHLSBroadcastStopped,"call.live_started":r=>this.updateFromCallResponse(r.call),"call.member_added":this.updateFromMemberAdded,"call.member_removed":this.updateFromMemberRemoved,"call.member_updated_permission":this.updateMembers,"call.member_updated":this.updateMembers,"call.notification":r=>{this.updateFromCallResponse(r.call),this.setMembers(r.members)},"call.permissions_updated":this.updateOwnCapabilities,"call.reaction_new":this.updateParticipantReaction,"call.recording_started":()=>this.setCurrentValue(this.recordingSubject,!0),"call.recording_stopped":()=>this.setCurrentValue(this.recordingSubject,!1),"call.recording_failed":()=>this.setCurrentValue(this.recordingSubject,!1),"call.rejected":r=>this.updateFromCallResponse(r.call),"call.ring":r=>this.updateFromCallResponse(r.call),"call.missed":r=>this.updateFromCallResponse(r.call),"call.session_ended":r=>this.updateFromCallResponse(r.call),"call.session_participant_count_updated":this.updateFromSessionParticipantCountUpdate,"call.session_participant_joined":this.updateFromSessionParticipantJoined,"call.session_participant_left":this.updateFromSessionParticipantLeft,"call.session_started":r=>this.updateFromCallResponse(r.call),"call.transcription_started":()=>{this.setCurrentValue(this.transcribingSubject,!0)},"call.transcription_stopped":()=>{this.setCurrentValue(this.transcribingSubject,!1)},"call.transcription_failed":()=>{this.setCurrentValue(this.transcribingSubject,!1)},"call.unblocked_user":this.unblockUser,"call.updated":r=>this.updateFromCallResponse(r.call)}}get participantCount(){return this.getCurrentValue(this.participantCount$)}get startedAt(){return this.getCurrentValue(this.startedAt$)}get anonymousParticipantCount(){return this.getCurrentValue(this.anonymousParticipantCount$)}get participants(){return this.getCurrentValue(this.participants$)}get localParticipant(){return this.getCurrentValue(this.localParticipant$)}get remoteParticipants(){return this.getCurrentValue(this.remoteParticipants$)}get dominantSpeaker(){return this.getCurrentValue(this.dominantSpeaker$)}get pinnedParticipants(){return this.getCurrentValue(this.pinnedParticipants$)}get hasOngoingScreenShare(){return this.getCurrentValue(this.hasOngoingScreenShare$)}get callingState(){return this.getCurrentValue(this.callingState$)}get callStatsReport(){return this.getCurrentValue(this.callStatsReport$)}get members(){return this.getCurrentValue(this.members$)}get ownCapabilities(){return this.getCurrentValue(this.ownCapabilities$)}get backstage(){return this.getCurrentValue(this.backstage$)}get blockedUserIds(){return this.getCurrentValue(this.blockedUserIds$)}get createdAt(){return this.getCurrentValue(this.createdAt$)}get endedAt(){return this.getCurrentValue(this.endedAt$)}get startsAt(){return this.getCurrentValue(this.startsAt$)}get updatedAt(){return this.getCurrentValue(this.updatedAt$)}get createdBy(){return this.getCurrentValue(this.createdBy$)}get custom(){return this.getCurrentValue(this.custom$)}get egress(){return this.getCurrentValue(this.egress$)}get ingress(){return this.getCurrentValue(this.ingress$)}get recording(){return this.getCurrentValue(this.recording$)}get session(){return this.getCurrentValue(this.session$)}get settings(){return this.getCurrentValue(this.settings$)}get transcribing(){return this.getCurrentValue(this.transcribing$)}get endedBy(){return this.getCurrentValue(this.endedBy$)}get thumbnails(){return this.getCurrentValue(this.thumbnails$)}},dU=e=>{let n=/^a=rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/.exec(e);if(n)return{original:n[0],payload:n[1],codec:n[2]}},fU=e=>{let n=/^a=fmtp:(\d*) (.*)/.exec(e);if(n)return{original:n[0],payload:n[1],config:n[2]}},hU=(e,t)=>{let r=new RegExp(`(m=${t} \\d+ [\\w/]+) ([\\d\\s]+)`).exec(e);if(r)return{original:r[0],mediaWithPorts:r[1],codecOrder:r[2]}},pU=(e,t)=>{let n,r=[],i=[],s=!1;if(e.split(/(\r\n|\r|\n)/).forEach(o=>{if(!/^([a-z])=(.*)/.test(o))return;let c=o[0];if(c==="m"){let u=hU(o,t);s=!!u,u&&(n=u)}else if(s&&c==="a"){let u=dU(o),l=fU(o);u?r.push(u):l&&i.push(l)}}),n)return{media:n,rtpMap:r,fmtp:i}},mU=e=>{let t=pU(e,"audio"),r=t?.rtpMap.find(i=>i.codec.toLowerCase()==="opus")?.payload;if(r)return t?.fmtp.find(i=>i.payload===r)},gU=(e,t)=>{let n=mU(e);if(!n)return e;let r=/usedtx=(\d)/.exec(n.config),i=`usedtx=${t?"1":"0"}`,s=r?n.original.replace(/usedtx=(\d)/,i):`${n.original};${i}`;return e.replace(n.original,s)},yU=(e,t,n=51e4)=>{n=Math.max(Math.min(n,51e4),96e3);let r=Bo.parse(e),i=r.media.find(a=>a.type==="audio"&&String(a.mid)===t);if(!i)return e;let s=i.rtp.find(a=>a.codec==="opus");if(!s)return e;let o=i.fmtp.find(a=>a.payload===s.payload);return o?(o.config.match(/stereo=(\d)/)?o.config=o.config.replace(/stereo=(\d)/,"stereo=1"):o.config=`${o.config};stereo=1`,o.config.match(/maxaveragebitrate=(\d*)/)?o.config=o.config.replace(/maxaveragebitrate=(\d*)/,`maxaveragebitrate=${n}`):o.config=`${o.config};maxaveragebitrate=${n}`,Bo.write(r)):e},UT=(e,t,n)=>{if(e.mid)return e.mid;if(!n)return"";let r=e.sender.track,s=Bo.parse(n).media.find(o=>o.type===r.kind&&(o.msid?.includes(r.id)??!0));return typeof s?.mid<"u"?String(s.mid):t===-1?"":String(t)},Hy=class{constructor({connectionConfig:t,sfuClient:n,dispatcher:r,state:i,isDtxEnabled:s,isRedEnabled:o,onUnrecoverableError:a,logTag:c}){this.transceiverCache=new Map,this.trackLayersCache=new Map,this.publishOptsForTrack=new Map,this.transceiverInitOrder=[],this.isIceRestarting=!1,this.createPeerConnection=u=>{let l=new RTCPeerConnection(u);return l.addEventListener("icecandidate",this.onIceCandidate),l.addEventListener("negotiationneeded",this.onNegotiationNeeded),l.addEventListener("icecandidateerror",this.onIceCandidateError),l.addEventListener("iceconnectionstatechange",this.onIceConnectionStateChange),l.addEventListener("icegatheringstatechange",this.onIceGatheringStateChange),l.addEventListener("signalingstatechange",this.onSignalingStateChange),l},this.close=({stopTracks:u})=>{u&&(this.stopPublishing(),this.transceiverCache.clear(),this.trackLayersCache.clear()),this.detachEventHandlers(),this.pc.close()},this.detachEventHandlers=()=>{this.unsubscribeOnIceRestart(),this.unsubscribeChangePublishQuality(),this.pc.removeEventListener("icecandidate",this.onIceCandidate),this.pc.removeEventListener("negotiationneeded",this.onNegotiationNeeded),this.pc.removeEventListener("icecandidateerror",this.onIceCandidateError),this.pc.removeEventListener("iceconnectionstatechange",this.onIceConnectionStateChange),this.pc.removeEventListener("icegatheringstatechange",this.onIceGatheringStateChange),this.pc.removeEventListener("signalingstatechange",this.onSignalingStateChange)},this.publishStream=(h,p,m,...y)=>g(this,[h,p,m,...y],function*(u,l,d,f={}){if(l.readyState==="ended")throw new Error("Can't publish a track that has ended already.");l.enabled||(l.enabled=!0);let v=this.transceiverCache.get(d);if(!v||!v.sender.track){let S=()=>{this.logger("info",`Track ${I[d]} has ended abruptly`),l.removeEventListener("ended",S),this.notifyTrackMuteStateChanged(u,d,!0).catch(_=>this.logger("warn","Couldn't notify track mute state",_))};l.addEventListener("ended",S),this.addTransceiver(d,l,f,u)}else yield this.updateTransceiver(v,l);yield this.notifyTrackMuteStateChanged(u,d,!1)}),this.addTransceiver=(u,l,d,f)=>{let{forceCodec:h,preferredCodec:p}=d,m=h||LT(p),y=this.computeLayers(u,l,d),v=this.pc.addTransceiver(l,{direction:"sendonly",streams:u===I.VIDEO||u===I.SCREEN_SHARE?[f]:void 0,sendEncodings:yl(m)?Jj(y):y});if(this.logger("debug",`Added ${I[u]} transceiver`),this.transceiverInitOrder.push(u),this.transceiverCache.set(u,v),this.publishOptsForTrack.set(u,d),!("setCodecPreferences"in v))return;let S=this.getCodecPreferences(u,u===I.VIDEO?m:void 0);if(S)try{this.logger("info",`Setting ${I[u]} codec preferences`,S),v.setCodecPreferences(S)}catch(_){this.logger("warn","Couldn't set codec preferences",_)}},this.updateTransceiver=(u,l)=>g(this,null,function*(){let d=u.sender.track;d&&d!==l&&d.stop(),yield u.sender.replaceTrack(l)}),this.unpublishStream=(u,l)=>g(this,null,function*(){let d=this.transceiverCache.get(u);d&&d.sender.track&&(l?d.sender.track.readyState==="live":d.sender.track.enabled)&&(l?d.sender.track.stop():d.sender.track.enabled=!1,this.state.localParticipant?.publishedTracks.includes(u)&&(yield this.notifyTrackMuteStateChanged(void 0,u,!0)))}),this.isPublishing=u=>{let l=this.transceiverCache.get(u);if(!l||!l.sender)return!1;let d=l.sender.track;return!!d&&d.readyState==="live"&&d.enabled},this.notifyTrackMuteStateChanged=(u,l,d)=>g(this,null,function*(){yield this.sfuClient.updateMuteState(l,d);let f=bv(l);f&&(d?this.state.updateParticipant(this.sfuClient.sessionId,h=>({publishedTracks:h.publishedTracks.filter(p=>p!==l),[f]:void 0})):this.state.updateParticipant(this.sfuClient.sessionId,h=>({publishedTracks:h.publishedTracks.includes(l)?h.publishedTracks:[...h.publishedTracks,l],[f]:u})))}),this.stopPublishing=()=>{this.logger("debug","Stopping publishing all tracks"),this.pc.getSenders().forEach(u=>{u.track?.stop(),this.pc.signalingState!=="closed"&&this.pc.removeTrack(u)})},this.changePublishQuality=u=>g(this,null,function*(){this.logger("info","Update publish quality, requested layers by SFU:",u);let l=this.transceiverCache.get(I.VIDEO)?.sender;if(!l){this.logger("warn","Update publish quality, no video sender found.");return}let d=l.getParameters();if(d.encodings.length===0){this.logger("warn","Update publish quality, No suitable video encoding quality found");return}let[f]=d.codecs,h=f&&yl(f.mimeType),p=!1;for(let y of d.encodings){let v=h?u[0]:u.find(ae=>ae.name===y.rid)??(d.encodings.length===1?u[0]:void 0),S=!!v?.active;if(S!==y.active&&(y.active=S,p=!0),!v)continue;let{maxFramerate:_,scaleResolutionDownBy:N,maxBitrate:B,scalabilityMode:L}=v;N>=1&&N!==y.scaleResolutionDownBy&&(y.scaleResolutionDownBy=N,p=!0),B>0&&B!==y.maxBitrate&&(y.maxBitrate=B,p=!0),_>0&&_!==y.maxFramerate&&(y.maxFramerate=_,p=!0),L&&L!==y.scalabilityMode&&(y.scalabilityMode=L,p=!0)}let m=d.encodings.filter(y=>y.active);if(!p){this.logger("info","Update publish quality, no change:",m);return}yield l.setParameters(d),this.logger("info","Update publish quality, enabled rids:",m)}),this.getStats=u=>this.pc.getStats(u),this.getCodecPreferences=(u,l)=>{if(u===I.VIDEO)return PT("video",l||"vp8");if(u===I.AUDIO){let d=this.isRedEnabled?"red":"opus",f=this.isRedEnabled?void 0:"red";return PT("audio",l??d,f)}},this.onIceCandidate=u=>{let{candidate:l}=u;if(!l){this.logger("debug","null ice candidate");return}this.sfuClient.iceTrickle({iceCandidate:a0(l),peerType:Ze.PUBLISHER_UNSPECIFIED}).catch(d=>{this.logger("warn","ICETrickle failed",d)})},this.setSfuClient=u=>{this.sfuClient=u},this.restartIce=()=>g(this,null,function*(){this.logger("debug","Restarting ICE connection");let u=this.pc.signalingState;if(this.isIceRestarting||u==="have-local-offer"){this.logger("debug","ICE restart is already in progress");return}yield this.negotiate({iceRestart:!0})}),this.onNegotiationNeeded=()=>{this.negotiate().catch(u=>{this.logger("error","Negotiation failed.",u),this.onUnrecoverableError?.()})},this.negotiate=u=>g(this,null,function*(){let l=yield this.pc.createOffer(u);l.sdp&&(l.sdp=gU(l.sdp,this.isDtxEnabled),this.isPublishing(I.SCREEN_SHARE_AUDIO)&&(l.sdp=this.enableHighQualityAudio(l.sdp)));let d=this.getAnnouncedTracks(l.sdp);if(d.length===0)throw new Error("Can't negotiate without announcing any tracks");try{this.isIceRestarting=u?.iceRestart??!1,yield this.pc.setLocalDescription(l);let{response:f}=yield this.sfuClient.setPublisher({sdp:l.sdp||"",tracks:d});if(f.error)throw new Error(f.error.message);yield this.pc.setRemoteDescription({type:"answer",sdp:f.sdp})}finally{this.isIceRestarting=!1}this.sfuClient.iceTrickleBuffer.publisherCandidates.subscribe(f=>g(this,null,function*(){try{let h=JSON.parse(f.iceCandidate);yield this.pc.addIceCandidate(h)}catch(h){this.logger("warn","ICE candidate error",h,f)}}))}),this.enableHighQualityAudio=u=>{let l=this.transceiverCache.get(I.SCREEN_SHARE_AUDIO);if(!l)return u;let d=this.transceiverInitOrder.indexOf(I.SCREEN_SHARE_AUDIO),f=UT(l,d,u);return yU(u,f)},this.getAnnouncedTracks=u=>(u=u||this.pc.localDescription?.sdp,this.pc.getTransceivers().filter(l=>l.direction==="sendonly"&&l.sender.track).map(l=>{let d;this.transceiverCache.forEach((N,B)=>{N===l&&(d=B)});let f=l.sender.track,h,p=f.readyState==="live";p?(h=this.computeLayers(d,f)||[],this.trackLayersCache.set(d,h)):(h=this.trackLayersCache.get(d)||[],this.logger("debug",`Track ${I[d]} is ended. Announcing last known optimal layers`,h));let m=h.map(N=>({rid:N.rid||"",bitrate:N.maxBitrate||0,fps:N.maxFramerate||0,quality:Yj(N.rid||""),videoDimension:{width:N.width,height:N.height}})),y=[I.AUDIO,I.SCREEN_SHARE_AUDIO].includes(d),v=f.getSettings(),S=y&&v.channelCount===2,_=this.transceiverInitOrder.indexOf(d);return{trackId:f.id,layers:m,trackType:d,mid:UT(l,_,u),stereo:S,dtx:y&&this.isDtxEnabled,red:y&&this.isRedEnabled,muted:!p}})),this.computeLayers=(u,l,d)=>{let{settings:f}=this.state,h=f?.video.target_resolution,p=f?.screensharing.target_resolution?.bitrate,m=d||this.publishOptsForTrack.get(u),y=d?.forceCodec||LT(d?.preferredCodec);return u===I.VIDEO?Zj(l,h,y,m):u===I.SCREEN_SHARE?eU(l,m,p):void 0},this.onIceCandidateError=u=>{let l=u instanceof RTCPeerConnectionIceErrorEvent&&`${u.errorCode}: ${u.errorText}`,d=this.pc.iceConnectionState,f=d==="connected"||d==="checking"?"debug":"warn";this.logger(f,"ICE Candidate error",l)},this.onIceConnectionStateChange=()=>{let u=this.pc.iceConnectionState;this.logger("debug","ICE Connection state changed to",u),this.state.callingState!==V.RECONNECTING&&(u==="failed"||u==="disconnected")&&(this.logger("debug","Attempting to restart ICE"),this.restartIce().catch(l=>{this.logger("error","ICE restart error",l),this.onUnrecoverableError?.()}))},this.onIceGatheringStateChange=()=>{this.logger("debug","ICE Gathering State",this.pc.iceGatheringState)},this.onSignalingStateChange=()=>{this.logger("debug","Signaling state changed",this.pc.signalingState)},this.logger=fe(["Publisher",c]),this.pc=this.createPeerConnection(t),this.sfuClient=n,this.state=i,this.isDtxEnabled=s,this.isRedEnabled=o,this.onUnrecoverableError=a,this.unsubscribeOnIceRestart=r.on("iceRestart",u=>{u.peerType===Ze.PUBLISHER_UNSPECIFIED&&this.restartIce().catch(l=>{this.logger("warn","ICERestart failed",l),this.onUnrecoverableError?.()})}),this.unsubscribeChangePublishQuality=r.on("changePublishQuality",({videoSenders:u})=>{pt("publisher.changePublishQuality",()=>g(this,null,function*(){for(let l of u){let{layers:d}=l,f=d.filter(h=>h.active);yield this.changePublishQuality(f)}})).catch(l=>{this.logger("warn","Failed to change publish quality",l)})})}},zy=class{constructor({sfuClient:t,dispatcher:n,state:r,connectionConfig:i,onUnrecoverableError:s,logTag:o}){this.isIceRestarting=!1,this.createPeerConnection=u=>{let l=new RTCPeerConnection(u);return l.addEventListener("icecandidate",this.onIceCandidate),l.addEventListener("track",this.handleOnTrack),l.addEventListener("icecandidateerror",this.onIceCandidateError),l.addEventListener("iceconnectionstatechange",this.onIceConnectionStateChange),l.addEventListener("icegatheringstatechange",this.onIceGatheringStateChange),l},this.close=()=>{this.detachEventHandlers(),this.pc.close()},this.detachEventHandlers=()=>{this.unregisterOnSubscriberOffer(),this.unregisterOnIceRestart(),this.pc.removeEventListener("icecandidate",this.onIceCandidate),this.pc.removeEventListener("track",this.handleOnTrack),this.pc.removeEventListener("icecandidateerror",this.onIceCandidateError),this.pc.removeEventListener("iceconnectionstatechange",this.onIceConnectionStateChange),this.pc.removeEventListener("icegatheringstatechange",this.onIceGatheringStateChange)},this.getStats=u=>this.pc.getStats(u),this.setSfuClient=u=>{this.sfuClient=u},this.restartIce=()=>g(this,null,function*(){if(this.logger("debug","Restarting ICE connection"),this.pc.signalingState==="have-remote-offer"){this.logger("debug","ICE restart is already in progress");return}if(this.pc.connectionState==="new"){this.logger("debug","ICE connection is not yet established, skipping restart.");return}let u=this.isIceRestarting;try{this.isIceRestarting=!0,yield this.sfuClient.iceRestart({peerType:Ze.SUBSCRIBER})}catch(l){throw this.isIceRestarting=u,l}}),this.handleOnTrack=u=>{let[l]=u.streams,[d,f]=l.id.split(":"),h=this.state.participants.find(S=>S.trackLookupPrefix===d);this.logger("debug",`[onTrack]: Got remote ${f} track for userId: ${h?.userId}`,u.track.id,u.track);let p=`${h?.userId} ${f}:${d}`;u.track.addEventListener("mute",()=>{this.logger("info",`[onTrack]: Track muted: ${p}`)}),u.track.addEventListener("unmute",()=>{this.logger("info",`[onTrack]: Track unmuted: ${p}`)}),u.track.addEventListener("ended",()=>{this.logger("info",`[onTrack]: Track ended: ${p}`),this.state.removeOrphanedTrack(l.id)});let m=nU(f);if(!m)return this.logger("error",`Unknown track type: ${f}`);if(!h){this.logger("warn",`[onTrack]: Received track for unknown participant: ${d}`,u),this.state.registerOrphanedTrack({id:l.id,trackLookupPrefix:d,track:l,trackType:m});return}let y=bv(m);if(!y){this.logger("error",`Unknown track type: ${f}`);return}let v=h[y];v&&(this.logger("info",`[onTrack]: Cleaning up previous remote ${u.track.kind} tracks for userId: ${h.userId}`),v.getTracks().forEach(S=>{S.stop(),v.removeTrack(S)})),this.state.updateParticipant(h.sessionId,{[y]:l})},this.onIceCandidate=u=>{let{candidate:l}=u;if(!l){this.logger("debug","null ice candidate");return}this.sfuClient.iceTrickle({iceCandidate:a0(l),peerType:Ze.SUBSCRIBER}).catch(d=>{this.logger("warn","ICETrickle failed",d)})},this.negotiate=u=>g(this,null,function*(){this.logger("info","Received subscriberOffer",u),yield this.pc.setRemoteDescription({type:"offer",sdp:u.sdp}),this.sfuClient.iceTrickleBuffer.subscriberCandidates.subscribe(d=>g(this,null,function*(){try{let f=JSON.parse(d.iceCandidate);yield this.pc.addIceCandidate(f)}catch(f){this.logger("warn","ICE candidate error",[f,d])}}));let l=yield this.pc.createAnswer();yield this.pc.setLocalDescription(l),yield this.sfuClient.sendAnswer({peerType:Ze.SUBSCRIBER,sdp:l.sdp||""}),this.isIceRestarting=!1}),this.onIceConnectionStateChange=()=>{let u=this.pc.iceConnectionState;this.logger("debug","ICE connection state changed",u),this.state.callingState!==V.RECONNECTING&&(this.isIceRestarting||(u==="failed"||u==="disconnected")&&(this.logger("debug","Attempting to restart ICE"),this.restartIce().catch(l=>{this.logger("error","ICE restart failed",l),this.onUnrecoverableError?.()})))},this.onIceGatheringStateChange=()=>{this.logger("debug","ICE gathering state changed",this.pc.iceGatheringState)},this.onIceCandidateError=u=>{let l=u instanceof RTCPeerConnectionIceErrorEvent&&`${u.errorCode}: ${u.errorText}`,d=this.pc.iceConnectionState,f=d==="connected"||d==="checking"?"debug":"warn";this.logger(f,"ICE Candidate error",l)},this.logger=fe(["Subscriber",o]),this.sfuClient=t,this.state=r,this.onUnrecoverableError=s,this.pc=this.createPeerConnection(i);let a=Symbol("subscriberOffer");this.unregisterOnSubscriberOffer=n.on("subscriberOffer",u=>{pt(a,()=>this.negotiate(u)).catch(l=>{this.logger("error","Negotiation failed.",l)})});let c=Symbol("iceRestart");this.unregisterOnIceRestart=n.on("iceRestart",u=>{pt(c,()=>g(this,null,function*(){u.peerType===Ze.SUBSCRIBER&&(yield this.restartIce())})).catch(l=>{this.logger("error","ICERestart failed",l),this.onUnrecoverableError?.()})})}},vU=e=>{let{endpoint:t,onMessage:n,logTag:r}=e,i=fe(["SfuClientWS",r]),s=new WebSocket(t);return s.binaryType="arraybuffer",s.addEventListener("error",o=>{i("error","Signaling WS channel error",o)}),s.addEventListener("close",o=>{i("info","Signaling WS channel is closed",o)}),s.addEventListener("open",o=>{i("info","Signaling WS channel is open",o)}),s.addEventListener("message",o=>{try{let a=o.data instanceof ArrayBuffer?xT.fromBinary(new Uint8Array(o.data)):xT.fromJsonString(o.data.toString());n(a)}catch(a){i("error","Failed to decode a message. Check whether the Proto models match.",{event:o,error:a})}}),s},ko=()=>{let e,t,n=new Promise((a,c)=>{e=a,t=c}),r=!1,i=!1;return{promise:n,resolve:a=>{r=!0,e(a)},reject:a=>{i=!0,t(a)},isResolved:r,isRejected:i}},rg=(()=>{class e{constructor({dispatcher:n,credentials:r,sessionId:i,logTag:s,joinResponseTimeout:o=5e3,onSignalClose:a,streamClient:c}){this.iceTrickleBuffer=new Uy,this.isLeaving=!1,this.pingIntervalInMs=10*1e3,this.unhealthyTimeoutInMs=this.pingIntervalInMs+5*1e3,this.restoreWebSocketConcurrencyTag=Symbol("recoverWebSocket"),this.joinResponseTask=ko(),this.abortController=new AbortController,this.createWebSocket=()=>{this.signalWs=vU({logTag:this.logTag,endpoint:`${this.credentials.server.ws_endpoint}?tag=${this.logTag}`,onMessage:d=>{this.lastMessageTimestamp=new Date,this.scheduleConnectionCheck(),this.dispatcher.dispatch(d,this.logTag)}}),this.signalWs.addEventListener("close",this.handleWebSocketClose),this.signalWs.addEventListener("error",this.restoreWebSocket),this.signalReady=new Promise(d=>{let f=()=>{this.signalWs.removeEventListener("open",f),d(this.signalWs)};this.signalWs.addEventListener("open",f)})},this.cleanUpWebSocket=()=>{this.signalWs.removeEventListener("error",this.restoreWebSocket),this.signalWs.removeEventListener("close",this.handleWebSocketClose)},this.restoreWebSocket=()=>{pt(this.restoreWebSocketConcurrencyTag,()=>g(this,null,function*(){yield this.networkAvailableTask?.promise,this.logger("debug","Restoring SFU WS connection"),this.cleanUpWebSocket(),yield sn(500),this.createWebSocket()})).catch(d=>this.logger("debug","Can't restore WS connection",d))},this.handleWebSocketClose=()=>{this.signalWs.removeEventListener("close",this.handleWebSocketClose),clearInterval(this.keepAliveInterval),clearTimeout(this.connectionCheckTimeout),this.onSignalClose?.()},this.close=(d=e.NORMAL_CLOSURE,f)=>{this.signalWs.readyState===WebSocket.OPEN&&(this.logger("debug",`Closing SFU WS connection: ${d} - ${f}`),this.signalWs.close(d,`js-client: ${f}`),this.cleanUpWebSocket()),this.dispose()},this.dispose=()=>{this.logger("debug","Disposing SFU client"),this.unsubscribeIceTrickle(),this.unsubscribeNetworkChanged(),clearInterval(this.keepAliveInterval),clearTimeout(this.connectionCheckTimeout),clearTimeout(this.migrateAwayTimeout),this.abortController.abort(),this.migrationTask?.resolve()},this.leaveAndClose=d=>g(this,null,function*(){yield this.joinTask;try{this.isLeaving=!0,yield this.notifyLeave(d)}catch(f){this.logger("debug","Error notifying SFU about leaving call",f)}this.close(e.NORMAL_CLOSURE,d.substring(0,115))}),this.updateSubscriptions=d=>g(this,null,function*(){return yield this.joinTask,Tn(()=>this.rpc.updateSubscriptions({sessionId:this.sessionId,tracks:d}),this.abortController.signal)}),this.setPublisher=d=>g(this,null,function*(){return yield this.joinTask,Tn(()=>this.rpc.setPublisher(R(E({},d),{sessionId:this.sessionId})),this.abortController.signal)}),this.sendAnswer=d=>g(this,null,function*(){return yield this.joinTask,Tn(()=>this.rpc.sendAnswer(R(E({},d),{sessionId:this.sessionId})),this.abortController.signal)}),this.iceTrickle=d=>g(this,null,function*(){return yield this.joinTask,Tn(()=>this.rpc.iceTrickle(R(E({},d),{sessionId:this.sessionId})),this.abortController.signal)}),this.iceRestart=d=>g(this,null,function*(){return yield this.joinTask,Tn(()=>this.rpc.iceRestart(R(E({},d),{sessionId:this.sessionId})),this.abortController.signal)}),this.updateMuteState=(d,f)=>g(this,null,function*(){return yield this.joinTask,this.updateMuteStates({muteStates:[{trackType:d,muted:f}]})}),this.updateMuteStates=d=>g(this,null,function*(){return yield this.joinTask,Tn(()=>this.rpc.updateMuteStates(R(E({},d),{sessionId:this.sessionId})),this.abortController.signal)}),this.sendStats=d=>g(this,null,function*(){return yield this.joinTask,Tn(()=>this.rpc.sendStats(R(E({},d),{sessionId:this.sessionId})),this.abortController.signal)}),this.startNoiseCancellation=()=>g(this,null,function*(){return yield this.joinTask,Tn(()=>this.rpc.startNoiseCancellation({sessionId:this.sessionId}),this.abortController.signal)}),this.stopNoiseCancellation=()=>g(this,null,function*(){return yield this.joinTask,Tn(()=>this.rpc.stopNoiseCancellation({sessionId:this.sessionId}),this.abortController.signal)}),this.enterMigration=(...f)=>g(this,[...f],function*(d={}){this.isLeaving=!0;let{timeout:h=7*1e3}=d;this.migrationTask?.reject(new Error("Cancelled previous migration"));let p=this.migrationTask=ko(),m=this.dispatcher.on("participantMigrationComplete",()=>{m(),clearTimeout(this.migrateAwayTimeout),p.resolve()});return this.migrateAwayTimeout=setTimeout(()=>{m(),p.reject(new Error(`Migration (${this.logTag}) failed to complete in ${h}ms`))},h),p.promise}),this.join=d=>g(this,null,function*(){yield this.signalReady,(this.joinResponseTask.isResolved||this.joinResponseTask.isRejected)&&(this.joinResponseTask=ko());let f=this.joinResponseTask,h,p=this.dispatcher.on("joinResponse",m=>{this.logger("debug","Received joinResponse",m),clearTimeout(h),p(),this.keepAlive(),f.resolve(m)});return h=setTimeout(()=>{p(),f.reject(new Error('Waiting for "joinResponse" has timed out'))},this.joinResponseTimeout),yield this.send(Mo.create({requestPayload:{oneofKind:"joinRequest",joinRequest:n0.create(R(E({},d),{sessionId:this.sessionId,token:this.credentials.token}))}})),f.promise}),this.ping=()=>g(this,null,function*(){return this.send(Mo.create({requestPayload:{oneofKind:"healthCheckRequest",healthCheckRequest:{}}}))}),this.notifyLeave=d=>g(this,null,function*(){return this.send(Mo.create({requestPayload:{oneofKind:"leaveCallRequest",leaveCallRequest:{sessionId:this.sessionId,reason:d}}}))}),this.send=d=>g(this,null,function*(){yield this.signalReady;let f=Mo.toJson(d);if(this.signalWs.readyState!==WebSocket.OPEN){this.logger("debug","Signal WS is not open. Skipping message",f);return}this.logger("debug",`Sending message to: ${this.edgeName}`,f),this.signalWs.send(Mo.toBinary(d))}),this.keepAlive=()=>{clearInterval(this.keepAliveInterval),this.keepAliveInterval=setInterval(()=>{this.ping().catch(d=>{this.logger("error","Error sending healthCheckRequest to SFU",d)})},this.pingIntervalInMs)},this.scheduleConnectionCheck=()=>{clearTimeout(this.connectionCheckTimeout),this.connectionCheckTimeout=setTimeout(()=>{this.lastMessageTimestamp&&new Date().getTime()-this.lastMessageTimestamp.getTime()>this.unhealthyTimeoutInMs&&this.close(e.ERROR_CONNECTION_UNHEALTHY,`SFU connection unhealthy. Didn't receive any message for ${this.unhealthyTimeoutInMs}ms`)},this.unhealthyTimeoutInMs)},this.dispatcher=n,this.sessionId=i||r0(),this.onSignalClose=a,this.credentials=r;let{server:u,token:l}=r;this.edgeName=u.edge_name,this.joinResponseTimeout=o,this.logTag=s,this.logger=fe(["SfuClient",s]),this.rpc=wj({baseUrl:u.url,interceptors:[Cj({Authorization:`Bearer ${l}`}),xj()==="trace"&&Sj(this.logger,"trace")].filter(d=>!!d)}),this.unsubscribeIceTrickle=n.on("iceTrickle",d=>{this.iceTrickleBuffer.push(d)}),this.unsubscribeNetworkChanged=c.on("network.changed",d=>{d.online?this.networkAvailableTask?.resolve():this.networkAvailableTask=ko()}),this.createWebSocket()}get isHealthy(){return this.signalWs.readyState===WebSocket.OPEN}get joinTask(){return this.joinResponseTask.promise}}return e.NORMAL_CLOSURE=1e3,e.ERROR_CONNECTION_UNHEALTHY=4001,e.DISPOSE_OLD_SOCKET=4002,e})(),bU=e=>({iceServers:e.map(t=>({urls:t.urls,username:t.username,credential:t.password}))}),EU=e=>function(n){return g(this,null,function*(){if(n.user.id===e.currentUserId)return;let{state:r}=e;n.call.created_by.id===e.currentUserId&&r.callingState===V.RINGING&&(yield e.join())})},CU=e=>function(n){return g(this,null,function*(){if(n.user.id===e.currentUserId)return;let{call:r}=n,{session:i}=r;if(!i){e.logger("warn","No call session provided. Ignoring call.rejected event.",n);return}let s=i.rejected_by,{members:o,callingState:a}=e.state;if(a!==V.RINGING){e.logger("info","Call is not in ringing mode (it is either accepted or rejected already). Ignoring call.rejected event.",n);return}e.isCreatedByMe?o.filter(u=>u.user_id!==e.currentUserId).every(u=>s[u.user_id])&&(e.logger("info","everyone rejected, leaving the call"),yield e.leave({reason:"ring: everyone rejected"})):s[r.created_by.id]&&(e.logger("info","call creator rejected, leaving call"),yield e.leave({reason:"ring: creator rejected"}))})},SU=e=>function(){let{callingState:n}=e.state;n!==V.IDLE&&n!==V.LEFT&&e.leave({reason:"call.ended event received"}).catch(r=>{e.logger("error","Failed to leave call after call.ended ",r)})},wU=e=>e.on("callEnded",t=>g(void 0,null,function*(){if(e.state.callingState!==V.LEFT)try{e.state.setEndedAt(new Date);let n=hv[t.reason];yield e.leave({reason:`callEnded received: ${n}`})}catch(n){e.logger("error","Failed to leave call after being ended by the SFU",n)}})),DU=e=>function(n){let{currentGrants:r}=n;if(r){let{canPublishAudio:i,canPublishVideo:s,canScreenshare:o}=r,a={[je.SEND_AUDIO]:i,[je.SEND_VIDEO]:s,[je.SCREENSHARE]:o},c=e.ownCapabilities.filter(u=>a[u]!==!1);Object.entries(a).forEach(([u,l])=>{l&&!c.includes(u)&&c.push(u)}),e.setOwnCapabilities(c)}},IU=(e,t)=>e.on("connectionQualityChanged",n=>{let{connectionQualityUpdates:r}=n;r&&t.updateParticipants(r.reduce((i,s)=>{let{sessionId:o,connectionQuality:a}=s;return i[o]={connectionQuality:a},i},{}))}),TU=(e,t)=>e.on("healthCheckResponse",n=>{let{participantCount:r}=n;r&&(t.setParticipantCount(r.total),t.setAnonymousParticipantCount(r.anonymous))}),_U=(e,t)=>e.on("error",n=>{n.error&&n.error.code!==Il.LIVE_ENDED||t.permissionsContext.hasPermission(je.JOIN_BACKSTAGE)||t.leave({reason:"live ended"}).catch(r=>{t.logger("error","Failed to leave call after live ended",r)})}),RU=e=>e.on("error",t=>{if(!t.error)return;let n=fe(["SfuClient"]),{error:r,reconnectStrategy:i}=t;n("error","SFU reported error",{code:Il[r.code],reconnectStrategy:ee[i],message:r.message,shouldRetry:r.shouldRetry})}),NU=e=>function(n){let{pins:r}=n;e.setServerSidePins(r)},MU=e=>e.on("trackUnpublished",t=>g(void 0,null,function*(){let{cause:n,type:r,sessionId:i}=t,{localParticipant:s}=e.state;if(n===fv.MODERATION&&i===s?.sessionId){let o=e.logger;o("info",`Local participant's ${I[r]} track is muted remotely`);try{r===I.VIDEO?yield e.camera.disable():r===I.AUDIO?yield e.microphone.disable():r===I.SCREEN_SHARE||r===I.SCREEN_SHARE_AUDIO?yield e.screenShare.disable():o("warn","Unsupported track type to soft mute",I[r])}catch(a){o("error","Failed to stop publishing",a)}}})),AU=e=>function(n){let{participant:r}=n;if(!r)return;let i=Sv(e,r);e.updateOrAddParticipant(r.sessionId,Object.assign(r,i,{viewportVisibilityState:{videoTrack:_e.UNKNOWN,screenShareTrack:_e.UNKNOWN}}))},xU=e=>function(n){let{participant:r}=n;r&&e.setParticipants(i=>i.filter(s=>s.sessionId!==r.sessionId))},kU=e=>function(n){let{participant:r}=n;r&&e.updateParticipant(r.sessionId,r)},OU=e=>function(n){let{type:r,sessionId:i}=n;if(n.participant){let s=Sv(e,n.participant),o=Object.assign(n.participant,s);e.updateOrAddParticipant(i,o)}else e.updateParticipant(i,s=>({publishedTracks:[...s.publishedTracks,r].filter(LU)}))},PU=e=>function(n){let{type:r,sessionId:i}=n;if(n.participant){let s=Sv(e,n.participant),o=Object.assign(n.participant,s);e.updateOrAddParticipant(i,o)}else e.updateParticipant(i,s=>({publishedTracks:s.publishedTracks.filter(o=>o!==r)}))},LU=(e,t,n)=>n.indexOf(e)===t,Sv=(e,t)=>{let n=e.takeOrphanedTracks(t.trackLookupPrefix);if(!n.length)return;let r={};for(let i of n){let s=bv(i.trackType);s&&(r[s]=i.track)}return r},FU=(e,t)=>e.on("dominantSpeakerChanged",n=>{let{sessionId:r}=n;r!==t.dominantSpeaker?.sessionId&&t.setParticipants(i=>i.map(s=>s.sessionId===r?R(E({},s),{isDominantSpeaker:!0}):s.isDominantSpeaker?R(E({},s),{isDominantSpeaker:!1}):s))}),jU=(e,t)=>e.on("audioLevelChanged",n=>{let{audioLevels:r}=n;t.updateParticipants(r.reduce((i,s)=>(i[s.sessionId]={audioLevel:s.level,isSpeaking:s.isSpeaking},i),{}))}),UU=(e,t)=>{let n=e.state,r=[e.on("call.ended",SU(e)),wU(e),_U(t,e),RU(t),IU(t,n),TU(t,n),e.on("participantJoined",AU(n)),e.on("participantLeft",xU(n)),e.on("participantUpdated",kU(n)),e.on("trackPublished",OU(n)),e.on("trackUnpublished",PU(n)),jU(t,n),FU(t,n),e.on("callGrantsUpdated",DU(n)),e.on("pinsUpdated",NU(n)),MU(e)];return e.ringing&&r.push(f0(e)),()=>{r.forEach(i=>i())}},f0=e=>{let t={"call.accepted":EU(e),"call.rejected":CU(e)},n=Object.keys(t).map(r=>{let i=r;return e.on(i,t[i])});return()=>{n.forEach(r=>r())}},El=e=>{let t=[];return e.forEach(n=>{t.push(n)}),t},VU=e=>{let s=e,{sdk:t}=s,n=_n(s,["sdk"]),r=h0(t),i=p0(t);return E({sdkName:r,sdkVersion:i},n)},h0=e=>e&&e.type===Ki.REACT?"stream-react":e&&e.type===Ki.REACT_NATIVE?"stream-react-native":"stream-js",p0=e=>e?`${e.major}.${e.minor}.${e.patch}`:"0.0.0-development",BU=({subscriber:e,publisher:t,state:n,datacenter:r,pollingIntervalInMs:i=2e3})=>{let s=fe(["stats"]),o=(p,m)=>g(void 0,null,function*(){return p==="subscriber"&&e?e.getStats(m):p==="publisher"&&t?t.getStats(m):void 0}),a=(p,m)=>g(void 0,null,function*(){let y=p==="subscriber"?e:t;if(!y)return[];let v=[];for(let S of m.getTracks()){let _=yield y.getStats(S),N=ig(_,{trackKind:S.kind,kind:p});v.push(N)}return v}),c=p=>{l.add(p),d()},u=p=>{l.delete(p),d()},l=new Set,d=()=>g(void 0,null,function*(){let p={},m=new Set(l);if(m.size>0)for(let N of n.participants){if(!m.has(N.sessionId))continue;let B=N.isLocalParticipant?"publisher":"subscriber";try{let L=new MediaStream([...N.videoStream?.getVideoTracks()||[],...N.audioStream?.getAudioTracks()||[]]);p[N.sessionId]=yield a(B,L),L.getTracks().forEach(ae=>{L.removeTrack(ae)})}catch(L){s("error",`Failed to collect stats for ${B} of ${N.userId}`,L)}}let[y,v]=yield Promise.all([e.getStats().then(N=>ig(N,{kind:"subscriber",trackKind:"video"})).then(VT),t?t.getStats().then(N=>ig(N,{kind:"publisher",trackKind:"video"})).then(VT):m0()]),[S,_]=yield Promise.all([o("subscriber"),t?o("publisher"):void 0]);n.setCallStatsReport({datacenter:r,publisherStats:v,subscriberStats:y,subscriberRawStats:S,publisherRawStats:_,participants:p,timestamp:Date.now()})}),f;if(i>0){let p=()=>g(void 0,null,function*(){yield d().catch(m=>{s("debug","Failed to collect stats",m)}),f=setTimeout(p,i)});p()}return{getRawStatsForTrack:o,getStatsForStream:a,startReportingStatsFor:c,stopReportingStatsFor:u,stop:()=>{f&&clearTimeout(f)}}},ig=(e,t)=>{let{trackKind:n,kind:r}=t,i=r==="subscriber"?"inbound-rtp":"outbound-rtp",s=El(e),o=s.filter(a=>a.type===i&&a.kind===n).map(a=>{let c=a,u=s.find(f=>f.type==="codec"&&f.id===c.codecId),l=s.find(f=>f.type==="transport"&&f.id===c.transportId),d;return l&&l.dtlsState==="connected"&&(d=s.find(h=>h.type==="candidate-pair"&&h.id===l.selectedCandidatePairId)?.currentRoundTripTime),{bytesSent:c.bytesSent,bytesReceived:c.bytesReceived,codec:u?.mimeType,currentRoundTripTime:d,frameHeight:c.frameHeight,frameWidth:c.frameWidth,framesPerSecond:c.framesPerSecond,jitter:c.jitter,kind:c.kind,qualityLimitationReason:c.qualityLimitationReason,rid:c.rid,ssrc:c.ssrc}});return{rawStats:e,streams:o,timestamp:Date.now()}},m0=e=>({rawReport:e??{streams:[],timestamp:Date.now()},totalBytesSent:0,totalBytesReceived:0,averageJitterInMs:0,averageRoundTripTimeInMs:0,qualityLimitationReasons:"none",highestFrameWidth:0,highestFrameHeight:0,highestFramesPerSecond:0,codec:"",timestamp:Date.now()}),VT=e=>{let t=m0(e),n=-1,r=(c,u)=>c*u,i=new Set,s=e.streams,o=s.reduce((c,u)=>{c.totalBytesSent+=u.bytesSent||0,c.totalBytesReceived+=u.bytesReceived||0,c.averageJitterInMs+=u.jitter||0,c.averageRoundTripTimeInMs+=u.currentRoundTripTime||0;let l=r(u.frameWidth||0,u.frameHeight||0);return l>n&&(c.highestFrameWidth=u.frameWidth||0,c.highestFrameHeight=u.frameHeight||0,c.highestFramesPerSecond=u.framesPerSecond||0,n=l),i.add(u.qualityLimitationReason||""),c},t);s.length>0&&(o.averageJitterInMs=Math.round(o.averageJitterInMs/s.length*1e3),o.averageRoundTripTimeInMs=Math.round(o.averageRoundTripTimeInMs/s.length*1e3),o.codec=s[0].codec||"");let a=[i.has("cpu")&&"cpu",i.has("bandwidth")&&"bandwidth",i.has("other")&&"other"].filter(Boolean).join(", ");return a&&(o.qualityLimitationReasons=a),o},qy=class{constructor(t,{options:n,clientDetails:r,subscriber:i,publisher:s,microphone:o,camera:a,state:c}){this.logger=fe(["SfuStatsReporter"]),this.inputDevices=new Map,this.observeDevice=(f,h)=>{let{hasBrowserPermission$:p}=f.state;this.unsubscribeDevicePermissionsSubscription?.(),this.unsubscribeDevicePermissionsSubscription=ht(gt([p,this.state.ownCapabilities$]),([m,y])=>{this.unsubscribeListDevicesSubscription?.();let v=h==="mic"?y.includes(je.SEND_AUDIO):y.includes(je.SEND_VIDEO);if(!m||!v){this.inputDevices.set(h,{currentDevice:"",availableDevices:[],isPermitted:!1});return}this.unsubscribeListDevicesSubscription=ht(gt([f.listDevices(),f.state.selectedDevice$]),([S,_])=>{let N=S.find(B=>B.deviceId===_);this.inputDevices.set(h,{currentDevice:N?.label||_||"",availableDevices:S.map(B=>B.label),isPermitted:!0})})})},this.sendTelemetryData=f=>g(this,null,function*(){return this.run(f)}),this.run=f=>g(this,null,function*(){let[h,p]=yield Promise.all([this.subscriber.getStats().then(El).then(JSON.stringify),this.publisher?.getStats().then(El).then(JSON.stringify)??"[]"]);yield this.sfuClient.sendStats({sdk:this.sdkName,sdkVersion:this.sdkVersion,webrtcVersion:this.webRTCVersion,subscriberStats:h,publisherStats:p,audioDevices:this.inputDevices.get("mic"),videoDevices:this.inputDevices.get("camera"),deviceState:{oneofKind:void 0},telemetry:f})}),this.start=()=>{this.options.reporting_interval_ms<=0||(this.observeDevice(this.microphone,"mic"),this.observeDevice(this.camera,"camera"),clearInterval(this.intervalId),this.intervalId=setInterval(()=>{this.run().catch(f=>{this.logger("warn","Failed to report stats",f)})},this.options.reporting_interval_ms))},this.stop=()=>{this.unsubscribeDevicePermissionsSubscription?.(),this.unsubscribeDevicePermissionsSubscription=void 0,this.unsubscribeListDevicesSubscription?.(),this.unsubscribeListDevicesSubscription=void 0,this.inputDevices.clear(),clearInterval(this.intervalId),this.intervalId=void 0},this.sfuClient=t,this.options=n,this.subscriber=i,this.publisher=s,this.microphone=o,this.camera=a,this.state=c;let{sdk:u,browser:l}=r;this.sdkName=h0(u),this.sdkVersion=p0(u);let d=$j();this.webRTCVersion=d?.version||`${l?.name||""}-${l?.version||""}`||"N/A"}},$U=.35,Gy=class{constructor(){this.elementHandlerMap=new Map,this.observer=null,this.queueSet=new Set,this.setViewport=(t,n)=>{let r=()=>{this.observer?.disconnect(),this.observer=null,this.elementHandlerMap.clear()};return this.observer=new IntersectionObserver(i=>{i.forEach(s=>{this.elementHandlerMap.get(s.target)?.(s)})},R(E({root:t},n),{threshold:n?.threshold??$U})),this.queueSet.size&&(this.queueSet.forEach(([i,s])=>{t.contains(i)&&(this.observer.observe(i),this.elementHandlerMap.set(i,s))}),this.queueSet.clear()),r},this.observe=(t,n)=>{let r=[t,n],i=()=>{this.elementHandlerMap.delete(t),this.observer?.unobserve(t),this.queueSet.delete(r)};return this.elementHandlerMap.has(t)?i:this.observer?(this.observer.root.contains(t)&&(this.elementHandlerMap.set(t,n),this.observer.observe(t)),i):(this.queueSet.add(r),i)}}},BT={videoTrack:_e.UNKNOWN,screenShareTrack:_e.UNKNOWN},xo=Symbol("globalOverrideKey"),Wy=class{constructor(t,n){this.viewportTracker=new Gy,this.logger=fe(["DynascaleManager"]),this.pendingSubscriptionsUpdate=null,this.videoTrackSubscriptionOverridesSubject=new M({}),this.videoTrackSubscriptionOverrides$=this.videoTrackSubscriptionOverridesSubject.asObservable(),this.incomingVideoSettings$=this.videoTrackSubscriptionOverrides$.pipe(P(r=>{let o=r,{[xo]:i}=o,s=_n(o,[Uv(xo)]);return{enabled:i?.enabled!==!1,preferredResolution:i?.enabled?i.dimension:void 0,participants:Object.fromEntries(Object.entries(s).map(([a,c])=>[a,{enabled:c?.enabled!==!1,preferredResolution:c?.enabled?c.dimension:void 0}])),isParticipantVideoEnabled:a=>r[a]?.enabled??r[xo]?.enabled??!0}}),Ue(1)),this.setVideoTrackSubscriptionOverrides=(r,i)=>i?Ur(this.videoTrackSubscriptionOverridesSubject,s=>E(E({},s),Object.fromEntries(i.map(o=>[o,r])))):Ur(this.videoTrackSubscriptionOverridesSubject,r?{[xo]:r}:{}),this.applyTrackSubscriptions=(r=Xn.SLOW)=>{this.pendingSubscriptionsUpdate&&clearTimeout(this.pendingSubscriptionsUpdate);let i=()=>{this.pendingSubscriptionsUpdate=null,this.sfuClient?.updateSubscriptions(this.trackSubscriptions).catch(s=>{this.logger("debug","Failed to update track subscriptions",s)})};r?this.pendingSubscriptionsUpdate=setTimeout(i,r):i()},this.trackElementVisibility=(r,i,s)=>{let o=this.viewportTracker.observe(r,a=>{this.callState.updateParticipant(i,c=>{let u=c.viewportVisibilityState??BT,l=a.isIntersecting||document.fullscreenElement===r?_e.VISIBLE:_e.INVISIBLE;return R(E({},c),{viewportVisibilityState:R(E({},u),{[s]:l})})})});return()=>{o(),this.callState.updateParticipant(i,a=>{let c=a.viewportVisibilityState??BT;return R(E({},a),{viewportVisibilityState:R(E({},c),{[s]:_e.UNKNOWN})})})}},this.setViewport=r=>this.viewportTracker.setViewport(r),this.bindVideoElement=(r,i,s)=>{let o=this.callState.findParticipantBySessionId(i);if(!o)return;let a=(m,y)=>{y&&(y.width===0||y.height===0)&&(this.logger("debug","Ignoring 0x0 dimension",o),y=void 0),this.callState.updateParticipantTracks(s,{[i]:{dimension:y}}),this.applyTrackSubscriptions(m)},c=this.callState.participants$.pipe(P(m=>m.find(y=>y.sessionId===i)),fs(m=>!!m),Ae(),Ue({bufferSize:1,refCount:!0})),u,l=o.isLocalParticipant?null:c.pipe(P(m=>m.viewportVisibilityState?.[s]),Ae()).subscribe(m=>{if(!u){u=m??_e.UNKNOWN;return}if(u=m??_e.UNKNOWN,m===_e.INVISIBLE)return a(Xn.MEDIUM,void 0);a(Xn.MEDIUM,{width:r.clientWidth,height:r.clientHeight})}),d,f=o.isLocalParticipant?null:new ResizeObserver(()=>{let m=`${r.clientWidth},${r.clientHeight}`;if(!d){d=m;return}d===m||u===_e.INVISIBLE||(a(Xn.SLOW,{width:r.clientWidth,height:r.clientHeight}),d=m)});f?.observe(r);let h=o.isLocalParticipant?null:c.pipe(ei("publishedTracks"),P(m=>s==="videoTrack"?qi(m):Fr(m)),Ae()).subscribe(m=>{m?a(Xn.FAST,{width:r.clientWidth,height:r.clientHeight}):a(Xn.FAST,void 0)});r.autoplay=!0,r.playsInline=!0,r.muted=!0;let p=c.pipe(ei(s==="videoTrack"?"videoStream":"screenShareStream")).subscribe(m=>{let y=s==="videoTrack"?m.videoStream:m.screenShareStream;r.srcObject!==y&&(r.srcObject=y??null,(vv()||_l())&&setTimeout(()=>{r.srcObject=y??null,r.play().catch(v=>{this.logger("warn","Failed to play stream",v)})},25))});return()=>{a(Xn.FAST,void 0),l?.unsubscribe(),h?.unsubscribe(),p.unsubscribe(),f?.disconnect()}},this.bindAudioElement=(r,i,s)=>{let o=this.callState.findParticipantBySessionId(i);if(!o||o.isLocalParticipant)return;let a=this.callState.participants$.pipe(P(d=>d.find(f=>f.sessionId===i)),fs(d=>!!d),Ae(),Ue({bufferSize:1,refCount:!0})),c=a.pipe(ei(s==="screenShareAudioTrack"?"screenShareAudioStream":"audioStream")).subscribe(d=>{let f=s==="screenShareAudioTrack"?d.screenShareAudioStream:d.audioStream;r.srcObject!==f&&setTimeout(()=>{if(r.srcObject=f??null,r.srcObject){r.play().catch(p=>{this.logger("warn","Failed to play stream",p)});let{selectedDevice:h}=this.speaker.state;h&&"setSinkId"in r&&r.setSinkId(h)}})}),u="setSinkId"in r?this.speaker.state.selectedDevice$.subscribe(d=>{d&&r.setSinkId(d)}):null,l=gt([this.speaker.state.volume$,a.pipe(ei("audioVolume"))]).subscribe(([d,f])=>{r.volume=f.audioVolume??d});return r.autoplay=!0,()=>{u?.unsubscribe(),l.unsubscribe(),c.unsubscribe()}},this.callState=t,this.speaker=n}setSfuClient(t){this.sfuClient=t}get trackSubscriptions(){let t=[];for(let n of this.callState.remoteParticipants){if(n.videoDimension&&qi(n)){let r=this.videoTrackSubscriptionOverrides[n.sessionId]??this.videoTrackSubscriptionOverrides[xo];r?.enabled!==!1&&t.push({userId:n.userId,sessionId:n.sessionId,trackType:I.VIDEO,dimension:r?.dimension??n.videoDimension})}n.screenShareDimension&&Fr(n)&&t.push({userId:n.userId,sessionId:n.sessionId,trackType:I.SCREEN_SHARE,dimension:n.screenShareDimension}),cU(n)&&t.push({userId:n.userId,sessionId:n.sessionId,trackType:I.SCREEN_SHARE_AUDIO})}return t}get videoTrackSubscriptionOverrides(){return Vt(this.videoTrackSubscriptionOverrides$)}},Ky=class{constructor(){this.permissions=[],this.setPermissions=t=>{this.permissions=t||[]},this.setCallSettings=t=>{this.settings=t},this.hasPermission=t=>this.permissions.includes(t),this.canRequest=(t,n=this.settings)=>{if(!n)return!1;let{audio:r,video:i,screensharing:s}=n;switch(t){case je.SEND_AUDIO:return r.access_request_enabled;case je.SEND_VIDEO:return i.access_request_enabled;case je.SCREENSHARE:return s.access_request_enabled;default:return!1}}}},jr=class{constructor(t,n={sortParticipantsBy:bl}){this.name=t,this.options=n}},Jy=class{constructor(t){this.register=n=>{this.callTypes[n.name]=n},this.unregister=n=>{delete this.callTypes[n]},this.get=n=>(this.callTypes[n]||this.register(new jr(n)),this.callTypes[n]),this.callTypes=t.reduce((n,r)=>(n[r.name]=r,n),{})}},HU=new Jy([new jr("default",{sortParticipantsBy:bl}),new jr("development",{sortParticipantsBy:bl}),new jr("livestream",{sortParticipantsBy:jT}),new jr("audio_room",{sortParticipantsBy:jT})]),Cl=class{constructor(t){this.permission=t,this.disposeController=new AbortController,this.wasPrompted=!1,this.listeners=new Set,this.logger=fe(["permissions"]);let n=this.disposeController.signal;this.ready=g(this,null,function*(){let r=i=>{this.setState("prompt")};if(!zU())return r();try{let i=yield navigator.permissions.query({name:t.queryName});n.aborted||(this.setState(i.state),i.addEventListener("change",()=>this.setState(i.state),{signal:n}))}catch{r()}})}dispose(){this.state=void 0,this.disposeController.abort()}getState(){return g(this,null,function*(){if(yield this.ready,!this.state)throw new Error("BrowserPermission instance possibly disposed");return this.state})}prompt(){return g(this,arguments,function*({forcePrompt:t=!1,throwOnNotAllowed:n=!1}={}){yield pt(`permission-prompt-${this.permission.queryName}`,()=>g(this,null,function*(){if((yield this.getState())!=="prompt"||this.wasPrompted&&!t){let r=this.state==="granted";if(!r&&n)throw new DOMException("Permission was not granted previously, and prompting again is not allowed","NotAllowedError");return r}try{this.wasPrompted=!0;let r=yield navigator.mediaDevices.getUserMedia(this.permission.constraints);return YU(r),this.setState("granted"),!0}catch(r){if(r instanceof DOMException&&r.name==="NotAllowedError"){if(this.logger("info","Browser permission was not granted",{permission:this.permission}),this.setState("denied"),n)throw r;return!1}throw this.logger("error","Failed to getUserMedia",{error:r,permission:this.permission}),r}}))})}listen(t){return this.listeners.add(t),this.state&&t(this.state),()=>this.listeners.delete(t)}asObservable(){return Da(t=>this.listen(t),(t,n)=>n()).pipe(P(t=>t!=="denied"))}setState(t){this.state!==t&&(this.state=t,this.listeners.forEach(n=>n(t)))}};function zU(){return!Le()&&typeof navigator<"u"&&!!navigator.permissions?.query}var $T=Symbol("uninitialized");function Zi(e){let t=$T;return()=>(t===$T&&(t=e()),t)}var wv=(e,t)=>me(g(void 0,null,function*(){let n=yield navigator.mediaDevices.enumerateDevices();return n.some(i=>i.kind===t&&i.label==="")&&(yield e.prompt({throwOnNotAllowed:!0}),n=yield navigator.mediaDevices.enumerateDevices()),n.filter(i=>i.kind===t&&i.label!==""&&i.deviceId!=="default")})),qU=()=>typeof document>"u"?!1:"setSinkId"in document.createElement("audio"),g0={audio:{autoGainControl:!0,noiseSuppression:!0,echoCancellation:!0}},y0={video:{width:1280,height:720}},Ji=Zi(()=>new Cl({constraints:g0,queryName:"microphone"})),Sl=Zi(()=>new Cl({constraints:y0,queryName:"camera"})),kl=Zi(()=>navigator.mediaDevices.addEventListener?ls(navigator.mediaDevices,"devicechange").pipe(P(()=>{}),hd(500)):me([])),GU=Zi(()=>ds(kl(),Ji().asObservable()).pipe(dn(void 0),Xe(()=>wv(Ji(),"audioinput")),Ue(1))),WU=Zi(()=>ds(kl(),Sl().asObservable()).pipe(dn(void 0),Xe(()=>wv(Sl(),"videoinput")),Ue(1))),KU=Zi(()=>ds(kl(),Ji().asObservable()).pipe(dn(void 0),Xe(()=>wv(Ji(),"audiooutput")),Ue(1))),v0=e=>g(void 0,null,function*(){let t=yield navigator.mediaDevices.getUserMedia(e);return _l()&&navigator.mediaDevices.dispatchEvent(new Event("devicechange")),t}),b0=e=>g(void 0,null,function*(){let t={audio:E(E({},g0.audio),e)};try{return yield Ji().prompt({throwOnNotAllowed:!0,forcePrompt:!0}),yield v0(t)}catch(r){if(r instanceof OverconstrainedError&&e?.deviceId){let n=e,{deviceId:i}=n,s=_n(n,["deviceId"]);return fe(["devices"])("warn","Failed to get audio stream, will try again with relaxed contraints",{error:r,constraints:t,relaxedContraints:s}),b0(s)}throw fe(["devices"])("error","Failed to get audio stream",{error:r,constraints:t}),r}}),E0=e=>g(void 0,null,function*(){let t={video:E(E({},y0.video),e)};try{return yield Sl().prompt({throwOnNotAllowed:!0,forcePrompt:!0}),yield v0(t)}catch(r){if(r instanceof OverconstrainedError&&e?.deviceId){let n=e,{deviceId:i}=n,s=_n(n,["deviceId"]);return fe(["devices"])("warn","Failed to get video stream, will try again with relaxed contraints",{error:r,constraints:t,relaxedContraints:s}),E0(s)}throw fe(["devices"])("error","Failed to get video stream",{error:r,constraints:t}),r}}),JU=e=>g(void 0,null,function*(){try{return yield navigator.mediaDevices.getDisplayMedia(E({video:!0,audio:{channelCount:{ideal:2},echoCancellation:!1,autoGainControl:!1,noiseSuppression:!1},systemAudio:"include"},e))}catch(t){throw fe(["devices"])("error","Failed to get screen share stream",t),t}}),wl=typeof navigator<"u"&&typeof navigator.mediaDevices<"u"?kl().pipe(dn(void 0),Xe(()=>navigator.mediaDevices.enumerateDevices()),Ue(1)):void 0,YU=e=>{e.active&&(e.getTracks().forEach(t=>{t.stop()}),typeof e.release=="function"&&e.release())},jo=class{constructor(t,n,r){this.call=t,this.state=n,this.trackType=r,this.stopOnLeave=!0,this.subscriptions=[],this.isTrackStoppedDueToTrackEnd=!1,this.filters=[],this.statusChangeConcurrencyTag=Symbol("statusChangeConcurrencyTag"),this.filterRegistrationConcurrencyTag=Symbol("filterRegistrationConcurrencyTag"),this.dispose=()=>{this.subscriptions.forEach(i=>i())},this.logger=fe([`${I[r].toLowerCase()} manager`]),wl&&!Le()&&(this.trackType===I.AUDIO||this.trackType===I.VIDEO)&&this.handleDisconnectedOrReplacedDevices()}listDevices(){return this.getDevices()}get enabled(){return this.state.status==="enabled"}enable(){return g(this,null,function*(){this.state.prevStatus=this.state.optimisticStatus,this.state.optimisticStatus!=="enabled"&&(this.state.setPendingStatus("enabled"),yield tg(this.statusChangeConcurrencyTag,t=>g(this,null,function*(){try{yield this.unmuteStream(),this.state.setStatus("enabled")}finally{t.aborted||this.state.setPendingStatus(this.state.status)}})))})}disable(t=!1){return g(this,null,function*(){this.state.prevStatus=this.state.optimisticStatus,!(!t&&this.state.optimisticStatus==="disabled")&&(this.state.setPendingStatus("disabled"),yield tg(this.statusChangeConcurrencyTag,n=>g(this,null,function*(){try{let r=t||this.state.disableMode==="stop-tracks";yield this.muteStream(r),this.state.setStatus("disabled")}finally{n.aborted||this.state.setPendingStatus(this.state.status)}})))})}statusChangeSettled(){return g(this,null,function*(){yield rU(this.statusChangeConcurrencyTag)})}resume(){return g(this,null,function*(){this.state.prevStatus==="enabled"&&this.state.status!=="enabled"&&(yield this.enable())})}toggle(){return g(this,null,function*(){return this.state.optimisticStatus==="enabled"?yield this.disable():yield this.enable()})}registerFilter(t){let n={start:t,stop:void 0};return{registered:pt(this.filterRegistrationConcurrencyTag,()=>g(this,null,function*(){this.filters.push(n),yield this.applySettingsToStream()})),unregister:()=>pt(this.filterRegistrationConcurrencyTag,()=>g(this,null,function*(){n.stop?.(),this.filters=this.filters.filter(i=>i!==n),yield this.applySettingsToStream()}))}}setDefaultConstraints(t){this.state.setDefaultConstraints(t)}select(t){return g(this,null,function*(){if(Le())throw new Error("This method is not supported in React Native. Please visit https://getstream.io/video/docs/reactnative/core/camera-and-microphone/#speaker-management for reference.");let n=this.state.selectedDevice;if(t!==n)try{this.state.setDevice(t),yield this.applySettingsToStream()}catch(r){throw this.state.setDevice(n),r}})}applySettingsToStream(){return g(this,null,function*(){yield tg(this.statusChangeConcurrencyTag,()=>g(this,null,function*(){this.enabled&&(yield this.muteStream(),yield this.unmuteStream())}))})}getTracks(){return this.state.mediaStream?.getTracks()??[]}muteStream(t=!0){return g(this,null,function*(){if(!this.state.mediaStream)return;this.logger("debug",`${t?"Stopping":"Disabling"} stream`),this.call.state.callingState===V.JOINED&&(yield this.stopPublishStream(t)),this.muteLocalStream(t),this.getTracks().every(r=>r.readyState==="ended")&&(this.state.mediaStream&&typeof this.state.mediaStream.release=="function"&&this.state.mediaStream.release(),this.state.setMediaStream(void 0,void 0),this.filters.forEach(r=>r.stop?.()))})}muteTracks(){this.getTracks().forEach(t=>{t.enabled&&(t.enabled=!1)})}unmuteTracks(){this.getTracks().forEach(t=>{t.enabled||(t.enabled=!0)})}stopTracks(){this.getTracks().forEach(t=>{t.readyState==="live"&&t.stop()})}muteLocalStream(t){this.state.mediaStream&&(t?this.stopTracks():this.muteTracks())}unmuteStream(){return g(this,null,function*(){this.logger("debug","Starting stream");let t,n;if(this.state.mediaStream&&this.getTracks().every(r=>r.readyState==="live"))t=this.state.mediaStream,this.unmuteTracks();else{let r=this.state.defaultConstraints,i=R(E({},r),{deviceId:this.state.selectedDevice?{exact:this.state.selectedDevice}:void 0}),s=o=>a=>g(this,null,function*(){if(!o)return a;let c=yield o;return a.getTracks().forEach(u=>{let l=u.stop;u.stop=function(){l.call(u),c.getTracks().forEach(f=>{f.kind===u.kind&&f.stop()})}}),c.getTracks().forEach(u=>{let l=()=>{a.getTracks().forEach(d=>{u.kind===d.kind&&(d.stop(),d.dispatchEvent(new Event("ended")))})};u.addEventListener("ended",l),this.subscriptions.push(()=>{u.removeEventListener("ended",l)})}),a});n=this.getStream(i),t=yield this.filters.reduce((o,a)=>o.then(c=>{let{stop:u,output:l}=a.start(c);return a.stop=u,l}).then(s(o),c=>(this.logger("warn","Filter failed to start and will be ignored",c),o)),n)}if(this.call.state.callingState===V.JOINED&&(yield this.publishStream(t)),this.state.mediaStream!==t){this.state.setMediaStream(t,yield n);let r=()=>g(this,null,function*(){yield this.statusChangeSettled(),this.enabled&&(this.isTrackStoppedDueToTrackEnd=!0,setTimeout(()=>{this.isTrackStoppedDueToTrackEnd=!1},2e3),yield this.disable())});this.getTracks().forEach(i=>{i.addEventListener("ended",r),this.subscriptions.push(()=>i.removeEventListener("ended",r))})}})}get mediaDeviceKind(){return this.trackType===I.AUDIO?"audioinput":this.trackType===I.VIDEO?"videoinput":""}handleDisconnectedOrReplacedDevices(){this.subscriptions.push(ht(gt([wl.pipe(gd()),this.state.selectedDevice$]),i=>g(this,[i],function*([[t,n],r]){try{if(!r)return;yield this.statusChangeSettled();let s=!1,o=!1,a=this.findDeviceInList(n,r),c=this.findDeviceInList(t,r);!a&&c?s=!0:a&&c&&a.deviceId===c.deviceId&&a.groupId!==c.groupId&&(o=!0),s&&(yield this.disable(),yield this.select(void 0)),o&&(this.isTrackStoppedDueToTrackEnd&&this.state.status==="disabled"?(yield this.enable(),this.isTrackStoppedDueToTrackEnd=!1):yield this.applySettingsToStream())}catch(s){this.logger("warn","Unexpected error while handling disconnected or replaced device",s)}})))}findDeviceInList(t,n){return t.find(r=>r.deviceId===n&&r.kind===this.mediaDeviceKind)}},Uo=class{constructor(t="stop-tracks",n){this.disableMode=t,this.statusSubject=new M(void 0),this.optimisticStatusSubject=new M(void 0),this.mediaStreamSubject=new M(void 0),this.selectedDeviceSubject=new M(void 0),this.defaultConstraintsSubject=new M(void 0),this.mediaStream$=this.mediaStreamSubject.asObservable(),this.selectedDevice$=this.selectedDeviceSubject.asObservable().pipe(Ae()),this.status$=this.statusSubject.asObservable().pipe(Ae()),this.optimisticStatus$=this.optimisticStatusSubject.asObservable().pipe(Ae()),this.defaultConstraints$=this.defaultConstraintsSubject.asObservable(),this.getCurrentValue=Vt,this.setCurrentValue=Ur,this.hasBrowserPermission$=n?n.asObservable().pipe(Ue(1)):$(!0)}get status(){return this.getCurrentValue(this.status$)}get optimisticStatus(){return this.getCurrentValue(this.optimisticStatus$)}get selectedDevice(){return this.getCurrentValue(this.selectedDevice$)}get mediaStream(){return this.getCurrentValue(this.mediaStream$)}setStatus(t){this.setCurrentValue(this.statusSubject,t)}setPendingStatus(t){this.setCurrentValue(this.optimisticStatusSubject,t)}setMediaStream(t,n){this.setCurrentValue(this.mediaStreamSubject,t),n&&this.setDevice(this.getDeviceIdFromStream(n))}setDevice(t){this.setCurrentValue(this.selectedDeviceSubject,t)}get defaultConstraints(){return this.getCurrentValue(this.defaultConstraints$)}setDefaultConstraints(t){this.setCurrentValue(this.defaultConstraintsSubject,t)}},Yy=class extends Uo{constructor(){super("stop-tracks",Sl()),this.directionSubject=new M(void 0),this.direction$=this.directionSubject.asObservable().pipe(Ae())}get direction(){return this.getCurrentValue(this.direction$)}setDirection(t){this.setCurrentValue(this.directionSubject,t)}setMediaStream(t,n){if(super.setMediaStream(t,n),t){let r=Le()?this.direction:t.getVideoTracks()[0]?.getSettings().facingMode==="environment"?"back":"front";this.setDirection(r)}}getDeviceIdFromStream(t){let[n]=t.getVideoTracks();return n?.getSettings().deviceId}},ZU=()=>/Mobi/i.test(navigator.userAgent),Zy=class extends jo{constructor(t){super(t,new Yy,I.VIDEO),this.targetResolution={width:1280,height:720}}isDirectionSupportedByDevice(){return Le()||ZU()}selectDirection(t){return g(this,null,function*(){this.isDirectionSupportedByDevice()?(this.state.setDirection(t),this.state.setDevice(void 0),yield this.applySettingsToStream()):this.logger("warn","Camera direction ignored for desktop devices")})}flip(){return g(this,null,function*(){let t=this.state.direction==="front"?"back":"front";yield this.selectDirection(t)})}selectTargetResolution(t){return g(this,null,function*(){if(this.targetResolution.height=t.height,this.targetResolution.width=t.width,this.state.optimisticStatus==="enabled")try{yield this.statusChangeSettled()}catch(n){this.logger("warn","could not apply target resolution",n)}if(this.enabled&&this.state.mediaStream){let[n]=this.state.mediaStream.getVideoTracks();if(!n)return;let{width:r,height:i}=n.getSettings();(r!==this.targetResolution.width||i!==this.targetResolution.height)&&(yield this.applySettingsToStream(),this.logger("debug",`${r}x${i} target resolution applied to media stream`))}})}setPreferredCodec(t){this.call.updatePublishOptions({preferredCodec:t})}getDevices(){return WU()}getStream(t){return t.width=this.targetResolution.width,t.height=this.targetResolution.height,!t.deviceId&&this.state.direction&&this.isDirectionSupportedByDevice()&&(t.facingMode=this.state.direction==="front"?"user":"environment"),E0(t)}publishStream(t){return this.call.publishVideoStream(t)}stopPublishStream(t){return this.call.stopPublish(I.VIDEO,t)}},Qy=class extends Uo{constructor(t){super(t,Ji()),this.speakingWhileMutedSubject=new M(!1),this.speakingWhileMuted$=this.speakingWhileMutedSubject.asObservable().pipe(Ae())}get speakingWhileMuted(){return this.getCurrentValue(this.speakingWhileMuted$)}setSpeakingWhileMuted(t){this.setCurrentValue(this.speakingWhileMutedSubject,t)}getDeviceIdFromStream(t){let[n]=t.getAudioTracks();return n?.getSettings().deviceId}},QU=500,XU=150,eV=128,tV=(e,t,n={})=>{let{detectionFrequencyInMs:r=QU,audioLevelThreshold:i=XU,fftSize:s=eV,destroyStreamOnStop:o=!0}=n,a=new AudioContext,c=a.createAnalyser();c.fftSize=s;let u=a.createMediaStreamSource(e);u.connect(c);let l=setInterval(()=>{let d=new Uint8Array(c.frequencyBinCount);c.getByteFrequencyData(d);let f=d.some(m=>m>=i),h=d.reduce((m,y)=>m+y,0)/d.length,p=h>i?100:Math.round(h/i*100);e.getAudioTracks()[0]?.enabled?t({isSoundDetected:f,audioLevel:p}):t({isSoundDetected:!1,audioLevel:0})},r);return function(){return g(this,null,function*(){clearInterval(l),u.disconnect(),c.disconnect(),a.state!=="closed"&&(yield a.close()),o&&e.getTracks().forEach(f=>{f.stop(),e.removeTrack(f)})})}},nV=.2,Xy=class{constructor(){this.pc1=new RTCPeerConnection({}),this.pc2=new RTCPeerConnection({})}start(){return g(this,null,function*(){try{this.cleanupAudioStream();let t=yield navigator.mediaDevices.getUserMedia({audio:!0});this.audioStream=t,this.pc1.addEventListener("icecandidate",s=>g(this,null,function*(){yield this.pc2.addIceCandidate(s.candidate)})),this.pc2.addEventListener("icecandidate",s=>g(this,null,function*(){yield this.pc1.addIceCandidate(s.candidate)})),t.getTracks().forEach(s=>this.pc1.addTrack(s,t));let n=yield this.pc1.createOffer({});yield this.pc2.setRemoteDescription(n),yield this.pc1.setLocalDescription(n);let r=yield this.pc2.createAnswer();yield this.pc1.setRemoteDescription(r),yield this.pc2.setLocalDescription(r),t.getAudioTracks().forEach(s=>s.enabled=!1)}catch(t){console.error("Error connecting and negotiating between PeerConnections:",t)}})}stop(){this.pc1.close(),this.pc2.close(),this.cleanupAudioStream(),this.intervalId&&clearInterval(this.intervalId)}onSpeakingDetectedStateChange(t){return this.intervalId=setInterval(()=>g(this,null,function*(){let n=yield this.pc1.getStats(),i=El(n).find(s=>s.type==="media-source"&&s.kind==="audio");if(i){let{audioLevel:s}=i;s&&(s>=nV?t({isSoundDetected:!0,audioLevel:s}):t({isSoundDetected:!1,audioLevel:0}))}}),1e3),()=>{clearInterval(this.intervalId)}}cleanupAudioStream(){this.audioStream&&(this.audioStream.getTracks().forEach(t=>t.stop()),typeof this.audioStream.release=="function"&&this.audioStream.release())}},ev=class extends jo{constructor(t,n=Le()?"disable-tracks":"stop-tracks"){super(t,new Qy(n),I.AUDIO),this.speakingWhileMutedNotificationEnabled=!0,this.soundDetectorConcurrencyTag=Symbol("soundDetectorConcurrencyTag"),this.subscriptions.push(ht(gt([this.call.state.callingState$,this.call.state.ownCapabilities$,this.state.selectedDevice$,this.state.status$]),a=>g(this,[a],function*([r,i,s,o]){try{if(r===V.LEFT&&(yield this.stopSpeakingWhileMutedDetection()),r!==V.JOINED||!this.speakingWhileMutedNotificationEnabled)return;i.includes(je.SEND_AUDIO)?o==="disabled"?yield this.startSpeakingWhileMutedDetection(s):yield this.stopSpeakingWhileMutedDetection():yield this.stopSpeakingWhileMutedDetection()}catch(c){this.logger("warn","Could not enable speaking while muted",c)}}))),this.subscriptions.push(ht(this.call.state.callingState$,r=>{if(!this.noiseCancellationRegistration||!this.noiseCancellation)return;this.call.state.settings?.audio.noise_cancellation?.mode===Qm.AUTO_ON&&r===V.JOINED?this.noiseCancellationRegistration.then(()=>this.noiseCancellation?.enable()).catch(s=>(this.logger("warn","Failed to enable noise cancellation",s),this.call.notifyNoiseCancellationStopped())):r===V.LEFT&&this.noiseCancellationRegistration.then(()=>this.noiseCancellation?.disable()).catch(s=>{this.logger("warn","Failed to disable noise cancellation",s)})}))}enableNoiseCancellation(t){return g(this,null,function*(){if(Le())throw new Error("Noise cancellation is not supported in React Native");let{ownCapabilities:n,settings:r}=this.call.state;if(!n.includes(je.ENABLE_NOISE_CANCELLATION))throw new Error("Noise cancellation is not available.");let s=r?.audio.noise_cancellation;if(!s||s.mode===Qm.DISABLED)throw new Error("Noise cancellation is disabled for this call type.");try{this.noiseCancellation=t,this.noiseCancellationChangeUnsubscribe=this.noiseCancellation.on("change",a=>{a?this.call.notifyNoiseCancellationStarting().catch(c=>{this.logger("warn","notifyNoiseCancellationStart failed",c)}):this.call.notifyNoiseCancellationStopped().catch(c=>{this.logger("warn","notifyNoiseCancellationStop failed",c)})});let o=this.registerFilter(t.toFilter());this.noiseCancellationRegistration=o.registered,this.unregisterNoiseCancellation=o.unregister,yield this.noiseCancellationRegistration,s.mode===Qm.AUTO_ON&&this.call.state.callingState===V.JOINED&&t.enable()}catch(o){this.logger("warn","Failed to enable noise cancellation",o),yield this.disableNoiseCancellation().catch(a=>{this.logger("warn","Failed to disable noise cancellation",a)})}})}disableNoiseCancellation(){return g(this,null,function*(){if(Le())throw new Error("Noise cancellation is not supported in React Native");yield(this.unregisterNoiseCancellation?.()??Promise.resolve()).then(()=>this.noiseCancellation?.disable()).then(()=>this.noiseCancellationChangeUnsubscribe?.()).catch(t=>{this.logger("warn","Failed to unregister noise cancellation",t)}),yield this.call.notifyNoiseCancellationStopped()})}enableSpeakingWhileMutedNotification(){return g(this,null,function*(){this.speakingWhileMutedNotificationEnabled=!0,this.state.status==="disabled"&&(yield this.startSpeakingWhileMutedDetection(this.state.selectedDevice))})}disableSpeakingWhileMutedNotification(){return g(this,null,function*(){this.speakingWhileMutedNotificationEnabled=!1,yield this.stopSpeakingWhileMutedDetection()})}getDevices(){return GU()}getStream(t){return b0(t)}publishStream(t){return this.call.publishAudioStream(t)}stopPublishStream(t){return this.call.stopPublish(I.AUDIO,t)}startSpeakingWhileMutedDetection(t){return g(this,null,function*(){yield pt(this.soundDetectorConcurrencyTag,()=>g(this,null,function*(){if(yield this.stopSpeakingWhileMutedDetection(),Le()){this.rnSpeechDetector=new Xy,yield this.rnSpeechDetector.start();let n=this.rnSpeechDetector?.onSpeakingDetectedStateChange(r=>{this.state.setSpeakingWhileMuted(r.isSoundDetected)});this.soundDetectorCleanup=()=>{n(),this.rnSpeechDetector?.stop(),this.rnSpeechDetector=void 0}}else{let n=yield this.getStream({deviceId:t});this.soundDetectorCleanup=tV(n,r=>{this.state.setSpeakingWhileMuted(r.isSoundDetected)})}}))})}stopSpeakingWhileMutedDetection(){return g(this,null,function*(){yield pt(this.soundDetectorConcurrencyTag,()=>g(this,null,function*(){if(!this.soundDetectorCleanup)return;let t=this.soundDetectorCleanup;this.soundDetectorCleanup=void 0,this.state.setSpeakingWhileMuted(!1),yield t()}))})}},tv=class extends Uo{constructor(){super(...arguments),this.audioEnabledSubject=new M(!0),this.settingsSubject=new M(void 0),this.audioEnabled$=this.audioEnabledSubject.asObservable().pipe(Ae()),this.settings$=this.settingsSubject.asObservable(),this.getDeviceIdFromStream=t=>{let[n]=t.getTracks();return n?.getSettings().deviceId}}get audioEnabled(){return this.getCurrentValue(this.audioEnabled$)}setAudioEnabled(t){this.setCurrentValue(this.audioEnabledSubject,t)}get settings(){return this.getCurrentValue(this.settings$)}setSettings(t){this.setCurrentValue(this.settingsSubject,t)}},nv=class extends jo{constructor(t){super(t,new tv,I.SCREEN_SHARE),this.subscriptions.push(ht(t.state.settings$,n=>{let r=n?.screensharing.target_resolution;r&&this.setDefaultConstraints({video:{width:r.width,height:r.height}})}))}enableScreenShareAudio(){this.state.setAudioEnabled(!0)}disableScreenShareAudio(){return g(this,null,function*(){this.state.setAudioEnabled(!1),this.call.publisher?.isPublishing(I.SCREEN_SHARE_AUDIO)&&(yield this.call.stopPublish(I.SCREEN_SHARE_AUDIO,!0))})}getSettings(){return this.state.settings}setSettings(t){this.state.setSettings(t)}getDevices(){return $([])}getStream(t){return this.state.audioEnabled||(t.audio=!1),JU(t)}publishStream(t){return this.call.publishScreenShareStream(t)}stopPublishStream(t){return g(this,null,function*(){yield this.call.stopPublish(I.SCREEN_SHARE,t),yield this.call.stopPublish(I.SCREEN_SHARE_AUDIO,t)})}select(t){return g(this,null,function*(){throw new Error("This method is not supported in for Screen Share")})}},rv=class{constructor(){this.selectedDeviceSubject=new M(""),this.volumeSubject=new M(1),this.isDeviceSelectionSupported=qU(),this.getCurrentValue=Vt,this.setCurrentValue=Ur,this.selectedDevice$=this.selectedDeviceSubject.asObservable().pipe(Ae()),this.volume$=this.volumeSubject.asObservable().pipe(Ae())}get selectedDevice(){return this.getCurrentValue(this.selectedDevice$)}get volume(){return this.getCurrentValue(this.volume$)}setDevice(t){this.setCurrentValue(this.selectedDeviceSubject,t)}setVolume(t){this.setCurrentValue(this.volumeSubject,t)}},iv=class{constructor(t){this.state=new rv,this.subscriptions=[],this.dispose=()=>{this.subscriptions.forEach(n=>n.unsubscribe())},this.call=t,wl&&!Le()&&this.subscriptions.push(gt([wl,this.state.selectedDevice$]).subscribe(([n,r])=>{if(!r)return;n.find(s=>s.deviceId===r&&s.kind==="audiooutput")||this.select("")}))}listDevices(){if(Le())throw new Error("This feature is not supported in React Native. Please visit https://getstream.io/video/docs/reactnative/core/camera-and-microphone/#speaker-management for more details");return KU()}select(t){if(Le())throw new Error("This feature is not supported in React Native. Please visit https://getstream.io/video/docs/reactnative/core/camera-and-microphone/#speaker-management for more details");this.state.setDevice(t)}setVolume(t){if(Le())throw new Error("This feature is not supported in React Native. Please visit https://getstream.io/video/docs/reactnative/core/camera-and-microphone/#speaker-management for more details");if(t&&(t<0||t>1))throw new Error("Volume must be between 0 and 1");this.state.setVolume(t)}setParticipantVolume(t,n){if(Le())throw new Error("This feature is not supported in React Native. Please visit https://getstream.io/video/docs/reactnative/core/camera-and-microphone/#speaker-management for more details");if(n&&(n<0||n>1))throw new Error("Volume must be between 0 and 1, or undefined");this.call.state.updateParticipant(t,{audioVolume:n})}},Lr=class{constructor({type:t,id:n,streamClient:r,members:i,ownCapabilities:s,sortParticipantsBy:o,clientStore:a,ringing:c=!1,watching:u=!1}){this.state=new $y,this.permissionsContext=new Ky,this.dispatcher=new jy,this.sfuClientTag=0,this.reconnectConcurrencyTag=Symbol("reconnectConcurrencyTag"),this.reconnectAttempts=0,this.reconnectStrategy=ee.UNSPECIFIED,this.fastReconnectDeadlineSeconds=0,this.lastOfflineTimestamp=0,this.trackPublishOrder=[],this.hasJoinedOnce=!1,this.deviceSettingsAppliedOnce=!1,this.initialized=!1,this.joinLeaveConcurrencyTag=Symbol("joinLeaveConcurrencyTag"),this.leaveCallHooks=new Set,this.streamClientEventHandlers=new Map,this.handleOwnCapabilitiesUpdated=f=>g(this,null,function*(){if(this.permissionsContext.setPermissions(f),!this.publisher)return;let h={[je.SEND_AUDIO]:I.AUDIO,[je.SEND_VIDEO]:I.VIDEO,[je.SCREENSHARE]:I.SCREEN_SHARE};for(let[p,m]of Object.entries(h))if(!this.permissionsContext.hasPermission(p))try{switch(m){case I.AUDIO:this.microphone.enabled&&(yield this.microphone.disable());break;case I.VIDEO:this.camera.enabled&&(yield this.camera.disable());break;case I.SCREEN_SHARE:this.screenShare.enabled&&(yield this.screenShare.disable());break}}catch(v){this.logger("error","Can't disable mic/camera/screenshare after revoked permissions",v)}}),this.on=(f,h)=>{if(FT(f))return this.dispatcher.on(f,h);let p=this.streamClient.on(f,m=>{let y=m;y.call_cid&&y.call_cid===this.cid&&h(y)});return this.streamClientEventHandlers.set(h,p),()=>{this.off(f,h)}},this.off=(f,h)=>{if(FT(f))return this.dispatcher.off(f,h);let p=this.streamClientEventHandlers.get(h);p&&p()},this.leave=(...p)=>g(this,[...p],function*({reject:f=!1,reason:h="user is leaving the call"}={}){yield pt(this.joinLeaveConcurrencyTag,()=>g(this,null,function*(){let m=this.state.callingState;if(m===V.LEFT)throw new Error("Cannot leave call that has already been left.");if(m===V.JOINING&&(yield new Promise(S=>{this.state.callingState$.pipe(fs(_=>_!==V.JOINED,!0)).subscribe(()=>S())})),m===V.RINGING)if(f)yield this.reject(h);else{let v=this.state.remoteParticipants.length>0;this.isCreatedByMe&&!v&&(yield this.reject("cancel"))}this.statsReporter?.stop(),this.statsReporter=void 0,this.sfuStatsReporter?.stop(),this.sfuStatsReporter=void 0,this.subscriber?.close(),this.subscriber=void 0,this.publisher?.close({stopTracks:!0}),this.publisher=void 0,yield this.sfuClient?.leaveAndClose(h),this.sfuClient=void 0,this.dynascaleManager.setSfuClient(void 0),this.state.setCallingState(V.LEFT),this.leaveCallHooks.forEach(v=>v()),this.initialized=!1,this.hasJoinedOnce=!1,this.clientStore.unregisterCall(this),this.camera.dispose(),this.microphone.dispose(),this.screenShare.dispose(),this.speaker.dispose();let y=[];this.camera.stopOnLeave&&y.push(this.camera.disable(!0)),this.microphone.stopOnLeave&&y.push(this.microphone.disable(!0)),this.screenShare.stopOnLeave&&y.push(this.screenShare.disable(!0)),yield Promise.all(y)}))}),this.get=f=>g(this,null,function*(){yield this.setup();let h=yield this.streamClient.get(this.streamClientBasePath,f);return this.state.updateFromCallResponse(h.call),this.state.setMembers(h.members),this.state.setOwnCapabilities(h.own_capabilities),(f?.ring||this.ringing)&&this.ringingSubject.next(!0),this.streamClient._hasConnectionID()&&(this.watching=!0,this.clientStore.registerCall(this)),yield this.applyDeviceConfig(!1),h}),this.getOrCreate=f=>g(this,null,function*(){yield this.setup();let h=yield this.streamClient.post(this.streamClientBasePath,f);return this.state.updateFromCallResponse(h.call),this.state.setMembers(h.members),this.state.setOwnCapabilities(h.own_capabilities),(f?.ring||this.ringing)&&this.ringingSubject.next(!0),this.streamClient._hasConnectionID()&&(this.watching=!0,this.clientStore.registerCall(this)),yield this.applyDeviceConfig(!1),h}),this.create=f=>g(this,null,function*(){return this.getOrCreate(f)}),this.ring=()=>g(this,null,function*(){return yield this.get({ring:!0})}),this.notify=()=>g(this,null,function*(){return yield this.get({notify:!0})}),this.accept=()=>g(this,null,function*(){return this.streamClient.post(`${this.streamClientBasePath}/accept`)}),this.reject=f=>g(this,null,function*(){return this.streamClient.post(`${this.streamClientBasePath}/reject`,{reason:f})}),this.join=f=>g(this,null,function*(){let h=Date.now();yield this.setup();let p=this.state.callingState;if([V.JOINED,V.JOINING].includes(p))throw new Error("Illegal State: call.join() shall be called only once");this.joinCallData=f,this.logger("debug","Starting join flow"),this.state.setCallingState(V.JOINING);let m=this.reconnectStrategy===ee.MIGRATE,y=this.reconnectStrategy===ee.REJOIN,v=this.reconnectStrategy===ee.FAST,S=this.sfuStatsReporter?.options;if(!this.credentials||!S||y||m)try{let he=yield this.doJoinRequest(f);this.credentials=he.credentials,S=he.stats_options}catch(he){throw this.state.setCallingState(p),he}let _=this.sfuClient,N=_?.sessionId,B=!!_?.isHealthy,L=y||m||!B?new rg({logTag:String(this.sfuClientTag++),dispatcher:this.dispatcher,credentials:this.credentials,streamClient:this.streamClient,sessionId:y?void 0:N,onSignalClose:()=>this.handleSfuSignalClose(L)}):_;this.sfuClient=L,this.dynascaleManager.setSfuClient(L);let ae=OT();if(_!==L){let he=yield Hj("recvonly"),Bt=this.reconnectStrategy!==ee.UNSPECIFIED?this.getReconnectDetails(f?.migrating_from,N):void 0,{callState:Qi,fastReconnectDeadlineSeconds:nr}=yield L.join({subscriberSdp:he,publisherSdp:"",clientDetails:ae,fastReconnect:v,reconnectDetails:Bt});this.fastReconnectDeadlineSeconds=nr,Qi&&this.state.updateFromSfuCallState(Qi,L.sessionId,Bt)}if(m||this.state.setCallingState(V.JOINED),this.hasJoinedOnce=!0,v)yield this.restoreICE(L,{includeSubscriber:!1});else{let he=bU(this.credentials.ice_servers);this.initPublisherAndSubscriber({sfuClient:L,connectionConfig:he,clientDetails:ae,statsOptions:S,closePreviousInstances:!m})}if(!y&&!v&&!m&&this.sfuStatsReporter?.sendTelemetryData({data:{oneofKind:"connectionTimeSeconds",connectionTimeSeconds:(Date.now()-h)/1e3}}),y){let he=ee[this.reconnectStrategy];yield _?.leaveAndClose(`Closing previous WS after reconnect with strategy: ${he}`)}else B||_?.close(rg.DISPOSE_OLD_SOCKET,"Closing unhealthy WS after reconnect");this.deviceSettingsAppliedOnce||(yield this.applyDeviceConfig(!0),this.deviceSettingsAppliedOnce=!0),delete this.joinCallData?.ring,delete this.joinCallData?.notify,this.logger("info",`Joined call ${this.cid}`)}),this.getReconnectDetails=(f,h)=>{let p=this.reconnectStrategy,m=p===ee.REJOIN,y=this.publisher?.getAnnouncedTracks()||[];return{strategy:p,announcedTracks:y,subscriptions:this.dynascaleManager.trackSubscriptions,reconnectAttempt:this.reconnectAttempts,fromSfuId:f||"",previousSessionId:m&&h||""}},this.restoreICE=(p,...m)=>g(this,[p,...m],function*(f,h={}){let{includeSubscriber:y=!0,includePublisher:v=!0}=h;this.subscriber&&(this.subscriber.setSfuClient(f),y&&(yield this.subscriber.restartIce())),this.publisher&&(this.publisher.setSfuClient(f),v&&(yield this.publisher.restartIce()))}),this.initPublisherAndSubscriber=f=>{let{sfuClient:h,connectionConfig:p,clientDetails:m,statsOptions:y,closePreviousInstances:v}=f;if(v&&this.subscriber&&this.subscriber.close(),this.subscriber=new zy({sfuClient:h,dispatcher:this.dispatcher,state:this.state,connectionConfig:p,logTag:String(this.sfuClientTag),onUnrecoverableError:()=>{this.reconnect(ee.REJOIN).catch(_=>{this.logger("warn","[Reconnect] Error reconnecting after a subscriber error",_)})}}),!(this.streamClient.user?.type==="anonymous")){v&&this.publisher&&this.publisher.close({stopTracks:!1});let _=this.state.settings?.audio,N=!!_?.opus_dtx_enabled,B=!!_?.redundant_coding_enabled;this.publisher=new Hy({sfuClient:h,dispatcher:this.dispatcher,state:this.state,connectionConfig:p,isDtxEnabled:N,isRedEnabled:B,logTag:String(this.sfuClientTag),onUnrecoverableError:()=>{this.reconnect(ee.REJOIN).catch(L=>{this.logger("warn","[Reconnect] Error reconnecting after a publisher error",L)})}})}this.statsReporter?.stop(),this.statsReporter=BU({subscriber:this.subscriber,publisher:this.publisher,state:this.state,datacenter:h.edgeName}),this.sfuStatsReporter?.stop(),y?.reporting_interval_ms>0&&(this.sfuStatsReporter=new qy(h,{clientDetails:m,options:y,subscriber:this.subscriber,publisher:this.publisher,microphone:this.microphone,camera:this.camera,state:this.state}),this.sfuStatsReporter.start())},this.doJoinRequest=f=>g(this,null,function*(){let h=yield this.streamClient.getLocationHint(),p=R(E({},f),{location:h}),m=yield this.streamClient.post(`${this.streamClientBasePath}/join`,p);return this.state.updateFromCallResponse(m.call),this.state.setMembers(m.members),this.state.setOwnCapabilities(m.own_capabilities),f?.ring&&!this.ringing&&this.ringingSubject.next(!0),this.ringing&&!this.isCreatedByMe&&(yield this.accept()),this.streamClient._hasConnectionID()&&(this.watching=!0,this.clientStore.registerCall(this)),m}),this.handleSfuSignalClose=f=>{this.logger("debug","[Reconnect] SFU signal connection closed"),!f.isLeaving&&this.reconnect(ee.REJOIN).catch(h=>{this.logger("warn","[Reconnect] Error reconnecting",h)})},this.reconnect=f=>g(this,null,function*(){return pt(this.reconnectConcurrencyTag,()=>g(this,null,function*(){this.logger("info",`[Reconnect] Reconnecting with strategy ${ee[f]}`),this.reconnectStrategy=f;do{this.reconnectStrategy!==ee.FAST&&this.reconnectAttempts++;let h=ee[this.reconnectStrategy];try{switch(yield this.networkAvailableTask?.promise,this.reconnectStrategy){case ee.UNSPECIFIED:case ee.DISCONNECT:this.logger("debug",`[Reconnect] No-op strategy ${h}`);break;case ee.FAST:yield this.reconnectFast();break;case ee.REJOIN:yield this.reconnectRejoin();break;case ee.MIGRATE:yield this.reconnectMigrate();break;default:vl(this.reconnectStrategy,"Unknown reconnection strategy");break}break}catch(p){if(p instanceof pl&&p.unrecoverable){this.logger("warn","[Reconnect] Can't reconnect due to coordinator unrecoverable error",p),this.state.setCallingState(V.RECONNECTING_FAILED);return}this.logger("warn",`[Reconnect] ${h} (${this.reconnectAttempts}) failed. Attempting with REJOIN`,p),yield sn(500),this.reconnectStrategy=ee.REJOIN}}while(this.state.callingState!==V.JOINED&&this.state.callingState!==V.RECONNECTING_FAILED&&this.state.callingState!==V.LEFT)}))}),this.reconnectFast=()=>g(this,null,function*(){let f=Date.now();this.reconnectStrategy=ee.FAST,this.state.setCallingState(V.RECONNECTING),yield this.join(this.joinCallData),this.sfuStatsReporter?.sendTelemetryData({data:{oneofKind:"reconnection",reconnection:{timeSeconds:(Date.now()-f)/1e3,strategy:ee.FAST}}})}),this.reconnectRejoin=()=>g(this,null,function*(){let f=Date.now();this.reconnectStrategy=ee.REJOIN,this.state.setCallingState(V.RECONNECTING),yield this.join(this.joinCallData),yield this.restorePublishedTracks(),this.restoreSubscribedTracks(),this.sfuStatsReporter?.sendTelemetryData({data:{oneofKind:"reconnection",reconnection:{timeSeconds:(Date.now()-f)/1e3,strategy:ee.REJOIN}}})}),this.reconnectMigrate=()=>g(this,null,function*(){let f=Date.now(),h=this.sfuClient;if(!h)throw new Error("Cannot migrate without an active SFU client");this.reconnectStrategy=ee.MIGRATE,this.state.setCallingState(V.MIGRATING);let p=this.subscriber,m=this.publisher;p?.detachEventHandlers(),m?.detachEventHandlers();let y=h.enterMigration();try{let v=h.edgeName;yield this.join(R(E({},this.joinCallData),{migrating_from:v}))}finally{delete this.joinCallData?.migrating_from}yield this.restorePublishedTracks(),this.restoreSubscribedTracks();try{yield y,this.state.setCallingState(V.JOINED)}finally{p?.close(),m?.close({stopTracks:!1}),h.close()}this.sfuStatsReporter?.sendTelemetryData({data:{oneofKind:"reconnection",reconnection:{timeSeconds:(Date.now()-f)/1e3,strategy:ee.MIGRATE}}})}),this.registerReconnectHandlers=()=>{let f=this.on("goAway",()=>{this.reconnect(ee.MIGRATE).catch(m=>{this.logger("warn","[Reconnect] Error reconnecting",m)})}),h=this.on("error",m=>{let{reconnectStrategy:y}=m;y!==ee.UNSPECIFIED&&(y===ee.DISCONNECT?this.leave({reason:"SFU instructed to disconnect"}).catch(v=>{this.logger("warn","Can't leave call after disconnect request",v)}):this.reconnect(y).catch(v=>{this.logger("warn","[Reconnect] Error reconnecting",v)}))}),p=this.streamClient.on("network.changed",m=>{if(m.online)this.logger("debug","[Reconnect] Going online"),this.sfuClient?.close(rg.DISPOSE_OLD_SOCKET,"Closing WS to reconnect after going online"),this.networkAvailableTask?.resolve(),this.networkAvailableTask=void 0,this.sfuStatsReporter?.start();else{if(this.logger("debug","[Reconnect] Going offline"),!this.hasJoinedOnce)return;this.lastOfflineTimestamp=Date.now();let y=ko();y.promise.then(()=>{let v=ee.FAST;this.lastOfflineTimestamp&&(Date.now()-this.lastOfflineTimestamp)/1e3>this.fastReconnectDeadlineSeconds&&(v=ee.REJOIN),this.reconnect(v).catch(S=>{this.logger("warn","[Reconnect] Error reconnecting after going online",S)})}),this.networkAvailableTask=y,this.sfuStatsReporter?.stop(),this.state.setCallingState(V.OFFLINE)}});this.leaveCallHooks.add(f),this.leaveCallHooks.add(h),this.leaveCallHooks.add(p)},this.restorePublishedTracks=()=>g(this,null,function*(){for(let f of this.trackPublishOrder)switch(f){case I.AUDIO:let h=this.microphone.state.mediaStream;h&&(yield this.publishAudioStream(h));break;case I.VIDEO:let p=this.camera.state.mediaStream;p&&(yield this.publishVideoStream(p));break;case I.SCREEN_SHARE:let m=this.screenShare.state.mediaStream;m&&(yield this.publishScreenShareStream(m));break;case I.SCREEN_SHARE_AUDIO:case I.UNSPECIFIED:break;default:vl(f,"Unknown track type");break}}),this.restoreSubscribedTracks=()=>{let{remoteParticipants:f}=this.state;f.length<=0||this.dynascaleManager.applyTrackSubscriptions(void 0)},this.publishVideoStream=f=>g(this,null,function*(){if(!this.sfuClient)throw new Error("Call not joined yet.");if(yield this.sfuClient.joinTask,!this.permissionsContext.hasPermission(je.SEND_VIDEO))throw new Error("No permission to publish video");if(!this.publisher)throw new Error("Publisher is not initialized");let[h]=f.getVideoTracks();if(!h)throw new Error("There is no video track in the stream");this.trackPublishOrder.includes(I.VIDEO)||this.trackPublishOrder.push(I.VIDEO),yield this.publisher.publishStream(f,h,I.VIDEO,this.publishOptions)}),this.publishAudioStream=f=>g(this,null,function*(){if(!this.sfuClient)throw new Error("Call not joined yet.");if(yield this.sfuClient.joinTask,!this.permissionsContext.hasPermission(je.SEND_AUDIO))throw new Error("No permission to publish audio");if(!this.publisher)throw new Error("Publisher is not initialized");let[h]=f.getAudioTracks();if(!h)throw new Error("There is no audio track in the stream");this.trackPublishOrder.includes(I.AUDIO)||this.trackPublishOrder.push(I.AUDIO),yield this.publisher.publishStream(f,h,I.AUDIO)}),this.publishScreenShareStream=f=>g(this,null,function*(){if(!this.sfuClient)throw new Error("Call not joined yet.");if(yield this.sfuClient.joinTask,!this.permissionsContext.hasPermission(je.SCREENSHARE))throw new Error("No permission to publish screen share");if(!this.publisher)throw new Error("Publisher is not initialized");let[h]=f.getVideoTracks();if(!h)throw new Error("There is no screen share track in the stream");this.trackPublishOrder.includes(I.SCREEN_SHARE)||this.trackPublishOrder.push(I.SCREEN_SHARE);let p={screenShareSettings:this.screenShare.getSettings()};yield this.publisher.publishStream(f,h,I.SCREEN_SHARE,p);let[m]=f.getAudioTracks();m&&(this.trackPublishOrder.includes(I.SCREEN_SHARE_AUDIO)||this.trackPublishOrder.push(I.SCREEN_SHARE_AUDIO),yield this.publisher.publishStream(f,m,I.SCREEN_SHARE_AUDIO,p))}),this.stopPublish=(f,h=!0)=>g(this,null,function*(){this.logger("info",`stopPublish ${I[f]}, stop tracks: ${h}`),yield this.publisher?.unpublishStream(f,h)}),this.notifyNoiseCancellationStarting=()=>g(this,null,function*(){return this.sfuClient?.startNoiseCancellation().catch(f=>{this.logger("warn","Failed to notify start of noise cancellation",f)})}),this.notifyNoiseCancellationStopped=()=>g(this,null,function*(){return this.sfuClient?.stopNoiseCancellation().catch(f=>{this.logger("warn","Failed to notify stop of noise cancellation",f)})}),this.startReportingStatsFor=f=>this.statsReporter?.startReportingStatsFor(f),this.stopReportingStatsFor=f=>this.statsReporter?.stopReportingStatsFor(f),this.resetReaction=f=>{this.state.updateParticipant(f,{reaction:void 0})},this.setSortParticipantsBy=f=>this.state.setSortParticipantsBy(f),this.sendReaction=f=>g(this,null,function*(){return this.streamClient.post(`${this.streamClientBasePath}/reaction`,f)}),this.blockUser=f=>g(this,null,function*(){return this.streamClient.post(`${this.streamClientBasePath}/block`,{user_id:f})}),this.unblockUser=f=>g(this,null,function*(){return this.streamClient.post(`${this.streamClientBasePath}/unblock`,{user_id:f})}),this.muteSelf=f=>{let h=this.currentUserId;if(h)return this.muteUser(h,f)},this.muteOthers=f=>{let h=tU(f);if(!h)return;let p=[];for(let m of this.state.remoteParticipants)m.publishedTracks.includes(h)&&p.push(m.userId);if(p.length>0)return this.muteUser(p,f)},this.muteUser=(f,h)=>this.streamClient.post(`${this.streamClientBasePath}/mute_users`,{user_ids:Array.isArray(f)?f:[f],[h]:!0}),this.muteAllUsers=f=>this.streamClient.post(`${this.streamClientBasePath}/mute_users`,{mute_all_users:!0,[f]:!0}),this.startRecording=f=>g(this,null,function*(){return this.streamClient.post(`${this.streamClientBasePath}/start_recording`,f||{})}),this.stopRecording=()=>g(this,null,function*(){return this.streamClient.post(`${this.streamClientBasePath}/stop_recording`,{})}),this.startTranscription=f=>g(this,null,function*(){return this.streamClient.post(`${this.streamClientBasePath}/start_transcription`,f)}),this.stopTranscription=()=>g(this,null,function*(){return this.streamClient.post(`${this.streamClientBasePath}/stop_transcription`)}),this.requestPermissions=f=>g(this,null,function*(){let{permissions:h}=f;if(!h.every(m=>this.permissionsContext.canRequest(m)))throw new Error(`You are not allowed to request permissions: ${h.join(", ")}`);return this.streamClient.post(`${this.streamClientBasePath}/request_permission`,f)}),this.grantPermissions=(f,h)=>g(this,null,function*(){return this.updateUserPermissions({user_id:f,grant_permissions:h})}),this.revokePermissions=(f,h)=>g(this,null,function*(){return this.updateUserPermissions({user_id:f,revoke_permissions:h})}),this.updateUserPermissions=f=>g(this,null,function*(){return this.streamClient.post(`${this.streamClientBasePath}/user_permissions`,f)}),this.goLive=(...p)=>g(this,[...p],function*(f={},h){return this.streamClient.post(`${this.streamClientBasePath}/go_live`,f,h)}),this.stopLive=()=>g(this,null,function*(){return this.streamClient.post(`${this.streamClientBasePath}/stop_live`,{})}),this.startHLS=()=>g(this,null,function*(){return this.streamClient.post(`${this.streamClientBasePath}/start_broadcasting`,{})}),this.stopHLS=()=>g(this,null,function*(){return this.streamClient.post(`${this.streamClientBasePath}/stop_broadcasting`,{})}),this.update=f=>g(this,null,function*(){let h=yield this.streamClient.patch(`${this.streamClientBasePath}`,f),{call:p,members:m,own_capabilities:y}=h;return this.state.updateFromCallResponse(p),this.state.setMembers(m),this.state.setOwnCapabilities(y),h}),this.endCall=()=>g(this,null,function*(){return this.streamClient.post(`${this.streamClientBasePath}/mark_ended`)}),this.pin=f=>{this.state.updateParticipant(f,{pin:{isLocalPin:!0,pinnedAt:Date.now()}})},this.unpin=f=>{this.state.updateParticipant(f,{pin:void 0})},this.pinForEveryone=f=>g(this,null,function*(){return this.streamClient.post(`${this.streamClientBasePath}/pin`,f)}),this.unpinForEveryone=f=>g(this,null,function*(){return this.streamClient.post(`${this.streamClientBasePath}/unpin`,f)}),this.queryMembers=f=>this.streamClient.post("/call/members",R(E({},f||{}),{id:this.id,type:this.type})),this.updateCallMembers=f=>g(this,null,function*(){return this.streamClient.post(`${this.streamClientBasePath}/members`,f)}),this.scheduleAutoDrop=()=>{clearTimeout(this.dropTimeout),this.leaveCallHooks.add(ht(this.state.settings$,f=>{if(!f||this.state.callingState!==V.RINGING)return;let h=this.isCreatedByMe?f.ring.auto_cancel_timeout_ms:f.ring.incoming_call_timeout_ms;h<=0||(clearTimeout(this.dropTimeout),this.dropTimeout=setTimeout(()=>{this.leave({reject:!0,reason:"timeout"}).catch(p=>{this.logger("error","Failed to drop call",p)})},h))}))},this.queryRecordings=f=>g(this,null,function*(){let h=this.streamClientBasePath;return f&&(h=`${h}/${f}`),this.streamClient.get(`${h}/recordings`)}),this.queryTranscriptions=()=>g(this,null,function*(){return this.streamClient.get(`${this.streamClientBasePath}/transcriptions`)}),this.getCallStats=f=>g(this,null,function*(){let h=`${this.streamClientBasePath}/stats/${f}`;return this.streamClient.get(h)}),this.submitFeedback=(m,...y)=>g(this,[m,...y],function*(f,{reason:h,custom:p}={}){if(f<1||f>5)throw new Error("Rating must be between 1 and 5");let v=this.state.session?.id;if(!v)throw new Error("Feedback can be submitted only in the context of a call session");let ae=VU(OT()),{sdkName:S,sdkVersion:_}=ae,N=_n(ae,["sdkName","sdkVersion"]),B=this.sfuClient?.sessionId??"N/A",L=`${this.streamClientBasePath}/feedback/${v}`;return this.streamClient.post(L,{rating:f,reason:h,user_session_id:B,sdk:S,sdk_version:_,custom:R(E({},p),{"x-stream-platform-data":N})})}),this.sendCustomEvent=f=>g(this,null,function*(){return this.streamClient.post(`${this.streamClientBasePath}/event`,{custom:f})}),this.applyDeviceConfig=f=>g(this,null,function*(){yield this.initCamera({setStatus:f}).catch(h=>{this.logger("warn","Camera init failed",h)}),yield this.initMic({setStatus:f}).catch(h=>{this.logger("warn","Mic init failed",h)})}),this.initCamera=f=>g(this,null,function*(){if(yield this.camera.statusChangeSettled(),this.state.localParticipant?.videoStream||!this.permissionsContext.hasPermission("send-video"))return;if(!this.camera.state.direction&&!this.camera.state.selectedDevice){let p="front",m=this.state.settings?.video.camera_facing;m&&(p=m==="front"?"front":"back"),this.camera.state.setDirection(p)}let h=this.state.settings?.video.target_resolution;h&&(yield this.camera.selectTargetResolution(h)),f.setStatus&&(this.camera.enabled&&this.camera.state.mediaStream&&!this.publisher?.isPublishing(I.VIDEO)&&(yield this.publishVideoStream(this.camera.state.mediaStream)),this.camera.state.status===void 0&&this.state.settings?.video.camera_default_on&&(yield this.camera.enable()))}),this.initMic=f=>g(this,null,function*(){yield this.microphone.statusChangeSettled(),!(this.state.localParticipant?.audioStream||!this.permissionsContext.hasPermission("send-audio"))&&f.setStatus&&(this.microphone.enabled&&this.microphone.state.mediaStream&&!this.publisher?.isPublishing(I.AUDIO)&&(yield this.publishAudioStream(this.microphone.state.mediaStream)),this.microphone.state.status===void 0&&this.state.settings?.audio.mic_default_on&&(yield this.microphone.enable()))}),this.trackElementVisibility=(f,h,p)=>this.dynascaleManager.trackElementVisibility(f,h,p),this.setViewport=f=>this.dynascaleManager.setViewport(f),this.bindVideoElement=(f,h,p)=>{let m=this.dynascaleManager.bindVideoElement(f,h,p);if(m)return this.leaveCallHooks.add(m),()=>{this.leaveCallHooks.delete(m),m()}},this.bindAudioElement=(f,h,p="audioTrack")=>{let m=this.dynascaleManager.bindAudioElement(f,h,p);if(m)return this.leaveCallHooks.add(m),()=>{this.leaveCallHooks.delete(m),m()}},this.bindCallThumbnailElement=(f,h={})=>{let p=()=>{f.src=h.fallbackImageSource||"https://getstream.io/random_svg/?name=x&id=x"},m=ht(this.state.thumbnails$,y=>{if(!y)return;f.addEventListener("error",p);let v=new URL(y.image_url);v.searchParams.set("w",String(f.clientWidth)),v.searchParams.set("h",String(f.clientHeight)),f.src=v.toString()});return()=>{m(),f.removeEventListener("error",p)}},this.setPreferredIncomingVideoResolution=(f,h)=>{this.dynascaleManager.setVideoTrackSubscriptionOverrides(f?{enabled:!0,dimension:f}:void 0,h),this.dynascaleManager.applyTrackSubscriptions()},this.setIncomingVideoEnabled=f=>{this.dynascaleManager.setVideoTrackSubscriptionOverrides(f?void 0:{enabled:!1}),this.dynascaleManager.applyTrackSubscriptions()},this.type=t,this.id=n,this.cid=`${t}:${n}`,this.ringingSubject=new M(c),this.watching=u,this.streamClient=r,this.clientStore=a,this.streamClientBasePath=`/call/${this.type}/${this.id}`,this.logger=fe(["Call"]);let l=HU.get(t),d=o||l.options.sortParticipantsBy;d&&this.state.setSortParticipantsBy(d),this.state.setMembers(i||[]),this.state.setOwnCapabilities(s||[]),this.state.setCallingState(c?V.RINGING:V.IDLE),this.camera=new Zy(this),this.microphone=new ev(this),this.speaker=new iv(this),this.screenShare=new nv(this),this.dynascaleManager=new Wy(this.state,this.speaker)}setup(){return g(this,null,function*(){yield pt(this.joinLeaveConcurrencyTag,()=>g(this,null,function*(){this.initialized||(this.leaveCallHooks.add(this.on("all",t=>{this.state.updateFromEvent(t)})),this.leaveCallHooks.add(UU(this,this.dispatcher)),this.registerEffects(),this.registerReconnectHandlers(),this.state.callingState===V.LEFT&&this.state.setCallingState(V.IDLE),this.initialized=!0)}))})}registerEffects(){this.leaveCallHooks.add(ht(this.state.settings$,t=>{t&&this.permissionsContext.setCallSettings(t)})),this.leaveCallHooks.add(aU(this.state.ownCapabilities$,this.handleOwnCapabilitiesUpdated)),this.leaveCallHooks.add(ht(this.state.blockedUserIds$,t=>g(this,null,function*(){if(!t||t.length===0)return;let n=this.currentUserId;n&&t.includes(n)&&(this.logger("info","Leaving call because of being blocked"),yield this.leave({reason:"user blocked"}).catch(r=>{this.logger("error","Error leaving call after being blocked",r)}))}))),this.leaveCallHooks.add(ht(this.state.callingState$,t=>{this.ringing&&(t===V.JOINED||t===V.JOINING||t===V.LEFT)&&(clearTimeout(this.dropTimeout),this.dropTimeout=void 0)})),this.leaveCallHooks.add(ht(this.ringingSubject,t=>{if(!t)return;let n=this.state.session,r=this.clientStore.connectedUser?.id,i=n?.ended_at,s=this.state.createdBy?.id,o=n?.rejected_by,a=n?.accepted_by,c=!1;i?c=!0:s&&o?o[s]&&(c=!0):r&&o?o[r]&&(c=!0):r&&a&&a[r]&&(c=!0),c?this.state.callingState!==V.IDLE&&this.state.setCallingState(V.IDLE):(this.state.callingState===V.IDLE&&this.state.setCallingState(V.RINGING),this.scheduleAutoDrop(),this.leaveCallHooks.add(f0(this)))}))}get ringing(){return Vt(this.ringingSubject)}get currentUserId(){return this.clientStore.connectedUser?.id}get isCreatedByMe(){return this.state.createdBy?.id===this.currentUserId}updatePublishOptions(t){this.publishOptions=E(E({},this.publishOptions),t)}},rV=null,sv=class{constructor(){this.connectionStartTimestamp=null,this.wsTotalFailures=0,this.wsConsecutiveFailures=0,this.instanceClientId=Oo()}},ov=(e,t)=>g(void 0,null,function*(){for(let r=0;r<3;r++){try{yield kr.post(`https://chat-insights.getstream.io/insights/${e}`,t)}catch{yield sn((r+1)*3e3);continue}break}});function iV(e,t){return E(E({},t),C0(e))}function C0(e){let{client:t}=e;return{ready_state:e.ws?.readyState,url:e._buildUrl(),api_key:t.key,start_ts:t.insightMetrics.connectionStartTimestamp,end_ts:new Date().getTime(),auth_type:t.getAuthType(),token:t.tokenManager.token,user_id:t.userID,user_details:t._user,device:"browser",client_id:e.connectionID,ws_details:e.ws,ws_consecutive_failures:t.insightMetrics.wsConsecutiveFailures,ws_total_failures:t.insightMetrics.wsTotalFailures,request_id:e.requestID,online:typeof navigator<"u"?navigator?.onLine:null,user_agent:typeof navigator<"u"?navigator?.userAgent:null,instance_client_id:t.insightMetrics.instanceClientId}}function sV(e){return C0(e)}var oV=e=>e.code!==void 0,aV=e=>e.error!==void 0,av=class{constructor(t){this._log=(n,r={},i="info")=>{this.client.logger(i,"connection:"+n,E({},r))},this.setClient=n=>{this.client=n},this._buildUrl=()=>{let n=new URLSearchParams;return n.set("api_key",this.client.key),n.set("stream-auth-type",this.client.getAuthType()),n.set("X-Stream-Client",this.client.getUserAgent()),`${this.client.wsBaseURL}/connect?${n.toString()}`},this.onlineStatusChanged=n=>{n.type==="offline"?(this._log("onlineStatusChanged() - Status changing to offline"),this._setHealth(!1,!0)):n.type==="online"&&(this._log(`onlineStatusChanged() - Status changing to online. isHealthy: ${this.isHealthy}`),this.isHealthy||this._reconnect({interval:10}))},this.onopen=n=>{if(this.wsID!==n)return;let r=this.client.user;if(!r){this.client.logger("error","User not set, can't connect to WS");return}let i=this.client._getToken();if(!i){this.client.logger("error","Token not set, can't connect authenticate");return}let s={token:i,user_details:{id:r.id,name:r.name,image:r.image,custom:r.custom}};this.authenticationSent=!0,this.ws?.send(JSON.stringify(s)),this._log("onopen() - onopen callback",{wsID:n})},this.onmessage=(n,r)=>{if(this.wsID!==n)return;this._log("onmessage() - onmessage callback",{event:r,wsID:n});let i=typeof r.data=="string"?JSON.parse(r.data):null;if(!this.isResolved&&i&&i.type==="connection.error"&&(this.isResolved=!0,i.error)){this.rejectPromise?.(this._errorFromWSEvent(i,!1));return}if(this.lastEvent=new Date,i&&(i.type==="health.check"||i.type==="connection.ok")&&this.scheduleNextPing(),i&&i.type==="connection.ok"&&(this.resolvePromise?.(i),this._setHealth(!0)),i&&i.type==="connection.error"&&i.error){let{code:s}=i.error;this.isHealthy=!1,this.isConnecting=!1,this.consecutiveFailures+=1,s===zi.TOKEN_EXPIRED&&!this.client.tokenManager.isStatic()&&(clearTimeout(this.connectionCheckTimeoutRef),this._log("connect() - WS failure due to expired token, so going to try to reload token and reconnect"),this._reconnect({refreshToken:!0}))}i&&(i.received_at=new Date,this.client.dispatchEvent(i)),this.scheduleConnectionCheck()},this.onclose=(n,r)=>{if(this.wsID===n)if(this._log("onclose() - onclose callback - "+r.code,{event:r,wsID:n}),r.code===zi.WS_CLOSED_SUCCESS){let i=new Error(`WS connection reject with error ${r.reason}`);i.reason=r.reason,i.code=r.code,i.wasClean=r.wasClean,i.target=r.target,this.rejectPromise?.(i),this._log(`onclose() - WS connection reject with error ${r.reason}`,{event:r})}else this.consecutiveFailures+=1,this.totalFailures+=1,this._setHealth(!1),this.isConnecting=!1,this.rejectPromise?.(this._errorFromWSEvent(r)),this._log("onclose() - WS connection closed. Calling reconnect ...",{event:r}),this._reconnect()},this.onerror=(n,r)=>{this.wsID===n&&(this.consecutiveFailures+=1,this.totalFailures+=1,this._setHealth(!1),this.isConnecting=!1,this.rejectPromise?.(this._errorFromWSEvent(r)),this._log("onerror() - WS connection resulted into error",{event:r}),this._reconnect())},this._setHealth=(n,r=!1)=>{if(n!==this.isHealthy){if(this.isHealthy=n,this.isHealthy||r){this.client.dispatchEvent({type:"connection.changed",online:this.isHealthy});return}setTimeout(()=>{this.isHealthy||this.client.dispatchEvent({type:"connection.changed",online:this.isHealthy})},5e3)}},this._errorFromWSEvent=(n,r=!0)=>{let i,s,o;oV(n)&&(i=n.code,s="unknown",o=n.reason),aV(n)&&(i=n.error.code,s=n.error.StatusCode,o=n.error.message),this._log(`_errorFromWSEvent() - WS failed with code ${i}`,{event:n},"warn");let a=new Error(`WS failed with code ${i} and reason - ${o}`);return a.code=i,a.StatusCode=s,a.isWSFailure=r,a},this._setupConnectionPromise=()=>{this.isResolved=!1,this.connectionOpen=new Promise((n,r)=>{this.resolvePromise=n,this.rejectPromise=r})},this.scheduleNextPing=()=>{this.healthCheckTimeoutRef&&clearTimeout(this.healthCheckTimeoutRef),this.healthCheckTimeoutRef=setTimeout(()=>{let n=[{type:"health.check",client_id:this.client.clientID}];try{this.ws?.send(JSON.stringify(n))}catch{}},this.pingInterval)},this.scheduleConnectionCheck=()=>{this.connectionCheckTimeoutRef&&clearTimeout(this.connectionCheckTimeoutRef),this.connectionCheckTimeoutRef=setTimeout(()=>{let n=new Date;this.lastEvent&&n.getTime()-this.lastEvent.getTime()>this.connectionCheckTimeout&&(this._log("scheduleConnectionCheck - going to reconnect"),this._setHealth(!1),this._reconnect())},this.connectionCheckTimeout)},this.client=t,this.consecutiveFailures=0,this.totalFailures=0,this.isConnecting=!1,this.authenticationSent=!1,this.isDisconnected=!1,this.isResolved=!1,this.isHealthy=!1,this.wsID=1,this.lastEvent=null,this.pingInterval=25*1e3,this.connectionCheckTimeout=this.pingInterval+10*1e3,gl(this.onlineStatusChanged)}connect(t=15e3){return g(this,null,function*(){if(this.isConnecting)throw Error("You've called connect twice, can only attempt 1 connection at the time");this.isDisconnected=!1;try{let n=yield this._connect();this.consecutiveFailures=0,this._log(`connect() - Established ws connection with healthcheck: ${n}`)}catch(n){if(this.isHealthy=!1,this.consecutiveFailures+=1,n.code===zi.TOKEN_EXPIRED&&!this.client.tokenManager.isStatic())this._log("connect() - WS failure due to expired token, so going to try to reload token and reconnect"),this._reconnect({refreshToken:!0});else if(!n.isWSFailure)throw new Error(JSON.stringify({code:n.code,StatusCode:n.StatusCode,message:n.message,isWSFailure:n.isWSFailure}))}return yield this._waitForHealthy(t)})}_waitForHealthy(t=15e3){return g(this,null,function*(){return Promise.race([g(this,null,function*(){for(let r=0;r<=t;r+=50)try{return yield this.connectionOpen}catch(i){if(r===t)throw new Error(JSON.stringify({code:i.code,StatusCode:i.StatusCode,message:i.message,isWSFailure:i.isWSFailure}));yield sn(50)}}),g(this,null,function*(){throw yield sn(t),this.isConnecting=!1,new Error(JSON.stringify({code:"",StatusCode:"",message:"initial WS connection could not be established",isWSFailure:!0}))})])})}disconnect(t){this._log(`disconnect() - Closing the websocket connection for wsID ${this.wsID}`),this.wsID+=1,this.isConnecting=!1,this.isDisconnected=!0,this.healthCheckTimeoutRef&&clearInterval(this.healthCheckTimeoutRef),this.connectionCheckTimeoutRef&&clearInterval(this.connectionCheckTimeoutRef),gv(this.onlineStatusChanged),this.isHealthy=!1,this.ws&&this.ws.removeAllListeners&&this.ws.removeAllListeners();let n,{ws:r}=this;return r&&r.close&&r.readyState===r.OPEN?(n=new Promise(i=>{let s=o=>{this._log(`disconnect() - resolving isClosedPromise ${o?"with":"without"} close frame`,{event:o}),i()};r.onclose=s,setTimeout(s,t??1e3)}),this._log("disconnect() - Manually closed connection by calling client.disconnect()"),r.close(zi.WS_CLOSED_SUCCESS,"Manually closed connection by calling client.disconnect()")):(this._log("disconnect() - ws connection doesn't exist or it is already closed."),n=Promise.resolve()),delete this.ws,n}_connect(){return g(this,null,function*(){if(this.isConnecting||this.isDisconnected&&this.client.options.enableWSFallback)return;this.isConnecting=!0,this.requestID=Oo(),this.client.insightMetrics.connectionStartTimestamp=new Date().getTime();let t=!1;try{this._log("_connect() - waiting for token"),yield this.client.tokenManager.tokenReady(),t=!0}catch{}try{t||(this._log("_connect() - tokenProvider failed before, so going to retry"),yield this.client.tokenManager.loadToken());let n=!0;this.client.connectionIdPromise&&(yield Rj(this.client.connectionIdPromise))&&(n=!1),n&&this.client._setupConnectionIdPromise(),this._setupConnectionPromise();let r=this._buildUrl();this._log(`_connect() - Connecting to ${r}`,{wsURL:r,requestID:this.requestID}),this.ws=new TT(r),this.ws.onopen=this.onopen.bind(this,this.wsID),this.ws.onclose=this.onclose.bind(this,this.wsID),this.ws.onerror=this.onerror.bind(this,this.wsID),this.ws.onmessage=this.onmessage.bind(this,this.wsID);let i=yield this.connectionOpen;if(this.isConnecting=!1,i)return this.connectionID=i.connection_id,this.client.resolveConnectionId?.(this.connectionID),this.client.insightMetrics.wsConsecutiveFailures>0&&this.client.options.enableInsights&&(ov("ws_success_after_failure",sV(this)),this.client.insightMetrics.wsConsecutiveFailures=0),i}catch(n){if(yield this.client._setupConnectionIdPromise(),this.isConnecting=!1,this._log("_connect() - Error - ",n),this.client.options.enableInsights){this.client.insightMetrics.wsConsecutiveFailures++,this.client.insightMetrics.wsTotalFailures++;let r=iV(this,_j(n));ov?.("ws_fatal",r)}throw this.client.rejectConnectionId?.(n),n}})}_reconnect(){return g(this,arguments,function*(t={}){if(this._log("_reconnect() - Initiating the reconnect"),this.isConnecting||this.isHealthy){this._log("_reconnect() - Abort (1) since already connecting or healthy");return}let n=t.interval;if(n||(n=Lo(this.consecutiveFailures)),yield sn(n),this.isConnecting||this.isHealthy){this._log("_reconnect() - Abort (2) since already connecting or healthy");return}if(this.isDisconnected&&this.client.options.enableWSFallback){this._log("_reconnect() - Abort (3) since disconnect() is called");return}this._log("_reconnect() - Destroying current WS connection"),this._destroyCurrentWSConnection(),t.refreshToken&&(yield this.client.tokenManager.loadToken());try{yield this._connect(),this._log("_reconnect() - Waiting for recoverCallBack"),this._log("_reconnect() - Finished recoverCallBack"),this.consecutiveFailures=0}catch(r){if(this.isHealthy=!1,this.consecutiveFailures+=1,r.code===zi.TOKEN_EXPIRED&&!this.client.tokenManager.isStatic())return this._log("_reconnect() - WS failure due to expired token, so going to try to reload token and reconnect"),this._reconnect({refreshToken:!0});r.isWSFailure&&(this._log("_reconnect() - WS failure, so going to try to reconnect"),this._reconnect())}this._log("_reconnect() - == END ==")})}_destroyCurrentWSConnection(){this.wsID+=1;try{this?.ws?.removeAllListeners(),this?.ws?.close()}catch{}}};function cv(e){return typeof e=="string"}function HT(e,t){return!!t&&cv(e)}function cV(e,t){let n=[];if(cv(e)&&HT(e,t)){for(let r=0,i=e.length;r<i;r++)if(e.charAt(r)){let s=e.charAt(r),o=t(s,r,e);n[r]=o}}else if(!cv(e)&&!HT(e,t)){for(let r=0,i=e.length;r<i;r++)if(r in e){let s=e[r],o=t(s,r,e);n[r]=o}}return n}var uV=e=>(0,WT.fromByteArray)(new Uint8Array(cV(e,t=>t.charCodeAt(0)))),lV=e=>{let t={},n=String.fromCharCode,r=e.length,i,s=0,o,a,c=0,u,l="",d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(i=0;i<64;i++)t[d.charAt(i)]=i;for(a=0;a<r;a++)for(o=t[e.charAt(a)],s=(s<<6)+o,c+=6;c>=8;)((u=s>>>(c-=8)&255)||a<r-2)&&(l+=n(u));return l};function dV(e){return["eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9",uV(JSON.stringify({user_id:e})),"devtoken"].join(".")}function fV(e){let t=e.split(".");if(t.length!==3)return"";let n=t[1],r=lV(n);return JSON.parse(r).user_id}var uv=class{constructor(t){this.setTokenOrProvider=(n,r,i)=>g(this,null,function*(){this.validateToken(n,r,i),this.user=r,Ly(n)&&(this.tokenProvider=n,this.type="provider"),typeof n=="string"&&(this.token=n,this.type="static"),yield this.loadToken()}),this.reset=()=>{this.token=void 0,this.tokenProvider=void 0,this.type="static",this.user=void 0,this.loadTokenPromise=null},this.validateToken=(n,r,i)=>{if(!(r&&i&&!n)){if(!this.secret&&!n)throw new Error("UserWithId token can not be empty");if(n&&typeof n!="string"&&!Ly(n))throw new Error("user token should either be a string or a function");if(typeof n=="string"){if(i&&n==="")return;let s=fV(n);if(n!=null&&(s==null||s===""||!i&&s!==r.id))throw new Error("userToken does not have a user_id or is not matching with user.id")}}},this.tokenReady=()=>this.loadTokenPromise,this.loadToken=()=>(this.loadTokenPromise=new Promise((n,r)=>g(this,null,function*(){if(this.type==="static")return n(this.token);if(this.tokenProvider&&typeof this.tokenProvider!="string"){try{this.token=yield this.tokenProvider()}catch(i){return r(new Error(`Call to tokenProvider failed with message: ${i}`))}n(this.token)}})),this.loadTokenPromise),this.getToken=()=>{if(this.token)return this.token;if(this.user&&!this.token)return this.token;throw new Error("User token is not set. Either client.connectUser wasn't called or client.disconnect was called")},this.isStatic=()=>this.type==="static",this.loadTokenPromise=null,t&&(this.secret=t),this.type="static"}},hV={"-1":{name:"InternalSystemError",retryable:!0},2:{name:"AccessKeyError",retryable:!1},3:{name:"AuthenticationFailedError",retryable:!0},4:{name:"InputError",retryable:!1},6:{name:"DuplicateUsernameError",retryable:!1},9:{name:"RateLimitError",retryable:!0},16:{name:"DoesNotExistError",retryable:!1},17:{name:"NotAllowedError",retryable:!1},18:{name:"EventNotSupportedError",retryable:!1},19:{name:"ChannelFeatureNotSupportedError",retryable:!1},20:{name:"MessageTooLongError",retryable:!1},21:{name:"MultipleNestingLevelError",retryable:!1},22:{name:"PayloadTooBigError",retryable:!1},23:{name:"RequestTimeoutError",retryable:!0},24:{name:"MaxHeaderSizeExceededError",retryable:!1},40:{name:"AuthErrorTokenExpired",retryable:!1},41:{name:"AuthErrorTokenNotValidYet",retryable:!1},42:{name:"AuthErrorTokenUsedBeforeIssuedAt",retryable:!1},43:{name:"AuthErrorTokenSignatureInvalid",retryable:!1},44:{name:"CustomCommandEndpointMissingError",retryable:!1},45:{name:"CustomCommandEndpointCallError",retryable:!0},46:{name:"ConnectionIDNotFoundError",retryable:!1},60:{name:"CoolDownError",retryable:!0},69:{name:"ErrWrongRegion",retryable:!1},70:{name:"ErrQueryChannelPermissions",retryable:!1},71:{name:"ErrTooManyConnections",retryable:!0},99:{name:"AppSuspendedError",retryable:!1}};function pV(e){return e.code!==void 0}function zT(e){if(!e.code)return!1;let t=hV[`${e.code}`];return t?t.retryable:!1}function mV(e){return e.code===46}function gV(e){if(typeof e.isWSFailure=="boolean")return e.isWSFailure;try{return JSON.parse(e.message).isWSFailure}catch{return!1}}function yV(e){return!e.status||e.status<200||300<=e.status}var Pe=function(e){return e.Closed="CLOSED",e.Connected="CONNECTED",e.Connecting="CONNECTING",e.Disconnected="DISCONNECTED",e.Init="INIT",e}(Pe||{}),lv=class{constructor(t){this._onlineStatusChanged=n=>{if(this._log(`_onlineStatusChanged() - ${n.type}`),n.type==="offline"){this._setState(Pe.Closed),this.cancelToken?.cancel("disconnect() is called"),this.cancelToken=void 0;return}n.type==="online"&&this.state===Pe.Closed&&this.connect(!0)},this._req=(n,r,i)=>g(this,null,function*(){!this.cancelToken&&!n.close&&(this.cancelToken=kr.CancelToken.source());try{let s=yield this.client.doAxiosRequest("get",this.client.baseURL.replace(":3030",":8900")+"/longpoll",void 0,{config:R(E({},r),{cancelToken:this.cancelToken?.token}),params:n,publicEndpoint:!0});return this.consecutiveFailures=0,s}catch(s){if(this.consecutiveFailures+=1,i&&zT(s))return this._log("_req() - Retryable error, retrying request"),yield sn(Lo(this.consecutiveFailures)),this._req(n,r,i);throw s}}),this._poll=()=>g(this,null,function*(){for(;this.state===Pe.Connected;)try{let n=yield this._req({},{timeout:3e4},!0);if(n.events?.length)for(let r=0;r<n.events.length;r++)this.client.dispatchEvent(n.events[r])}catch(n){if(kr.isCancel(n)){this._log("_poll() - axios canceled request");return}if(mV(n)){this._log("_poll() - ConnectionID error, connecting without ID..."),this._setState(Pe.Disconnected),this.connect(!0);return}if(pV(n)&&!zT(n)){this._setState(Pe.Closed);return}yield sn(Lo(this.consecutiveFailures))}}),this.connect=(n=!1)=>g(this,null,function*(){if(this.state===Pe.Connecting){this._log("connect() - connecting already in progress",{reconnect:n},"warn");return}if(this.state===Pe.Connected){this._log("connect() - already connected and polling",{reconnect:n},"warn");return}this._setState(Pe.Connecting),this.connectionID=void 0;try{let{event:r}=yield this._req({json:this.client._buildWSPayload()},{timeout:8e3},n);return this._setState(Pe.Connected),this.connectionID=r.connection_id,this.client.resolveConnectionId?.(),this.client.dispatchEvent(r),this._poll(),r}catch(r){throw this._setState(Pe.Closed),this.client.rejectConnectionId?.(),r}}),this.isHealthy=()=>!!this.connectionID&&this.state===Pe.Connected,this.disconnect=(n=2e3)=>g(this,null,function*(){gv(this._onlineStatusChanged),this._setState(Pe.Disconnected),this.cancelToken?.cancel("disconnect() is called"),this.cancelToken=void 0;let r=this.connectionID;this.connectionID=void 0;try{yield this._req({close:!0,connection_id:r},{timeout:n},!1),this._log("disconnect() - Closed connectionID")}catch(i){this._log("disconnect() - Failed",{err:i},"error")}}),this.client=t,this.state=Pe.Init,this.consecutiveFailures=0,gl(this._onlineStatusChanged)}_log(t,n={},r="info"){this.client.logger(r,"WSConnectionFallback:"+t,E({},n))}_setState(t){this._log(`_setState() - ${t}`),this.state===Pe.Connecting&&t===Pe.Connected&&this.client.dispatchEvent({type:"connection.changed",online:!0}),(t===Pe.Closed||t===Pe.Disconnected)&&this.client.dispatchEvent({type:"connection.changed",online:!1}),this.state=t}},qT=(e="https://hint.stream-io-video.com/",t=2e3,n=3)=>g(void 0,null,function*(){let r=fe(["location-hint"]),i=0,s="ERR";do{let o=new AbortController,a=setTimeout(()=>o.abort(),t);try{let u=(yield fetch(e,{method:"HEAD",signal:o.signal})).headers.get("x-amz-cf-pop")||"ERR";r("debug",`Location header: ${u}`),s=u.substring(0,3)}catch(c){r("warn",`Failed to get location hint from ${e}`,c),s="ERR"}finally{clearTimeout(a)}}while(s==="ERR"&&++i<n);return s}),Dl=class{constructor(t,n){this.listeners={},this.devToken=i=>dV(i),this.getAuthType=()=>this.anonymous?"anonymous":"jwt",this.setBaseURL=i=>{this.baseURL=i,this.wsBaseURL=this.baseURL.replace("http","ws").replace(":3030",":8800")},this.getLocationHint=(i,s)=>g(this,null,function*(){let o=yield this.locationHint;return!o||o==="ERR"?(this.locationHint=qT(i??this.options.locationHintUrl,s??this.options.locationHintTimeout),this.locationHint):o}),this._getConnectionID=()=>this.wsConnection?.connectionID||this.wsFallback?.connectionID,this._hasConnectionID=()=>!!this._getConnectionID(),this.connectUser=(i,s)=>g(this,null,function*(){if(!i.id)throw new Error('The "id" field on the user is missing');if(this.userID===i.id&&this.setUserPromise)return this.logger("warn","Consecutive calls to connectUser is detected, ideally you should only call this function once in your app."),this.setUserPromise;if(this.userID)throw new Error("Use client.disconnect() before trying to connect as a different user. connectUser was called twice.");(this._isUsingServerAuth()||this.node)&&!this.options.allowServerSideConnect&&this.logger("warn","Please do not use connectUser server side. Use our @stream-io/node-sdk instead: https://getstream.io/video/docs/api/"),this.userID=i.id,this.anonymous=!1;let o=this._setToken(i,s,this.anonymous);this._setUser(i);let a=this.openConnection();this.setUserPromise=Promise.all([o,a]).then(c=>c[1]);try{return gl(this.updateNetworkConnectionStatus),yield this.setUserPromise}catch(c){throw this.persistUserOnConnectionFailure?this.closeConnection():this.disconnectUser(),c}}),this._setToken=(i,s,o)=>this.tokenManager.setTokenOrProvider(s,i,o),this._setUser=i=>{this.user=i,this.userID=i.id,this._user=E({},i)},this.closeConnection=i=>g(this,null,function*(){return yield Promise.all([this.wsConnection?.disconnect(i),this.wsFallback?.disconnect(i)]),Promise.resolve()}),this.openConnection=()=>g(this,null,function*(){if(!this.userID)throw Error("UserWithId is not set on client, use client.connectUser or client.connectAnonymousUser instead");return this.wsConnection?.isConnecting&&this.wsPromise?(this.logger("info","client:openConnection() - connection already in progress"),this.wsPromise):(this.wsConnection?.isHealthy||this.wsFallback?.isHealthy())&&this._hasConnectionID()?(this.logger("info","client:openConnection() - openConnection called twice, healthy connection already exists"),Promise.resolve()):(this._setupConnectionIdPromise(),this.clientID=`${this.userID}--${Oo()}`,this.wsPromise=this.connect(),this.wsPromise)}),this.disconnectUser=i=>g(this,null,function*(){this.logger("info","client:disconnect() - Disconnecting the client"),delete this.user,delete this._user,delete this.userID,this.anonymous=!1,yield this.closeConnection(i),gv(this.updateNetworkConnectionStatus),this.tokenManager.reset(),this.connectionIdPromise=void 0,this.rejectConnectionId=void 0,this.resolveConnectionId=void 0}),this.connectGuestUser=i=>g(this,null,function*(){this.guestUserCreatePromise=this.doAxiosRequest("post","/guest",{user:E({},i)},{publicEndpoint:!0});let s=yield this.guestUserCreatePromise;return this.guestUserCreatePromise.finally(()=>this.guestUserCreatePromise=void 0),this.connectUser(s.user,s.access_token)}),this.connectAnonymousUser=(i,s)=>g(this,null,function*(){gl(this.updateNetworkConnectionStatus),this._setupConnectionIdPromise(),this.anonymous=!0,yield this._setToken(i,s,this.anonymous),this._setUser(i),this.resolveConnectionId?.()}),this.on=(i,s)=>(this.listeners[i]||(this.listeners[i]=[]),this.logger("debug",`Adding listener for ${i} event`),this.listeners[i]?.push(s),()=>{this.off(i,s)}),this.off=(i,s)=>{this.listeners[i]||(this.listeners[i]=[]),this.logger("debug",`Removing listener for ${i} event`),this.listeners[i]=this.listeners[i]?.filter(o=>o!==s)},this._setupConnectionIdPromise=()=>g(this,null,function*(){this.connectionIdPromise=new Promise((i,s)=>{this.resolveConnectionId=i,this.rejectConnectionId=s})}),this._logApiRequest=(i,s,o,a)=>{this.logger("trace",`client: ${i} - Request - ${s}`,{payload:o,config:a})},this._logApiResponse=(i,s,o)=>{this.logger("trace",`client:${i} - Response - url: ${s} > status ${o.status}`,{response:o})},this._logApiError=(i,s,o)=>{this.logger("error",`client:${i} - Error - url: ${s}`,{url:s,error:o})},this.doAxiosRequest=(c,u,l,...d)=>g(this,[c,u,l,...d],function*(i,s,o,a={}){if(!a.publicEndpoint){yield Promise.all([this.tokenManager.tokenReady(),this.guestUserCreatePromise]);try{yield this.connectionIdPromise}catch{yield this.wsConnection?._waitForHealthy(),yield this.connectionIdPromise}}let f=this._enrichAxiosOptions(a);try{let h;switch(this._logApiRequest(i,s,o,f),i){case"get":h=yield this.axiosInstance.get(s,f);break;case"delete":h=yield this.axiosInstance.delete(s,f);break;case"post":h=yield this.axiosInstance.post(s,o,f);break;case"put":h=yield this.axiosInstance.put(s,o,f);break;case"patch":h=yield this.axiosInstance.patch(s,o,f);break;case"options":h=yield this.axiosInstance.options(s,f);break;default:throw new Error("Invalid request type")}return this._logApiResponse(i,s,h),this.consecutiveFailures=0,this.handleResponse(h)}catch(h){if(h.client_request_id=f.headers?.["x-client-request-id"],this.consecutiveFailures+=1,h.response)return this._logApiError(i,s,h.response),h.response.data.code===zi.TOKEN_EXPIRED&&!this.tokenManager.isStatic()?(this.consecutiveFailures>1&&(yield sn(Lo(this.consecutiveFailures))),yield this.tokenManager.loadToken(),yield this.doAxiosRequest(i,s,o,a)):this.handleResponse(h.response);throw this._logApiError(i,s,h),h}}),this.get=(i,s)=>this.doAxiosRequest("get",i,null,{params:s}),this.put=(i,s,o)=>this.doAxiosRequest("put",i,s,{params:o}),this.post=(i,s,o)=>this.doAxiosRequest("post",i,s,{params:o}),this.patch=(i,s,o)=>this.doAxiosRequest("patch",i,s,{params:o}),this.delete=(i,s)=>this.doAxiosRequest("delete",i,null,{params:s}),this.errorFromResponse=i=>{let{data:s,status:o}=i,a=new pl;return a.message=`Stream error code ${s.code}: ${s.message}`,a.code=s.code,a.unrecoverable=s.unrecoverable,a.response=i,a.status=o,a},this.handleResponse=i=>{let s=i.data;if(yV(i))throw this.errorFromResponse(i);return s},this.dispatchEvent=i=>{if(this.logger("debug",`Dispatching event: ${i.type}`,i),!!this.listeners){for(let s of this.listeners.all||[])s(i);for(let s of this.listeners[i.type]||[])s(i)}},this.connect=()=>g(this,null,function*(){if(!this.userID||!this._user)throw Error("Call connectUser or connectAnonymousUser before starting the connection");if(!this.wsBaseURL)throw Error("Websocket base url not set");if(!this.clientID)throw Error("clientID is not set");!this.wsConnection&&(this.options.warmUp||this.options.enableInsights)&&this._sayHi(),this.options.wsConnection&&this.node?(this.options.wsConnection.setClient(this),this.wsConnection=this.options.wsConnection):this.wsConnection=new av(this);try{return this.wsFallback?yield this.wsFallback.connect():(this.logger("info","StreamClient.connect: this.wsConnection.connect()"),yield this.wsConnection.connect(this.options.enableWSFallback?this.defaultWSTimeoutWithFallback:this.defaultWSTimeout))}catch(i){if(this.options.enableWSFallback&&gV(i)&&Nj(this.logger))return this.logger("warn","client:connect() - WS failed, fallback to longpoll"),this.dispatchEvent({type:"transport.changed",mode:"longpoll"}),this.wsConnection._destroyCurrentWSConnection(),this.wsConnection.disconnect().then(),this.wsFallback=new lv(this),yield this.wsFallback.connect();throw i}}),this._sayHi=()=>{let i=Oo(),s={headers:hT.from({"x-client-request-id":i})};this.doAxiosRequest("get",this.baseURL+"/hi",null,s).catch(o=>{this.options.enableInsights&&ov("http_hi_failed",{api_key:this.key,err:o,client_request_id:i})})},this.getUserAgent=()=>this.userAgent||`stream-video-javascript-client-${this.node?"node":"browser"}-1.11.3`,this.setUserAgent=i=>{this.userAgent=i},this._isUsingServerAuth=()=>!!this.secret,this._enrichAxiosOptions=(i={params:{},headers:{},config:{}})=>{let s=i.publicEndpoint&&!this.user?void 0:this._getToken(),o=s?{Authorization:s}:void 0;return i.headers?.["x-client-request-id"]||(i.headers=R(E({},i.headers),{"x-client-request-id":Oo()})),E(E({params:E({user_id:this.userID,connection_id:this._getConnectionID(),api_key:this.key},i.params),headers:E(R(E({},o),{"stream-auth-type":i.publicEndpoint&&!this.user?"anonymous":this.getAuthType(),"X-Stream-Client":this.getUserAgent()}),i.headers)},i.config),this.options.axiosRequestConfig)},this._getToken=()=>this.tokenManager?this.tokenManager.getToken():null,this._buildWSPayload=i=>JSON.stringify({user_id:this.userID,user_details:this._user,client_request_id:i}),this.updateNetworkConnectionStatus=i=>{i.type==="offline"?(this.logger("debug","device went offline"),this.dispatchEvent({type:"network.changed",online:!1})):i.type==="online"&&(this.logger("debug","device went online"),this.dispatchEvent({type:"network.changed",online:!0}))},this.key=t,this.secret=n?.secret;let r=n||{browser:typeof window<"u"};this.browser=r.browser||typeof window<"u",this.node=!this.browser,this.browser&&(this.locationHint=qT(n?.locationHintUrl,n?.locationHintTimeout,n?.locationHintMaxAttempts)),this.options=E({timeout:5e3,withCredentials:!1,warmUp:!1},r),this.node&&!this.options.httpsAgent&&(this.options.httpsAgent=new rV.Agent({keepAlive:!0,keepAliveMsecs:3e3})),this.setBaseURL(this.options.baseURL||"https://video.stream-io-api.com/video"),typeof process<"u"&&"env"in process&&process.env.STREAM_LOCAL_TEST_RUN&&this.setBaseURL("http://localhost:3030/video"),typeof process<"u"&&"env"in process&&process.env.STREAM_LOCAL_TEST_HOST&&this.setBaseURL(`http://${process.env.STREAM_LOCAL_TEST_HOST}/video`),this.axiosInstance=kr.create(R(E({},this.options),{baseURL:this.baseURL})),this.wsConnection=null,this.wsPromise=null,this.setUserPromise=null,this.anonymous=!1,this.persistUserOnConnectionFailure=this.options?.persistUserOnConnectionFailure,this.tokenManager=new uv(this.secret),this.consecutiveFailures=0,this.insightMetrics=new sv,this.defaultWSTimeoutWithFallback=6e3,this.defaultWSTimeout=15e3,this.logger=Ly(r.logger)?r.logger:()=>null}},Vo=class e{constructor(t,n){this.logLevel="warn",this.eventHandlersToUnregister=[],this.connectUser=(o,a)=>g(this,null,function*(){if(o.type==="anonymous")return o.id="!anon",this.connectAnonymousUser(o,a);let c=()=>this.streamClient.connectUser(o,a);o.type==="guest"&&(c=()=>g(this,null,function*(){return this.streamClient.connectGuestUser(o)})),this.connectionPromise=this.disconnectionPromise?this.disconnectionPromise.then(()=>c()):c(),this.connectionPromise?.finally(()=>this.connectionPromise=void 0);let u=yield this.connectionPromise;return u?.me&&this.writeableStateStore.setConnectedUser(u.me),this.eventHandlersToUnregister.push(this.on("connection.changed",l=>{if(l.online){let d=this.writeableStateStore.calls.filter(f=>f.watching).map(f=>f.cid);this.logger("info",`Rewatching calls after connection changed ${d.join(", ")}`),d.length>0&&this.queryCalls({watch:!0,filter_conditions:{cid:{$in:d}},sort:[{field:"cid",direction:1}]}).catch(f=>{this.logger("error","Failed to re-watch calls",f)})}})),this.eventHandlersToUnregister.push(this.on("call.created",l=>{let{call:d,members:f}=l;if(o.id===d.created_by.id){this.logger("warn","Received `call.created` sent by the current user");return}this.logger("info",`New call created and registered: ${d.cid}`);let h=new Lr({streamClient:this.streamClient,type:d.type,id:d.id,members:f,clientStore:this.writeableStateStore});h.state.updateFromCallResponse(d),this.writeableStateStore.registerCall(h)})),this.eventHandlersToUnregister.push(this.on("call.ring",l=>g(this,null,function*(){let{call:d,members:f}=l;if(o.id===d.created_by.id){this.logger("debug","Received `call.ring` sent by the current user so ignoring the event");return}yield this.writeableStateStore.findCall(d.type,d.id)?.leave({reason:"cleaning-up in call.ring"});let p=new Lr({streamClient:this.streamClient,type:d.type,id:d.id,members:f,clientStore:this.writeableStateStore,ringing:!0});p.state.updateFromCallResponse(d),yield p.get(),this.writeableStateStore.registerCall(p)}))),u}),this.disconnectUser=o=>g(this,null,function*(){if(!this.streamClient.user&&!this.connectionPromise)return;let a=this.streamClient.user?.id,c=this.streamClient.key,u=()=>this.streamClient.disconnectUser(o);this.disconnectionPromise=this.connectionPromise?this.connectionPromise.then(()=>u()):u(),this.disconnectionPromise.finally(()=>this.disconnectionPromise=void 0),yield this.disconnectionPromise,a&&e._instanceMap.delete(c+a),this.eventHandlersToUnregister.forEach(l=>l()),this.eventHandlersToUnregister=[],this.writeableStateStore.setConnectedUser(void 0)}),this.on=(o,a)=>this.streamClient.on(o,a),this.off=(o,a)=>this.streamClient.off(o,a),this.call=(o,a)=>new Lr({streamClient:this.streamClient,id:a,type:o,clientStore:this.writeableStateStore}),this.createGuestUser=o=>g(this,null,function*(){return this.streamClient.doAxiosRequest("post","/guest",o,{publicEndpoint:!0})}),this.queryCalls=(...a)=>g(this,[...a],function*(o={}){let c=yield this.streamClient.post("/calls",o),u=[];for(let l of c.calls){let d=new Lr({streamClient:this.streamClient,id:l.call.id,type:l.call.type,members:l.members,ownCapabilities:l.own_capabilities,watching:o.watch,clientStore:this.writeableStateStore});d.state.updateFromCallResponse(l.call),yield d.applyDeviceConfig(!1),o.watch&&this.writeableStateStore.registerCall(d),u.push(d)}return R(E({},c),{calls:u})}),this.queryCallStats=(...a)=>g(this,[...a],function*(o={}){return this.streamClient.post("/call/stats",o)}),this.edges=()=>g(this,null,function*(){return this.streamClient.get("/edges")}),this.addDevice=(o,a,c,u,l)=>g(this,null,function*(){return yield this.streamClient.post("/devices",E(E({id:o,push_provider:a,voip_token:l},u!=null?{user_id:u}:{}),c!=null?{push_provider_name:c}:{}))}),this.addVoipDevice=(o,a,c,u)=>g(this,null,function*(){return yield this.addDevice(o,a,c,u,!0)}),this.getDevices=o=>g(this,null,function*(){return yield this.streamClient.get("/devices",o?{user_id:o}:{})}),this.removeDevice=(o,a)=>g(this,null,function*(){return yield this.streamClient.delete("/devices",E({id:o},a?{user_id:a}:{}))}),this.onRingingCall=o=>g(this,null,function*(){let a=this.state.calls.find(c=>c.cid===o&&c.ringing);if(!a){let[c,u]=o.split(":");a=new Lr({streamClient:this.streamClient,type:c,id:u,clientStore:this.writeableStateStore,ringing:!0}),yield a.get()}return a}),this.connectAnonymousUser=(o,a)=>g(this,null,function*(){let c=()=>this.streamClient.connectAnonymousUser(o,a);return this.connectionPromise=this.disconnectionPromise?this.disconnectionPromise.then(()=>c()):c(),this.connectionPromise.finally(()=>this.connectionPromise=void 0),this.connectionPromise});let r=s0,i="warn";typeof t=="string"?(i=n?.logLevel||i,r=n?.logger||r):(i=t.options?.logLevel||i,r=t.options?.logger||r),Mj(r,i),this.logger=fe(["client"]);let s=fe(["coordinator"]);if(typeof t=="string")this.streamClient=new Dl(t,R(E({persistUserOnConnectionFailure:!0},n),{logLevel:i,logger:s}));else{this.streamClient=new Dl(t.apiKey,R(E({persistUserOnConnectionFailure:!0},t.options),{logLevel:i,logger:s}));let o=Fy();if(o){let a=Ki[o.type].toLowerCase(),c=`${o.major}.${o.minor}.${o.patch}`,u=this.streamClient.getUserAgent();this.streamClient.setUserAgent(`${u}-video-${a}-sdk-${c}`)}}if(this.writeableStateStore=new Vy,this.readOnlyStateStore=new By(this.writeableStateStore),typeof t!="string"){let o=t.user,a=t.token||t.tokenProvider;if(o){let c=o.id;o.type==="anonymous"&&(c="!anon"),c&&(e._instanceMap.has(t.apiKey+c)&&this.logger("warn",`A StreamVideoClient already exists for ${o.type==="anonymous"?"an anonymous user":c}; Prefer using getOrCreateInstance method`),o.id=c,e._instanceMap.set(t.apiKey+c,this)),this.connectUser(o,a).catch(u=>{this.logger("error","Failed to connect",u)})}}}static getOrCreateInstance(t){let n=t.user;if(!n.id)if(t.user.type==="anonymous")n.id="!anon";else throw new Error("User ID is required for a non-anonymous user");if(!t.token&&!t.tokenProvider&&t.user.type!=="anonymous"&&t.user.type!=="guest")throw new Error("TokenProvider or token is required for a user that is not a guest or anonymous");let r=e._instanceMap.get(t.apiKey+n.id);return r||(r=new e(R(E({},t),{user:n}))),r}get state(){return this.readOnlyStateStore}};Vo._instanceMap=new Map;var tr=class e{callId=xs(void 0);call=Kc(()=>{let t=this.callId();if(t!==void 0){let n=this.client.call("default",t);return n.join({create:!0}).then(()=>g(this,null,function*(){n.camera.enable(),n.microphone.enable()})),n}else return});client;constructor(){let t="mmhfdzb5evj2",n="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJodHRwczovL3Byb250by5nZXRzdHJlYW0uaW8iLCJzdWIiOiJ1c2VyL0RhcnRoX05paGlsdXMiLCJ1c2VyX2lkIjoiRGFydGhfTmloaWx1cyIsInZhbGlkaXR5X2luX3NlY29uZHMiOjYwNDgwMCwiaWF0IjoxNzMyMTQyMDg1LCJleHAiOjE3MzI3NDY4ODV9.VEybrkPBqMJpldzguvqfXAe6wDXNnZ7Dt3hWkg02vfg",r={id:"Darth_Nihilus"};this.client=new Vo({apiKey:t,token:n,user:r})}setCallId(t){t===void 0&&this.call()?.leave(),this.callId.set(t)}static \u0275fac=function(n){return new(n||e)};static \u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"})};var vV=["videoElement"],bV=["audioElement"],Ol=class e{constructor(t){this.callingService=t}videoElement;audioElement;participant;unbindVideoElement;unbindAudioElement;ngAfterViewInit(){this.unbindVideoElement=this.callingService.call()?.bindVideoElement(this.videoElement.nativeElement,this.participant.sessionId,"videoTrack"),this.unbindAudioElement=this.callingService.call()?.bindAudioElement(this.audioElement.nativeElement,this.participant.sessionId)}ngOnDestroy(){this.unbindVideoElement?.(),this.unbindAudioElement?.()}static \u0275fac=function(n){return new(n||e)(Ke(tr))};static \u0275cmp=$n({type:e,selectors:[["app-participant"]],viewQuery:function(n,r){if(n&1&&(Ph(vV,5),Ph(bV,5)),n&2){let i;Gc(i=Wc())&&(r.videoElement=i.first),Gc(i=Wc())&&(r.audioElement=i.first)}},inputs:{participant:"participant"},decls:7,vars:6,consts:[["videoElement",""],["audioElement",""],[1,"participant-container"],["autoplay","",3,"id"],[3,"id"]],template:function(n,r){n&1&&(He(0,"div",2),Dt(1,"video",3,0),He(3,"p"),bn(4),Ve(),Dt(5,"audio",4,1),Ve()),n&2&&(Ot(),qc("id","video-",r.participant.sessionId,""),zc("sessionId",r.participant.sessionId),Ot(3),Lh(r.participant.name),Ot(),qc("id","audio-",r.participant.sessionId,""))},styles:["[_nghost-%COMP%]{flex:1}.participant-container[_ngcontent-%COMP%]{display:flex;position:relative;width:100%;height:100%}video[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;overflow:hidden}p[_ngcontent-%COMP%]{text-align:center;font-size:smaller;font-weight:700;letter-spacing:.3px;color:#fff;margin:0;padding:.5rem 1rem;position:absolute;bottom:0;right:0;background:#0003;border-radius:1rem 0 0;box-shadow:0 4px 30px #0000001a;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}"]})};function Iv(e,t){let n=!t?.manualCleanup;n&&!t?.injector&&$f(Iv);let r=n?t?.injector?.get(bi)??D(bi):null,i=EV(t?.equal),s;t?.requireSync?s=xs({kind:0},{equal:i}):s=xs({kind:1,value:t?.initialValue},{equal:i});let o=e.subscribe({next:a=>s.set({kind:1,value:a}),error:a=>{if(t?.rejectErrors)throw a;s.set({kind:2,error:a})}});if(t?.requireSync&&s().kind===0)throw new A(601,!1);return r?.onDestroy(o.unsubscribe.bind(o)),Kc(()=>{let a=s();switch(a.kind){case 1:return a.value;case 2:throw a.error;case 0:throw new A(601,!1)}},{equal:t?.equal})}function EV(e=Object.is){return(t,n)=>t.kind===1&&n.kind===1&&e(t.value,n.value)}function CV(e,t){if(e&1&&(xh(0),Dt(1,"app-participant",5),kh()),e&2){let n=t.$implicit;Ot(),zn("participant",n)}}var Pl=class e{constructor(t){this.callingService=t;this.participants=Iv(this.callingService.call().state.participants$,{requireSync:!0})}call;participants;toggleMicrophone(){this.call.microphone.toggle()}toggleCamera(){this.call.camera.toggle()}trackBySessionId(t,n){return n.sessionId}leaveCall(){this.callingService.setCallId(void 0)}static \u0275fac=function(n){return new(n||e)(Ke(tr))};static \u0275cmp=$n({type:e,selectors:[["app-call"]],inputs:{call:"call"},decls:10,vars:2,consts:[[1,"participants"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"call-controls"],[3,"click"],[1,"leave-button",3,"click"],[3,"participant"]],template:function(n,r){n&1&&(He(0,"section")(1,"div",0),Os(2,CV,2,1,"ng-container",1),Ve(),He(3,"div",2)(4,"button",3),qn("click",function(){return r.toggleMicrophone()}),bn(5,"Mic"),Ve(),He(6,"button",3),qn("click",function(){return r.toggleCamera()}),bn(7,"Camera"),Ve(),He(8,"button",4),qn("click",function(){return r.leaveCall()}),bn(9,"Leave"),Ve()()()),n&2&&(Ot(2),zn("ngForOf",r.participants())("ngForTrackBy",r.trackBySessionId))},dependencies:[Fs,Uw,Ol],styles:["section[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column}.participants[_ngcontent-%COMP%]{display:flex;flex:1;flex-direction:column;align-items:center;justify-content:center}.call-controls[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:.5rem;padding:0 .5rem}button[_ngcontent-%COMP%]{font-size:smaller}.leave-button[_ngcontent-%COMP%]{background:var(--custom-red)}.leave-button[_ngcontent-%COMP%]:hover{background:var(--custom-red-hover)}"]})};function SV(e,t){if(e&1){let n=yw();He(0,"section",3)(1,"div",4)(2,"label",5),bn(3,"Join call"),Ve(),Dt(4,"input",6,0),Ve(),He(6,"button",7),qn("click",function(){gC(n);let i=bw(5),s=Oh();return yC(s.setCallId(i.value))}),bn(7,"Join Call"),Ve()()}}function wV(e,t){if(e&1&&(He(0,"section"),Dt(1,"app-call",8),Ve()),e&2){let n=Oh();Ot(),zn("call",n.callingService.call())}}var Ll=class e{callingService;constructor(t){this.callingService=t}setCallId(t){this.callingService.setCallId(t)}static \u0275fac=function(n){return new(n||e)(Ke(tr))};static \u0275cmp=$n({type:e,selectors:[["app-root"]],decls:4,vars:2,consts:[["callId",""],["class","join-section",4,"ngIf"],[4,"ngIf"],[1,"join-section"],[1,"join-call-form"],["for","location-search"],["id","location-search","placeholder","Enter call id"],[3,"click"],[3,"call"]],template:function(n,r){n&1&&(He(0,"main"),Os(1,SV,8,0,"section",1)(2,wV,2,1,"section",2),Dt(3,"router-outlet"),Ve()),n&2&&(Ot(),zn("ngIf",!r.callingService.callId()),Ot(),zn("ngIf",r.callingService.call()))},dependencies:[Fs,Vw,Ap,Pl],styles:[".join-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center}.join-call-form[_ngcontent-%COMP%]{padding:1.5rem;background:#fff;border-radius:.5rem;margin:0 auto}"]})};aD(Ll,JD).catch(e=>console.error(e));
